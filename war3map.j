globals
constant boolean LIBRARY_TimerPatternHashABC=true
constant integer TimerPatternHashABC_HASH_SIZE=8192
constant integer TimerPatternHashABC_HASH_INDEX_LIMIT=8190
constant integer TimerPatternHashABC_HASH_DOWN=524288
constant integer TimerPatternHashABC_HASH_UP=2134900736
constant integer TimerPatternHashABC_HASH_BIAS=4096
constant integer TimerPatternHashABC_HASH_COLLISION_LIMIT=7
timer array TimerPatternHashABC_timerKeyA
integer array TimerPatternHashABC_timerValueA
integer TimerPatternHashABC_timermaxCollisionA=0
timer array TimerPatternHashABC_timerKeyB
integer array TimerPatternHashABC_timerValueB
integer TimerPatternHashABC_timermaxCollisionB=0
timer array TimerPatternHashABC_timerKeyC
integer array TimerPatternHashABC_timerValueC
integer TimerPatternHashABC_timermaxCollisionC=0
trigger array TimerPatternHashABC_triggerKeyA
integer array TimerPatternHashABC_triggerValueA
integer TimerPatternHashABC_triggermaxCollisionA=0
trigger array TimerPatternHashABC_triggerKeyB
integer array TimerPatternHashABC_triggerValueB
integer TimerPatternHashABC_triggermaxCollisionB=0
trigger array TimerPatternHashABC_triggerKeyC
integer array TimerPatternHashABC_triggerValueC
integer TimerPatternHashABC_triggermaxCollisionC=0
dialog array TimerPatternHashABC_dialogKeyA
integer array TimerPatternHashABC_dialogValueA
integer TimerPatternHashABC_dialogmaxCollisionA=0
dialog array TimerPatternHashABC_dialogKeyB
integer array TimerPatternHashABC_dialogValueB
integer TimerPatternHashABC_dialogmaxCollisionB=0
dialog array TimerPatternHashABC_dialogKeyC
integer array TimerPatternHashABC_dialogValueC
integer TimerPatternHashABC_dialogmaxCollisionC=0
group array TimerPatternHashABC_groupKeyA
integer array TimerPatternHashABC_groupValueA
integer TimerPatternHashABC_groupmaxCollisionA=0
group array TimerPatternHashABC_groupKeyB
integer array TimerPatternHashABC_groupValueB
integer TimerPatternHashABC_groupmaxCollisionB=0
group array TimerPatternHashABC_groupKeyC
integer array TimerPatternHashABC_groupValueC
integer TimerPatternHashABC_groupmaxCollisionC=0
constant boolean LIBRARY_TimerPatternInvulnerabilityDetector=true
constant boolean LIBRARY_TimerPatternUnion=true
constant attacktype TimerPattern_at=ATTACK_TYPE_NORMAL
constant damagetype TimerPattern_dt=DAMAGE_TYPE_NORMAL
constant weapontype TimerPattern_wt=WEAPON_TYPE_METAL_HEAVY_SLICE
string TimerPattern_gsfx="Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl"
string TimerPattern_wsfx="Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl"
string TimerPattern_osfx="Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl"
string TimerPattern_dsfx="Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl"
real TimerPattern_MAX_X
real TimerPattern_MAX_Y
real TimerPattern_MIN_X
real TimerPattern_MIN_Y
constant integer TimerPattern_DummyID='npng'
constant boolean LIBRARY_YDWEBase=true
string bj_AllString=".................................!.#$%&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................"
unitpool bj_lastCreatedUnitPool=null
unit bj_lastPoolAbstractedUnit=null
itempool bj_lastCreatedItemPool=null
item bj_lastPoolAbstractedItem=null
integer MoveMoreLevel_JumpTimer=3
timer TimerSystem_Timer=null
real TimerSystem_Timeout=0.01
integer TimerSystem_Steps=0
integer TimerSystem_StepsMax=0
timer TimerSystem_BigTimer=null
real TimerSystem_BigTimeout=1
integer TimerSystem_BigSteps=0
integer TimerSystem_RunIndex=0
hashtable YDHT=null
constant boolean LIBRARY_TimerPatternDummy=true
constant boolean LIBRARY_TimerPattern=true
constant real TimerPattern_coll=120.0
constant real TimerPattern_blank=0.1
constant real TimerPattern_seg=0.05
constant real TimerPattern_grav=7.83
constant real TimerPattern_bot=3.0
constant real TimerPattern_allote=0.5
boolean TimerPattern_paused=false
integer TimerPattern_Total=0
integer TimerPattern_Temp_Struct
integer array TimerPattern_Structs
constant timer TimerPattern_t=CreateTimer()
boolean array udg_choose_ture
unit array udg_hero_choose
dialog udg_AgreeOrRejectPK=null
button udg_PKAgree=null
button udg_PKReject=null
timer udg_TimerPK=null
timerdialog udg_TimerWindowPK=null
integer udg_x=0
unit array udg_Unit_2D_h1
unit array udg_Unit_2D_h2
unit array udg_jdUnit
boolean udg_jdsy=false
boolean udg_gzkg=false
dialog udg_Kuan_duizhanxuanze=null
button array udg_AN_moshixuanze
location udg_point=null
integer array udg_Mianban_fuhuotime
multiboard udg_Mianban_I=null
integer array udg_Mianban_shadi
integer array udg_Mianban_shadi2
integer array udg_Mianban_time
boolean array udg_Harm_key
unit array udg_Unit_4D
unit array udg_Unit_ZZ
unit array udg_Unit_ZZhuodun
unit array udg_Unit_MR
location array udg_Dian_ZZ
group array udg_All_unit_tm
group udg_RS_fengdun=null
group udg_RS_shuidun=null
group udg_RS_huodun=null
group udg_RS_leidun=null
group udg_RS_tudun=null
real array udg_All_unit_shu
unit array udg_Unit_2D
location array udg_All_unit_Dian
unit array udg_Unit_ZLY
unit array udg_Unit_GS
dialog udg_Kuan_heroxuanze=null
unit array udg_Unit_1D
unit array udg_Unit_LW
unit array udg_Unit_3D
unit array udg_Unit_AS
timer array udg_Time_fuhuo
timerdialog array udg_Time_fuhchuan
unit array udg_Unit_XY
unit array udg_Unit_TT
unit array udg_Unit_SJ
unit array udg_Unit_GJ
unit array udg_Unit_SY
unit array udg_Unit_DDL
unit array udg_Unit_NC
unit array udg_Unit_L
string array udg_Photo
integer array udg_Mianban_lianxishadi
unit array udg_Unit_AK
group udg_Zhu_HMP=null
unit array udg_Unit_U
effect array udg_All_unit_tx
unit array udg_Unit_DC
boolean array udg_All_unit_bez
unit array udg_ALL_UNIT
boolean array udg_All_lixian
unit array udg_Unit_WA
group udg_Hero_tm=null
group array udg_SJXZ_tm
unit array udg_SZ
integer array udg_X_Attack
boolean array udg_Mianban_bez
unit array udg_Unit_KKS
string array udg_JSrenwu
unit array udg_Unit_JML
sound array udg_Music
location udg_ALL_PointPX=null
location udg_ALL_PointZhu=null
location array udg_location
integer array udg_leixing
integer udg_i=0
integer udg_X_kepohuaiwu=0
unit array udg_Unit_B
location array udg_AI_dian
integer udg_AI=0
boolean array udg_OB
unit array udg_Unit_XN
boolean array udg_X_zisha
group array udg_X_jingong
boolean udg_GAME_OVER=false
integer udg_X_jisha=0
rect gg_rct_East_Spawn_Viz=null
rect gg_rct_Mitte=null
rect gg_rct_Spawnpoint_sha_East=null
rect gg_rct_SpawnPoint_sha_Schloss=null
rect gg_rct_Spawnpoint_sha_West=null
rect gg_rct_SpawnPoint_muye_East=null
rect gg_rct_SpawnPoint_muye_north=null
rect gg_rct_SpawnPoint_muye_Schloss=null
rect gg_rct_Spawnpoint_wuyin_north=null
rect gg_rct_Spawnpoint_wuyin_Schloss=null
rect gg_rct_Spawnpoint_wuyin_west=null
rect gg_rct_PKRequesterStart=null
rect gg_rct_PKResopnsorStart=null
rect gg_rct_jdc=null
rect gg_rct_wup_muye=null
rect gg_rct_wup_wuyin=null
rect gg_rct_wup_sha=null
rect gg_rct_G=null
rect gg_rct_PKG=null
rect gg_rct_MT_1=null
rect gg_rct_MT_2=null
rect gg_rct_MT_3=null
rect gg_rct_yu=null
sound gg_snd_AbominationPissed1=null
sound gg_snd_AbominationPissed2=null
sound gg_snd_ThunderClapCaster=null
sound gg_snd_HeadHunterMissileLaunch=null
trigger gg_trg_Start=null
trigger gg_trg_Start35=null
trigger gg_trg_CD=null
trigger gg_trg_DZ=null
trigger gg_trg_JT=null
trigger gg_trg_JT2=null
trigger gg_trg_CS_1=null
trigger gg_trg_CS_2=null
trigger gg_trg_CS_3=null
trigger gg_trg_PK1=null
trigger gg_trg_PK2=null
trigger gg_trg_PK3=null
trigger gg_trg_PK4=null
trigger gg_trg_PK5=null
trigger gg_trg_PK6=null
trigger gg_trg_P_wupingcaozuo1=null
trigger gg_trg_P_wupingcaozuo2=null
trigger gg_trg_P_wupingcaozuo3=null
trigger gg_trg_P_leishenzhinu=null
trigger gg_trg_P_huifuyu=null
trigger gg_trg_HC1=null
trigger gg_trg_HC2=null
trigger gg_trg_HC3=null
trigger gg_trg_HC_S=null
trigger gg_trg_HC_PS=null
trigger gg_trg_RJ=null
trigger gg_trg_RJ2=null
trigger gg_trg_TS1=null
trigger gg_trg_XT_xuanye1=null
trigger gg_trg_XT_xuanye2=null
trigger gg_trg_XT_xuanye3=null
trigger gg_trg_X_MT_1=null
trigger gg_trg_X_MT_2=null
trigger gg_trg_X_MT_3=null
trigger gg_trg_X_zhiling1=null
trigger gg_trg_X_zhiling2=null
trigger gg_trg_X_zhiling3=null
trigger gg_trg_Shuaguai1=null
trigger gg_trg_Shuiguai2=null
trigger gg_trg_X_diaoluo=null
trigger gg_trg_Mianban1=null
trigger gg_trg_Mianban2=null
trigger gg_trg_Mianban3=null
trigger gg_trg_Mianban4=null
trigger gg_trg_Mianban5=null
trigger gg_trg_ShowIcon1=null
trigger gg_trg_ShowIcon2=null
trigger gg_trg_ShowIcon3=null
trigger gg_trg_X_HP=null
trigger gg_trg_X_MP=null
trigger gg_trg_X_T=null
trigger gg_trg_X_BY=null
trigger gg_trg_X_BY_muye1=null
trigger gg_trg_X_BY_muye2=null
trigger gg_trg_X_BY_wuyin1=null
trigger gg_trg_X_BY_wuyin2=null
trigger gg_trg_X_BY_sha1=null
trigger gg_trg_X_BY_sha2=null
trigger gg_trg_X_SH=null
trigger gg_trg_X_AI1=null
trigger gg_trg_X_AI2=null
trigger gg_trg_X_OB1=null
trigger gg_trg_X_ZG=null
trigger gg_trg_G0=null
trigger gg_trg_G1=null
trigger gg_trg_G2=null
trigger gg_trg_G3=null
trigger gg_trg_G4=null
trigger gg_trg_G5=null
trigger gg_trg_G6=null
trigger gg_trg_G7=null
trigger gg_trg_G8=null
trigger gg_trg_G9=null
trigger gg_trg_G9_2=null
trigger gg_trg_G9_3=null
trigger gg_trg_G9_4=null
trigger gg_trg_G9_5=null
trigger gg_trg_G10=null
trigger gg_trg_G11=null
trigger gg_trg_G12=null
trigger gg_trg_G13=null
trigger gg_trg_Spawn_muye=null
trigger gg_trg_Spawn_wuyin=null
trigger gg_trg_Spawn_sha=null
trigger gg_trg_Spawn_G1=null
trigger gg_trg_Spawn_G2=null
trigger gg_trg_Spawn_Purple_Middle_1=null
trigger gg_trg_Spawn_Purple_East_1=null
trigger gg_trg_Spawn_Purple_North_1=null
trigger gg_trg_Spawn_Pink_Middle_1=null
trigger gg_trg_Spawn_pink_west_1=null
trigger gg_trg_Spawn_pink_north_1=null
trigger gg_trg_Spawn_Brown_middle_1=null
trigger gg_trg_Spawn_brown_east_1=null
trigger gg_trg_Spawn_Brown_west_1=null
trigger gg_trg_Spawn_Purple_middle_2=null
trigger gg_trg_Spawn_purple_east_2=null
trigger gg_trg_Spawn_Purple_north_2=null
trigger gg_trg_Spawn_Pink_middle_2=null
trigger gg_trg_Spawn_pink_west_2=null
trigger gg_trg_Spawn_pink_north_2=null
trigger gg_trg_Spawn_Brown_middle_2=null
trigger gg_trg_Spawn_brown_east_2=null
trigger gg_trg_Spawn_brown_west_2=null
trigger gg_trg_Spawn_Purple_middle_3=null
trigger gg_trg_Spawn_Purple_East_3=null
trigger gg_trg_Spawn_Pink_Middle_3=null
trigger gg_trg_Spawn_Pink_West_3=null
trigger gg_trg_Spawn_Purple_North=null
trigger gg_trg_Spawn_Pink_North_3=null
trigger gg_trg_Spawn_Brown_East_3=null
trigger gg_trg_Spawn_brown_middle_3=null
trigger gg_trg_Spawn_Brown_West_3=null
trigger gg_trg_Mitte_lila=null
trigger gg_trg_Mitte_rosa=null
trigger gg_trg_Mitte_braun=null
trigger gg_trg_lila_in_rosa_lager=null
trigger gg_trg_braun_in_rosa_lager=null
trigger gg_trg_lila_in_Braun_lager=null
trigger gg_trg_rosa_in_braun_lager=null
trigger gg_trg_braun_in_lila_lager=null
trigger gg_trg_rosa_in_lila_lager=null
trigger gg_trg_Moshi0=null
trigger gg_trg_Moshi0_CS=null
trigger gg_trg_Moshi0_S1=null
trigger gg_trg_Moshi0_S2=null
trigger gg_trg_Moshi0_TS0=null
trigger gg_trg_Moshi0_TS1=null
trigger gg_trg_Moshi0_TS2=null
trigger gg_trg_Moshi0_TS3=null
trigger gg_trg_Moshi0_TS3_SS=null
trigger gg_trg_Moshi1=null
trigger gg_trg_Moshi2=null
trigger gg_trg_Moshi2_S1=null
trigger gg_trg_Moshi3=null
trigger gg_trg_Moshi4=null
trigger gg_trg_Moshi5=null
trigger gg_trg_muye_die=null
trigger gg_trg_muye_die2=null
trigger gg_trg_muye_wins=null
trigger gg_trg_wuyen_die=null
trigger gg_trg_wuyen_die2=null
trigger gg_trg_wuyen_wins=null
trigger gg_trg_sha_dies=null
trigger gg_trg_sha_dies2=null
trigger gg_trg_sha_wins=null
trigger gg_trg_Q_luoxuanwan=null
trigger gg_trg_Q_luoxuanwan2=null
trigger gg_trg_Q_luoxuanwan3=null
trigger gg_trg_Q_luoxuanwan4=null
trigger gg_trg_W_yingfenshen0=null
trigger gg_trg_W_yingfenshen=null
trigger gg_trg_W_yingfenshen2=null
trigger gg_trg_E_fenshentishen=null
trigger gg_trg_R_xianren=null
trigger gg_trg_R_xianren2=null
trigger gg_trg_R_xianren3=null
trigger gg_trg_D_luoxuanshoulijian=null
trigger gg_trg_D_luoxuanshoulijian2=null
trigger gg_trg_D_luoxuanshoulijian3=null
trigger gg_trg_D_luoxuanshoulijian4=null
trigger gg_trg_D_luoxuanshoulijianX1=null
trigger gg_trg_D_luoxuanshoulijianX2=null
trigger gg_trg_W_chunzhida=null
trigger gg_trg_E_xiaoyingneixin=null
trigger gg_trg_E_xiaoyingneixin2=null
trigger gg_trg_R_gangshan=null
trigger gg_trg_R_gangshan2=null
trigger gg_trg_D_yinghuachong=null
trigger gg_trg_D_yinghuachong2=null
trigger gg_trg_Q_yingxiaosha=null
trigger gg_trg_W_baoshiqianying=null
trigger gg_trg_W_baoshiqianying2=null
trigger gg_trg_W_baoshiqianying3=null
trigger gg_trg_R_yingfeng=null
trigger gg_trg_R_yingfeng2=null
trigger gg_trg_D_yingsha=null
trigger gg_trg_D_yingsha2=null
trigger gg_trg_D_yingsha3=null
trigger gg_trg_Q_roudanzhanche=null
trigger gg_trg_Q_roudanzhanche2=null
trigger gg_trg_Q_roudanzhanche3=null
trigger gg_trg_Q_roudanzhanche4=null
trigger gg_trg_Q_roudanzhanche5=null
trigger gg_trg_W_chaobeihua=null
trigger gg_trg_R_beihuayasi=null
trigger gg_trg_D_chaoroudan=null
trigger gg_trg_D_chaoroudan2=null
trigger gg_trg_Q_caosiqiu=null
trigger gg_trg_W_baoshanyu=null
trigger gg_trg_R_caojuchongzou=null
trigger gg_trg_R_caojuchongzou2=null
trigger gg_trg_R_caojuchongzou3=null
trigger gg_trg_D_jusanhua=null
trigger gg_trg_D_jusanhua2=null
trigger gg_trg_D_jusanhua3=null
trigger gg_trg_D_jusanhua4=null
trigger gg_trg_Q_baguakongzhang=null
trigger gg_trg_W_huitian=null
trigger gg_trg_W_huitian2=null
trigger gg_trg_E_baiyan=null
trigger gg_trg_E_baiyan2=null
trigger gg_trg_R_64zhang=null
trigger gg_trg_R_64zhang2=null
trigger gg_trg_R_64zhang3=null
trigger gg_trg_D_poshanji=null
trigger gg_trg_D_poshanji2=null
trigger gg_trg_Q_muyexuanguang=null
trigger gg_trg_Q_muyexuanguang2=null
trigger gg_trg_W_biaolianhua=null
trigger gg_trg_W_biaolianhua2=null
trigger gg_trg_R_bamen=null
trigger gg_trg_R_bamen2=null
trigger gg_trg_D_lilianhua=null
trigger gg_trg_Q_ganglixuanfeng=null
trigger gg_trg_Q_ganglixuanfeng2=null
trigger gg_trg_W_yefenghuang=null
trigger gg_trg_W_yefenghuang2=null
trigger gg_trg_R_bamenK=null
trigger gg_trg_R_bamenK2=null
trigger gg_trg_D_chaokongque=null
trigger gg_trg_D_chaokongque2=null
trigger gg_trg_D_chaokongque3=null
trigger gg_trg_Q_leiqie=null
trigger gg_trg_Q_leiqie2=null
trigger gg_trg_Q_leiqieS=null
trigger gg_trg_Q_leiqieS2=null
trigger gg_trg_Q_shenwei=null
trigger gg_trg_Q_shenwei2=null
trigger gg_trg_W_suileiya=null
trigger gg_trg_W_suileiya2=null
trigger gg_trg_R_whtxielunyan=null
trigger gg_trg_R_whtxielunyan2=null
trigger gg_trg_R_kongjianxishou=null
trigger gg_trg_R_kongjianxishou2=null
trigger gg_trg_D_leiqieshantu=null
trigger gg_trg_D_leiqieshantu2=null
trigger gg_trg_D_leiqieshantu3=null
trigger gg_trg_E_chana=null
trigger gg_trg_E_chana2=null
trigger gg_trg_Q_xuanfengquan=null
trigger gg_trg_Q_xuanfengquan2=null
trigger gg_trg_Q_xuanfengquan3=null
trigger gg_trg_W_langyazhuizhui=null
trigger gg_trg_W_langyazhuizhui2=null
trigger gg_trg_E_fengbaosui=null
trigger gg_trg_E_fengbaosui2=null
trigger gg_trg_R_dahuoji=null
trigger gg_trg_R_dahuoji2=null
trigger gg_trg_D_feiyan=null
trigger gg_trg_D_feiyan2=null
trigger gg_trg_D_feiyan3=null
trigger gg_trg_Q_huolongyandan=null
trigger gg_trg_Q_huolongyandan2=null
trigger gg_trg_Q_huolongyandan3=null
trigger gg_trg_W_haoluoxuanwan=null
trigger gg_trg_W_haoluoxuanwan2=null
trigger gg_trg_R_wentai=null
trigger gg_trg_R_wentai2=null
trigger gg_trg_D_shuangxun=null
trigger gg_trg_D_shuangxun2=null
trigger gg_trg_D_shuangxun3=null
trigger gg_trg_Q_luosenwanxiang=null
trigger gg_trg_W_jingangzhaomu=null
trigger gg_trg_E_gangli=null
trigger gg_trg_R_jingangli=null
trigger gg_trg_R_jingangli2=null
trigger gg_trg_D_shujie=null
trigger gg_trg_Q_heianxing=null
trigger gg_trg_W_shuizhenbi=null
trigger gg_trg_W_shuizhenbi2=null
trigger gg_trg_E_shuisheji=null
trigger gg_trg_E_shuisheji2=null
trigger gg_trg_D_yingwoshuiren=null
trigger gg_trg_D_yingwoshuiren2=null
trigger gg_trg_Q_huolongyandanS=null
trigger gg_trg_Q_huolongyandanS2=null
trigger gg_trg_W_tulongjue=null
trigger gg_trg_W_tulongjue2=null
trigger gg_trg_E_yuanwang=null
trigger gg_trg_E_yuanwang2=null
trigger gg_trg_R_shiguifengjin=null
trigger gg_trg_D_renshuaoyi=null
trigger gg_trg_Q_jiguangdan=null
trigger gg_trg_W_luoxuanwan=null
trigger gg_trg_W_luoxuanwan2=null
trigger gg_trg_W_luoxuanwan3=null
trigger gg_trg_W_luoxuanwan4=null
trigger gg_trg_E_shanguangzhitai=null
trigger gg_trg_R_shunguang=null
trigger gg_trg_D_feileishen=null
trigger gg_trg_D_feileishen2=null
trigger gg_trg_D_feileishen3=null
trigger gg_trg_Z_huiguangren=null
trigger gg_trg_Q_yiliaorenshu=null
trigger gg_trg_W_bengji=null
trigger gg_trg_W_bengji2=null
trigger gg_trg_W_bengji3=null
trigger gg_trg_E_guaili=null
trigger gg_trg_E_guaili2=null
trigger gg_trg_R_tongtianjiao=null
trigger gg_trg_R_tongtianjiao2=null
trigger gg_trg_D_yinfengyin=null
trigger gg_trg_Q_xuanf=null
trigger gg_trg_Q_xuanf2=null
trigger gg_trg_Q_xuanf3=null
trigger gg_trg_W_leiliredao=null
trigger gg_trg_W_leiliredao2=null
trigger gg_trg_W_leiliredao3=null
trigger gg_trg_R_weishouhua=null
trigger gg_trg_D_xugoupao=null
trigger gg_trg_D_xugoupao2=null
trigger gg_trg_D_xugoupao3=null
trigger gg_trg_D_xugoupao4=null
trigger gg_trg_Q_zhanzhanwu=null
trigger gg_trg_Q_zhanzhanwu2=null
trigger gg_trg_W_lianyouzhishu=null
trigger gg_trg_W_lianyouzhishu2=null
trigger gg_trg_E_jufengzhen=null
trigger gg_trg_R_haofengbaobi=null
trigger gg_trg_R_haofengbaobi2=null
trigger gg_trg_D_shanwu=null
trigger gg_trg_D_shanwu2=null
trigger gg_trg_Q_shashiyu=null
trigger gg_trg_Q_shashiyu2=null
trigger gg_trg_W_shabaosongzang=null
trigger gg_trg_E_shazhikaijia=null
trigger gg_trg_E_shazhikaijia2=null
trigger gg_trg_E_shazhikaijia3=null
trigger gg_trg_E_shazhikaijia4=null
trigger gg_trg_R_shouhe=null
trigger gg_trg_R_shouhe2=null
trigger gg_trg_R_shouhe3=null
trigger gg_trg_R_shouhe4=null
trigger gg_trg_D_miesha=null
trigger gg_trg_D_miesha2=null
trigger gg_trg_D_miesha3=null
trigger gg_trg_Q_tiexianhuazhiwu=null
trigger gg_trg_Q_tiexianhuazhiwu2=null
trigger gg_trg_Q_tiexianhuazhiwu3=null
trigger gg_trg_W_chunzhiwu=null
trigger gg_trg_W_chunzhiwu2=null
trigger gg_trg_E_tangsongzhiwu=null
trigger gg_trg_E_tangsongzhiwu2=null
trigger gg_trg_E_tangsongzhiwu3=null
trigger gg_trg_R_dizhizhuangtai=null
trigger gg_trg_R_dizhizhuangtai2=null
trigger gg_trg_R_dizhizhuangtai3=null
trigger gg_trg_R_dizhizhuangtai4=null
trigger gg_trg_D_zaojuezhiwu0=null
trigger gg_trg_D_zaojuezhiwu=null
trigger gg_trg_D_zaojuezhiwu2=null
trigger gg_trg_Q_shizhi=null
trigger gg_trg_Q_shizhi2=null
trigger gg_trg_Q_shizhi3=null
trigger gg_trg_W_shizhibaopo=null
trigger gg_trg_W_shizhibaopo2=null
trigger gg_trg_W_shizhibaopo3=null
trigger gg_trg_R_tianzhi=null
trigger gg_trg_R_tianzhi2=null
trigger gg_trg_D_shizhijin=null
trigger gg_trg_D_shizhijin2=null
trigger gg_trg_D_shizhijin3=null
trigger gg_trg_Q_haolonghuo=null
trigger gg_trg_Q_haolonghuo2=null
trigger gg_trg_W_qianniao=null
trigger gg_trg_W_qianniao2=null
trigger gg_trg_W_qianniao3=null
trigger gg_trg_E_xielunyan=null
trigger gg_trg_E_xielunyan2=null
trigger gg_trg_R_qianniaocaoju=null
trigger gg_trg_R_qianniaocaoju2=null
trigger gg_trg_R_qianniaocaoju3=null
trigger gg_trg_D_qilin=null
trigger gg_trg_D_qilin2=null
trigger gg_trg_Q_haoyanqiu=null
trigger gg_trg_Q_haoyanqiu2=null
trigger gg_trg_W_yasan=null
trigger gg_trg_W_yasan2=null
trigger gg_trg_W_yasan3=null
trigger gg_trg_E_whtxielunyan=null
trigger gg_trg_E_whtxielunyan2=null
trigger gg_trg_E_whtxielunyan3=null
trigger gg_trg_D_tianzhao=null
trigger gg_trg_D_tianzhao2=null
trigger gg_trg_D_tianzhao3=null
trigger gg_trg_Q_shuisandan=null
trigger gg_trg_W_guixiao=null
trigger gg_trg_W_guixiao2=null
trigger gg_trg_W_guixiao3=null
trigger gg_trg_E_jiaoshi=null
trigger gg_trg_R_wuxianjiao=null
trigger gg_trg_R_wuxianjiao2=null
trigger gg_trg_D_baoshui=null
trigger gg_trg_D_baoshui2=null
trigger gg_trg_D_baoshui3=null
trigger gg_trg_D_baoshui4=null
trigger gg_trg_Q_shuihua=null
trigger gg_trg_W_shuilongdan=null
trigger gg_trg_W_shuilongdan2=null
trigger gg_trg_E_yinliao0=null
trigger gg_trg_E_yinliao=null
trigger gg_trg_E_yinliao2=null
trigger gg_trg_E_yinliao3=null
trigger gg_trg_R_shuiyadan=null
trigger gg_trg_D_cangliu=null
trigger gg_trg_D_cangliu2=null
trigger gg_trg_Q_zhizhu=null
trigger gg_trg_Q_zhizhu2=null
trigger gg_trg_W_pohuaizhimei=null
trigger gg_trg_W_pohuaizhimei2=null
trigger gg_trg_E_niantuzhizao=null
trigger gg_trg_R_yujialuo=null
trigger gg_trg_R_yujialuo2=null
trigger gg_trg_R_yujialuo3=null
trigger gg_trg_D_yishu=null
trigger gg_trg_D_yishu2=null
trigger gg_trg_S_xielunyan=null
trigger gg_trg_S_death=null
unit gg_unit_hcas_0001=null
unit gg_unit_nC25_0051=null
unit gg_unit_n006_0202=null
unit gg_unit_nC02_0006=null
unit gg_unit_nC03_0008=null
unit gg_unit_nC00_0010=null
unit gg_unit_hkee_0012=null
unit gg_unit_hkee_0013=null
unit gg_unit_nC24_0257=null
unit gg_unit_hcas_0018=null
unit gg_unit_nC02_0023=null
unit gg_unit_nC03_0026=null
unit gg_unit_nC00_0027=null
unit gg_unit_hkee_0029=null
unit gg_unit_hkee_0030=null
unit gg_unit_Nplh_0181=null
unit gg_unit_Hjai_0093=null
unit gg_unit_hkee_0040=null
unit gg_unit_nC24_0258=null
unit gg_unit_nC03_0042=null
unit gg_unit_nC02_0043=null
unit gg_unit_n003_0186=null
unit gg_unit_hkee_0037=null
unit gg_unit_Hpal_0108=null
unit gg_unit_nC00_0050=null
unit gg_unit_hcas_0044=null
unit gg_unit_nC24_0256=null
unit gg_unit_Ulic_0106=null
unit gg_unit_Hhkl_0189=null
unit gg_unit_nC25_0011=null
unit gg_unit_Ewar_0045=null
unit gg_unit_n006_0201=null
unit gg_unit_n000_0152=null
unit gg_unit_Huth_0091=null
unit gg_unit_Emoo_0102=null
unit gg_unit_Ekee_0096=null
unit gg_unit_n005_0174=null
unit gg_unit_n003_0173=null
unit gg_unit_n002_0171=null
unit gg_unit_n005_0135=null
unit gg_unit_Hamg_0101=null
unit gg_unit_n006_0203=null
unit gg_unit_Hpb2_0204=null
unit gg_unit_e00F_0233=null
unit gg_unit_Nngs_0105=null
unit gg_unit_Hblm_0095=null
unit gg_unit_Ocbh_0206=null
unit gg_unit_n003_0111=null
unit gg_unit_n002_0107=null
unit gg_unit_Udea_0097=null
unit gg_unit_n000_0161=null
unit gg_unit_n002_0185=null
unit gg_unit_Udre_0098=null
unit gg_unit_nC25_0025=null
unit gg_unit_n005_0142=null
unit gg_unit_n000_0164=null
unit gg_unit_Hmkg_0193=null
unit gg_unit_Nalc_0046=null
unit gg_unit_Obla_0047=null
trigger l__library_init
constant integer si__TimerPatternDummy_MonomerVeil=1
integer si__TimerPatternDummy_MonomerVeil_F=0
integer si__TimerPatternDummy_MonomerVeil_I=0
integer array si__TimerPatternDummy_MonomerVeil_V
unit array s__TimerPatternDummy_MonomerVeil_Clerk
constant integer si__TimerPattern_operate=2
integer si__TimerPattern_operate_F=0
integer si__TimerPattern_operate_I=0
integer array si__TimerPattern_operate_V
unit array s__TimerPattern_operate_u
real array s__TimerPattern_operate_sheight
real array s__TimerPattern_operate_xvel
real array s__TimerPattern_operate_yvel
real array s__TimerPattern_operate_xvelred
real array s__TimerPattern_operate_yvelred
real array s__TimerPattern_operate_zred
real array s__TimerPattern_operate_gap
real array s__TimerPattern_operate_data
real array s__TimerPattern_operate_z
real array s__TimerPattern_operate_step
real array s__TimerPattern_operate_height
real array s__TimerPattern_operate_apex
boolean array s__TimerPattern_operate_killtrees
boolean array s__TimerPattern_operate_recyclable
boolean array s__TimerPattern_operate_hostility
boolean array s__TimerPattern_operate_volume
boolean array s__TimerPattern_operate_perish
boolean array s__TimerPattern_operate_parabola
boolean array s__TimerPattern_operate_aviate
boolean array s__TimerPattern_operate_follow
string array s__TimerPattern_operate_order
group array s__TimerPattern_operate_g
integer array s__TimerPattern_operate_i
integer array s__TimerPattern_operate_sfx
integer array s__TimerPattern_operate_dep
integer array s__TimerPattern_operate_lord
trigger st__TimerPatternDummy_MonomerVeil_onDestroy
trigger st__TimerPattern_operate_onDestroy
integer f__arg_this
endglobals
function sc__TimerPatternDummy_MonomerVeil_onDestroy takes integer this returns nothing
set f__arg_this=this
call TriggerEvaluate(st__TimerPatternDummy_MonomerVeil_onDestroy)
endfunction
function s__TimerPatternDummy_MonomerVeil__allocate takes nothing returns integer
local integer this=si__TimerPatternDummy_MonomerVeil_F
if(this!=0)then
set si__TimerPatternDummy_MonomerVeil_F=si__TimerPatternDummy_MonomerVeil_V[this]
else
set si__TimerPatternDummy_MonomerVeil_I=si__TimerPatternDummy_MonomerVeil_I+1
set this=si__TimerPatternDummy_MonomerVeil_I
endif
if(this>8190)then
return 0
endif
set si__TimerPatternDummy_MonomerVeil_V[this]=-1
return this
endfunction
function sc__TimerPatternDummy_MonomerVeil_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TimerPatternDummy_MonomerVeil_V[this]!=-1)then
return
endif
set f__arg_this=this
call TriggerEvaluate(st__TimerPatternDummy_MonomerVeil_onDestroy)
set si__TimerPatternDummy_MonomerVeil_V[this]=si__TimerPatternDummy_MonomerVeil_F
set si__TimerPatternDummy_MonomerVeil_F=this
endfunction
function sc__TimerPattern_operate_onDestroy takes integer this returns nothing
call DestroyGroup(s__TimerPattern_operate_g[this])
set s__TimerPattern_operate_u[this]=null
set s__TimerPattern_operate_g[this]=null
endfunction
function s__TimerPattern_operate__allocate takes nothing returns integer
local integer this=si__TimerPattern_operate_F
if(this!=0)then
set si__TimerPattern_operate_F=si__TimerPattern_operate_V[this]
else
set si__TimerPattern_operate_I=si__TimerPattern_operate_I+1
set this=si__TimerPattern_operate_I
endif
if(this>8190)then
return 0
endif
set si__TimerPattern_operate_V[this]=-1
return this
endfunction
function sc__TimerPattern_operate_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TimerPattern_operate_V[this]!=-1)then
return
endif
set f__arg_this=this
call TriggerEvaluate(st__TimerPattern_operate_onDestroy)
set si__TimerPattern_operate_V[this]=si__TimerPattern_operate_F
set si__TimerPattern_operate_F=this
endfunction
function YDWETimerPatternHashABCGetTimerCollisionA takes nothing returns integer
return TimerPatternHashABC_timermaxCollisionA
endfunction
function YDWETimerPatternHashABCInitTimerHashA takes nothing returns nothing
set TimerPatternHashABC_timerKeyA[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_timerValueA[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetTimerStructA takes timer t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_timerKeyA[i]==null then
set TimerPatternHashABC_timerValueA[i]=s
set TimerPatternHashABC_timerKeyA[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyA[i]==null
endloop
set TimerPatternHashABC_timerValueA[i]=s
set TimerPatternHashABC_timerKeyA[i]=t
return
endfunction
function YDWETimerPatternHashABCGetTimerStructA takes timer t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_timerKeyA[i]==t then
return TimerPatternHashABC_timerValueA[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyA[i]==t
endloop
return TimerPatternHashABC_timerValueA[i]
endfunction
function YDWETimerPatternHashABCClearTimerStructA takes timer t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_timerKeyA[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_timerValueA[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyA[i]==null
endloop
set TimerPatternHashABC_timerKeyA[ik]=TimerPatternHashABC_timerKeyA[i-1]
set TimerPatternHashABC_timerValueA[ik]=TimerPatternHashABC_timerValueA[i-1]
set TimerPatternHashABC_timerKeyA[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetTimerCollisionB takes nothing returns integer
return TimerPatternHashABC_timermaxCollisionB
endfunction
function YDWETimerPatternHashABCInitTimerHashB takes nothing returns nothing
set TimerPatternHashABC_timerKeyB[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_timerValueB[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetTimerStructB takes timer t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_timerKeyB[i]==null then
set TimerPatternHashABC_timerValueB[i]=s
set TimerPatternHashABC_timerKeyB[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyB[i]==null
endloop
set TimerPatternHashABC_timerValueB[i]=s
set TimerPatternHashABC_timerKeyB[i]=t
return
endfunction
function YDWETimerPatternHashABCGetTimerStructB takes timer t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_timerKeyB[i]==t then
return TimerPatternHashABC_timerValueB[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyB[i]==t
endloop
return TimerPatternHashABC_timerValueB[i]
endfunction
function YDWETimerPatternHashABCClearTimerStructB takes timer t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_timerKeyB[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_timerValueB[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyB[i]==null
endloop
set TimerPatternHashABC_timerKeyB[ik]=TimerPatternHashABC_timerKeyB[i-1]
set TimerPatternHashABC_timerValueB[ik]=TimerPatternHashABC_timerValueB[i-1]
set TimerPatternHashABC_timerKeyB[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetTimerCollisionC takes nothing returns integer
return TimerPatternHashABC_timermaxCollisionC
endfunction
function YDWETimerPatternHashABCInitTimerHashC takes nothing returns nothing
set TimerPatternHashABC_timerKeyC[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_timerValueC[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetTimerStructC takes timer t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_timerKeyC[i]==null then
set TimerPatternHashABC_timerValueC[i]=s
set TimerPatternHashABC_timerKeyC[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyC[i]==null
endloop
set TimerPatternHashABC_timerValueC[i]=s
set TimerPatternHashABC_timerKeyC[i]=t
return
endfunction
function YDWETimerPatternHashABCGetTimerStructC takes timer t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_timerKeyC[i]==t then
return TimerPatternHashABC_timerValueC[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyC[i]==t
endloop
return TimerPatternHashABC_timerValueC[i]
endfunction
function YDWETimerPatternHashABCClearTimerStructC takes timer t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_timerKeyC[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_timerValueC[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_timerKeyC[i]==null
endloop
set TimerPatternHashABC_timerKeyC[ik]=TimerPatternHashABC_timerKeyC[i-1]
set TimerPatternHashABC_timerValueC[ik]=TimerPatternHashABC_timerValueC[i-1]
set TimerPatternHashABC_timerKeyC[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetTriggerCollisionA takes nothing returns integer
return TimerPatternHashABC_triggermaxCollisionA
endfunction
function YDWETimerPatternHashABCInitTriggerHashA takes nothing returns nothing
set TimerPatternHashABC_triggerKeyA[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_triggerValueA[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetTriggerStructA takes trigger t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_triggerKeyA[i]==null then
set TimerPatternHashABC_triggerValueA[i]=s
set TimerPatternHashABC_triggerKeyA[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyA[i]==null
endloop
set TimerPatternHashABC_triggerValueA[i]=s
set TimerPatternHashABC_triggerKeyA[i]=t
return
endfunction
function YDWETimerPatternHashABCGetTriggerStructA takes trigger t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_triggerKeyA[i]==t then
return TimerPatternHashABC_triggerValueA[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyA[i]==t
endloop
return TimerPatternHashABC_triggerValueA[i]
endfunction
function YDWETimerPatternHashABCClearTriggerStructA takes trigger t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_triggerKeyA[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_triggerValueA[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyA[i]==null
endloop
set TimerPatternHashABC_triggerKeyA[ik]=TimerPatternHashABC_triggerKeyA[i-1]
set TimerPatternHashABC_triggerValueA[ik]=TimerPatternHashABC_triggerValueA[i-1]
set TimerPatternHashABC_triggerKeyA[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetTriggerCollisionB takes nothing returns integer
return TimerPatternHashABC_triggermaxCollisionB
endfunction
function YDWETimerPatternHashABCInitTriggerHashB takes nothing returns nothing
set TimerPatternHashABC_triggerKeyB[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_triggerValueB[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetTriggerStructB takes trigger t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_triggerKeyB[i]==null then
set TimerPatternHashABC_triggerValueB[i]=s
set TimerPatternHashABC_triggerKeyB[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyB[i]==null
endloop
set TimerPatternHashABC_triggerValueB[i]=s
set TimerPatternHashABC_triggerKeyB[i]=t
return
endfunction
function YDWETimerPatternHashABCGetTriggerStructB takes trigger t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_triggerKeyB[i]==t then
return TimerPatternHashABC_triggerValueB[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyB[i]==t
endloop
return TimerPatternHashABC_triggerValueB[i]
endfunction
function YDWETimerPatternHashABCClearTriggerStructB takes trigger t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_triggerKeyB[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_triggerValueB[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyB[i]==null
endloop
set TimerPatternHashABC_triggerKeyB[ik]=TimerPatternHashABC_triggerKeyB[i-1]
set TimerPatternHashABC_triggerValueB[ik]=TimerPatternHashABC_triggerValueB[i-1]
set TimerPatternHashABC_triggerKeyB[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetTriggerCollisionC takes nothing returns integer
return TimerPatternHashABC_triggermaxCollisionC
endfunction
function YDWETimerPatternHashABCInitTriggerHashC takes nothing returns nothing
set TimerPatternHashABC_triggerKeyC[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_triggerValueC[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetTriggerStructC takes trigger t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_triggerKeyC[i]==null then
set TimerPatternHashABC_triggerValueC[i]=s
set TimerPatternHashABC_triggerKeyC[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyC[i]==null
endloop
set TimerPatternHashABC_triggerValueC[i]=s
set TimerPatternHashABC_triggerKeyC[i]=t
return
endfunction
function YDWETimerPatternHashABCGetTriggerStructC takes trigger t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_triggerKeyC[i]==t then
return TimerPatternHashABC_triggerValueC[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyC[i]==t
endloop
return TimerPatternHashABC_triggerValueC[i]
endfunction
function YDWETimerPatternHashABCClearTriggerStructC takes trigger t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_triggerKeyC[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_triggerValueC[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_triggerKeyC[i]==null
endloop
set TimerPatternHashABC_triggerKeyC[ik]=TimerPatternHashABC_triggerKeyC[i-1]
set TimerPatternHashABC_triggerValueC[ik]=TimerPatternHashABC_triggerValueC[i-1]
set TimerPatternHashABC_triggerKeyC[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetDialogCollisionA takes nothing returns integer
return TimerPatternHashABC_dialogmaxCollisionA
endfunction
function YDWETimerPatternHashABCInitDialogHashA takes nothing returns nothing
set TimerPatternHashABC_dialogKeyA[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_dialogValueA[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetDialogStructA takes dialog t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_dialogKeyA[i]==null then
set TimerPatternHashABC_dialogValueA[i]=s
set TimerPatternHashABC_dialogKeyA[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyA[i]==null
endloop
set TimerPatternHashABC_dialogValueA[i]=s
set TimerPatternHashABC_dialogKeyA[i]=t
return
endfunction
function YDWETimerPatternHashABCGetDialogStructA takes dialog t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_dialogKeyA[i]==t then
return TimerPatternHashABC_dialogValueA[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyA[i]==t
endloop
return TimerPatternHashABC_dialogValueA[i]
endfunction
function YDWETimerPatternHashABCClearDialogStructA takes dialog t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_dialogKeyA[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_dialogValueA[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyA[i]==null
endloop
set TimerPatternHashABC_dialogKeyA[ik]=TimerPatternHashABC_dialogKeyA[i-1]
set TimerPatternHashABC_dialogValueA[ik]=TimerPatternHashABC_dialogValueA[i-1]
set TimerPatternHashABC_dialogKeyA[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetDialogCollisionB takes nothing returns integer
return TimerPatternHashABC_dialogmaxCollisionB
endfunction
function YDWETimerPatternHashABCInitDialogHashB takes nothing returns nothing
set TimerPatternHashABC_dialogKeyB[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_dialogValueB[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetDialogStructB takes dialog t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_dialogKeyB[i]==null then
set TimerPatternHashABC_dialogValueB[i]=s
set TimerPatternHashABC_dialogKeyB[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyB[i]==null
endloop
set TimerPatternHashABC_dialogValueB[i]=s
set TimerPatternHashABC_dialogKeyB[i]=t
return
endfunction
function YDWETimerPatternHashABCGetDialogStructB takes dialog t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_dialogKeyB[i]==t then
return TimerPatternHashABC_dialogValueB[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyB[i]==t
endloop
return TimerPatternHashABC_dialogValueB[i]
endfunction
function YDWETimerPatternHashABCClearDialogStructB takes dialog t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_dialogKeyB[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_dialogValueB[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyB[i]==null
endloop
set TimerPatternHashABC_dialogKeyB[ik]=TimerPatternHashABC_dialogKeyB[i-1]
set TimerPatternHashABC_dialogValueB[ik]=TimerPatternHashABC_dialogValueB[i-1]
set TimerPatternHashABC_dialogKeyB[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetDialogCollisionC takes nothing returns integer
return TimerPatternHashABC_dialogmaxCollisionC
endfunction
function YDWETimerPatternHashABCInitDialogHashC takes nothing returns nothing
set TimerPatternHashABC_dialogKeyC[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_dialogValueC[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetDialogStructC takes dialog t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_dialogKeyC[i]==null then
set TimerPatternHashABC_dialogValueC[i]=s
set TimerPatternHashABC_dialogKeyC[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyC[i]==null
endloop
set TimerPatternHashABC_dialogValueC[i]=s
set TimerPatternHashABC_dialogKeyC[i]=t
return
endfunction
function YDWETimerPatternHashABCGetDialogStructC takes dialog t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_dialogKeyC[i]==t then
return TimerPatternHashABC_dialogValueC[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyC[i]==t
endloop
return TimerPatternHashABC_dialogValueC[i]
endfunction
function YDWETimerPatternHashABCClearDialogStructC takes dialog t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_dialogKeyC[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_dialogValueC[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_dialogKeyC[i]==null
endloop
set TimerPatternHashABC_dialogKeyC[ik]=TimerPatternHashABC_dialogKeyC[i-1]
set TimerPatternHashABC_dialogValueC[ik]=TimerPatternHashABC_dialogValueC[i-1]
set TimerPatternHashABC_dialogKeyC[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetGroupCollisionA takes nothing returns integer
return TimerPatternHashABC_groupmaxCollisionA
endfunction
function YDWETimerPatternHashABCInitGroupHashA takes nothing returns nothing
set TimerPatternHashABC_groupKeyA[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_groupValueA[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetGroupStructA takes group t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_groupKeyA[i]==null then
set TimerPatternHashABC_groupValueA[i]=s
set TimerPatternHashABC_groupKeyA[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyA[i]==null
endloop
set TimerPatternHashABC_groupValueA[i]=s
set TimerPatternHashABC_groupKeyA[i]=t
return
endfunction
function YDWETimerPatternHashABCGetGroupStructA takes group t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_groupKeyA[i]==t then
return TimerPatternHashABC_groupValueA[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyA[i]==t
endloop
return TimerPatternHashABC_groupValueA[i]
endfunction
function YDWETimerPatternHashABCClearGroupStructA takes group t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_groupKeyA[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_groupValueA[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyA[i]==null
endloop
set TimerPatternHashABC_groupKeyA[ik]=TimerPatternHashABC_groupKeyA[i-1]
set TimerPatternHashABC_groupValueA[ik]=TimerPatternHashABC_groupValueA[i-1]
set TimerPatternHashABC_groupKeyA[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetGroupCollisionB takes nothing returns integer
return TimerPatternHashABC_groupmaxCollisionB
endfunction
function YDWETimerPatternHashABCInitGroupHashB takes nothing returns nothing
set TimerPatternHashABC_groupKeyB[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_groupValueB[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetGroupStructB takes group t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_groupKeyB[i]==null then
set TimerPatternHashABC_groupValueB[i]=s
set TimerPatternHashABC_groupKeyB[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyB[i]==null
endloop
set TimerPatternHashABC_groupValueB[i]=s
set TimerPatternHashABC_groupKeyB[i]=t
return
endfunction
function YDWETimerPatternHashABCGetGroupStructB takes group t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_groupKeyB[i]==t then
return TimerPatternHashABC_groupValueB[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyB[i]==t
endloop
return TimerPatternHashABC_groupValueB[i]
endfunction
function YDWETimerPatternHashABCClearGroupStructB takes group t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_groupKeyB[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_groupValueB[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyB[i]==null
endloop
set TimerPatternHashABC_groupKeyB[ik]=TimerPatternHashABC_groupKeyB[i-1]
set TimerPatternHashABC_groupValueB[ik]=TimerPatternHashABC_groupValueB[i-1]
set TimerPatternHashABC_groupKeyB[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCGetGroupCollisionC takes nothing returns integer
return TimerPatternHashABC_groupmaxCollisionC
endfunction
function YDWETimerPatternHashABCInitGroupHashC takes nothing returns nothing
set TimerPatternHashABC_groupKeyC[TimerPatternHashABC_HASH_INDEX_LIMIT]=null
set TimerPatternHashABC_groupValueC[TimerPatternHashABC_HASH_INDEX_LIMIT]=0
endfunction
function YDWETimerPatternHashABCSetGroupStructC takes group t,integer s returns nothing
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_groupKeyC[i]==null then
set TimerPatternHashABC_groupValueC[i]=s
set TimerPatternHashABC_groupKeyC[i]=t
return
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyC[i]==null
endloop
set TimerPatternHashABC_groupValueC[i]=s
set TimerPatternHashABC_groupKeyC[i]=t
return
endfunction
function YDWETimerPatternHashABCGetGroupStructC takes group t returns integer
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
if TimerPatternHashABC_groupKeyC[i]==t then
return TimerPatternHashABC_groupValueC[i]
endif
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyC[i]==t
endloop
return TimerPatternHashABC_groupValueC[i]
endfunction
function YDWETimerPatternHashABCClearGroupStructC takes group t returns integer
local integer ik
local integer ret
local integer i=(GetHandleId(t)*TimerPatternHashABC_HASH_UP)/TimerPatternHashABC_HASH_DOWN+TimerPatternHashABC_HASH_BIAS
loop
exitwhen TimerPatternHashABC_groupKeyC[i]==t
set i=i+1
endloop
set ik=i
set ret=TimerPatternHashABC_groupValueC[ik]
loop
set i=i+1
exitwhen TimerPatternHashABC_groupKeyC[i]==null
endloop
set TimerPatternHashABC_groupKeyC[ik]=TimerPatternHashABC_groupKeyC[i-1]
set TimerPatternHashABC_groupValueC[ik]=TimerPatternHashABC_groupValueC[i-1]
set TimerPatternHashABC_groupKeyC[i-1]=null
return ret
endfunction
function YDWETimerPatternHashABCInit takes nothing returns nothing
call YDWETimerPatternHashABCInitTimerHashA()
call YDWETimerPatternHashABCInitTimerHashB()
call YDWETimerPatternHashABCInitTimerHashC()
call YDWETimerPatternHashABCInitTriggerHashA()
call YDWETimerPatternHashABCInitTriggerHashB()
call YDWETimerPatternHashABCInitTriggerHashC()
call YDWETimerPatternHashABCInitDialogHashA()
call YDWETimerPatternHashABCInitDialogHashB()
call YDWETimerPatternHashABCInitDialogHashC()
call YDWETimerPatternHashABCInitGroupHashA()
call YDWETimerPatternHashABCInitGroupHashB()
call YDWETimerPatternHashABCInitGroupHashC()
endfunction
function YDWETimerPatternInvulnerabilityDetectorIsUnitInvulnerable takes unit whichUnit returns boolean
local boolean result=false
return result
endfunction
function YDWETimerPatternInvulnerabilityDetectorInit takes nothing returns nothing
endfunction
function YDWETimerPatterncheckX takes real X returns real
local real r=GetRectMinX(bj_mapInitialPlayableArea)+50
if X<r then
return r
endif
set r=GetRectMaxX(bj_mapInitialPlayableArea)-50
if X>r then
return r
endif
return X
endfunction
function YDWETimerPatternGetSpellTargetX takes nothing returns real
local location l=GetSpellTargetLoc()
local real X=GetLocationX(l)
call RemoveLocation(l)
set l=null
return X
endfunction
function YDWETimerPatterncheckY takes real Y returns real
local real r=GetRectMinY(bj_mapInitialPlayableArea)+50
if Y<r then
return r
endif
set r=GetRectMaxY(bj_mapInitialPlayableArea)-50
if Y>r then
return r
endif
return Y
endfunction
function YDWETimerPatternGetSpellTargetY takes nothing returns real
local location l=GetSpellTargetLoc()
local real Y=GetLocationY(l)
call RemoveLocation(l)
set l=null
return Y
endfunction
function YDWEInitHashtable takes nothing returns hashtable
return InitHashtable()
endfunction
function YDWEH2I takes handle h returns integer
return GetHandleId(h)
endfunction
function YDWEGetHashTable takes nothing returns hashtable
return YDHT
endfunction
function YDWEGetUnitID takes unit u returns integer
return(GetHandleId((u)))
endfunction
function YDWEGetItemID takes item it returns integer
return(GetHandleId((it)))
endfunction
function YDWEGetPlayerID takes player p returns integer
return(GetHandleId((p)))
endfunction
function YDWEGetTimerID takes timer t returns integer
return(GetHandleId((t)))
endfunction
function YDWEGetTriggerID takes trigger trg returns integer
return(GetHandleId((trg)))
endfunction
function YDWEGetGroupID takes group g returns integer
return(GetHandleId((g)))
endfunction
function YDWEGetLocationID takes location point returns integer
return(GetHandleId((point)))
endfunction
function YDWEGetUnitTypeID takes integer uid returns integer
return uid
endfunction
function YDWEGetAbilityTypeID takes integer ab returns integer
return ab
endfunction
function YDWEGetItemTypeID takes integer itid returns integer
return itid
endfunction
function YDWEGetMultiboardID takes multiboard m returns integer
return(GetHandleId((m)))
endfunction
function YDWEGetMultiboardItemID takes multiboarditem mt returns integer
return(GetHandleId((mt)))
endfunction
function YDWEGetTextTagID takes texttag tt returns integer
return(GetHandleId((tt)))
endfunction
function YDWEGetLightningID takes lightning ln returns integer
return(GetHandleId((ln)))
endfunction
function YDWEGetRegionID takes region rn returns integer
return(GetHandleId((rn)))
endfunction
function YDWEGetRectID takes rect rt returns integer
return(GetHandleId((rt)))
endfunction
function YDWEGetLeaderboardID takes leaderboard lb returns integer
return(GetHandleId((lb)))
endfunction
function YDWEGetEffectID takes effect e returns integer
return(GetHandleId((e)))
endfunction
function YDWEGetDestructableID takes destructable da returns integer
return(GetHandleId((da)))
endfunction
function YDWEGetTriggerConditionID takes triggercondition tc returns integer
return(GetHandleId((tc)))
endfunction
function YDWEGetTriggerActionID takes triggeraction ta returns integer
return(GetHandleId((ta)))
endfunction
function YDWEGetTriggerEventID takes event et returns integer
return(GetHandleId((et)))
endfunction
function YDWEGetForceID takes force fc returns integer
return(GetHandleId((fc)))
endfunction
function YDWEGetBoolexprID takes boolexpr be returns integer
return(GetHandleId((be)))
endfunction
function YDWEGetSoundID takes sound sd returns integer
return(GetHandleId((sd)))
endfunction
function YDWEGetTimerDialogID takes timerdialog td returns integer
return(GetHandleId((td)))
endfunction
function YDWEGetTrackableID takes trackable ta returns integer
return(GetHandleId((ta)))
endfunction
function YDWEGetDialogID takes dialog d returns integer
return(GetHandleId((d)))
endfunction
function YDWEGetButtonID takes button bt returns integer
return(GetHandleId((bt)))
endfunction
function YDWEConverUnitcodeToInt takes integer uid returns integer
return uid
endfunction
function YDWEConverItemcodeToInt takes integer itid returns integer
return itid
endfunction
function YDWEConverAbilcodeToInt takes integer abid returns integer
return abid
endfunction
function YDWEFlushAllData takes nothing returns nothing
call FlushParentHashtable(YDHT)
endfunction
function YDWEFlushMissionByInteger takes integer i returns nothing
call FlushChildHashtable(YDHT,i)
endfunction
function YDWEFlushMissionByString takes string s returns nothing
call FlushChildHashtable(YDHT,StringHash(s))
endfunction
function YDWESaveIntegerByInteger takes integer pTable,integer pKey,integer i returns nothing
call SaveInteger(YDHT,pTable,pKey,i)
endfunction
function YDWESaveIntegerByString takes string pTable,string pKey,integer i returns nothing
call SaveInteger(YDHT,StringHash(pTable),StringHash(pKey),i)
endfunction
function YDWEGetIntegerByInteger takes integer pTable,integer pKey returns integer
return LoadInteger(YDHT,pTable,pKey)
endfunction
function YDWEGetIntegerByString takes string pTable,string pKey returns integer
return LoadInteger(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveRealByInteger takes integer pTable,integer pKey,real r returns nothing
call SaveReal(YDHT,pTable,pKey,r)
endfunction
function YDWESaveRealByString takes string pTable,string pKey,real r returns nothing
call SaveReal(YDHT,StringHash(pTable),StringHash(pKey),r)
endfunction
function YDWEGetRealByInteger takes integer pTable,integer pKey returns real
return LoadReal(YDHT,pTable,pKey)
endfunction
function YDWEGetRealByString takes string pTable,string pKey returns real
return LoadReal(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveStringByInteger takes integer pTable,integer pKey,string s returns nothing
call SaveStr(YDHT,pTable,pKey,s)
endfunction
function YDWESaveStringByString takes string pTable,string pKey,string s returns nothing
call SaveStr(YDHT,StringHash(pTable),StringHash(pKey),s)
endfunction
function YDWEGetStringByInteger takes integer pTable,integer pKey returns string
return LoadStr(YDHT,pTable,pKey)
endfunction
function YDWEGetStringByString takes string pTable,string pKey returns string
return LoadStr(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveBooleanByInteger takes integer pTable,integer pKey,boolean b returns nothing
call SaveBoolean(YDHT,pTable,pKey,b)
endfunction
function YDWESaveBooleanByString takes string pTable,string pKey,boolean b returns nothing
call SaveBoolean(YDHT,StringHash(pTable),StringHash(pKey),b)
endfunction
function YDWEGetBooleanByInteger takes integer pTable,integer pKey returns boolean
return LoadBoolean(YDHT,pTable,pKey)
endfunction
function YDWEGetBooleanByString takes string pTable,string pKey returns boolean
return LoadBoolean(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveUnitByInteger takes integer pTable,integer pKey,unit u returns nothing
call SaveUnitHandle(YDHT,pTable,pKey,u)
endfunction
function YDWESaveUnitByString takes string pTable,string pKey,unit u returns nothing
call SaveUnitHandle(YDHT,StringHash(pTable),StringHash(pKey),u)
endfunction
function YDWEGetUnitByInteger takes integer pTable,integer pKey returns unit
return LoadUnitHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetUnitByString takes string pTable,string pKey returns unit
return LoadUnitHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveUnitIDByInteger takes integer pTable,integer pKey,integer uid returns nothing
call SaveInteger(YDHT,pTable,pKey,uid)
endfunction
function YDWESaveUnitIDByString takes string pTable,string pKey,integer uid returns nothing
call SaveInteger(YDHT,StringHash(pTable),StringHash(pKey),uid)
endfunction
function YDWEGetUnitIDByInteger takes integer pTable,integer pKey returns integer
return LoadInteger(YDHT,pTable,pKey)
endfunction
function YDWEGetUnitIDByString takes string pTable,string pKey returns integer
return LoadInteger(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESavePlayerByInteger takes integer pTable,integer pKey,player p returns nothing
call SavePlayerHandle(YDHT,pTable,pKey,p)
endfunction
function YDWESavePlayerByString takes string pTable,string pKey,player p returns nothing
call SavePlayerHandle(YDHT,StringHash(pTable),StringHash(pKey),p)
endfunction
function YDWEGetPlayerByInteger takes integer pTable,integer pKey returns player
return LoadPlayerHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetPlayerByString takes string pTable,string pKey returns player
return LoadPlayerHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveItemByInteger takes integer pTable,integer pKey,item it returns nothing
call SaveItemHandle(YDHT,pTable,pKey,it)
endfunction
function YDWESaveItemByString takes string pTable,string pKey,item it returns nothing
call SaveItemHandle(YDHT,StringHash(pTable),StringHash(pKey),it)
endfunction
function YDWEGetItemByInteger takes integer pTable,integer pKey returns item
return LoadItemHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetItemByString takes string pTable,string pKey returns item
return LoadItemHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveItemIDByInteger takes integer pTable,integer pKey,integer itid returns nothing
call SaveInteger(YDHT,pTable,pKey,itid)
endfunction
function YDWESaveItemIDByString takes string pTable,string pKey,integer itid returns nothing
call SaveInteger(YDHT,StringHash(pTable),StringHash(pKey),itid)
endfunction
function YDWEGetItemIDByInteger takes integer pTable,integer pKey returns integer
return LoadInteger(YDHT,pTable,pKey)
endfunction
function YDWEGetItemIDByString takes string pTable,string pKey returns integer
return LoadInteger(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveTimerByInteger takes integer pTable,integer pKey,timer t returns nothing
call SaveTimerHandle(YDHT,pTable,pKey,t)
endfunction
function YDWESaveTimerByString takes string pTable,string pKey,timer t returns nothing
call SaveTimerHandle(YDHT,StringHash(pTable),StringHash(pKey),t)
endfunction
function YDWEGetTimerByInteger takes integer pTable,integer pKey returns timer
return LoadTimerHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetTimerByString takes string pTable,string pKey returns timer
return LoadTimerHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveTriggerByInteger takes integer pTable,integer pKey,trigger trg returns nothing
call SaveTriggerHandle(YDHT,pTable,pKey,trg)
endfunction
function YDWESaveTriggerByString takes string pTable,string pKey,trigger trg returns nothing
call SaveTriggerHandle(YDHT,StringHash(pTable),StringHash(pKey),trg)
endfunction
function YDWEGetTriggerByInteger takes integer pTable,integer pKey returns trigger
return LoadTriggerHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetTriggerByString takes string pTable,string pKey returns trigger
return LoadTriggerHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveLocationByInteger takes integer pTable,integer pKey,location pt returns nothing
call SaveLocationHandle(YDHT,pTable,pKey,pt)
endfunction
function YDWESaveLocationByString takes string pTable,string pKey,location pt returns nothing
call SaveLocationHandle(YDHT,StringHash(pTable),StringHash(pKey),pt)
endfunction
function YDWEGetLocationByInteger takes integer pTable,integer pKey returns location
return LoadLocationHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetLocationByString takes string pTable,string pKey returns location
return LoadLocationHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveGroupByInteger takes integer pTable,integer pKey,group g returns nothing
call SaveGroupHandle(YDHT,pTable,pKey,g)
endfunction
function YDWESaveGroupByString takes string pTable,string pKey,group g returns nothing
call SaveGroupHandle(YDHT,StringHash(pTable),StringHash(pKey),g)
endfunction
function YDWEGetGroupByInteger takes integer pTable,integer pKey returns group
return LoadGroupHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetGroupByString takes string pTable,string pKey returns group
return LoadGroupHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveMultiboardByInteger takes integer pTable,integer pKey,multiboard m returns nothing
call SaveMultiboardHandle(YDHT,pTable,pKey,m)
endfunction
function YDWESaveMultiboardByString takes string pTable,string pKey,multiboard m returns nothing
call SaveMultiboardHandle(YDHT,StringHash(pTable),StringHash(pKey),m)
endfunction
function YDWEGetMultiboardByInteger takes integer pTable,integer pKey returns multiboard
return LoadMultiboardHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetMultiboardByString takes string pTable,string pKey returns multiboard
return LoadMultiboardHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveMultiboardItemByInteger takes integer pTable,integer pKey,multiboarditem mt returns nothing
call SaveMultiboardItemHandle(YDHT,pTable,pKey,mt)
endfunction
function YDWESaveMultiboardItemByString takes string pTable,string pKey,multiboarditem mt returns nothing
call SaveMultiboardItemHandle(YDHT,StringHash(pTable),StringHash(pKey),mt)
endfunction
function YDWEGetMultiboardItemByInteger takes integer pTable,integer pKey returns multiboarditem
return LoadMultiboardItemHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetMultiboardItemByString takes string pTable,string pKey returns multiboarditem
return LoadMultiboardItemHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveTextTagByInteger takes integer pTable,integer pKey,texttag tt returns nothing
call SaveTextTagHandle(YDHT,pTable,pKey,tt)
endfunction
function YDWESaveTextTagByString takes string pTable,string pKey,texttag tt returns nothing
call SaveTextTagHandle(YDHT,StringHash(pTable),StringHash(pKey),tt)
endfunction
function YDWEGetTextTagByInteger takes integer pTable,integer pKey returns texttag
return LoadTextTagHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetTextTagByString takes string pTable,string pKey returns texttag
return LoadTextTagHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveLightningByInteger takes integer pTable,integer pKey,lightning ln returns nothing
call SaveLightningHandle(YDHT,pTable,pKey,ln)
endfunction
function YDWESaveLightningByString takes string pTable,string pKey,lightning ln returns nothing
call SaveLightningHandle(YDHT,StringHash(pTable),StringHash(pKey),ln)
endfunction
function YDWEGetLightningByInteger takes integer pTable,integer pKey returns lightning
return LoadLightningHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetLightningByString takes string pTable,string pKey returns lightning
return LoadLightningHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveRegionByInteger takes integer pTable,integer pKey,region rn returns nothing
call SaveRegionHandle(YDHT,pTable,pKey,rn)
endfunction
function YDWESaveRegionByString takes string pTable,string pKey,region rt returns nothing
call SaveRegionHandle(YDHT,StringHash(pTable),StringHash(pKey),rt)
endfunction
function YDWEGetRegionByInteger takes integer pTable,integer pKey returns region
return LoadRegionHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetRegionByString takes string pTable,string pKey returns region
return LoadRegionHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveRectByInteger takes integer pTable,integer pKey,rect rn returns nothing
call SaveRectHandle(YDHT,pTable,pKey,rn)
endfunction
function YDWESaveRectByString takes string pTable,string pKey,rect rt returns nothing
call SaveRectHandle(YDHT,StringHash(pTable),StringHash(pKey),rt)
endfunction
function YDWEGetRectByInteger takes integer pTable,integer pKey returns rect
return LoadRectHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetRectByString takes string pTable,string pKey returns rect
return LoadRectHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveLeaderboardByInteger takes integer pTable,integer pKey,leaderboard lb returns nothing
call SaveLeaderboardHandle(YDHT,pTable,pKey,lb)
endfunction
function YDWESaveLeaderboardByString takes string pTable,string pKey,leaderboard lb returns nothing
call SaveLeaderboardHandle(YDHT,StringHash(pTable),StringHash(pKey),lb)
endfunction
function YDWEGetLeaderboardByInteger takes integer pTable,integer pKey returns leaderboard
return LoadLeaderboardHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetLeaderboardByString takes string pTable,string pKey returns leaderboard
return LoadLeaderboardHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveEffectByInteger takes integer pTable,integer pKey,effect e returns nothing
call SaveEffectHandle(YDHT,pTable,pKey,e)
endfunction
function YDWESaveEffectByString takes string pTable,string pKey,effect e returns nothing
call SaveEffectHandle(YDHT,StringHash(pTable),StringHash(pKey),e)
endfunction
function YDWEGetEffectByInteger takes integer pTable,integer pKey returns effect
return LoadEffectHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetEffectByString takes string pTable,string pKey returns effect
return LoadEffectHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveDestructableByInteger takes integer pTable,integer pKey,destructable da returns nothing
call SaveDestructableHandle(YDHT,pTable,pKey,da)
endfunction
function YDWESaveDestructableByString takes string pTable,string pKey,destructable da returns nothing
call SaveDestructableHandle(YDHT,StringHash(pTable),StringHash(pKey),da)
endfunction
function YDWEGetDestructableByInteger takes integer pTable,integer pKey returns destructable
return LoadDestructableHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetDestructableByString takes string pTable,string pKey returns destructable
return LoadDestructableHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveTriggerConditionByInteger takes integer pTable,integer pKey,triggercondition tc returns nothing
call SaveTriggerConditionHandle(YDHT,pTable,pKey,tc)
endfunction
function YDWESaveTriggerConditionByString takes string pTable,string pKey,triggercondition tc returns nothing
call SaveTriggerConditionHandle(YDHT,StringHash(pTable),StringHash(pKey),tc)
endfunction
function YDWEGetTriggerConditionByInteger takes integer pTable,integer pKey returns triggercondition
return LoadTriggerConditionHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetTriggerConditionByString takes string pTable,string pKey returns triggercondition
return LoadTriggerConditionHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveTriggerActionByInteger takes integer pTable,integer pKey,triggeraction ta returns nothing
call SaveTriggerActionHandle(YDHT,pTable,pKey,ta)
endfunction
function YDWESaveTriggerActionByString takes string pTable,string pKey,triggeraction ta returns nothing
call SaveTriggerActionHandle(YDHT,StringHash(pTable),StringHash(pKey),ta)
endfunction
function YDWEGetTriggerActionByInteger takes integer pTable,integer pKey returns triggeraction
return LoadTriggerActionHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetTriggerActionByString takes string pTable,string pKey returns triggeraction
return LoadTriggerActionHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveTriggerEventByInteger takes integer pTable,integer pKey,event et returns nothing
call SaveTriggerEventHandle(YDHT,pTable,pKey,et)
endfunction
function YDWESaveTriggerEventByString takes string pTable,string pKey,event et returns nothing
call SaveTriggerEventHandle(YDHT,StringHash(pTable),StringHash(pKey),et)
endfunction
function YDWEGetTriggerEventByInteger takes integer pTable,integer pKey returns event
return LoadTriggerEventHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetTriggerEventByString takes string pTable,string pKey returns event
return LoadTriggerEventHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveForceByInteger takes integer pTable,integer pKey,force fc returns nothing
call SaveForceHandle(YDHT,pTable,pKey,fc)
endfunction
function YDWESaveForceByString takes string pTable,string pKey,force fc returns nothing
call SaveForceHandle(YDHT,StringHash(pTable),StringHash(pKey),fc)
endfunction
function YDWEGetForceByInteger takes integer pTable,integer pKey returns force
return LoadForceHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetForceByString takes string pTable,string pKey returns force
return LoadForceHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveBoolexprByInteger takes integer pTable,integer pKey,boolexpr be returns nothing
call SaveBooleanExprHandle(YDHT,pTable,pKey,be)
endfunction
function YDWESaveBoolexprByString takes string pTable,string pKey,boolexpr be returns nothing
call SaveBooleanExprHandle(YDHT,StringHash(pTable),StringHash(pKey),be)
endfunction
function YDWEGetBoolexprByInteger takes integer pTable,integer pKey returns boolexpr
return LoadBooleanExprHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetBoolexprByString takes string pTable,string pKey returns boolexpr
return LoadBooleanExprHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveSoundByInteger takes integer pTable,integer pKey,sound sd returns nothing
call SaveSoundHandle(YDHT,pTable,pKey,sd)
endfunction
function YDWESaveSoundByString takes string pTable,string pKey,sound sd returns nothing
call SaveSoundHandle(YDHT,StringHash(pTable),StringHash(pKey),sd)
endfunction
function YDWEGetSoundByInteger takes integer pTable,integer pKey returns sound
return LoadSoundHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetSoundByString takes string pTable,string pKey returns sound
return LoadSoundHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveTimerDialogByInteger takes integer pTable,integer pKey,timerdialog td returns nothing
call SaveTimerDialogHandle(YDHT,pTable,pKey,td)
endfunction
function YDWESaveTimerDialogByString takes string pTable,string pKey,timerdialog td returns nothing
call SaveTimerDialogHandle(YDHT,StringHash(pTable),StringHash(pKey),td)
endfunction
function YDWEGetTimerDialogByInteger takes integer pTable,integer pKey returns timerdialog
return LoadTimerDialogHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetTimerDialogByString takes string pTable,string pKey returns timerdialog
return LoadTimerDialogHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveTrackableByInteger takes integer pTable,integer pKey,trackable ta returns nothing
call SaveTrackableHandle(YDHT,pTable,pKey,ta)
endfunction
function YDWESaveTrackableByString takes string pTable,string pKey,trackable ta returns nothing
call SaveTrackableHandle(YDHT,StringHash(pTable),StringHash(pKey),ta)
endfunction
function YDWEGetTrackableByInteger takes integer pTable,integer pKey returns trackable
return LoadTrackableHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetTrackableByString takes string pTable,string pKey returns trackable
return LoadTrackableHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveDialogByInteger takes integer pTable,integer pKey,dialog d returns nothing
call SaveDialogHandle(YDHT,pTable,pKey,d)
endfunction
function YDWESaveDialogByString takes string pTable,string pKey,dialog d returns nothing
call SaveDialogHandle(YDHT,StringHash(pTable),StringHash(pKey),d)
endfunction
function YDWEGetDialogByInteger takes integer pTable,integer pKey returns dialog
return LoadDialogHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetDialogByString takes string pTable,string pKey returns dialog
return LoadDialogHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWESaveButtonByInteger takes integer pTable,integer pKey,button bt returns nothing
call SaveButtonHandle(YDHT,pTable,pKey,bt)
endfunction
function YDWESaveButtonByString takes string pTable,string pKey,button bt returns nothing
call SaveButtonHandle(YDHT,StringHash(pTable),StringHash(pKey),bt)
endfunction
function YDWEGetButtonByInteger takes integer pTable,integer pKey returns button
return LoadButtonHandle(YDHT,pTable,pKey)
endfunction
function YDWEGetButtonByString takes string pTable,string pKey returns button
return LoadButtonHandle(YDHT,StringHash(pTable),StringHash(pKey))
endfunction
function YDWECoordinateX takes real x returns real
set x=RMaxBJ(x,GetCameraBoundMinX())
set x=RMinBJ(x,GetCameraBoundMaxX())
return x
endfunction
function YDWECoordinateY takes real y returns real
set y=RMaxBJ(y,GetCameraBoundMinY())
set y=RMinBJ(y,GetCameraBoundMaxY())
return y
endfunction
function YDWEDistanceBetweenUnits takes unit a,unit b returns real
return SquareRoot((GetUnitX(a)-GetUnitX(b))*(GetUnitX(a)-GetUnitX(b))+(GetUnitY(a)-GetUnitY(b))*(GetUnitY(a)-GetUnitY(b)))
endfunction
function YDWEAngleBetweenUnits takes unit from,unit to returns real
return bj_RADTODEG*Atan2(GetUnitY(to)-GetUnitY(from),GetUnitX(to)-GetUnitX(from))
endfunction
function YDWEGetRect takes real x,real y,real width,real height returns rect
return Rect(x-width*0.5,y-height*0.5,x+width*0.5,y+height*0.5)
endfunction
function YDWEFlyEnable takes unit u returns nothing
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
endfunction
function YDWEId2S takes integer value returns string
local string charMap=bj_AllString
local string result=""
local integer remainingValue=value
local integer charValue
local integer byteno
set byteno=0
loop
set charValue=ModuloInteger(remainingValue,256)
set remainingValue=remainingValue/256
set result=SubString(charMap,charValue,charValue+1)+result
set byteno=byteno+1
exitwhen byteno==4
endloop
return result
endfunction
function YDWES2Id takes string targetstr returns integer
local string originstr=bj_AllString
local integer strlength=StringLength(targetstr)
local integer a=0
local integer b=0
local integer numx=1
local integer result=0
loop
exitwhen b>strlength-1
set numx=R2I(Pow(256,strlength-1-b))
set a=1
loop
exitwhen a>255
if SubString(targetstr,b,b+1)==SubString(originstr,a,a+1)then
set result=result+a*numx
set a=256
endif
set a=a+1
endloop
set b=b+1
endloop
return result
endfunction
function YDWES2UnitId takes string targetstr returns integer
return YDWES2Id(targetstr)
endfunction
function YDWES2ItemId takes string targetstr returns integer
return YDWES2Id(targetstr)
endfunction
function YDWEIfThenElse takes boolexpr b,code c1,code c2 returns nothing
local trigger trg=CreateTrigger()
local triggercondition tc=TriggerAddCondition(trg,b)
local boolean b1=TriggerEvaluate(trg)
if b1==true then
call TimerStart(CreateTimer(),0,false,c1)
else
call TimerStart(CreateTimer(),0,false,c2)
endif
call TriggerRemoveCondition(trg,tc)
call DestroyTrigger(trg)
set trg=null
set tc=null
endfunction
function YDWEIfThenElseMultiple takes nothing returns nothing
endfunction
function YDWEForLoopAMultiple takes nothing returns nothing
endfunction
function YDWECreateUnitPool takes nothing returns nothing
set bj_lastCreatedUnitPool=CreateUnitPool()
endfunction
function YDWEPlaceRandomUnit takes unitpool up,player p,real x,real y,real face returns nothing
set bj_lastPoolAbstractedUnit=PlaceRandomUnit(up,p,x,y,face)
endfunction
function YDWEGetLastUnitPool takes nothing returns unitpool
return bj_lastCreatedUnitPool
endfunction
function YDWEGetLastPoolAbstractedUnit takes nothing returns unit
return bj_lastPoolAbstractedUnit
endfunction
function YDWECreateItemPool takes nothing returns nothing
set bj_lastCreatedItemPool=CreateItemPool()
endfunction
function YDWEPlaceRandomItem takes itempool ip,real x,real y returns nothing
set bj_lastPoolAbstractedItem=PlaceRandomItem(ip,x,y)
endfunction
function YDWEGetLastItemPool takes nothing returns itempool
return bj_lastCreatedItemPool
endfunction
function YDWEGetLastPoolAbstractedItem takes nothing returns item
return bj_lastPoolAbstractedItem
endfunction
function YDWESetline takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit tru=(LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("tru"))))
local integer count=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("count"))))
local integer steps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steps"))))
local integer stepscount=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("stepscount"))))
local integer position=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("position"))))
local real ux=GetUnitX(tru)
local real uy=GetUnitY(tru)
local real mjx
local real mjy
local real distance=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("distance"))))
local real angleadd=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("angleadd"))))
local unit array tempu
local real array tempx
local real array tempy
local real array angle
local integer i=0
local integer n=0
loop
exitwhen i>count
set tempu[i]=(LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(1000+i)))))
set angle[i]=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(2000+i)))))
set tempx[i]=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(3000+i)))))
set tempy[i]=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(4000+i)))))
set i=i+1
endloop
set i=0
if(steps>stepscount)or GetUnitState(tru,UNIT_STATE_LIFE)<=0 then
loop
exitwhen i==count
call RemoveUnit((LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(1000+i))))))
set i=i+1
endloop
call FlushChildHashtable(YDHT,StringHash((I2S((GetHandleId((t)))))))
call PauseTimer(t)
call DestroyTimer(t)
return
endif
set i=0
loop
exitwhen i==count
set n=ModuloInteger(position+i,count)
set mjx=GetUnitX(tempu[i])
set mjy=GetUnitY(tempu[i])
set mjx=mjx+(tempx[n]+i*distance*CosBJ(angle[n])-mjx)*0.2
set mjy=mjy+(tempy[n]+i*distance*SinBJ(angle[n])-mjy)*0.2
call SetUnitX(tempu[i],mjx)
call SetUnitY(tempu[i],mjy)
set i=i+1
endloop
set steps=steps+1
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steps")),(steps))
set position=ModuloInteger(position-1,count)
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(2000+position))),((GetUnitFacing(tru)+180+angleadd)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(3000+position))),((ux)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(4000+position))),((uy)*1.0))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("position")),(position))
endfunction
function YDWECreateLine takes unit tru,integer ut,integer count,real angleadd,real distance,real lasttime,real eachtime,real heightstart,real heightadd,real sizestart,real sizeadd returns nothing
local timer t=CreateTimer()
local real ux=GetUnitX(tru)
local real uy=GetUnitY(tru)
local real angle=GetUnitFacing(tru)+180+angleadd
local player p=GetOwningPlayer(tru)
local integer i=0
local unit array tempu
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("tru")),(tru))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("count")),(count))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steps")),(0))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("stepscount")),(R2I(lasttime/eachtime)))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("distance")),((distance)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("angleadd")),((angleadd)*1.0))
call GroupClear(bj_lastCreatedGroup)
loop
exitwhen i==count
set tempu[i]=CreateUnit(p,ut,ux,uy,0)
call GroupAddUnit(bj_lastCreatedGroup,tempu[i])
set bj_lastCreatedUnit=tempu[i]
call SetUnitFlyHeight(tempu[i],i*heightadd+heightstart+150,75)
call SetUnitScalePercent(tempu[i],RMaxBJ(i*sizeadd+sizestart,1),RMaxBJ(i*sizeadd+sizestart,1),RMaxBJ(i*sizeadd+sizestart,1))
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(1000+i))),(tempu[i]))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(2000+i))),((angle)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(3000+i))),((ux)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(4000+i))),((uy)*1.0))
set i=i+1
endloop
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("position")),((0)*1.0))
call TimerStart(t,eachtime,true,function YDWESetline)
set t=null
set p=null
endfunction
function YDWELifeChange takes unit u,integer mod,integer ch,integer aid returns nothing
local integer a
local integer b
local integer c
local integer d
if mod==1 then
set ch=-ch
elseif mod==2 then
set ch=ch-R2I(GetUnitState(u,UNIT_STATE_MAX_LIFE))
endif
if ch>99999 then
set ch=99999
endif
if ch<-99999 then
set ch=-99999
endif
if ch<0 then
set a=2
set ch=-ch
else
set a=7
endif
set b=0
loop
exitwhen b==5
set c=ch-ch/10*10
set d=0
loop
exitwhen d==c
call UnitAddAbility(u,aid)
call SetUnitAbilityLevel(u,aid,a)
call UnitRemoveAbility(u,aid)
set d=d+1
endloop
set ch=ch/10
set a=a+1
set b=b+1
endloop
endfunction
function YDWEManaChange takes unit u,integer mod,integer ch,integer aid returns nothing
local integer a
local integer b
local integer c
local integer d
if mod==1 then
set ch=-ch
elseif mod==2 then
set ch=ch-R2I(GetUnitState(u,UNIT_STATE_MAX_MANA))
endif
if ch>99999 then
set ch=99999
endif
if ch<-99999 then
set ch=-99999
endif
if ch<0 then
set a=2
set ch=-ch
else
set a=7
endif
set b=0
loop
exitwhen b==5
set c=ch-ch/10*10
set d=0
loop
exitwhen d==c
call UnitAddAbility(u,aid)
call SetUnitAbilityLevel(u,aid,a)
call UnitRemoveAbility(u,aid)
set d=d+1
endloop
set ch=ch/10
set a=a+1
set b=b+1
endloop
endfunction
function YDWEDefendModifier takes unit u,integer N returns nothing
local integer i=0
local integer m=0
local integer array ab
set N=IMinBJ(2047,N)
set N=IMaxBJ(0,N)
set i=0
loop
exitwhen i>=10
call UnitRemoveAbility(u,ab[i])
set i=i+1
endloop
set i=0
loop
exitwhen i>=10
if ModuloInteger(N,2)!=0 then
call UnitAddAbility(u,ab[i])
endif
set N=N/2
if N==0 then
set i=10
endif
set i=i+1
endloop
endfunction
function YDWEAttackModifier takes unit u,integer N returns nothing
local integer i=0
local integer m=0
local integer array ab
set N=IMinBJ(2047,N)
set N=IMaxBJ(0,N)
set ab[0]='AItg'
set ab[1]='AIth'
set ab[2]='AIti'
set ab[3]='AItl'
set ab[4]='AIat'
set ab[5]='AItj'
set ab[6]='AItn'
set ab[7]='AItf'
set ab[8]='AItc'
set ab[9]='AIt9'
set ab[10]='AItk'
set i=0
loop
exitwhen i>=11
call UnitRemoveAbility(u,ab[i])
set i=i+1
endloop
set i=0
loop
exitwhen i>=11
if ModuloInteger(N,2)!=0 then
call UnitAddAbility(u,ab[i])
endif
set N=N/2
if N==0 then
set i=11
endif
set i=i+1
endloop
endfunction
function YDWEEwsp_LOOP takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit array tempUnit
local real array angle
local integer i=0
local unit orderUnit=(LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("orderUnit"))))
local real UnitLocX=GetUnitX(orderUnit)
local real UnitLocY=GetUnitY(orderUnit)
local real tempLocX
local real tempLocY
local real radius=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("radius"))))
local real S=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("speed"))))
local integer N=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("number"))))
local integer steps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steps"))))
if steps>0 then
set steps=steps-1
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steps")),(steps))
loop
exitwhen i>N
set i=i+1
set tempUnit[i]=(LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(1000+i)))))
set angle[i]=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(2000+i)))))
set angle[i]=angle[i]+S
set tempLocX=UnitLocX+radius*CosBJ(angle[i])
set tempLocY=UnitLocY+radius*SinBJ(angle[i])
call SetUnitX(tempUnit[i],tempLocX)
call SetUnitY(tempUnit[i],tempLocY)
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(2000+i))),((angle[i])*1.0))
set tempUnit[i]=null
endloop
else
set i=0
loop
set i=i+1
exitwhen i>N
call RemoveUnit((LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(1000+i))))))
endloop
call FlushChildHashtable(YDHT,StringHash((I2S((GetHandleId((t)))))))
call DestroyTimer(t)
endif
set orderUnit=null
endfunction
function YDWECreateEwsp takes unit Hero,integer ewsp,integer N,real R,real T,real I,real S returns nothing
local unit orderUnit=Hero
local real UnitLocX=GetUnitX(orderUnit)
local real UnitLocY=GetUnitY(orderUnit)
local unit array tempUnit
local player Masterplayer=GetOwningPlayer(orderUnit)
local timer t=CreateTimer()
local real interval=I
local real lasttime=T
local real radius=R
local real tempLocX
local real tempLocY
local real array angle
local integer i=0
local integer steps=R2I(lasttime/interval)
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steps")),(steps))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("number")),(N))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("radius")),((radius)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("speed")),((S)*1.0))
call GroupClear(bj_lastCreatedGroup)
loop
set i=i+1
exitwhen(i>N)
set tempLocX=UnitLocX+radius*Cos(2*i*bj_PI/N)
set tempLocY=UnitLocY+radius*Sin(2*i*bj_PI/N)
set angle[i]=180*Atan2(UnitLocY-tempLocY,UnitLocX-tempLocX)/bj_PI
set tempUnit[i]=CreateUnit(Masterplayer,ewsp,tempLocX,tempLocY,angle[i])
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(1000+i))),(tempUnit[i]))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(1000+i))),((GetHandleId((tempUnit[i])))))
call UnitGenerateAlarms(tempUnit[i],false)
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash((I2S(2000+i))),((angle[i])*1.0))
call GroupAddUnit(bj_lastCreatedGroup,tempUnit[i])
set bj_lastCreatedUnit=tempUnit[i]
endloop
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("orderUnit")),(orderUnit))
call TimerStart(t,interval,true,function YDWEEwsp_LOOP)
set t=null
set orderUnit=null
set i=0
loop
set i=i+1
exitwhen(i>N)
set tempUnit[i]=null
endloop
endfunction
function YDWEGetUnitCurrentFree_Func takes unit u returns boolean
local string s=OrderId2String(GetUnitCurrentOrder(u))
if s==null then
return true
endif
return false
endfunction
function YDWERemoveGuard takes unit pet returns nothing
local integer tm=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((pet)))))),StringHash(("Timer"))))
call FlushChildHashtable(YDHT,StringHash((I2S((GetHandleId((pet)))))))
call FlushChildHashtable(YDHT,StringHash((I2S(tm))))
call DestroyTimer((LoadTimerHandle(YDHT,StringHash((I2S((GetHandleId((pet)))))),StringHash(("Timer")))))
endfunction
function YDWESetGuard_Func takes nothing returns nothing
local timer tm=GetExpiredTimer()
local unit pet=((LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("Pet")))))
local unit captain=((LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("Captain")))))
local real x=GetUnitX(captain)-GetUnitX(pet)
local real y=GetUnitY(captain)-GetUnitY(pet)
local real d=x*x+y*y
local real v
local real a
local effect e=null
local real life=(LoadReal(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("Life"))))
local integer p=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("Percent"))))
set v=(LoadReal(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("GuardRanger"))))
if GetUnitState(pet,UNIT_STATE_LIFE)>0 and GetUnitState(captain,UNIT_STATE_LIFE)>0 then
if d<v*v then
if YDWEGetUnitCurrentFree_Func(pet)==true and GetRandomInt(0,100)<p then
set x=GetUnitX(captain)
set y=GetUnitY(captain)
set d=GetRandomReal(0,v)
set a=GetRandomReal(0,360)
call IssuePointOrder(pet,"patrol",x+d*CosBJ(a),y+d*SinBJ(a))
endif
else
set v=(LoadReal(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("ReturnRanger"))))
if d<v*v then
if YDWEGetUnitCurrentFree_Func(pet)==true then
call IssuePointOrder(pet,"patrol",GetUnitX(captain),GetUnitY(captain))
endif
else
set v=(LoadReal(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("OutRanger"))))
if d !=0 and d>v*v then
call SetUnitPosition(pet,GetUnitX(captain),GetUnitY(captain))
set e=AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",captain,"chest")
call DestroyEffect(e)
else
call IssuePointOrder(pet,"move",GetUnitX(captain),GetUnitY(captain))
endif
endif
endif
else
call IssuePointOrder(pet,"attack",GetUnitX(captain),GetUnitY(captain))
call YDWERemoveGuard(pet)
endif
set tm=null
set pet=null
set captain=null
set e=null
endfunction
function YDWESetGuard takes unit pet,unit captain,real timeout,real guardRanger,real returnRanger,real outRanger,integer percent returns nothing
local timer tm=CreateTimer()
call SaveTimerHandle(YDHT,StringHash((I2S((GetHandleId((pet)))))),StringHash(("Timer")),(tm))
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("pet")),(pet))
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("Captain")),(captain))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("Percent")),(percent))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("GuardRanger")),((guardRanger)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("ReturnRanger")),((returnRanger)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((tm)))))),StringHash(("OutRanger")),((outRanger)*1.0))
call TimerStart(tm,timeout,true,function YDWESetGuard_Func)
set tm=null
endfunction
function YDWEJumpTimerLoop takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit hero=((LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("Hero")))))
local real angle=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("Angle"))))
local integer steeps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steeps"))))
local integer steepsMax=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steepsMax"))))
local real heightMax=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("heightMax"))))
local real dist=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("dist"))))
local real dheig=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("dheig"))))
local real OriginHeight=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("OriginHeight"))))
local real x=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("X"))))
local real y=(LoadReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("Y"))))
local real x1=0
local real y1=0
local real height=0
local integer lvJumpTimer=MoveMoreLevel_JumpTimer
local integer lvUnitMove=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("lvUnitMove"))))
if steeps<steepsMax and lvJumpTimer>=lvUnitMove then
set x1=x+steeps*dist*Cos(angle*3.14159/180.0)
set y1=y+steeps*dist*Sin(angle*3.14159/180.0)
set x1=YDWECoordinateX(x1)
set y1=YDWECoordinateY(y1)
call SetUnitX(hero,x1)
call SetUnitY(hero,y1)
set steeps=steeps+1
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steeps")),(steeps))
set height=(-(2*I2R(steeps)*dheig-1)*(2*I2R(steeps)*dheig-1)+1)*heightMax+OriginHeight
call SetUnitFlyHeight(hero,height,99999)
call SetUnitFacing(hero,angle)
else
call SetUnitFlyHeight(hero,OriginHeight,99999)
call SetUnitPathing(hero,true)
call DestroyTimer(t)
call FlushChildHashtable(YDHT,StringHash((I2S((GetHandleId((t)))))))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("lvUnitMove")),(0))
endif
set t=null
set hero=null
endfunction
function YDWEJumpTimer takes unit hero,real angle,real distance,real lasttime,real timeout,real heightMax returns nothing
local timer t=null
local real x=GetUnitX(hero)
local real y=GetUnitY(hero)
local integer steepsMax=R2I(lasttime/timeout)
local integer steeps=0
local real dist=distance/steepsMax
local real dheig=1.0/steepsMax
local real OriginHeight=GetUnitFlyHeight(hero)
local integer lvJumpTimer=MoveMoreLevel_JumpTimer
local integer lvUnitMove=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("lvUnitMove"))))
if lvJumpTimer>lvUnitMove then
set t=CreateTimer()
set lvUnitMove=lvJumpTimer
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("lvUnitMove")),(lvUnitMove))
else
return
endif
call UnitAddAbility(hero,'Amrf')
call UnitRemoveAbility(hero,'Amrf')
call SetUnitPathing(hero,false)
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("Hero")),(hero))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("OriginHeight")),((OriginHeight)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("Angle")),((angle)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("dist")),((dist)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("heightMax")),((heightMax)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("dheig")),((dheig)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("X")),((x)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("Y")),((y)*1.0))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steeps")),(steeps))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((t)))))),StringHash(("steepsMax")),(steepsMax))
call TimerStart(t,timeout,true,function YDWEJumpTimerLoop)
set t=null
endfunction
function YDWEAttackWave takes nothing returns nothing
local timer t=GetExpiredTimer()
local real x1=(LoadReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("x1"))))
local real y1=(LoadReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("y1"))))
local real x2=(LoadReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("x2"))))
local real y2=(LoadReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("y2"))))
local real face=(LoadReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("face"))))
local integer N=(LoadInteger(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("N"))))
local integer unitid=(LoadInteger(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("unitid"))))
local player p=Player((LoadInteger(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("playerid")))))
local unit tempUnit
local integer n=0
call GroupClear(bj_lastCreatedGroup)
loop
exitwhen(n>=N)
set tempUnit=CreateUnit(p,unitid,x1,y1,face)
call GroupAddUnit(bj_lastCreatedGroup,tempUnit)
set bj_lastCreatedUnit=tempUnit
call IssuePointOrder(tempUnit,"attack",x2,y2)
set n=n+1
set tempUnit=null
endloop
endfunction
function YDWEAttackWaveTimer takes player p,integer N,integer unitid,location whichLocation,real face,location TargetLocation,real timeout returns nothing
local real x1=GetLocationX(whichLocation)
local real y1=GetLocationY(whichLocation)
local real x2=GetLocationX(TargetLocation)
local real y2=GetLocationY(TargetLocation)
local timer t=CreateTimer()
call SaveInteger(YDHT,StringHash(("AttackWave"+I2S(unitid)+R2S(x1)+R2S(y1)+R2S(timeout))),StringHash(("Timer")),((GetHandleId((t)))))
call SaveInteger(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("unitid")),(unitid))
call SaveInteger(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("playerid")),(GetPlayerId(p)))
call SaveInteger(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("N")),(N))
call SaveReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("x1")),((x1)*1.0))
call SaveReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("y1")),((y1)*1.0))
call SaveReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("x2")),((x2)*1.0))
call SaveReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("y2")),((y2)*1.0))
call SaveReal(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("face")),((face)*1.0))
call SaveInteger(YDHT,StringHash(("AttackWaveLastTimer")),StringHash(("Timer")),((GetHandleId((t)))))
call SaveStr(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("Store")),("AttackWave"+I2S(unitid)+R2S(x1)+R2S(y1)+R2S(timeout)))
call TimerStart(t,timeout,true,function YDWEAttackWave)
call RemoveLocation(whichLocation)
set t=null
endfunction
function YDWERemoveAttackWaveByUnitID takes integer unitid,location whichLocation,real timeout returns nothing
local integer t=(LoadInteger(YDHT,StringHash(("AttackWave"+I2S(unitid)+R2S(GetLocationX(whichLocation))+R2S(GetLocationY(whichLocation))+R2S(timeout))),StringHash(("Timer"))))
call FlushChildHashtable(YDHT,StringHash(("AttackWave"+I2S(unitid)+I2S((GetHandleId((whichLocation))))+R2S(timeout))))
call FlushChildHashtable(YDHT,StringHash(("AttackWave"+I2S(t))))
call DestroyTimer((LoadTimerHandle(YDHT,StringHash(("AttackWave"+I2S(unitid)+R2S(GetLocationX(whichLocation))+R2S(GetLocationY(whichLocation))+R2S(timeout))),StringHash(("Timer")))))
endfunction
function YDWERemoveAttackWaveByTimer takes timer t returns nothing
call FlushChildHashtable(YDHT,StringHash(((LoadStr(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))),StringHash(("Store")))))))
call FlushChildHashtable(YDHT,StringHash(("AttackWave"+I2S((GetHandleId((t)))))))
call DestroyTimer(t)
endfunction
function YDWERemoveAttackWaveReturnTimer takes nothing returns timer
return(LoadTimerHandle(YDHT,StringHash(("AttackWaveLastTimer")),StringHash(("Timer"))))
endfunction
function YDWEAIStringFind takes string subject,string find,integer offset returns integer
local integer len=StringLength(find)
local integer pos=offset
local string s
local string str
if(offset<1)then
set pos=1
endif
if(find=="")then
return-1
endif
loop
set s=SubString(subject,pos-1,pos+len-1)
if(s==find)then
return pos
endif
if(SubString(subject,pos-1,pos)=="")then
return-1
endif
set pos=pos+1
endloop
return-1
endfunction
function YDWEAIRecordAbility takes integer uid,integer ab1,integer ab2,integer ab3,integer ab4,integer ab5 returns nothing
call SaveInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_1")),(ab1))
call SaveInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_2")),(ab2))
call SaveInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_3")),(ab3))
call SaveInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_4")),(ab4))
call SaveInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_5")),(ab5))
endfunction
function YDWEAIRecordLearn_sequence takes integer uid,string ls1,string ls2,string ls3,string ls4,string ls5 returns nothing
call SaveStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_1")),(ls1))
call SaveStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_2")),(ls2))
call SaveStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_3")),(ls3))
call SaveStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_4")),(ls4))
call SaveStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_5")),(ls5))
endfunction
function YDWEHeroLearnSkillAI takes unit hero,integer level returns integer
local string array learn_sequence
local integer numofskill=5
local integer array skills
local integer i=1
local integer learnskill
local integer uid=GetUnitTypeId(hero)
set skills[1]=(LoadInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_1"))))
set skills[2]=(LoadInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_2"))))
set skills[3]=(LoadInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_3"))))
set skills[4]=(LoadInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_4"))))
set skills[5]=(LoadInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_5"))))
set learn_sequence[1]=(LoadStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_1"))))
set learn_sequence[2]=(LoadStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_2"))))
set learn_sequence[3]=(LoadStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_3"))))
set learn_sequence[4]=(LoadStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_4"))))
set learn_sequence[5]=(LoadStr(YDHT,StringHash(("learn_quence")),StringHash((I2S(uid)+"_5"))))
loop
exitwhen i>numofskill
if YDWEAIStringFind(learn_sequence[i],"^"+I2S(level)+"^",1)!=-1 then
if GetUnitAbilityLevel(hero,skills[i])==0 then
call UnitAddAbility(hero,skills[i])
else
call IncUnitAbilityLevel(hero,skills[i])
endif
call UnitModifySkillPoints(hero,-1)
return skills[i]
endif
set i=i+1
endloop
return 0
endfunction
function YDWEHeroMaxSkillAI takes unit hero returns nothing
local integer level=GetHeroLevel(hero)
local integer uid=GetUnitTypeId(hero)
local integer numofskill=5
local integer i=0
local integer array skills
call ModifyHeroSkillPoints(hero,bj_MODIFYMETHOD_SET,level)
loop
set i=i+1
exitwhen i>5
call UnitRemoveAbility(hero,(LoadInteger(YDHT,StringHash(("HeroAbilities")),StringHash((I2S(uid)+"_"+I2S(i))))))
endloop
set i=0
loop
set i=i+1
exitwhen i>level
call YDWEHeroLearnSkillAI(hero,i)
endloop
endfunction
function YDWEIcanFly takes nothing returns nothing
local timer Mt=GetExpiredTimer()
local timer Mtt=(LoadTimerHandle(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("ExtendCache"))))
local string ors=I2S((GetHandleId((Mtt))))
local integer Mn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber"))))
local unit Muu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mn)))))
local unit lTl=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("Pudge"))))
local real Mx=GetUnitX(Muu)
local real My=GetUnitY(Muu)
if Mn>=3 and GetUnitState(lTl,UNIT_STATE_LIFE)>0 then
call SetUnitX(lTl,Mx)
call SetUnitY(lTl,My)
endif
call KillUnit(Muu)
call SaveInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber")),(Mn-1))
if Mn==1 then
call PauseTimer(Mt)
call FlushChildHashtable(YDHT,StringHash((ors)))
call FlushChildHashtable(YDHT,StringHash((I2S((GetHandleId((Mt)))))))
call PolledWait(1)
call DestroyTimer(Mt)
call DestroyTimer(Mtt)
endif
endfunction
function YDWEMeatHookFilter takes nothing returns boolean
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<=0 or IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)or GetFilterUnit()==((LoadUnitHandle(YDHT,StringHash(("YDWEMeatHook")),StringHash(("MHtemp")))))then
return false
endif
return true
endfunction
function YDWEMeatHookAim takes string ors,real Mxx,real Myy returns nothing
local group lEw
local group OHh=CreateGroup()
local location OHf
local boolexpr lTM
local unit Maim
local unit lTl=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("Pudge"))))
local real Ma=(LoadReal(YDHT,StringHash((ors)),StringHash(("Angle"))))
local rect ItemRec
local real Mb
local unit OHu
local unit Fhel
local location Mtlo
local real damage=(LoadReal(YDHT,StringHash((ors)),StringHash(("Damage"))))
local integer lmZ=4
set lEw=CreateGroup()
call SaveUnitHandle(YDHT,StringHash(("YDWEMeatHook")),StringHash(("MHtemp")),(lTl))
set lTM=Condition(function YDWEMeatHookFilter)
call GroupEnumUnitsInRange(lEw,Mxx,Myy,'}',lTM)
call DestroyBoolExpr(lTM)
set Maim=FirstOfGroup(lEw)
call DestroyGroup(lEw)
if(Maim !=null)then
call SaveUnitHandle(YDHT,StringHash((ors)),StringHash(("Target")),(Maim))
if IsUnitEnemy(Maim,GetOwningPlayer(lTl))then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",Maim,"origin"))
call UnitDamageTarget(lTl,Maim,damage,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
endif
set lEw=null
set OHu=null
set lTM=null
set Maim=null
endfunction
function YDWEMeatHookBack takes string ors returns nothing
local integer Mnn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber"))))
local unit Maim=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("Target"))))
local unit lTl=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("Pudge"))))
local integer OLe=(LoadInteger(YDHT,StringHash((ors)),StringHash(("OLevel"))))
local integer OHo=(LoadInteger(YDHT,StringHash((ors)),StringHash(("OHook"))))
local location FireLoc
local unit Mu
local unit Muu
local real Mxx
local real Myy
local real Maa
local real damage=(LoadReal(YDHT,StringHash((ors)),StringHash(("Damage"))))
loop
exitwhen Mnn<1
set Mu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mnn+1)))))
set Muu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mnn)))))
if(Mu !=null)and(Muu !=null)then
set Maa=bj_RADTODEG*Atan2(GetUnitY(Mu)-GetUnitY(Muu),GetUnitX(Mu)-GetUnitX(Muu))
set Mxx=GetUnitX(Muu)+40*Cos(Maa*bj_DEGTORAD)
set Myy=GetUnitY(Muu)+40*Sin(Maa*bj_DEGTORAD)
call SetUnitFacing(Muu,Maa+180)
call SetUnitX(Muu,Mxx)
call SetUnitY(Muu,Myy)
if(Mnn==1)then
if(Maim !=null)then
call SetUnitX(Maim,Mxx)
call SetUnitY(Maim,Myy)
else
call YDWEMeatHookAim(ors,Mxx,Myy)
endif
endif
endif
set Mnn=Mnn-1
endloop
set lTl=null
set Mu=null
set Muu=null
set Maim=null
endfunction
function YDWEMeatHookPull takes nothing returns nothing
local timer Mt=GetExpiredTimer()
local timer Mtt=(LoadTimerHandle(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("ExtendCache"))))
local string ors=I2S((GetHandleId((Mtt))))
local integer Mn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber"))))
local integer Noe=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ErrorAway"))))
local integer Mnn=0
local integer MakerY
local unit lTl=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("Pudge"))))
local unit Maim
local unit Mu
local unit Muu
local real Mxx
local real Myy
local real Mx
local real My
local real MDis
local real Maa
if(Noe==0)then
call SaveInteger(YDHT,StringHash((ors)),StringHash(("ErrorAway")),(1))
set Mn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber"))))
set Muu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mn)))))
if(Muu !=null)then
set MDis=SquareRoot((GetUnitX(lTl)-GetUnitX(Muu))*(GetUnitX(lTl)-GetUnitX(Muu))+(GetUnitY(lTl)-GetUnitY(Muu))*(GetUnitY(lTl)-GetUnitY(Muu)))
if(MDis<50)then
loop
exitwhen MDis>=50
call RemoveUnit(Muu)
set Mn=Mn-1
call SaveInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber")),(Mn))
set Muu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mn)))))
exitwhen Muu==null
set MDis=SquareRoot((GetUnitX(lTl)-GetUnitX(Muu))*(GetUnitX(lTl)-GetUnitX(Muu))+(GetUnitY(lTl)-GetUnitY(Muu))*(GetUnitY(lTl)-GetUnitY(Muu)))
endloop
else
if(MDis>90)then
set Maa=bj_RADTODEG*Atan2(GetUnitY(lTl)-GetUnitY(Muu),GetUnitX(lTl)-GetUnitX(Muu))
set Mx=GetUnitX(Muu)
set My=GetUnitY(Muu)
loop
exitwhen Mnn*40>MDis-50
set Mnn=Mnn+1
set Mn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber"))))
set Mxx=Mx+Mnn*40*Cos(Maa*bj_DEGTORAD)
set Myy=My+Mnn*40*Sin(Maa*bj_DEGTORAD)
set Mu=CreateUnit(GetOwningPlayer(lTl),'u001',Mxx,Myy,Maa+180)
call SaveUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mn+1))),(Mu))
call SaveInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber")),(Mn+1))
endloop
endif
endif
endif
set Mn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber"))))
call SaveUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mn+1))),(lTl))
call YDWEMeatHookBack(ors)
set MakerY=(LoadInteger(YDHT,StringHash((ors)),StringHash(("breakN"))))
if MakerY==2 then
call PauseTimer(Mt)
call TimerStart(Mt,.03,true,function YDWEIcanFly)
endif
if(Mn==0)then
set Maim=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("Target"))))
call PauseTimer(Mt)
call FlushChildHashtable(YDHT,StringHash((ors)))
call FlushChildHashtable(YDHT,StringHash((I2S((GetHandleId((Mt)))))))
call PolledWait(1)
call DestroyTimer(Mt)
call DestroyTimer(Mtt)
endif
call SaveInteger(YDHT,StringHash((ors)),StringHash(("ErrorAway")),(0))
endif
endfunction
function YDWEMeatHookOut takes string ors,unit lTl returns nothing
local integer Mn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber"))))
local integer Mnn=0
local real Ma=(LoadReal(YDHT,StringHash((ors)),StringHash(("Angle"))))
local real Maa
local group lEw
local boolexpr lTM
local unit Mu
local unit Muu
local real Mxx
local real Myy
set Mu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(1)))))
set Mxx=GetUnitX(Mu)+40*Cos(Ma*bj_DEGTORAD)
set Myy=GetUnitY(Mu)+40*Sin(Ma*bj_DEGTORAD)
call SetUnitX(Mu,YDWECoordinateX(Mxx))
call SetUnitY(Mu,YDWECoordinateY(Myy))
call YDWEMeatHookAim(ors,Mxx,Myy)
loop
exitwhen Mnn>Mn-2
set Mnn=Mnn+1
set Mu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mnn)))))
set Muu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mnn+1)))))
set Maa=bj_RADTODEG*Atan2(GetUnitY(Mu)-GetUnitY(Muu),GetUnitX(Mu)-GetUnitX(Muu))
set Mxx=GetUnitX(Muu)+40*Cos(Maa*bj_DEGTORAD)
set Myy=GetUnitY(Muu)+40*Sin(Maa*bj_DEGTORAD)
call SetUnitX(Muu,YDWECoordinateX(Mxx))
call SetUnitY(Muu,YDWECoordinateY(Myy))
call SetUnitFacing(Muu,Maa)
endloop
endfunction
function YDWEMeatHookThrow takes nothing returns nothing
local timer Mt=GetExpiredTimer()
local string ors=I2S((GetHandleId((Mt))))
local integer Mn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkMax"))))
local integer Mnn=(LoadInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber"))))
local unit lTl=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("Pudge"))))
local real Maa=(LoadReal(YDHT,StringHash((ors)),StringHash(("Angle"))))
local integer lmZ=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("ChainLinkNumberMax"))))
local integer Mnnn=1
local unit Maim
local unit Mu
local unit Muu
local integer Nbreak=0
local real Mx
local real My
local real Mxx
local real Myy
local real MDis
local boolexpr lTM
local timer lTn
local string lCache2
local integer uid1=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("ChainHead"))))
local integer uid2=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("ChainLink"))))
local real timeout=(LoadReal(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("Timeout"))))
if(Mn<lmZ)then
set Mn=Mn+1
call SaveInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkMax")),(Mn))
set Mxx=GetUnitX(lTl)+35*Cos(Maa*bj_DEGTORAD)
set Myy=GetUnitY(lTl)+35*Sin(Maa*bj_DEGTORAD)
if(Mn==1)then
set Mu=CreateUnit(GetOwningPlayer(lTl),uid1,Mxx,Myy,Maa)
call SaveUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(1))),(Mu))
call SaveInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber")),(1))
else
set Muu=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mnn)))))
set MDis=SquareRoot((GetUnitX(lTl)-GetUnitX(Muu))*(GetUnitX(lTl)-GetUnitX(Muu))+(GetUnitY(lTl)-GetUnitY(Muu))*(GetUnitY(lTl)-GetUnitY(Muu)))
if(MDis>34)then
set Mx=GetUnitX(Muu)
set My=GetUnitY(Muu)
set Maa=bj_RADTODEG*Atan2(GetUnitY(lTl)-GetUnitY(Muu),GetUnitX(lTl)-GetUnitX(Muu))
loop
exitwhen MDis-Mnnn*35<0
set Mxx=Mx+Mnnn*35*Cos(Maa*bj_DEGTORAD)
set Myy=My+Mnnn*35*Sin(Maa*bj_DEGTORAD)
set Mu=CreateUnit(GetOwningPlayer(lTl),uid2,Mxx,Myy,Maa+180)
set Mnn=Mnn+1
set Mnnn=Mnnn+1
call SaveUnitHandle(YDHT,StringHash((ors)),StringHash(("ChainLinks"+I2S(Mnn))),(Mu))
call SaveInteger(YDHT,StringHash((ors)),StringHash(("ChainLinkNumber")),(Mnn))
endloop
endif
endif
call YDWEMeatHookOut(ors,lTl)
set Maim=(LoadUnitHandle(YDHT,StringHash((ors)),StringHash(("Target"))))
set Nbreak=(LoadInteger(YDHT,StringHash((ors)),StringHash(("breakN"))))
if(Maim !=null)or(Nbreak==1)then
call PauseTimer(Mt)
set lTn=CreateTimer()
call SaveTimerHandle(YDHT,StringHash((I2S((GetHandleId((lTn)))))),StringHash(("ExtendCache")),(Mt))
call TimerStart(lTn,timeout,true,function YDWEMeatHookPull)
endif
if Nbreak==2 then
call PauseTimer(Mt)
set lTn=CreateTimer()
call SaveTimerHandle(YDHT,StringHash((I2S((GetHandleId((lTn)))))),StringHash(("ExtendCache")),(Mt))
call TimerStart(lTn,timeout,true,function YDWEIcanFly)
endif
else
call PauseTimer(Mt)
set lTn=CreateTimer()
call SaveTimerHandle(YDHT,StringHash((I2S((GetHandleId((lTn)))))),StringHash(("ExtendCache")),(Mt))
call TimerStart(lTn,timeout,true,function YDWEMeatHookPull)
endif
endfunction
function YDWEMeatHook takes unit lTl,location lng,integer uid1,integer uid2,real distance,real dis,real damage,real timeout returns nothing
local location lTo=GetUnitLoc(lTl)
local timer Mt=CreateTimer()
local real lnM=AngleBetweenPoints(lTo,lng)
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("Pudge")),(lTl))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("Angle")),((lnM)*1.0))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("ChainHead")),(uid1))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("ChainLink")),(uid2))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("ChainLinkNumberMax")),(R2I(distance/dis)))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("Timeout")),((timeout)*1.0))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((Mt)))))),StringHash(("Damage")),((damage)*1.0))
call TimerStart(Mt,timeout,true,function YDWEMeatHookThrow)
set lTo=null
set lng=null
set Mt=null
endfunction
function YDWETimerSystemLoop takes nothing returns nothing
local trigger trg=null
local triggercondition tc=null
local unit u=null
local timer t=null
local item it=null
local texttag tt=null
local effect e=null
local integer N=0
local integer i=0
local integer j=0
local integer k=0
local integer RunIndex=0
local integer data=0
local boolean b=false
local boolean addtimes=false
local real R=0
set TimerSystem_Steps=TimerSystem_Steps+1
if TimerSystem_Steps>TimerSystem_StepsMax then
call PauseTimer(TimerSystem_Timer)
set TimerSystem_StepsMax=0
endif
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRunFunction"+I2S(TimerSystem_Steps))),StringHash(("RunFunctionNumber"))))
loop
exitwhen i<=0
set trg=(LoadTriggerHandle(YDHT,StringHash(("YDWETimerRunFunction"+I2S(TimerSystem_Steps))),StringHash(("YDWETimerRunFunctionTrigger"+I2S(i)))))
set tc=(LoadTriggerConditionHandle(YDHT,StringHash(("YDWETimerRunFunction"+I2S(TimerSystem_Steps))),StringHash(("YDWETimerRunFunctionTriggerCondition"+I2S(i)))))
if trg !=null and tc !=null then
set b=TriggerEvaluate(trg)
call TriggerRemoveCondition(trg,tc)
call DestroyTrigger(trg)
endif
set i=i-1
endloop
call FlushChildHashtable(YDHT,StringHash(("YDWETimerRunFunction"+I2S(TimerSystem_Steps))))
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRemoveUnit"+I2S(TimerSystem_Steps))),StringHash(("RemoveUnitNumber"))))
loop
exitwhen i<=0
set u=(LoadUnitHandle(YDHT,StringHash(("YDWETimerRemoveUnit"+I2S(TimerSystem_Steps))),StringHash((I2S(i)))))
if u !=null then
call RemoveUnit(u)
endif
set i=i-1
endloop
call FlushChildHashtable(YDHT,StringHash(("YDWETimerRemoveUnit"+I2S(TimerSystem_Steps))))
set i=(LoadInteger(YDHT,StringHash(("YDWETimerDestroyTimer"+I2S(TimerSystem_Steps))),StringHash(("DestroyTimerNumber"))))
loop
exitwhen i<=0
set t=(LoadTimerHandle(YDHT,StringHash(("YDWETimerDestroyTimer"+I2S(TimerSystem_Steps))),StringHash((I2S(i)))))
if t !=null then
call DestroyTimer(t)
endif
set i=i-1
endloop
call FlushChildHashtable(YDHT,StringHash(("YDWETimerDestroyTimer"+I2S(TimerSystem_Steps))))
set i=(LoadInteger(YDHT,StringHash(("YDWETimerDestroyTimer"+I2S(TimerSystem_Steps))),StringHash(("DestroyTimerNumber"))))
loop
exitwhen i<=0
set it=(LoadItemHandle(YDHT,StringHash(("YDWETimerRemoveItem"+I2S(TimerSystem_Steps))),StringHash((I2S(i)))))
if it !=null then
call RemoveItem(it)
endif
set i=i-1
endloop
call FlushChildHashtable(YDHT,StringHash(("YDWETimerRemoveItem"+I2S(TimerSystem_Steps))))
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRunTriggerSingle"+I2S(TimerSystem_Steps))),StringHash(("RunTriggerNumber"))))
loop
exitwhen i<=0
set trg=(LoadTriggerHandle(YDHT,StringHash(("YDWETimerRunTriggerSingle"+I2S(TimerSystem_Steps))),StringHash((I2S(i)))))
if trg !=null then
call TriggerExecute(trg)
endif
set i=i-1
endloop
call FlushChildHashtable(YDHT,StringHash(("YDWETimerRemoveTriggerSingle"+I2S(TimerSystem_Steps))))
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(TimerSystem_Steps))),StringHash(("RunTriggerNumber"))))
loop
exitwhen i<=0
set trg=(LoadTriggerHandle(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(TimerSystem_Steps))),StringHash(("Trigger"+I2S(i)))))
if trg !=null then
set R=(LoadReal(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(TimerSystem_Steps))),StringHash(("YDWETimerRunTriggerTimeout"+I2S(i)))))
set RunIndex=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(TimerSystem_Steps))),StringHash(("YDWETimerRunTriggerStoreAddress"+I2S(i)))))
set data=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("YDWETimerRunIndex"+I2S(RunIndex)))))
if(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("YDWETimerRunIndexOverData"+I2S(data)))))!=0 then
set b=(LoadBoolean(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(TimerSystem_Steps))),StringHash(("YDWETimerRunTriggerBoolean"+I2S(i)))))
set k=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(TimerSystem_Steps))),StringHash(("YDWETimerRunTriggerTimes"+I2S(i)))))
else
set b=false
set k=0
endif
set N=TimerSystem_Steps+R2I(R/TimerSystem_Timeout)
if b==true then
set j=(LoadInteger(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("RunTriggerNumber"))))
set j=j+1
call SaveInteger(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("RunTriggerNumber")),(j))
call SaveTriggerHandle(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("Trigger"+I2S(j))),(trg))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerTimeout"+I2S(j))),((R)*1.0))
call SaveBoolean(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerBoolean"+I2S(j))),(b))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerStoreAddress"+I2S(j))),(RunIndex))
set addtimes=true
else
set k=k-1
if k>0 then
set j=(LoadInteger(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("RunTriggerNumber"))))
set j=j+1
call SaveInteger(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("RunTriggerNumber")),(j))
call SaveTriggerHandle(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("Trigger"+I2S(j))),(trg))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerTimes"+I2S(j))),(k))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerTimeout"+I2S(j))),((R)*1.0))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerStoreAddress"+I2S(j))),(RunIndex))
set addtimes=true
endif
endif
if(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("YDWETimerRunIndexOverData"+I2S(data)))))!=0 then
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("RunIndex")),(RunIndex))
call ConditionalTriggerExecute(trg)
endif
endif
set i=i-1
endloop
if addtimes==true then
set TimerSystem_StepsMax=TimerSystem_StepsMax+R2I(R/TimerSystem_Timeout)
set addtimes=false
endif
call FlushChildHashtable(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(TimerSystem_Steps))))
set i=(LoadInteger(YDHT,StringHash(("YDWETimerDestroyTextTag"+I2S(TimerSystem_Steps))),StringHash(("DestroyTextTagNumber"))))
loop
exitwhen i<=0
set tt=(LoadTextTagHandle(YDHT,StringHash(("YDWETimerDestroyTextTag"+I2S(TimerSystem_Steps))),StringHash((I2S(i)))))
if tt !=null then
call SetTextTagPermanent(tt,false)
call DestroyTextTag(tt)
endif
set i=i-1
endloop
call FlushChildHashtable(YDHT,StringHash(("YDWETimerDestroyTextTag"+I2S(TimerSystem_Steps))))
set i=(LoadInteger(YDHT,StringHash(("YDWETimerDestroyEffect"+I2S(TimerSystem_Steps))),StringHash(("DestroyEffectNumber"))))
loop
exitwhen i<=0
set e=(LoadEffectHandle(YDHT,StringHash(("YDWETimerDestroyEffect"+I2S(TimerSystem_Steps))),StringHash((I2S(i)))))
if e !=null then
call DestroyEffect(e)
endif
set i=i-1
endloop
call FlushChildHashtable(YDHT,StringHash(("YDWETimerDestroyEffect"+I2S(TimerSystem_Steps))))
set trg=null
set tc=null
set u=null
set t=null
set trg=null
set it=null
set tt=null
endfunction
function YDWETimerSystemGetRunIndex takes nothing returns integer
return TimerSystem_RunIndex
endfunction
function YDWETimerSystem takes real time returns nothing
local integer N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
if TimerSystem_StepsMax==0 and TimerSystem_Timer !=null then
call ResumeTimer(TimerSystem_Timer)
call TimerStart(TimerSystem_Timer,TimerSystem_Timeout,true,function YDWETimerSystemLoop)
endif
if TimerSystem_StepsMax<N then
set TimerSystem_StepsMax=N
endif
if TimerSystem_Timer==null then
set TimerSystem_Timer=CreateTimer()
call TimerStart(TimerSystem_Timer,TimerSystem_Timeout,true,function YDWETimerSystemLoop)
endif
endfunction
function YDWETimerRunFunction takes real time,boolexpr be returns nothing
local integer N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
local integer i=(LoadInteger(YDHT,StringHash(("YDWETimerRunFunction"+I2S(N))),StringHash(("RunFunctionNumber"))))
local trigger trg=CreateTrigger()
local triggercondition tc=TriggerAddCondition(trg,be)
if time==0 then
call TriggerRemoveCondition(trg,tc)
call DestroyTrigger(trg)
else
set N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRunFunction"+I2S(N))),StringHash(("RunFunctionNumber"))))
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWETimerRunFunction"+I2S(N))),StringHash(("RunFunctionNumber")),(i))
call SaveTriggerHandle(YDHT,StringHash(("YDWETimerRunFunction"+I2S(N))),StringHash(("YDWETimerRunFunctionTrigger"+I2S(i))),(trg))
call SaveTriggerConditionHandle(YDHT,StringHash(("YDWETimerRunFunction"+I2S(N))),StringHash(("YDWETimerRunFunctionTriggerCondition"+I2S(i))),(tc))
call YDWETimerSystem(time)
endif
set trg=null
set tc=null
endfunction
function YDWETimerRemoveUnit takes real time,unit u returns nothing
local integer N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
local integer i=(LoadInteger(YDHT,StringHash(("YDWETimerRemoveUnit"+I2S(N))),StringHash(("RemoveUnitNumber"))))
if time==0 then
call RemoveUnit(u)
else
set N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRemoveUnit"+I2S(N))),StringHash(("RemoveUnitNumber"))))
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWETimerRemoveUnit"+I2S(N))),StringHash(("RemoveUnitNumber")),(i))
call SaveUnitHandle(YDHT,StringHash(("YDWETimerRemoveUnit"+I2S(N))),StringHash((I2S(i))),(u))
call YDWETimerSystem(time)
endif
endfunction
function YDWETimerDestroyTimer takes real time,timer t returns nothing
local integer N=0
local integer i=0
if time==0 then
call DestroyTimer(t)
else
set N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
set i=(LoadInteger(YDHT,StringHash(("YDWETimerDestroyTimer"+I2S(N))),StringHash(("DestroyTimerNumber"))))
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWETimerDestroyTimer"+I2S(N))),StringHash(("DestroyTimerNumber")),(i))
call SaveTimerHandle(YDHT,StringHash(("YDWETimerDestroyTimer"+I2S(N))),StringHash((I2S(i))),(t))
call YDWETimerSystem(time)
endif
endfunction
function YDWETimerRemoveItem takes real time,item it returns nothing
local integer N=0
local integer i=0
if time==0 then
call RemoveItem(it)
else
set N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRemoveItem"+I2S(N))),StringHash(("RemoveItemNumber"))))
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWETimerRemoveItem"+I2S(N))),StringHash(("RemoveItemNumber")),(i))
call SaveItemHandle(YDHT,StringHash(("YDWETimerRemoveItem"+I2S(N))),StringHash((I2S(i))),(it))
call YDWETimerSystem(time)
endif
endfunction
function YDWETimerRunPeriodicTrigger takes real timeout,trigger trg,boolean b,integer times,integer data returns nothing
local integer N=0
local integer i=0
if timeout<0.01 then
return
else
set TimerSystem_RunIndex=TimerSystem_RunIndex+1
set N=TimerSystem_Steps+R2I(timeout/TimerSystem_Timeout)
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("RunTriggerNumber"))))
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("RunTriggerNumber")),(i))
call SaveReal(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerTimeout"+I2S(i))),((timeout)*1.0))
call SaveBoolean(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerBoolean"+I2S(i))),(b))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerTimes"+I2S(i))),(times))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg))))+I2S(N))),StringHash(("YDWETimerRunTriggerStoreAddress"+I2S(i))),(TimerSystem_RunIndex))
call SaveBoolean(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("YDWETimerRunIndex"+I2S(data))),(true))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("YDWETimerRunIndexOverData"+I2S(data))),(TimerSystem_RunIndex))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("YDWETimerRunIndex"+I2S(TimerSystem_RunIndex))),(data))
call SaveTriggerHandle(YDHT,StringHash(("YDWETimerRunTrigger"+I2S(N))),StringHash(("Trigger"+I2S(i))),(trg))
call YDWETimerSystem(timeout)
endif
endfunction
function YDWETimerRunPeriodicTriggerOver takes trigger trg,integer data returns nothing
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("YDWETimerRunIndexOverData"+I2S(data))),(0))
endfunction
function YDWETimerRunTrigger takes real time,trigger trg returns nothing
local integer N=0
local integer i=0
if time==0 then
call TriggerExecute(trg)
else
set N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
set i=(LoadInteger(YDHT,StringHash(("YDWETimerRunTriggerSingle"+I2S(N))),StringHash(("RunTriggerNumber"))))
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWETimerRunTriggerSingle"+I2S(N))),StringHash(("RunTriggerNumber")),(i))
call SaveTriggerHandle(YDHT,StringHash(("YDWETimerRunTriggerSingle"+I2S(N))),StringHash((I2S(i))),(trg))
call YDWETimerSystem(time)
endif
endfunction
function YDWETimerDestroyTextTag takes real time,texttag tt returns nothing
local integer N=0
local integer i=0
if time==0 then
call DestroyTextTag(tt)
else
set N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
set i=(LoadInteger(YDHT,StringHash(("YDWETimerDestroyTextTag"+I2S(N))),StringHash(("DestroyTextTagNumber"))))
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWETimerDestroyTextTag"+I2S(N))),StringHash(("DestroyTextTagNumber")),(i))
call SaveTextTagHandle(YDHT,StringHash(("YDWETimerDestroyTextTag"+I2S(N))),StringHash((I2S(i))),(tt))
call YDWETimerSystem(time)
endif
endfunction
function YDWETimerDestroyEffect takes real time,effect e returns nothing
local integer N=0
local integer i=0
if time==0 then
call DestroyEffect(e)
else
set N=TimerSystem_Steps+R2I(time/TimerSystem_Timeout)
set i=(LoadInteger(YDHT,StringHash(("YDWETimerDestroyEffect"+I2S(N))),StringHash(("DestroyEffectNumber"))))
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWETimerDestroyEffect"+I2S(N))),StringHash(("DestroyEffectNumber")),(i))
call SaveEffectHandle(YDHT,StringHash(("YDWETimerDestroyEffect"+I2S(N))),StringHash((I2S(i))),(e))
call YDWETimerSystem(time)
endif
endfunction
function YDWEAIOrderRun takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer count=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder_Count"))))
local integer order=0
local integer pro=0
local integer index=0
local integer i=0
local integer a=0
set a=GetRandomInt(0,100*count)
loop
set pro=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder_Probability"+I2S(i)))))
if 100*i<=a and a<100*i+pro then
set order=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder"+I2S(i)))))
set index=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder_Index"+I2S(i)))))
endif
exitwhen i>=count
set i=i+1
endloop
if index==1 then
call IssueTargetOrderById(u,order,GetEventTargetUnit())
elseif index==2 then
call IssuePointOrderById(u,order,GetUnitX(GetEventTargetUnit()),GetUnitY(GetEventTargetUnit()))
elseif index==3 then
call IssueImmediateOrderById(u,order)
elseif index==4 then
call IssueTargetOrderById(u,order,u)
endif
set u=null
return false
endfunction
function YDWEAddAIOrder takes unit u,integer N,integer index,string orderA,string orderB,string orderC,integer probability returns nothing
local integer i=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder_Count"))))
local trigger trg
local string order=null
if i==0 then
set trg=CreateTrigger()
if N==1 then
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_TARGET_IN_RANGE)
else
call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_ATTACKED)
endif
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryTrigger")),((GetHandleId((trg)))))
call SaveTriggerConditionHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("TriggerCondition")),(TriggerAddCondition(trg,Condition(function YDWEAIOrderRun))))
endif
if index==1 then
set order=orderA
elseif index==2 then
set order=orderB
elseif index==3 then
set order=orderC
elseif index==4 then
set order=orderA
endif
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder"+I2S(i))),(OrderId(order)))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder_Probability"+I2S(i))),(probability))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder_Index"+I2S(i))),(index))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryAIOrder_Count")),(i+1))
set trg=null
endfunction
function YDWEFlushAIOrder takes unit u returns nothing
local trigger trg=(LoadTriggerHandle(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("MercenaryTrigger"))))
call TriggerRemoveCondition(trg,(LoadTriggerConditionHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("TriggerCondition")))))
call DestroyTrigger(trg)
call FlushChildHashtable(YDHT,StringHash((I2S((GetHandleId((trg)))))))
call FlushChildHashtable(YDHT,StringHash((I2S((GetHandleId((u)))))))
set trg=null
endfunction
function YDWEIsItemSwitch takes unit u returns boolean
return(LoadBoolean(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("YDWEItemAbilitySystemTriggerClose"))))
endfunction
function YDWEItemSwitch takes unit Ua,unit Ub returns nothing
local item array Ia
local item array Ib
local integer i=0
call SaveBoolean(YDHT,StringHash((I2S((GetHandleId((Ua)))))),StringHash(("YDWEItemAbilitySystemTriggerClose")),(true))
call SetUnitOwner(Ub,GetOwningPlayer(Ua),false)
loop
exitwhen i>5
if UnitItemInSlot(Ua,i)!=null then
set Ia[i]=UnitItemInSlot(Ua,i)
call UnitRemoveItemFromSlot(Ua,i)
endif
if UnitItemInSlot(Ub,i)!=null then
set Ib[i]=UnitItemInSlot(Ub,i)
call UnitRemoveItemFromSlot(Ub,i)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if Ia[i]==null then
call UnitAddItem(Ub,CreateItem('mort',GetUnitX(Ub),GetUnitY(Ub)))
else
call UnitAddItem(Ub,Ia[i])
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if Ib[i]==null then
call UnitAddItem(Ua,CreateItem('mort',GetUnitX(Ua),GetUnitY(Ua)))
else
call UnitAddItem(Ua,Ib[i])
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if GetItemTypeId(UnitItemInSlot(Ua,i))=='mort' then
call RemoveItem(UnitItemInSlot(Ua,i))
endif
if GetItemTypeId(UnitItemInSlot(Ub,i))=='mort' then
call RemoveItem(UnitItemInSlot(Ub,i))
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
set Ia[i]=null
set Ib[i]=null
set i=i+1
endloop
call SetUnitOwner(Ub,Player(PLAYER_NEUTRAL_PASSIVE),false)
call SaveBoolean(YDHT,StringHash((I2S((GetHandleId((Ua)))))),StringHash(("YDWEItemAbilitySystemTriggerClose")),(false))
endfunction
function YDWEDoubleItemSlotByAbility_CON takes nothing returns boolean
local unit u=null
local trigger trg=GetTriggeringTrigger()
local unit hero=GetTriggerUnit()
local integer ab=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("Ability"))))
local integer ItemSlotMax=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotMax"))))
local integer i=0
if GetSpellAbilityId()!=ab then
set u=null
set trg=null
set hero=null
return false
endif
if ItemSlotMax==1 then
set u=null
set trg=null
set hero=null
return false
endif
set i=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotNum"))))
set i=i+1
if i>ItemSlotMax then
set i=1
endif
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotNum")),(i))
set u=(LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash((I2S(i)))))
call YDWEItemSwitch(hero,u)
call SetUnitAbilityLevel(hero,ab,i)
if i==1 then
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash((I2S(ItemSlotMax))),(u))
else
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash((I2S(i-1))),(u))
endif
set u=null
set trg=null
set hero=null
return false
endfunction
function YDWEDoubleItemSlotByAbility takes unit hero,integer ab,integer uid,integer MaxItemSlot returns nothing
local integer i=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("MulItemSlotByAbility"))))
local trigger trg=null
local unit u=null
if i==0 then
set trg=CreateTrigger()
call TriggerRegisterUnitEvent(trg,hero,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(trg,Condition(function YDWEDoubleItemSlotByAbility_CON))
call SaveTriggerHandle(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("MulItemSlotByAbility")),(trg))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("Ability")),(ab))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotMax")),(MaxItemSlot))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotNum")),(1))
if MaxItemSlot>1 then
loop
exitwhen MaxItemSlot==1
set u=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),uid,0,0,0)
call SaveBoolean(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("YDWEItemAbilitySystemTriggerClose")),(true))
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash((I2S(MaxItemSlot))),(u))
set MaxItemSlot=MaxItemSlot-1
set u=null
endloop
endif
endif
set trg=null
endfunction
function YDWEDoubleItemSlotByItem_CON takes nothing returns boolean
local unit u=null
local trigger trg=GetTriggeringTrigger()
local unit hero=GetTriggerUnit()
local integer itid=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemTypeId"))))
local integer ItemSlotMax=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotMax"))))
local integer i=0
if GetItemTypeId(GetManipulatedItem())!=itid then
set u=null
set trg=null
set hero=null
return false
endif
if ItemSlotMax==1 then
set u=null
set trg=null
set hero=null
return false
endif
set i=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotNum"))))
set i=i+1
if i>ItemSlotMax then
set i=1
endif
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotNum")),(i))
set u=(LoadUnitHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash((I2S(i)))))
call YDWEItemSwitch(hero,u)
call SetItemCharges(UnitItemInSlot(hero,5),i)
if i==1 then
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash((I2S(ItemSlotMax))),(u))
else
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash((I2S(i-1))),(u))
endif
set u=null
set trg=null
set hero=null
return false
endfunction
function YDWEDoubleItemSlotByItem takes unit hero,integer ItemTypeId,integer uid,integer MaxItemSlot returns nothing
local integer i=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("MulItemSlotByItem"))))
local trigger trg=null
local unit u=null
local item it=null
if i==0 then
set trg=CreateTrigger()
call TriggerRegisterUnitEvent(trg,hero,EVENT_UNIT_USE_ITEM)
call TriggerAddCondition(trg,Condition(function YDWEDoubleItemSlotByItem_CON))
call SaveTriggerHandle(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("MulItemSlotByItem")),(trg))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemTypeId")),(ItemTypeId))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotMax")),(MaxItemSlot))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotNum")),(1))
if MaxItemSlot>1 then
loop
exitwhen MaxItemSlot==1
set u=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),uid,0,0,0)
call SaveBoolean(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("YDWEItemAbilitySystemTriggerClose")),(true))
call SaveUnitHandle(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash((I2S(MaxItemSlot))),(u))
set it=CreateItem(ItemTypeId,0,0)
call UnitAddItem(u,it)
call UnitDropItemSlot(u,it,5)
set MaxItemSlot=MaxItemSlot-1
set u=null
set it=null
endloop
endif
endif
set trg=null
endfunction
function YDWELocalVariableInitiliation takes nothing returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
set TriggerRunSteps=TriggerRunSteps+1
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps")),(TriggerRunSteps))
endfunction
function YDWEWaitForLocalVariable takes real time returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
call TriggerSleepAction(time)
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps")),(TriggerRunSteps))
endfunction
function YDWELocalVariableEnd takes nothing returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
call FlushChildHashtable(YDHT,StringHash((dir)))
endfunction
function YDWESetLocalVariableInteger takes string s,integer i returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
call SaveInteger(YDHT,StringHash((dir)),StringHash((s)),(i))
endfunction
function YDWEGetLocalVariableInteger takes string s returns integer
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
return(LoadInteger(YDHT,StringHash((dir)),StringHash((s))))
endfunction
function YDWESetLocalVariableReal takes string s,real R returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
call SaveReal(YDHT,StringHash((dir)),StringHash((s)),((R)*1.0))
endfunction
function YDWEGetLocalVariableReal takes string s returns real
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
return(LoadReal(YDHT,StringHash((dir)),StringHash((s))))
endfunction
function YDWESetLocalVariableString takes string s,string str returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
call SaveStr(YDHT,StringHash((dir)),StringHash((s)),(str))
endfunction
function YDWEGetLocalVariableString takes string s returns string
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
return(LoadStr(YDHT,StringHash((dir)),StringHash((s))))
endfunction
function YDWESetLocalVariableBoolean takes string s,boolean bl returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
call SaveBoolean(YDHT,StringHash((dir)),StringHash((s)),(bl))
endfunction
function YDWEGetLocalVariableBoolean takes string s returns boolean
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
return(LoadBoolean(YDHT,StringHash((dir)),StringHash((s))))
endfunction
function YDWESetLocalVariableUnit takes string s,unit u returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
call SaveUnitHandle(YDHT,StringHash((dir)),StringHash((s)),(u))
endfunction
function YDWEGetLocalVariableUnit takes string s returns unit
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
return(LoadUnitHandle(YDHT,StringHash((dir)),StringHash((s))))
endfunction
function YDWESetLocalVariableItem takes string s,item it returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
call SaveItemHandle(YDHT,StringHash((dir)),StringHash((s)),(it))
endfunction
function YDWEGetLocalVariableItem takes string s returns item
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
return(LoadItemHandle(YDHT,StringHash((dir)),StringHash((s))))
endfunction
function YDWESetLocalVariableLocation takes string s,location point returns nothing
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
call SaveLocationHandle(YDHT,StringHash((dir)),StringHash((s)),(point))
endfunction
function YDWEGetLocalVariableLocation takes string s returns location
local integer TriggerRunSteps=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))
local string dir=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(TriggerRunSteps)
return(LoadLocationHandle(YDHT,StringHash((dir)),StringHash((s))))
endfunction
function YDWEItemAbilityStorage takes integer itid,integer ab returns nothing
local integer index=(LoadInteger(YDHT,StringHash((I2S(itid))),StringHash(("AbilityStorageIndex"))))
set index=index+1
call SaveInteger(YDHT,StringHash((I2S(itid))),StringHash(("AbilityStorage"+I2S(index))),(ab))
call SaveInteger(YDHT,StringHash((I2S(itid))),StringHash(("AbilityStorageIndex")),(index))
endfunction
function YDWEItemAbilitySystemByAbility_CON takes nothing returns boolean
local unit hero=GetTriggerUnit()
local item it=GetManipulatedItem()
local trigger trg=(LoadTriggerHandle(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("MulItemSlotByAbility"))))
local integer itid=GetItemTypeId(it)
local integer index=(LoadInteger(YDHT,StringHash((I2S(itid))),StringHash(("AbilityStorageIndex"))))
local integer array skills
local integer i=0
local integer N=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((trg)))))),StringHash(("ItemSlotNum"))))
local boolean OnOff=(LoadBoolean(YDHT,StringHash((I2S((GetHandleId((hero)))))),StringHash(("YDWEItemAbilitySystemTriggerClose"))))
if index==0 or OnOff==true then
set it=null
set hero=null
set trg=null
return false
endif
loop
set i=i+1
exitwhen i>index
set skills[i]=(LoadInteger(YDHT,StringHash((I2S(itid))),StringHash(("AbilityStorage"+I2S(i)))))
if GetTriggerEventId()==ConvertUnitEvent(48)then
call UnitRemoveAbility(hero,skills[i])
elseif GetTriggerEventId()==ConvertUnitEvent(49)then
call UnitAddAbility(hero,skills[i])
call UnitMakeAbilityPermanent(hero,true,skills[i])
endif
endloop
set it=null
set hero=null
set trg=null
return false
endfunction
function YDWEItemAbilitySystem takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterAnyUnitEventBJ(trg,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(trg,Condition(function YDWEItemAbilitySystemByAbility_CON))
set trg=null
endfunction
function YDWEAnyUnitDamagedTriggerAction takes nothing returns nothing
local integer i=(LoadInteger(YDHT,StringHash(("YDWESyStemAnyUnitDamagedTrigger")),StringHash(("TriggerNumber"))))
local trigger array trg
loop
set trg[i]=(LoadTriggerHandle(YDHT,StringHash(("YDWESyStemAnyUnitDamagedTrigger")),StringHash((I2S(i)))))
if trg[i]!=null and TriggerEvaluate(trg[i])==true and IsTriggerEnabled(trg[i])==true then
call TriggerExecute(trg[i])
endif
set trg[i]=null
set i=i-1
exitwhen i<=0
endloop
endfunction
function YDWEAnyUnitDamagedEnumUnitFunction takes nothing returns nothing
local trigger trg=(LoadTriggerHandle(YDHT,StringHash(("YDWESyStemAnyUnitDamagedTrigger")),StringHash(("Trigger"))))
if GetUnitAbilityLevel(GetEnumUnit(),'Aloc')==0 then
call TriggerRegisterUnitEvent(trg,GetEnumUnit(),EVENT_UNIT_DAMAGED)
endif
set trg=null
endfunction
function YDWESyStemAnyUnitEnterMapRectTriggerAction takes nothing returns nothing
local trigger trg=(LoadTriggerHandle(YDHT,StringHash(("YDWESyStemAnyUnitDamagedTrigger")),StringHash(("Trigger"))))
if GetUnitAbilityLevel(GetTriggerUnit(),'Aloc')==0 then
call TriggerRegisterUnitEvent(trg,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
endif
set trg=null
endfunction
function YDWEAnyUnitDamagedEnumUnit takes nothing returns nothing
local trigger trg=CreateTrigger()
local group g=CreateGroup()
set g=GetUnitsInRectAll(GetPlayableMapRect())
call ForGroup(g,function YDWEAnyUnitDamagedEnumUnitFunction)
call TriggerRegisterEnterRectSimple(trg,GetPlayableMapRect())
call TriggerAddAction(trg,function YDWESyStemAnyUnitEnterMapRectTriggerAction)
call SaveTriggerHandle(YDHT,StringHash(("YDWESyStemAnyUnitEnterMapRectTrigger")),StringHash(("Trigger")),(trg))
call DestroyGroup(g)
set trg=null
set g=null
endfunction
function YDWESyStemAnyUnitDamagedRegistTrigger takes trigger trg returns nothing
local integer i=(LoadInteger(YDHT,StringHash(("YDWESyStemAnyUnitDamagedTrigger")),StringHash(("TriggerNumber"))))
local trigger SyStemTriger=null
if i==0 then
set SyStemTriger=CreateTrigger()
call TriggerAddAction(SyStemTriger,function YDWEAnyUnitDamagedTriggerAction)
call SaveTriggerHandle(YDHT,StringHash(("YDWESyStemAnyUnitDamagedTrigger")),StringHash(("Trigger")),(SyStemTriger))
call YDWEAnyUnitDamagedEnumUnit()
endif
set i=i+1
call SaveInteger(YDHT,StringHash(("YDWESyStemAnyUnitDamagedTrigger")),StringHash(("TriggerNumber")),(i))
call SaveTriggerHandle(YDHT,StringHash(("YDWESyStemAnyUnitDamagedTrigger")),StringHash((I2S(i))),(trg))
set SyStemTriger=null
endfunction
function YDWEGetGameCurrentTime takes nothing returns integer
return TimerSystem_BigSteps
endfunction
function YDWEGameTimeElapse takes nothing returns nothing
set TimerSystem_BigSteps=TimerSystem_BigSteps+1
endfunction
function YDWEGameStartActions takes nothing returns nothing
set TimerSystem_BigTimer=CreateTimer()
call TimerStart(TimerSystem_BigTimer,TimerSystem_BigTimeout,true,function YDWEGameTimeElapse)
call YDWEItemAbilitySystem()
endfunction
function InitializeYD takes nothing returns nothing
local trigger trg=CreateTrigger()
set YDHT=InitHashtable()
call TriggerRegisterTimerEventSingle(trg,0.00)
call TriggerAddAction(trg,function YDWEGameStartActions)
set trg=null
endfunction
function s__TimerPatternDummy_MonomerVeil_onDestroy takes integer this returns nothing
local boolean IsVisible=IsUnitHidden(s__TimerPatternDummy_MonomerVeil_Clerk[this])
if(IsVisible)then
call KillUnit(s__TimerPatternDummy_MonomerVeil_Clerk[this])
call RemoveUnit(s__TimerPatternDummy_MonomerVeil_Clerk[this])
else
call RemoveUnit(s__TimerPatternDummy_MonomerVeil_Clerk[this])
endif
endfunction
function s__TimerPatternDummy_MonomerVeil_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TimerPatternDummy_MonomerVeil_V[this]!=-1)then
return
endif
call s__TimerPatternDummy_MonomerVeil_onDestroy(this)
set si__TimerPatternDummy_MonomerVeil_V[this]=si__TimerPatternDummy_MonomerVeil_F
set si__TimerPatternDummy_MonomerVeil_F=this
endfunction
function YDWETimerPatternDummyEliminate takes nothing returns nothing
local integer Mode=(YDWETimerPatternHashABCGetTimerStructA(GetExpiredTimer()))
call YDWETimerPatternHashABCClearTimerStructA(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function YDWETimerPatternDummyCreateAider takes unit Caster,real thisX,real thisY,real Extent,real Loftiness,integer SpellId,integer SkillLV,unit Target,real thatX,real thatY,string Dictate returns integer
local integer Mode=s__TimerPatternDummy_MonomerVeil__allocate()
local timer t=CreateTimer()
local integer i=0
local integer uid=0
if IsTerrainPathable(thisX,thisY,PATHING_TYPE_WALKABILITY)==false and GetUnitState(Caster,UNIT_STATE_LIFE)>0 then
set uid=(LoadInteger(YDHT,StringHash((I2S((GetHandleId((Caster)))))),StringHash(("TimerPattern_uid"))))
set s__TimerPatternDummy_MonomerVeil_Clerk[Mode]=CreateUnit(GetOwningPlayer(Caster),uid,thisX,thisY,0)
call YDWETimerRemoveUnit(Extent,s__TimerPatternDummy_MonomerVeil_Clerk[Mode])
call UnitAddAbility(s__TimerPatternDummy_MonomerVeil_Clerk[Mode],SpellId)
call SetUnitAbilityLevel(s__TimerPatternDummy_MonomerVeil_Clerk[Mode],SpellId,SkillLV)
call SetUnitFlyHeight(s__TimerPatternDummy_MonomerVeil_Clerk[Mode],Loftiness,0.)
if Target !=null then
call IssueTargetOrder(s__TimerPatternDummy_MonomerVeil_Clerk[Mode],Dictate,Target)
elseif thatX !=0.00 and thatY !=0.00 then
call IssuePointOrder(s__TimerPatternDummy_MonomerVeil_Clerk[Mode],Dictate,thatX,thatY)
else
call IssueImmediateOrder(s__TimerPatternDummy_MonomerVeil_Clerk[Mode],Dictate)
endif
call YDWETimerPatternHashABCSetTimerStructA(t,Mode)
call TimerStart(t,Extent,false,function YDWETimerPatternDummyEliminate)
set t=null
else
endif
return Mode
endfunction
function YDWETimerPatternDummyRecurrence takes unit Hub,integer Number,real Path,integer Id,real Expectancy,integer Lord,integer Bout,string Behest1,string Behest2,string Behest3,unit Aim,string Modle,string Actplay returns nothing
local unit array beau
local integer i=1
local real array x
local real array y
loop
exitwhen i>Number
set x[i]=GetUnitX(Hub)+Path*Cos((360/Number)*i*.01745)
set y[i]=GetUnitX(Hub)+Path*Sin((360/Number)*i*.01745)
set beau[i]=CreateUnit(GetOwningPlayer(Hub),Id,x[i],y[i],((360/Number)*i))
call DestroyEffect(AddSpecialEffect(Modle,x[i],y[i]))
call UnitApplyTimedLife(beau[i],'BHwe',Expectancy)
call SetUnitAnimation(beau[i],Actplay)
call SetUnitAbilityLevel(beau[i],Bout,GetUnitAbilityLevel(Hub,Lord))
call IssueImmediateOrder(beau[i],Behest1)
call IssuePointOrder(beau[i],Behest2,x[i],y[i])
call IssueTargetOrder(beau[i],Behest3,Aim)
set beau[i]=null
set i=i+1
endloop
endfunction
function YDWETimerPatternEnemyFilter takes unit u,unit caster returns boolean
return IsUnitType(u,UNIT_TYPE_MAGIC_IMMUNE)==false and IsUnitType(u,UNIT_TYPE_RESISTANT)==false and IsUnitType(u,UNIT_TYPE_SLEEPING)==false and GetUnitState(u,UNIT_STATE_LIFE)>0.405 and IsUnitType(u,UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(u)==false and IsUnitHidden(u)==false and IsUnitEnemy(u,GetOwningPlayer(caster))and IsUnitVisible(u,GetOwningPlayer(caster))and YDWETimerPatternInvulnerabilityDetectorIsUnitInvulnerable(u)==false
endfunction
function YDWETimerPatternTreeFilter takes nothing returns boolean
local integer id=GetDestructableTypeId(GetFilterDestructable())
return id=='LTlt' or id=='ATtr' or id=='BTtw' or id=='KTtw' or id=='YTft' or id=='JTct' or id=='YTst' or id=='YTct' or id=='YTwt' or id=='JTtw' or id=='DTsh' or id=='FTtw' or id=='CTtr' or id=='ITtw' or id=='NTtw' or id=='OTtw' or id=='ZTtw' or id=='WTst' or id=='GTsh' or id=='VTlt' or id=='WTtw' or id=='ATtc' or id=='BTtc' or id=='CTtc' or id=='ITtc' or id=='NTtc' or id=='ZTtc'
endfunction
function s__TimerPattern_operate_onDestroy takes integer this returns nothing
call DestroyGroup(s__TimerPattern_operate_g[this])
set s__TimerPattern_operate_u[this]=null
set s__TimerPattern_operate_g[this]=null
endfunction
function s__TimerPattern_operate_deallocate takes integer this returns nothing
if this==null then
return
elseif(si__TimerPattern_operate_V[this]!=-1)then
return
endif
call s__TimerPattern_operate_onDestroy(this)
set si__TimerPattern_operate_V[this]=si__TimerPattern_operate_F
set si__TimerPattern_operate_F=this
endfunction
function YDWETimerPatternTreeKill takes nothing returns nothing
local destructable d=GetEnumDestructable()
if GetWidgetLife(d)>0.405 then
call KillDestructable(d)
endif
set d=null
endfunction
function YDWETimerPatternRetrieve takes unit u,boolean wither returns nothing
if not(wither)then
call SetUnitFlyHeight(u,GetUnitDefaultFlyHeight(u),5000.)
call SetUnitAnimation(u,"stand")
call SetUnitTimeScale(u,1)
if(GetLocalPlayer()==GetOwningPlayer(u))then
call ClearSelection()
call SelectUnit(u,true)
endif
else
call RemoveUnit(u)
endif
endfunction
function YDWETimerPatternDamage takes real x,real y returns nothing
local integer k=TimerPattern_Temp_Struct
local group opt=CreateGroup()
local unit f=null
local unit u=null
local string part=(LoadStr(YDHT,StringHash((I2S((GetHandleId((s__TimerPattern_operate_u[k])))))),StringHash(("TimerPattern_part"))))
local string path=(LoadStr(YDHT,StringHash((I2S((GetHandleId((s__TimerPattern_operate_u[k])))))),StringHash(("TimerPattern_dsfx"))))
call GroupEnumUnitsInRange(opt,x,y,TimerPattern_coll,null)
loop
set f=FirstOfGroup(opt)
exitwhen f==null
if IsUnitInGroup(f,s__TimerPattern_operate_g[k])==false then
if YDWETimerPatternEnemyFilter(f,s__TimerPattern_operate_u[k])then
call GroupAddUnit(s__TimerPattern_operate_g[k],f)
call UnitDamageTarget(s__TimerPattern_operate_u[k],f,s__TimerPattern_operate_data[k],true,true,TimerPattern_at,TimerPattern_dt,TimerPattern_wt)
call YDWETimerDestroyEffect(2,AddSpecialEffectTarget(path,f,part))
if not(s__TimerPattern_operate_recyclable[k])then
if GetUnitState(f,UNIT_STATE_LIFE)>0.405 then
call YDWETimerPatternDummyCreateAider(s__TimerPattern_operate_u[k],x,y,TimerPattern_allote,0.,s__TimerPattern_operate_dep[k],s__TimerPattern_operate_lord[k],f,0.,0.,s__TimerPattern_operate_order[k])
endif
call YDWETimerPatternRetrieve(s__TimerPattern_operate_u[k],s__TimerPattern_operate_perish[k])
call s__TimerPattern_operate_deallocate(k)
endif
endif
endif
call GroupRemoveUnit(opt,f)
endloop
call DestroyGroup(opt)
set opt=null
set f=null
endfunction
function YDWETimerPatternMove takes nothing returns nothing
local integer k
local integer i=1
local real x=0
local real y=0
local boolexpr b=null
local rect r=null
local location stupid=null
local string osfx=null
local string wsfx=null
local string part=null
if TimerPattern_Total==0 then
call PauseTimer(TimerPattern_t)
set TimerPattern_paused=true
endif
loop
exitwhen i>TimerPattern_Total
set k=TimerPattern_Structs[i]
if s__TimerPattern_operate_i[k]!=null and s__TimerPattern_operate_i[k]!=0 then
if(GetLocalPlayer()==GetOwningPlayer(s__TimerPattern_operate_u[k]))then
call SelectUnit(s__TimerPattern_operate_u[k],false)
endif
if s__TimerPattern_operate_volume[k]then
if(IsTerrainPathable(GetUnitX(s__TimerPattern_operate_u[k]),GetUnitY(s__TimerPattern_operate_u[k]),PATHING_TYPE_WALKABILITY)==true)then
set osfx=(LoadStr(YDHT,StringHash((I2S((GetHandleId((s__TimerPattern_operate_u[k])))))),StringHash(("TimerPattern_osfx"))))
if osfx !=null then
set part=(LoadStr(YDHT,StringHash((I2S((GetHandleId((s__TimerPattern_operate_u[k])))))),StringHash(("TimerPattern_part"))))
call DestroyEffect(AddSpecialEffectTarget(osfx,s__TimerPattern_operate_u[k],part))
endif
set TimerPattern_Structs[i]=TimerPattern_Structs[TimerPattern_Total]
set TimerPattern_Total=TimerPattern_Total-1
set i=i-1
set s__TimerPattern_operate_i[k]=0
set s__TimerPattern_operate_step[k]=0.
call YDWETimerPatternRetrieve(s__TimerPattern_operate_u[k],s__TimerPattern_operate_perish[k])
call s__TimerPattern_operate_deallocate(k)
set s__TimerPattern_operate_u[k]=null
endif
endif
set x=GetUnitX(s__TimerPattern_operate_u[k])+s__TimerPattern_operate_xvel[k]
set y=GetUnitY(s__TimerPattern_operate_u[k])+s__TimerPattern_operate_yvel[k]
if s__TimerPattern_operate_aviate[k]then
set stupid=Location(x,y)
set s__TimerPattern_operate_z[k]=s__TimerPattern_operate_z[k]-GetLocationZ(stupid)
call SetUnitFlyHeight(s__TimerPattern_operate_u[k],s__TimerPattern_operate_z[k],0.)
set s__TimerPattern_operate_z[k]=s__TimerPattern_operate_z[k]-s__TimerPattern_operate_zred[k]
if s__TimerPattern_operate_z[k]>GetUnitDefaultFlyHeight(s__TimerPattern_operate_u[k])then
set s__TimerPattern_operate_zred[k]=s__TimerPattern_operate_zred[k]+(TimerPattern_grav/(1./s__TimerPattern_operate_gap[k]))*2.
else
set s__TimerPattern_operate_zred[k]=0.
call SetUnitFlyHeight(s__TimerPattern_operate_u[k],GetUnitDefaultFlyHeight(s__TimerPattern_operate_u[k]),500.)
endif
if s__TimerPattern_operate_z[k]<0. then
set s__TimerPattern_operate_z[k]=0.
set s__TimerPattern_operate_zred[k]=0.
endif
set s__TimerPattern_operate_z[k]=s__TimerPattern_operate_z[k]+GetLocationZ(stupid)
call RemoveLocation(stupid)
set stupid=null
endif
call SetUnitX(s__TimerPattern_operate_u[k],x)
call SetUnitY(s__TimerPattern_operate_u[k],y)
set s__TimerPattern_operate_sfx[k]=s__TimerPattern_operate_sfx[k]+1
if s__TimerPattern_operate_follow[k]then
if s__TimerPattern_operate_u[k]!=null and s__TimerPattern_operate_sfx[k]==1 and GetUnitFlyHeight(s__TimerPattern_operate_u[k])<5. then
if IsTerrainPathable(x,y,PATHING_TYPE_FLOATABILITY)then
call DestroyEffect(AddSpecialEffect(TimerPattern_gsfx,x,y))
else
set wsfx=(LoadStr(YDHT,StringHash((I2S((GetHandleId((s__TimerPattern_operate_u[k])))))),StringHash(("TimerPattern_wsfx"))))
if wsfx !=null then
set part=(LoadStr(YDHT,StringHash((I2S((GetHandleId((s__TimerPattern_operate_u[k])))))),StringHash(("TimerPattern_part"))))
call DestroyEffect(AddSpecialEffectTarget(wsfx,s__TimerPattern_operate_u[k],part))
endif
endif
endif
endif
if s__TimerPattern_operate_sfx[k]==5 then
set s__TimerPattern_operate_sfx[k]=0
endif
if s__TimerPattern_operate_xvel[k]*s__TimerPattern_operate_xvel[k]+s__TimerPattern_operate_yvel[k]*s__TimerPattern_operate_yvel[k]<2. then
if(GetUnitFlyHeight(s__TimerPattern_operate_u[k])-GetUnitDefaultFlyHeight(s__TimerPattern_operate_u[k]))*(GetUnitFlyHeight(s__TimerPattern_operate_u[k])-GetUnitDefaultFlyHeight(s__TimerPattern_operate_u[k]))<5. then
set TimerPattern_Structs[i]=TimerPattern_Structs[TimerPattern_Total]
set TimerPattern_Total=TimerPattern_Total-1
set i=i-1
set s__TimerPattern_operate_i[k]=0
set s__TimerPattern_operate_step[k]=0.
call YDWETimerPatternRetrieve(s__TimerPattern_operate_u[k],s__TimerPattern_operate_perish[k])
call s__TimerPattern_operate_deallocate(k)
set s__TimerPattern_operate_u[k]=null
endif
else
set s__TimerPattern_operate_xvel[k]=s__TimerPattern_operate_xvel[k]-s__TimerPattern_operate_xvelred[k]
set s__TimerPattern_operate_yvel[k]=s__TimerPattern_operate_yvel[k]-s__TimerPattern_operate_yvelred[k]
endif
if s__TimerPattern_operate_killtrees[k]then
set b=Condition(function YDWETimerPatternTreeFilter)
set r=Rect(x-TimerPattern_coll,y-TimerPattern_coll,x+TimerPattern_coll,y+TimerPattern_coll)
call EnumDestructablesInRect(r,b,function YDWETimerPatternTreeKill)
call DestroyBoolExpr(b)
set b=null
call RemoveRect(r)
set r=null
endif
if s__TimerPattern_operate_hostility[k]then
set TimerPattern_Temp_Struct=k
call YDWETimerPatternDamage(x,y)
endif
if s__TimerPattern_operate_parabola[k]then
set s__TimerPattern_operate_step[k]=s__TimerPattern_operate_step[k]+TimerPattern_seg
set s__TimerPattern_operate_height[k]=s__TimerPattern_operate_apex[k]*s__TimerPattern_operate_step[k]-(s__TimerPattern_operate_apex[k]/TimerPattern_bot)*(s__TimerPattern_operate_step[k]*s__TimerPattern_operate_step[k])
call SetUnitFlyHeight(s__TimerPattern_operate_u[k],s__TimerPattern_operate_sheight[k]+s__TimerPattern_operate_height[k],0.)
endif
if x>TimerPattern_MAX_X or x<TimerPattern_MIN_X or y>TimerPattern_MAX_Y or y<TimerPattern_MIN_Y then
set TimerPattern_Structs[i]=TimerPattern_Structs[TimerPattern_Total]
set TimerPattern_Total=TimerPattern_Total-1
set i=i-1
set s__TimerPattern_operate_i[k]=0
set s__TimerPattern_operate_step[k]=0.
call YDWETimerPatternRetrieve(s__TimerPattern_operate_u[k],s__TimerPattern_operate_perish[k])
call s__TimerPattern_operate_deallocate(k)
set s__TimerPattern_operate_u[k]=null
endif
set i=i+1
endif
endloop
endfunction
function YDWETimerPatternSustain takes unit u,string id,integer pair,integer allah,real dist,real a,real time,real interval,real damage,real h,boolean killtrees,boolean injure,boolean cycle,boolean path,boolean ruin,boolean capriole,boolean sequel returns nothing
local integer k=s__TimerPattern_operate__allocate()
local location stupid=Location(GetUnitX(u),GetUnitY(u))
set s__TimerPattern_operate_g[k]=CreateGroup()
set s__TimerPattern_operate_u[k]=u
set s__TimerPattern_operate_order[k]=id
set s__TimerPattern_operate_dep[k]=pair
set s__TimerPattern_operate_lord[k]=allah
set s__TimerPattern_operate_gap[k]=interval
set s__TimerPattern_operate_data[k]=damage
set s__TimerPattern_operate_apex[k]=h
set s__TimerPattern_operate_xvel[k]=2*(dist*Cos(a*.01745))/(time/interval+1)
set s__TimerPattern_operate_yvel[k]=2*(dist*Sin(a*.01745))/(time/interval+1)
set s__TimerPattern_operate_xvelred[k]=s__TimerPattern_operate_xvel[k]/(time/interval)
set s__TimerPattern_operate_yvelred[k]=s__TimerPattern_operate_yvel[k]/(time/interval)
set s__TimerPattern_operate_zred[k]=0.
set s__TimerPattern_operate_z[k]=GetUnitFlyHeight(u)+GetLocationZ(stupid)
set s__TimerPattern_operate_killtrees[k]=killtrees
set s__TimerPattern_operate_hostility[k]=injure
set s__TimerPattern_operate_recyclable[k]=cycle
set s__TimerPattern_operate_volume[k]=path
set s__TimerPattern_operate_perish[k]=ruin
set s__TimerPattern_operate_parabola[k]=capriole
set s__TimerPattern_operate_aviate[k]=true
set s__TimerPattern_operate_follow[k]=sequel
set s__TimerPattern_operate_i[k]=1
set s__TimerPattern_operate_sfx[k]=0
set s__TimerPattern_operate_sheight[k]=GetUnitFlyHeight(u)
set TimerPattern_Total=TimerPattern_Total+1
set TimerPattern_Structs[TimerPattern_Total]=k
call SetUnitTimeScale(u,1.)
if capriole then
call UnitAddAbility(u,'Amrf')
call UnitRemoveAbility(u,'Amrf')
endif
if TimerPattern_paused then
call TimerStart(TimerPattern_t,interval,true,function YDWETimerPatternMove)
set TimerPattern_paused=false
endif
call RemoveLocation(stupid)
set stupid=null
endfunction
function YDWETimerPatternInit takes nothing returns nothing
local rect r=bj_mapInitialPlayableArea
call TimerStart(TimerPattern_t,TimerPattern_blank,true,function YDWETimerPatternMove)
set TimerPattern_MAX_X=GetRectMaxX(r)
set TimerPattern_MAX_Y=GetRectMaxY(r)
set TimerPattern_MIN_X=GetRectMinX(r)
set TimerPattern_MIN_Y=GetRectMinY(r)
set r=null
endfunction
function YDWETimerPatternJumpAttack takes unit u,real face,real dis,real lasttime,real timeout,real high,real damage,string part,string dsfx returns nothing
local boolean injure=false
call SaveStr(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("TimerPattern_part")),(part))
call SaveStr(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("TimerPattern_dsfx")),(dsfx))
if damage>0 then
set injure=true
endif
call YDWETimerPatternSustain(u,null,0,0,dis,face,lasttime,timeout,damage,high,false,injure,true,false,false,true,false)
endfunction
function YDWETimerPatternMoonPriestessArrow takes unit u,real face,real dis,real lasttime,real timeout,integer lv,integer aid,integer uid,string order,string part,string dsfx returns nothing
call SaveStr(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("TimerPattern_part")),(part))
call SaveStr(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("TimerPattern_dsfx")),(dsfx))
call SaveInteger(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("TimerPattern_uid")),(uid))
call YDWETimerPatternSustain(u,order,aid,lv,dis,face,lasttime,timeout,0,0,false,true,false,false,true,false,false)
endfunction
function YDWETimerPatternRushSlide takes unit u,real face,real dis,real lasttime,real timeout,real damage,boolean killtrees,boolean cycle,boolean path,string part,string osfx,string wsfx returns nothing
local boolean injure=false
call SaveStr(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("TimerPattern_part")),(part))
call SaveStr(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("TimerPattern_osfx")),(osfx))
call SaveStr(YDHT,StringHash((I2S((GetHandleId((u)))))),StringHash(("TimerPattern_wsfx")),(wsfx))
if damage>0 then
set injure=true
endif
set path=not path
call YDWETimerPatternSustain(u,null,0,0,dis,face,lasttime,timeout,damage,0,killtrees,injure,cycle,path,false,false,true)
endfunction
function InitGlobals takes nothing returns nothing
local integer i=0
set i=0
loop
exitwhen(i>12)
set udg_choose_ture[i]=true
set i=i+1
endloop
set udg_AgreeOrRejectPK=DialogCreate()
set udg_TimerPK=CreateTimer()
set udg_x=0
set udg_jdsy=false
set udg_gzkg=false
set udg_Kuan_duizhanxuanze=DialogCreate()
set i=0
loop
exitwhen(i>12)
set udg_Mianban_fuhuotime[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set udg_Mianban_shadi[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set udg_Mianban_shadi2[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>1)
set udg_Mianban_time[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set udg_Harm_key[i]=false
set i=i+1
endloop
set i=0
loop
exitwhen(i>50)
set udg_All_unit_tm[i]=CreateGroup()
set i=i+1
endloop
set udg_RS_fengdun=CreateGroup()
set udg_RS_shuidun=CreateGroup()
set udg_RS_huodun=CreateGroup()
set udg_RS_leidun=CreateGroup()
set udg_RS_tudun=CreateGroup()
set i=0
loop
exitwhen(i>50)
set udg_All_unit_shu[i]=0
set i=i+1
endloop
set udg_Kuan_heroxuanze=DialogCreate()
set i=0
loop
exitwhen(i>12)
set udg_Time_fuhuo[i]=CreateTimer()
set i=i+1
endloop
set i=0
loop
exitwhen(i>30)
set udg_Photo[i]=""
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set udg_Mianban_lianxishadi[i]=0
set i=i+1
endloop
set udg_Zhu_HMP=CreateGroup()
set i=0
loop
exitwhen(i>30)
set udg_All_unit_bez[i]=false
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set udg_All_lixian[i]=false
set i=i+1
endloop
set udg_Hero_tm=CreateGroup()
set i=0
loop
exitwhen(i>10)
set udg_SJXZ_tm[i]=CreateGroup()
set i=i+1
endloop
set i=0
loop
exitwhen(i>3)
set udg_X_Attack[i]=0
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set udg_Mianban_bez[i]=false
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set udg_JSrenwu[i]=""
set i=i+1
endloop
set udg_i=0
set udg_AI=0
set i=0
loop
exitwhen(i>12)
set udg_OB[i]=false
set i=i+1
endloop
set i=0
loop
exitwhen(i>12)
set udg_X_zisha[i]=false
set i=i+1
endloop
set i=0
loop
exitwhen(i>6)
set udg_X_jingong[i]=CreateGroup()
set i=i+1
endloop
set udg_GAME_OVER=false
set udg_X_jisha=0
endfunction
function Unit000163_DropItems takes nothing returns nothing
local widget trigWidget=null
local unit trigUnit=null
local integer itemID=0
local boolean canDrop=true
set trigWidget=bj_lastDyingWidget
if(trigWidget==null)then
set trigUnit=GetTriggerUnit()
endif
if(trigUnit !=null)then
set canDrop=not IsUnitHidden(trigUnit)
if(canDrop and GetChangingUnit()!=null)then
set canDrop=(GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE))
endif
endif
if(canDrop)then
call RandomDistReset()
call RandomDistAddItem('tkno',100)
set itemID=RandomDistChoose()
if(trigUnit !=null)then
call UnitDropItem(trigUnit,itemID)
else
call WidgetDropItem(trigWidget,itemID)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function InitSounds takes nothing returns nothing
set gg_snd_AbominationPissed1=CreateSound("Units\\Undead\\Abomination\\AbominationPissed1.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_AbominationPissed1,"AbominationPissed")
call SetSoundDuration(gg_snd_AbominationPissed1,2220)
call SetSoundChannel(gg_snd_AbominationPissed1,11)
call SetSoundDistances(gg_snd_AbominationPissed1,800.0,10000.0)
call SetSoundDistanceCutoff(gg_snd_AbominationPissed1,3000.0)
set gg_snd_AbominationPissed2=CreateSound("Units\\Undead\\Abomination\\AbominationPissed2.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_AbominationPissed2,"AbominationPissed")
call SetSoundDuration(gg_snd_AbominationPissed2,861)
call SetSoundChannel(gg_snd_AbominationPissed2,11)
call SetSoundDistances(gg_snd_AbominationPissed2,2000.0,10000.0)
call SetSoundDistanceCutoff(gg_snd_AbominationPissed2,3000.0)
set gg_snd_ThunderClapCaster=CreateSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav",false,true,true,10,10,"SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ThunderClapCaster,"ThunderClap")
call SetSoundDuration(gg_snd_ThunderClapCaster,3451)
set gg_snd_HeadHunterMissileLaunch=CreateSound("Abilities\\Weapons\\huntermissile\\HeadHunterMissileLaunch.wav",false,true,true,10,10,"MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_HeadHunterMissileLaunch,"HunterMissileLaunch")
call SetSoundDuration(gg_snd_HeadHunterMissileLaunch,292)
endfunction
function CreateBuildingsForPlayer0 takes nothing returns nothing
local player p=Player(0)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',3968.0,3264.0,270.000)
endfunction
function CreateBuildingsForPlayer1 takes nothing returns nothing
local player p=Player(1)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',4096.0,3264.0,270.000)
endfunction
function CreateBuildingsForPlayer2 takes nothing returns nothing
local player p=Player(2)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',4224.0,3264.0,270.000)
endfunction
function CreateBuildingsForPlayer3 takes nothing returns nothing
local player p=Player(3)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_hcas_0001=CreateUnit(p,'hcas',-6208.0,-7232.0,270.000)
set gg_unit_nC02_0006=CreateUnit(p,'nC02',-5504.0,-7680.0,270.000)
set u=CreateUnit(p,'owtw',-2944.0,-7040.0,270.000)
set gg_unit_nC03_0008=CreateUnit(p,'nC03',-5120.0,-7680.0,270.000)
set u=CreateUnit(p,'owtw',-4672.0,-5056.0,270.000)
set gg_unit_nC00_0010=CreateUnit(p,'nC00',-5440.0,-5504.0,270.000)
set gg_unit_nC25_0011=CreateUnit(p,'nC25',-5888.0,-7680.0,270.000)
set gg_unit_hkee_0012=CreateUnit(p,'hkee',-4288.0,-7680.0,270.000)
set gg_unit_hkee_0013=CreateUnit(p,'hkee',-6528.0,-5312.0,270.000)
set u=CreateUnit(p,'owtw',-4032.0,-5760.0,270.000)
set u=CreateUnit(p,'owtw',-6400.0,-3840.0,270.000)
set u=CreateUnit(p,'owtw',-5632.0,-3968.0,270.000)
set u=CreateUnit(p,'ntx2',-3840.0,-7744.0,270.000)
set u=CreateUnit(p,'ntx2',-4544.0,-6144.0,270.000)
set u=CreateUnit(p,'hctw',-4800.0,-6912.0,270.000)
set u=CreateUnit(p,'ntx2',-5184.0,-5632.0,270.000)
set u=CreateUnit(p,'hctw',-5632.0,-6016.0,270.000)
set u=CreateUnit(p,'ntx2',-5760.0,-4864.0,270.000)
set u=CreateUnit(p,'ntx2',-3904.0,-7040.0,270.000)
set u=CreateUnit(p,'hatw',-6592.0,-7296.0,270.000)
set u=CreateUnit(p,'owtw',-2880.0,-7808.0,270.000)
set u=CreateUnit(p,'ntx2',-5696.0,-7168.0,270.000)
set u=CreateUnit(p,'ntx2',-6016.0,-6784.0,270.000)
set u=CreateUnit(p,'ntx2',-6464.0,-4672.0,270.000)
set gg_unit_n006_0201=CreateUnit(p,'n006',-5504.0,-7680.0,270.000)
set u=CreateUnit(p,'hatw',-6336.0,-7616.0,270.000)
set gg_unit_nC24_0256=CreateUnit(p,'nC24',-4480.0,-6720.0,270.000)
endfunction
function CreateUnitsForPlayer3 takes nothing returns nothing
local player p=Player(3)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'hspt',-4701.2,-7092.3,338.016)
set u=CreateUnit(p,'hspt',-5737.1,-5909.6,74.508)
set u=CreateUnit(p,'hspt',-5829.4,-4668.8,51.699)
set u=CreateUnit(p,'hspt',-5025.9,-5555.5,20.904)
set u=CreateUnit(p,'hspt',-4503.4,-5991.7,72.902)
set u=CreateUnit(p,'hspt',-3710.0,-7083.7,24.467)
set u=CreateUnit(p,'hspt',-5940.9,-7316.1,37.030)
set u=CreateUnit(p,'hspt',-6209.8,-6939.7,32.356)
endfunction
function CreateBuildingsForPlayer4 takes nothing returns nothing
local player p=Player(4)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',3968.0,3136.0,270.000)
endfunction
function CreateBuildingsForPlayer5 takes nothing returns nothing
local player p=Player(5)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',4096.0,3136.0,270.000)
endfunction
function CreateBuildingsForPlayer6 takes nothing returns nothing
local player p=Player(6)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',4224.0,3136.0,270.000)
endfunction
function CreateBuildingsForPlayer7 takes nothing returns nothing
local player p=Player(7)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'ntx2',1728.0,-7232.0,270.000)
set u=CreateUnit(p,'ntx2',2688.0,-6144.0,270.000)
set u=CreateUnit(p,'hctw',2880.0,-6976.0,270.000)
set u=CreateUnit(p,'hctw',3904.0,-5632.0,270.000)
set gg_unit_hcas_0018=CreateUnit(p,'hcas',4352.0,-7296.0,270.000)
set u=CreateUnit(p,'ntx2',1600.0,-7936.0,270.000)
set u=CreateUnit(p,'ntx2',4224.0,-6720.0,270.000)
set u=CreateUnit(p,'ntx2',3840.0,-7168.0,270.000)
set gg_unit_nC02_0023=CreateUnit(p,'nC02',3520.0,-7616.0,270.000)
set gg_unit_nC03_0026=CreateUnit(p,'nC03',3136.0,-7616.0,270.000)
set gg_unit_nC00_0027=CreateUnit(p,'nC00',2432.0,-6656.0,270.000)
set gg_unit_hkee_0029=CreateUnit(p,'hkee',2112.0,-7808.0,270.000)
set gg_unit_hkee_0030=CreateUnit(p,'hkee',4608.0,-4416.0,270.000)
set u=CreateUnit(p,'owtw',832.0,-7040.0,270.000)
set u=CreateUnit(p,'ntx2',3904.0,-4480.0,270.000)
set gg_unit_nC25_0051=CreateUnit(p,'nC25',3904.0,-7616.0,270.000)
set u=CreateUnit(p,'ntx2',3200.0,-5440.0,270.000)
set u=CreateUnit(p,'ntx2',4544.0,-4032.0,270.000)
set u=CreateUnit(p,'owtw',576.0,-7744.0,270.000)
set u=CreateUnit(p,'owtw',1984.0,-5696.0,270.000)
set u=CreateUnit(p,'owtw',2688.0,-4864.0,270.000)
set u=CreateUnit(p,'owtw',3392.0,-3776.0,270.000)
set u=CreateUnit(p,'owtw',3904.0,-3200.0,270.000)
set gg_unit_n006_0202=CreateUnit(p,'n006',3520.0,-7616.0,270.000)
set u=CreateUnit(p,'hatw',4480.0,-7680.0,270.000)
set u=CreateUnit(p,'hatw',4736.0,-7360.0,270.000)
set gg_unit_nC24_0257=CreateUnit(p,'nC24',3584.0,-5056.0,270.000)
endfunction
function CreateUnitsForPlayer7 takes nothing returns nothing
local player p=Player(7)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'hspt',2634.9,-6019.5,148.290)
set u=CreateUnit(p,'hspt',2727.9,-7106.6,182.388)
set u=CreateUnit(p,'hspt',3031.2,-5496.3,153.750)
set u=CreateUnit(p,'hspt',3939.2,-4267.1,122.510)
set u=CreateUnit(p,'hspt',4051.6,-5452.8,119.399)
set u=CreateUnit(p,'hspt',4364.9,-7054.2,98.200)
set u=CreateUnit(p,'hspt',1545.1,-7386.0,177.787)
set u=CreateUnit(p,'hspt',4079.9,-7312.8,184.708)
call SetUnitState(u,UNIT_STATE_MANA,0)
endfunction
function CreateBuildingsForPlayer8 takes nothing returns nothing
local player p=Player(8)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',3968.0,3008.0,270.000)
endfunction
function CreateBuildingsForPlayer9 takes nothing returns nothing
local player p=Player(9)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',4096.0,3008.0,270.000)
endfunction
function CreateBuildingsForPlayer10 takes nothing returns nothing
local player p=Player(10)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'e009',4224.0,3008.0,270.000)
endfunction
function CreateBuildingsForPlayer11 takes nothing returns nothing
local player p=Player(11)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_nC25_0025=CreateUnit(p,'nC25',-768.0,3776.0,270.000)
set u=CreateUnit(p,'owtw',-1856.0,1088.0,270.000)
set u=CreateUnit(p,'hctw',-704.0,2496.0,270.000)
set u=CreateUnit(p,'owtw',320.0,1472.0,270.000)
set u=CreateUnit(p,'hctw',-1856.0,2432.0,270.000)
set gg_unit_hkee_0037=CreateUnit(p,'hkee',-2624.0,2944.0,270.000)
set gg_unit_hkee_0040=CreateUnit(p,'hkee',256.0,2944.0,270.000)
set gg_unit_nC03_0042=CreateUnit(p,'nC03',-192.0,3136.0,270.000)
set gg_unit_nC02_0043=CreateUnit(p,'nC02',-384.0,3520.0,270.000)
set gg_unit_hcas_0044=CreateUnit(p,'hcas',-1408.0,3648.0,270.000)
set gg_unit_nC00_0050=CreateUnit(p,'nC00',-1984.0,1984.0,270.000)
set u=CreateUnit(p,'hatw',-1664.0,3968.0,270.000)
set u=CreateUnit(p,'hatw',-1216.0,3968.0,270.000)
set u=CreateUnit(p,'ntx2',-2944.0,2496.0,270.000)
set u=CreateUnit(p,'owtw',-3328.0,1792.0,270.000)
set u=CreateUnit(p,'ntx2',-1664.0,3136.0,270.000)
set u=CreateUnit(p,'owtw',-2752.0,1408.0,270.000)
set u=CreateUnit(p,'ntx2',-960.0,1728.0,270.000)
set u=CreateUnit(p,'owtw',-832.0,1088.0,270.000)
set u=CreateUnit(p,'ntx2',-64.0,2048.0,270.000)
set u=CreateUnit(p,'owtw',1024.0,1984.0,270.000)
set gg_unit_n006_0203=CreateUnit(p,'n006',-384.0,3520.0,270.000)
set u=CreateUnit(p,'ntx2',704.0,2496.0,270.000)
set gg_unit_nC24_0258=CreateUnit(p,'nC24',-576.0,2112.0,270.000)
set u=CreateUnit(p,'ntx2',-1728.0,1728.0,270.000)
set u=CreateUnit(p,'ntx2',-2368.0,2048.0,270.000)
set u=CreateUnit(p,'ntx2',-1088.0,3136.0,270.000)
endfunction
function CreateUnitsForPlayer11 takes nothing returns nothing
local player p=Player(11)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'hspt',-543.3,2451.6,324.856)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'hspt',-2019.6,2405.3,272.597)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'hspt',-1596.0,3425.0,297.007)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'hspt',-859.3,1554.3,276.250)
set u=CreateUnit(p,'hspt',-1860.4,1606.8,269.420)
set u=CreateUnit(p,'hspt',-1168.3,3455.8,279.840)
set u=CreateUnit(p,'hspt',-2470.2,1869.3,234.452)
set u=CreateUnit(p,'hspt',99.2,2001.8,236.652)
endfunction
function CreateNeutralHostile takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p,'nfrg',-2622.8,-65.4,258.202)
set u=CreateUnit(p,'nfrg',1971.1,-3810.9,54.991)
set u=CreateUnit(p,'nfrg',-2592.1,-5449.5,314.010)
set u=CreateUnit(p,'ndqs',-3789.0,-3607.9,91.583)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'ndqs',766.6,-5726.3,191.190)
call SetUnitState(u,UNIT_STATE_MANA,0)
set u=CreateUnit(p,'ndqs',263.8,152.8,247.704)
call SetUnitState(u,UNIT_STATE_MANA,0)
endfunction
function CreateNeutralPassiveBuildings takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_PASSIVE)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n002_0107=CreateUnit(p,'n002',-704.0,-7744.0,270.000)
set gg_unit_n003_0111=CreateUnit(p,'n003',-704.0,-7744.0,270.000)
set gg_unit_n005_0135=CreateUnit(p,'n005',-704.0,-7744.0,270.000)
set gg_unit_n005_0142=CreateUnit(p,'n005',-5248.0,-768.0,270.000)
set gg_unit_n000_0152=CreateUnit(p,'n000',-704.0,-7744.0,270.000)
set gg_unit_n000_0161=CreateUnit(p,'n000',-5248.0,-768.0,270.000)
set gg_unit_n000_0164=CreateUnit(p,'n000',3136.0,-960.0,270.000)
set gg_unit_n002_0171=CreateUnit(p,'n002',-5248.0,-768.0,270.000)
set gg_unit_n003_0173=CreateUnit(p,'n003',-5248.0,-768.0,270.000)
set gg_unit_n005_0174=CreateUnit(p,'n005',3136.0,-960.0,270.000)
set gg_unit_n002_0185=CreateUnit(p,'n002',3136.0,-960.0,270.000)
set gg_unit_n003_0186=CreateUnit(p,'n003',3136.0,-960.0,270.000)
set u=CreateUnit(p,'ncp3',4096.0,3136.0,270.000)
endfunction
function CreateNeutralPassive takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_PASSIVE)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_Ewar_0045=CreateUnit(p,'Ewar',4300.5,2955.2,274.344)
set gg_unit_Nalc_0046=CreateUnit(p,'Nalc',4675.1,2723.5,265.010)
set gg_unit_Obla_0047=CreateUnit(p,'Obla',4575.4,3346.8,271.425)
set gg_unit_Huth_0091=CreateUnit(p,'Huth',4455.7,3125.4,276.810)
set gg_unit_Hjai_0093=CreateUnit(p,'Hjai',4409.7,3538.5,268.430)
set gg_unit_Hblm_0095=CreateUnit(p,'Hblm',3898.5,3333.0,259.857)
set gg_unit_Ekee_0096=CreateUnit(p,'Ekee',3913.5,2950.9,273.520)
set gg_unit_Udea_0097=CreateUnit(p,'Udea',4726.9,3128.3,269.760)
set gg_unit_Udre_0098=CreateUnit(p,'Udre',3714.8,3134.6,260.317)
set gg_unit_Hamg_0101=CreateUnit(p,'Hamg',3459.2,3080.7,274.380)
set gg_unit_Emoo_0102=CreateUnit(p,'Emoo',3831.0,2718.4,275.930)
set gg_unit_Nngs_0105=CreateUnit(p,'Nngs',4379.3,2721.9,263.515)
set gg_unit_Ulic_0106=CreateUnit(p,'Ulic',4099.9,2749.2,274.780)
set gg_unit_Hpal_0108=CreateUnit(p,'Hpal',3564.1,3334.3,267.420)
set gg_unit_Nplh_0181=CreateUnit(p,'Nplh',3646.0,2891.0,271.070)
call SetUnitState(gg_unit_Nplh_0181,UNIT_STATE_MANA,210)
set gg_unit_Hhkl_0189=CreateUnit(p,'Hhkl',4091.2,3500.7,255.250)
set gg_unit_Hmkg_0193=CreateUnit(p,'Hmkg',4286.6,3330.3,277.851)
set gg_unit_Hpb2_0204=CreateUnit(p,'Hpb2',3566.1,2703.5,274.020)
set gg_unit_Ocbh_0206=CreateUnit(p,'Ocbh',4568.4,2908.1,261.380)
set gg_unit_e00F_0233=CreateUnit(p,'e00F',4096.6,3142.0,270.000)
set u=CreateUnit(p,'nshf',-914.3,-2763.6,167.534)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(t,function Unit000163_DropItems)
endfunction
function CreatePlayerBuildings takes nothing returns nothing
call CreateBuildingsForPlayer0()
call CreateBuildingsForPlayer1()
call CreateBuildingsForPlayer2()
call CreateBuildingsForPlayer3()
call CreateBuildingsForPlayer4()
call CreateBuildingsForPlayer5()
call CreateBuildingsForPlayer6()
call CreateBuildingsForPlayer7()
call CreateBuildingsForPlayer8()
call CreateBuildingsForPlayer9()
call CreateBuildingsForPlayer10()
call CreateBuildingsForPlayer11()
endfunction
function CreatePlayerUnits takes nothing returns nothing
call CreateUnitsForPlayer3()
call CreateUnitsForPlayer7()
call CreateUnitsForPlayer11()
endfunction
function CreateAllUnits takes nothing returns nothing
call CreateNeutralPassiveBuildings()
call CreatePlayerBuildings()
call CreateNeutralHostile()
call CreateNeutralPassive()
call CreatePlayerUnits()
endfunction
function CreateRegions takes nothing returns nothing
local weathereffect we
set gg_rct_East_Spawn_Viz=Rect(3264.0,2240.0,4896.0,3904.0)
set we=AddWeatherEffect(gg_rct_East_Spawn_Viz,'LRaa')
call EnableWeatherEffect(we,true)
set gg_rct_Mitte=Rect(-1024.0,-2976.0,-608.0,-2560.0)
set gg_rct_Spawnpoint_sha_East=Rect(160.0,1952.0,640.0,2368.0)
set gg_rct_SpawnPoint_sha_Schloss=Rect(-1632.0,3072.0,-1088.0,3552.0)
set gg_rct_Spawnpoint_sha_West=Rect(-3168.0,1824.0,-2688.0,2208.0)
set gg_rct_SpawnPoint_muye_East=Rect(-3712.0,-7680.0,-3296.0,-7264.0)
set we=AddWeatherEffect(gg_rct_SpawnPoint_muye_East,'LRaa')
call EnableWeatherEffect(we,true)
set gg_rct_SpawnPoint_muye_north=Rect(-6336.0,-4608.0,-5888.0,-4192.0)
set we=AddWeatherEffect(gg_rct_SpawnPoint_muye_north,'LRaa')
call EnableWeatherEffect(we,true)
set gg_rct_SpawnPoint_muye_Schloss=Rect(-6176.0,-7296.0,-5728.0,-6848.0)
set we=AddWeatherEffect(gg_rct_SpawnPoint_muye_Schloss,'LRaa')
call EnableWeatherEffect(we,true)
set gg_rct_Spawnpoint_wuyin_north=Rect(3840.0,-4032.0,4224.0,-3616.0)
set gg_rct_Spawnpoint_wuyin_Schloss=Rect(3936.0,-7360.0,4384.0,-6880.0)
set gg_rct_Spawnpoint_wuyin_west=Rect(1088.0,-7712.0,1472.0,-7360.0)
set gg_rct_PKRequesterStart=Rect(-6912.0,3424.0,-6496.0,3872.0)
set gg_rct_PKResopnsorStart=Rect(-5632.0,1312.0,-5184.0,1760.0)
set gg_rct_jdc=Rect(-7168.0,928.0,-4800.0,4096.0)
set gg_rct_wup_muye=Rect(-6880.0,-6688.0,-6720.0,-6400.0)
set gg_rct_wup_wuyin=Rect(4704.0,-5856.0,4832.0,-5600.0)
set gg_rct_wup_sha=Rect(-2752.0,3008.0,-2592.0,3200.0)
set gg_rct_G=Rect(3552.0,3808.0,3840.0,3872.0)
set gg_rct_PKG=Rect(-7104.0,1088.0,-5024.0,4032.0)
set gg_rct_MT_1=Rect(-1216.0,-5920.0,-640.0,-5376.0)
set gg_rct_MT_2=Rect(992.0,-2016.0,1568.0,-1472.0)
set gg_rct_MT_3=Rect(-3744.0,-2272.0,-3168.0,-1728.0)
set gg_rct_yu=Rect(1216.0,-8160.0,5120.0,-4384.0)
set we=AddWeatherEffect(gg_rct_yu,'RAlr')
call EnableWeatherEffect(we,true)
endfunction
function Trig_Start_Func003Func004A takes nothing returns nothing
set udg_SZ[GetConvertedPlayerId(GetEnumPlayer())]=GetEnumUnit()
endfunction
function Trig_Start_Func003A takes nothing returns nothing
call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY,true,GetEnumPlayer())
call CreateFogModifierRectBJ(true,GetEnumPlayer(),FOG_OF_WAR_VISIBLE,gg_rct_East_Spawn_Viz)
call CreateFogModifierRectBJ(true,GetEnumPlayer(),FOG_OF_WAR_VISIBLE,gg_rct_PKG)
call ForGroupBJ(GetUnitsOfPlayerAndTypeId(GetEnumPlayer(),'e009'),function Trig_Start_Func003Func004A)
endfunction
function Trig_Start_Actions takes nothing returns nothing
call SetTimeOfDay(12.00)
set udg_GAME_OVER=true
call ForForce(GetPlayersAll(),function Trig_Start_Func003A)
call SetPlayerName(Player(3),"|cFF660099木叶忍者村|r")
call SetPlayerName(Player(7),"|cFFFF66CC雨忍者村|r")
call SetPlayerName(Player(11),"|cFF4D2903沙忍者村|r")
call GroupAddUnit(udg_SJXZ_tm[1],gg_unit_Hjai_0093)
call GroupAddUnit(udg_SJXZ_tm[1],gg_unit_Obla_0047)
call GroupAddUnit(udg_SJXZ_tm[1],gg_unit_Ocbh_0206)
call GroupAddUnit(udg_SJXZ_tm[1],gg_unit_Nplh_0181)
call GroupAddUnit(udg_SJXZ_tm[1],gg_unit_Udre_0098)
call GroupAddUnit(udg_SJXZ_tm[1],gg_unit_Udea_0097)
call GroupAddUnit(udg_SJXZ_tm[1],gg_unit_Hpb2_0204)
call GroupAddUnit(udg_SJXZ_tm[2],gg_unit_Hblm_0095)
call GroupAddUnit(udg_SJXZ_tm[2],gg_unit_Nalc_0046)
call GroupAddUnit(udg_SJXZ_tm[2],gg_unit_Hamg_0101)
call GroupAddUnit(udg_SJXZ_tm[2],gg_unit_Hhkl_0189)
call GroupAddUnit(udg_SJXZ_tm[2],gg_unit_Hpal_0108)
call GroupAddUnit(udg_SJXZ_tm[2],gg_unit_Huth_0091)
call GroupAddUnit(udg_SJXZ_tm[2],gg_unit_Emoo_0102)
call GroupAddUnit(udg_SJXZ_tm[2],gg_unit_Hmkg_0193)
call GroupAddUnit(udg_SJXZ_tm[3],gg_unit_Ekee_0096)
call GroupAddUnit(udg_SJXZ_tm[3],gg_unit_Nngs_0105)
call GroupAddUnit(udg_SJXZ_tm[3],gg_unit_Ulic_0106)
call GroupAddUnit(udg_SJXZ_tm[3],gg_unit_Ewar_0045)
set udg_Photo[1]="ReplaceableTextures\\CommandButtons\\BTNluwan.blp"
set udg_Photo[2]="ReplaceableTextures\\CommandButtons\\BTNshouju.blp"
set udg_Photo[3]="ReplaceableTextures\\CommandButtons\\BTNningci.blp"
set udg_Photo[4]="ReplaceableTextures\\CommandButtons\\BTNtenten.blp"
set udg_Photo[5]="ReplaceableTextures\\CommandButtons\\BTNsidai.blp"
set udg_Photo[8]="ReplaceableTextures\\CommandButtons\\BTNxiaoying.blp"
set udg_Photo[9]="ReplaceableTextures\\CommandButtons\\BTNasima.blp"
set udg_Photo[10]="ReplaceableTextures\\CommandButtons\\BTNshuiyue.blp"
set udg_Photo[11]="ReplaceableTextures\\CommandButtons\\BTNdidala.blp"
set udg_Photo[12]="ReplaceableTextures\\CommandButtons\\BTN2daimu.blp"
set udg_Photo[13]="ReplaceableTextures\\CommandButtons\\BTNgangshou.blp"
set udg_Photo[16]="ReplaceableTextures\\CommandButtons\\BTNguijiao.blp"
set udg_Photo[17]="ReplaceableTextures\\CommandButtons\\BTNzuozhu.blp"
set udg_Photo[20]="ReplaceableTextures\\CommandButtons\\BTNdingci.blp"
set udg_Photo[21]="ReplaceableTextures\\CommandButtons\\BTNwoailuo.blp"
set udg_Photo[22]="ReplaceableTextures\\CommandButtons\\BTNkakaxi.blp"
set udg_Photo[24]="ReplaceableTextures\\CommandButtons\\BTNjilabi.blp"
set udg_Photo[25]="ReplaceableTextures\\CommandButtons\\BTNxiaonan.blp"
set udg_Photo[26]="ReplaceableTextures\\CommandButtons\\BTNmingren.blp"
call SaveStr(YDHT,(1),(1),(GetLocalizedString("|cFFFFCC99=人物=|r奈良 鹿丸\n  □影束缚之术\n  □爆式潜影.改\n  □知略\n  □影缝 |cFF999999影缝.改|r\n  □影鬼缚之术\n|cFFFFCC99=属性=|r\n  ○ 力量- 16 > 1.9\n  ○ 敏捷- 15 > 1.5\n  ● 智力- 18 > 2.6\n  ◇ 速度- 攻击·2.18 移动·300 结印·0.4\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★★")))
call SaveStr(YDHT,(1),(2),(GetLocalizedString("|cFFFFCC99=人物=|r手鞠\n  □斩斩舞\n  □镰鼬之术 |cFF999999大.镰鼬之术|r\n  □飓风阵\n  □豪风暴壁 |cFF999999降雷.豪风暴壁|r\n  □扇舞降袭\n|cFFFFCC99=属性=|r\n  ○ 力量- 18 > 1.5\n  ● 敏捷- 19 > 2.6\n  ○ 智力- 17 > 1.9\n  ◇ 速度- 攻击·2.46 移动·280 结印·0.5\n  ☆ 伤害输出-★★★\n  ☆ 控场限制-★★★★★\n  ☆ 生存能力-★★★★\n  ☆ 操作难度-★★★★★")))
call SaveStr(YDHT,(1),(3),(GetLocalizedString("|cFFFFCC99=人物=|r日向 宁次\n  □八卦空掌 |cFF999999八卦四天空掌|r\n  □八卦掌.回天\n  □白眼\n  □柔拳法.八卦六十四掌\n  □八卦破山击\n|cFFFFCC99=属性=|r\n  ○ 力量- 17 > 1.5\n  ● 敏捷- 22 > 2.7\n  ○ 智力- 17 > 1.8\n  ◇ 速度- 攻击·2.20 移动·330 结印·0.4\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★★\n  ☆ 生存能力-★★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(4),(GetLocalizedString("|cFFFFCC99=人物=|r天天\n  □操具死球击\n  □操具爆闪玉 |cFF999999操具爆闪玉.改|r\n  □操武向上\n  □操具乱重奏\n  □具散华\n|cFFFFCC99=属性=|r\n  ○ 力量- 14 > 1.8\n  ● 敏捷- 19 > 3\n  ○ 智力- 19 > 1.2\n  ◇ 速度- 攻击·2.13 移动·300 结印·0.2\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★★")))
call SaveStr(YDHT,(1),(5),(GetLocalizedString("|cFFFFCC99=人物=|r波风 水门\n  □疾光弹 |cFF999999疾光连弹|r\n  □螺旋丸 |cFF999999螺旋丸.坐标锁定|r\n  □闪光之态\n  □瞬光\n  □飞雷神之术 |cFF999999飞雷神之术(坐标锁定)|r\n|cFFFFCC99=属性=|r\n  ○ 力量- 12 > 1.5\n  ● 敏捷- 25 > 2.5\n  ○ 智力- 18 > 2\n  ◇ 速度- 攻击·2.13 移动·330 结印·0.3\n  ☆ 伤害输出-★★★★★\n  ☆ 控场限制-★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★★★")))
call SaveStr(YDHT,(1),(6),(GetLocalizedString("|cFFFFCC99=人物=|r猿飞 日斩\n  □火龙炎弹 |cFF999999火龙超炎弹|r\n  □土龙泽 |cFF999999土泽涡|r\n  □猿王之牙\n  □尸鬼封尽\n  □组合忍术奥义\n|cFFFFCC99=属性=|r\n  ○ 力量- 15 > 2\n  ○ 敏捷- 18 > 1\n  ● 智力- 19 > 3\n  ◇ 速度- 攻击·2.28 移动·300 结印·0.3\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(7),(GetLocalizedString("|cFFFFCC99=人物=|r洛克 李\n  □木叶旋光 |cFF999999重.木叶旋光|r\n  □表连华 |cFF999999重.表连华|r\n  □醉拳天赋\n  □八门遁甲\n  □夕方の日向\n|cFFFFCC99=属性=|r\n  ○ 力量- 18 > 1.6\n  ● 敏捷- 25 > 3.2\n  ○ 智力- 8  > 1\n  ◇ 速度- 攻击·2.05 移动·350 结印·0.2\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★★\n  ☆ 操作难度-★★★★")))
call SaveStr(YDHT,(1),(8),(GetLocalizedString("|cFFFFCC99=人物=|r春野 樱\n  □医疗忍术\n  □春诛打 |cFF999999怪力.春诛打|r\n  □怪力觉醒\n  □刚闪\n  □爆碎拳打 |cFF999999怪力.爆碎拳打|r\n|cFFFFCC99=属性=|r\n  ● 力量- 25 > 2.8\n  ○ 敏捷- 12 > 1.4\n  ○ 智力- 15 > 1.8\n  ◇ 速度- 攻击·2.33 移动·310 结印·0.3\n  ☆ 伤害输出-★★★\n  ☆ 控场限制-★★★★★\n  ☆ 生存能力-★★★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(9),(GetLocalizedString("|cFFFFCC99=人物=|r猿飞 阿斯玛\n  □旋风拳 |cFF999999疾.旋风拳|r \n  □狼牙追锥\n  □风暴碎\n  □打火机之术 |cFF999999乱涡风火之术|r \n  □飞燕.空穿\n|cFFFFCC99=属性=|r\n  ● 力量- 22 > 2.3\n  ○ 敏捷- 18 > 2.3\n  ○ 智力- 16 > 1.4\n  ◇ 速度- 攻击·1.8 移动·300 结印·0.3\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★★★\n  ☆ 生存能力-★★★★\n  ☆ 操作难度-★★")))
call SaveStr(YDHT,(1),(10),(GetLocalizedString("|cFFFFCC99=人物=|r鬼灯 水月\n  □水化之术\n  □水龙弹之术 |cFF999999豪水龙弹之术|r\n  □水质饮料\n  □水牙弹\n  □苍流破 |cFF999999苍流破.乱|r\n|cFFFFCC99=属性=|r\n  ○ 力量- 18 > 2\n  ● 敏捷- 24 > 2.4\n  ○ 智力- 12 > 1.6\n  ◇ 速度- 攻击·2.5 移动·270 结印·0.4\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★★★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(11),(GetLocalizedString("|cFFFFCC99=人物=|r迪达拉\n  □c.1 |cFF999999c.1(粘土增幅)|r\n  □c.3 |cFF999999c.3(粘土增幅)|r\n  □粘土制造\n  □c.4 |cFF999999c.4(粘土增幅)|r\n  □c.o\n|cFFFFCC99=属性=|r\n  ○ 力量- 15 > 2\n  ○ 敏捷- 16 > 1.1\n  ● 智力- 26 > 2.9\n  ◇ 速度- 攻击·1.9 移动·290 结印·0.2\n  ☆ 伤害输出-★★★★★\n  ☆ 控场限制-★\n  ☆ 生存能力-★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(12),(GetLocalizedString("|cFFFFCC99=人物=|r千手 扉间\n  □黑暗行之术\n  □水阵壁 |cFF999999豪.水阵壁|r\n  □水翔羽 |cFF999999水翔羽.改|r\n  □水冲波\n  □硬涡水刃 |cFF999999乱涡水刃|r\n|cFFFFCC99=属性=|r\n  ○ 力量- 13 > 1.5\n  ● 敏捷- 22 > 2.7\n  ○ 智力- 17 > 1.8\n  ◇ 速度- 攻击·2.2 移动·290 结印·0.25\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(13),(GetLocalizedString("|cFFFFCC99=人物=|r千手 纲手\n  □医疗忍术 |cFF999999范围医疗忍术|r\n  □地流 |cFF999999地流.帝|r\n  □最强の怪力 |cFF999999完全的暴力|r\n  □痛天脚 |cFF999999天守脚|r\n  □阴封印.解\n|cFFFFCC99=属性=|r\n  ● 力量- 20 > 3\n  ○ 敏捷- 15 > 1\n  ○ 智力- 17 > 2\n  ◇ 速度- 攻击·2.13 移动·300 结印·0.3\n  ☆ 伤害输出-★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★★★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(14),(GetLocalizedString("|cFFFFCC99=人物=|r千手 柱间\n  □罗森万象 |cFF999999真.罗森万象|r\n  □金刚招木 |cFF999999真.金刚招木|r\n  □刚力 |cFF999999木束缚之术|r\n  □金刚力.不动\n  □树界降临 |cFF999999真.树界降临|r\n|cFFFFCC99=属性=|r\n  ○ 力量- 17 > 1.7\n  ○ 敏捷- 13 > 1.5\n  ● 智力- 22 > 2.8\n  ◇ 速度- 攻击·2.2 移动·290 结印·0.5\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(15),(GetLocalizedString("|cFFFFCC99=人物=|r自来也\n  □火龙炎弹 |cFF999999火龙油炎弹|r |cFF999999火龙豪炎弹|r\n  □螺旋丸 |cFF999999豪炎螺旋丸|r\n  □蛤蟆油\n  □通灵之术\n  □双讯螺旋丸\n|cFFFFCC99=属性=|r\n  ● 力量- 22 > 2.3\n  ○ 敏捷- 14 > 1.7\n  ○ 智力- 15 > 2\n  ◇ 速度- 攻击·2.22 移动·280 结印·0.4\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★★")))
call SaveStr(YDHT,(1),(16),(GetLocalizedString("|cFFFFCC99=人物=|r干沛 鬼鲛\n  □水鲛霰弹术 |cFF999999水鲛霰弹术(二弹型)|r |cFF999999水鲛霰弹术(三弹型)|r\n  □怪力鬼削\n  □潜鲛削灭 |cFF999999潜鲛吞噬|r\n  □无限鲛\n  □鲛肌融食 |cFF999999大爆水冲波|r\n|cFFFFCC99=属性=|r\n  ● 力量- 25 > 3.1\n  ○ 敏捷- 8  > 0.9\n  ○ 智力- 18 > 2\n  ◇ 速度- 攻击·2.3 移动·280 结印·0.47\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★★\n  ☆ 生存能力-★★\n  ☆ 操作难度-★★★★★")))
call SaveStr(YDHT,(1),(17),(GetLocalizedString("|cFFFFCC99=人物=|r宇智波 佐助\n  □豪龙火之术 |cFF999999大豪龙火之术|r\n  □千鸟 |cFF999999极.千鸟|r\n  □写轮眼\n  □千鸟操具 |cFF999999多重.千鸟操具|r\n  □麒麟\n|cFFFFCC99=属性=|r\n  ○ 力量- 13 > 1.5\n  ● 敏捷- 22 > 2.7\n  ○ 智力- 17 > 1.8\n  ◇ 速度- 攻击·2.2 移动·350 结印·0.2\n  ☆ 伤害输出-★★★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★★")))
call SaveStr(YDHT,(1),(18),(GetLocalizedString("|cFFFFCC99=人物=|r迈特 凯\n  □木叶刚力旋风 |cFF999999木叶刚力大旋风|r\n  □夜凤凰 |cFF999999重.夜凤凰|r\n  □青春动力\n  □八门遁甲\n  □朝孔雀 |cFF999999重.朝孔雀|r\n|cFFFFCC99=属性=|r\n  ● 力量- 30 > 3.3\n  ○ 敏捷- 16 > 2.1\n  ○ 智力- 15 > 0.6\n  ◇ 速度- 攻击·2.2 移动·300 结印·0.25\n  ☆ 伤害输出-★★★\n  ☆ 控场限制-★★★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★★")))
call SaveStr(YDHT,(1),(19),(GetLocalizedString("|cFFFFCC99=人物=|r宇智波 鼬\n  □豪炎球之术\n  □幻术 鸦 |cFF999999幻术.泡沫|r |cFF999999分身大爆炸|r\n  □万花筒写轮眼\n  □月读\n  □天照\n|cFFFFCC99=属性=|r\n  ○ 力量- 19 > 1.5\n  ● 敏捷- 22 > 2.4\n  ○ 智力- 16 > 2.1\n  ◇ 速度- 攻击·1.7 移动·320 结印·0.3\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★★★\n  ☆ 生存能力-★★★★\n  ☆ 操作难度-★★★★")))
call SaveStr(YDHT,(1),(20),(GetLocalizedString("|cFFFFCC99=人物=|r秋道 丁次\n  □肉弹战车 |cFF999999肉弹针战车|r\n  □超倍化术\n  □部分倍化术\n  □倍化怒涛\n  □超.肉弹战车\n|cFFFFCC99=属性=|r\n  ● 力量- 24 > 3.2\n  ○ 敏捷- 14 > 1.3\n  ○ 智力- 14 > 1.5\n  ◇ 速度- 攻击·2.05 移动·230 结印·0.2\n  ☆ 伤害输出-★★★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(21),(GetLocalizedString("|cFFFFCC99=人物=|r我爱罗\n  □沙时雨\n  □沙暴送葬 |cFF999999真.沙暴送葬|r\n  □沙之铠甲\n  □最强之攻击.守鹤之矛 |cFF999999沙暴枪葬|r\n  □滅砂爆葬\n|cFFFFCC99=属性=|r\n  ○ 力量- 10 > 1\n  ○ 敏捷- 14 > 1.8\n  ● 智力- 20 > 3.2\n  ◇ 速度- 攻击·2 移动·255 结印·0.4\n  ☆ 伤害输出-★★★★★\n  ☆ 控场限制-★★★\n  ☆ 生存能力-★ / ★★★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(22),(GetLocalizedString("|cFFFFCC99=人物=|r卡卡西\n  □雷切 |cFF999999极.雷切|r |cFF999999神威|r\n  □碎雷牙 |cFF999999碎雷咬|r\n  □写轮眼\n  □万花筒写轮眼\n  □雷切闪突\n|cFFFFCC99=属性=|r\n  ○ 力量- 15 > 1.7\n  ● 敏捷- 24 > 2.8\n  ○ 智力- 15 > 1.5\n  ◇ 速度- 攻击·2.22 移动·335 结印·0.3\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★★\n  ☆ 生存能力-★★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(23),(GetLocalizedString("|cFFFFCC99=人物=|r竹取 君麻吕\n  □柳之舞 |cFF999999铁线花之舞.花|r\n  □椿之舞 |cFF999999椿之舞(咒印状态二)|r |cFF999999茨|r\n  □唐松之舞 |cFF999999唐松之舞(咒印状态二)|r\n  □咒印状态二\n  □早蕨之舞\n|cFFFFCC99=属性=|r\n  ○ 力量- 14 > 1.5\n  ● 敏捷- 26 > 2.9\n  ○ 智力- 14 > 1.6\n  ◇ 速度- 攻击·1.9 移动·330 结印·0.3\n  ☆ 伤害输出-★★★★★☆\n  ☆ 控场限制-★★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★★★")))
call SaveStr(YDHT,(1),(24),(GetLocalizedString("|cFFFFCC99=人物=|r奇拉 比\n  □八尾の力 |cFF999999强气.八尾の力|r\n  □雷犁热刀\n  □七刀流\n  □尾兽化\n  □？？？\n|cFFFFCC99=属性=|r\n  ● 力量- 22 > 2.7\n  ○ 敏捷- 18 > 1.9\n  ○ 智力- 17 > 1.4\n  ◇ 速度- 攻击·2.2 移动·270 结印·0.5\n  ☆ 伤害输出-★★★★\n  ☆ 控场限制-★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★")))
call SaveStr(YDHT,(1),(25),(GetLocalizedString("|cFFFFCC99=人物=|r小南\n  □式纸之舞 |cFF999999式纸之舞.时雨|r\n  □式纸爆破\n  □荒纸\n  □天纸\n  □式纸之舞.禁\n|cFFFFCC99=属性=|r\n  ○ 力量- 10 > 1.6\n  ○ 敏捷- 20 > 2\n  ● 智力- 20 > 2.4\n  ◇ 速度- 攻击·2.05 移动·295 结印·0.2\n  ☆ 伤害输出-★★★★★\n  ☆ 控场限制-★\n  ☆ 生存能力-★★★\n  ☆ 操作难度-★★★★★")))
call SaveStr(YDHT,(1),(26),(GetLocalizedString("|cFFFFCC99=人物=|r旋涡 鸣人\n  □螺旋丸 |cFF999999仙术.螺旋丸|r |cFF999999大玉.螺旋丸|r\n  □影分身之术 |cFF999999仙术.影分身|r\n  □分身替身术\n  □查克拉聚集\n  □螺旋手里剑 |cFF999999仙术.螺旋手里剑|r\n|cFFFFCC99=属性=|r\n  ● 力量- 23 > 2.25\n  ○ 敏捷- 18 > 1.75\n  ○ 智力- 16 > 2\n  ◇ 速度- 攻击·1.77 移动·290 结印·0.3\n  ☆ 伤害输出-★★★★★\n  ☆ 控场限制-★\n  ☆ 生存能力-★★★★\n  ☆ 操作难度-★★★★")))
set udg_X_Attack[1]=10
set udg_X_Attack[2]=10
set udg_X_Attack[3]=10
set udg_X_jisha=30
endfunction
function InitTrig_Start takes nothing returns nothing
set gg_trg_Start=CreateTrigger()
call TriggerAddAction(gg_trg_Start,function Trig_Start_Actions)
endfunction
function Trig_Start35_Actions takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"               战斗开始!")
call DisableTrigger(GetTriggeringTrigger())
set udg_GAME_OVER=false
endfunction
function InitTrig_Start35 takes nothing returns nothing
set gg_trg_Start35=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_Start35,45.00)
call TriggerAddAction(gg_trg_Start35,function Trig_Start35_Actions)
endfunction
function Trig_CD_Func001001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)
endfunction
function Trig_CD_Func001A takes nothing returns nothing
call UnitResetCooldown(GetEnumUnit())
call SetUnitManaPercentBJ(GetEnumUnit(),100.00)
call SetUnitLifePercentBJ(GetEnumUnit(),100)
endfunction
function Trig_CD_Actions takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Trig_CD_Func001001002)),function Trig_CD_Func001A)
endfunction
function InitTrig_CD takes nothing returns nothing
set gg_trg_CD=CreateTrigger()
call DisableTrigger(gg_trg_CD)
call TriggerRegisterPlayerEventEndCinematic(gg_trg_CD,Player(0))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_CD,Player(8))
call TriggerAddAction(gg_trg_CD,function Trig_CD_Actions)
endfunction
function Trig_DZ_Actions takes nothing returns nothing
endfunction
function InitTrig_DZ takes nothing returns nothing
set gg_trg_DZ=CreateTrigger()
call DisableTrigger(gg_trg_DZ)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"1",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"2",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"3",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"4",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"5",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"6",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"7",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"8",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"9",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"10",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"11",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"12",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"13",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"14",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"15",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"16",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"17",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"18",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"19",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"20",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"21",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"22",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"23",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"24",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"25",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"26",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"27",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DZ,Player(0),"28",true)
call TriggerAddAction(gg_trg_DZ,function Trig_DZ_Actions)
endfunction
function Trig_JT_Actions takes nothing returns nothing
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,(CameraSetupGetField(GetCurrentCameraSetup(),CAMERA_FIELD_TARGET_DISTANCE)+200.00),0.10)
endfunction
function InitTrig_JT takes nothing returns nothing
set gg_trg_JT=CreateTrigger()
call DisableTrigger(gg_trg_JT)
call TriggerRegisterPlayerChatEvent(gg_trg_JT,Player(0),"+",true)
call TriggerAddAction(gg_trg_JT,function Trig_JT_Actions)
endfunction
function Trig_JT2_Actions takes nothing returns nothing
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,(CameraSetupGetField(GetCurrentCameraSetup(),CAMERA_FIELD_TARGET_DISTANCE)-200.00),0.10)
endfunction
function InitTrig_JT2 takes nothing returns nothing
set gg_trg_JT2=CreateTrigger()
call DisableTrigger(gg_trg_JT2)
call TriggerRegisterPlayerChatEvent(gg_trg_JT2,Player(0),"-",true)
call TriggerAddAction(gg_trg_JT2,function Trig_JT2_Actions)
endfunction
function Trig_CS_1_Conditions takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='tdex'))then
return false
endif
return true
endfunction
function Trig_CS_1_Actions takes nothing returns nothing
set udg_choose_ture[GetConvertedPlayerId(Player(0))]=true
call KillUnit(GetBuyingUnit())
call RemoveUnit(GetBuyingUnit())
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetBuyingUnit()),GetRectCenter(gg_rct_East_Spawn_Viz),0.50)
endfunction
function InitTrig_CS_1 takes nothing returns nothing
set gg_trg_CS_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_CS_1,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_CS_1,Condition(function Trig_CS_1_Conditions))
call TriggerAddAction(gg_trg_CS_1,function Trig_CS_1_Actions)
endfunction
function Trig_CS_2_Conditions takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='tdx2'))then
return false
endif
return true
endfunction
function Trig_CS_2_Actions takes nothing returns nothing
call AdjustPlayerStateBJ(100000,Player(0),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(30,Player(0),PLAYER_STATE_RESOURCE_LUMBER)
endfunction
function InitTrig_CS_2 takes nothing returns nothing
set gg_trg_CS_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_CS_2,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_CS_2,Condition(function Trig_CS_2_Conditions))
call TriggerAddAction(gg_trg_CS_2,function Trig_CS_2_Actions)
endfunction
function Trig_CS_3_Conditions takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='tint'))then
return false
endif
return true
endfunction
function Trig_CS_3_Actions takes nothing returns nothing
call SetHeroLevel(udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],35,true)
endfunction
function InitTrig_CS_3 takes nothing returns nothing
set gg_trg_CS_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_CS_3,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_CS_3,Condition(function Trig_CS_3_Conditions))
call TriggerAddAction(gg_trg_CS_3,function Trig_CS_3_Actions)
endfunction
function Trig_PK1_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A024'))then
return false
endif
return true
endfunction
function Trig_PK1_Func001C takes nothing returns boolean
if(not(udg_jdsy==false))then
return false
endif
if(not(udg_gzkg==false))then
return false
endif
if(not(GetPlayerSlotState(GetOwningPlayer(GetSpellTargetUnit()))!=PLAYER_SLOT_STATE_LEFT))then
return false
endif
if(not(GetPlayerController(GetOwningPlayer(GetSpellTargetUnit()))!=MAP_CONTROL_COMPUTER))then
return false
endif
if(not(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
if(not(IsUnitPausedBJ(GetSpellTargetUnit())!=true))then
return false
endif
if(not(GetUnitTypeId(GetSpellTargetUnit())!='Oshd'))then
return false
endif
return true
endfunction
function Trig_PK1_Actions takes nothing returns nothing
if(Trig_PK1_Func001C())then
set udg_jdsy=true
set udg_jdUnit[1]=GetTriggerUnit()
set udg_jdUnit[2]=GetSpellTargetUnit()
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(("|cFF00FFFF"+GetPlayerName(GetOwningPlayer(udg_jdUnit[1])))+("|r邀请与|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(udg_jdUnit[2]))+"|r进行决斗!"))))
call SetUnitInvulnerable(udg_jdUnit[1],true)
call SetUnitInvulnerable(udg_jdUnit[2],true)
call DialogSetMessage(udg_AgreeOrRejectPK,"1 对 1")
call DialogAddButtonBJ(udg_AgreeOrRejectPK,"应战(奖励200金币)")
set udg_PKAgree=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(udg_AgreeOrRejectPK,"拒绝(减少100金币)")
set udg_PKReject=GetLastCreatedButtonBJ()
call DialogDisplayBJ(true,udg_AgreeOrRejectPK,GetOwningPlayer(udg_jdUnit[2]))
call TriggerSleepAction(2)
call SetUnitInvulnerable(udg_jdUnit[1],false)
call SetUnitInvulnerable(udg_jdUnit[2],false)
else
call DisplayTimedTextToForce(GetPlayersByMapControl(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))),8.00,"|cFFFF0000无法邀请该玩家决斗|r")
endif
endfunction
function InitTrig_PK1 takes nothing returns nothing
set gg_trg_PK1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_PK1,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_PK1,Condition(function Trig_PK1_Conditions))
call TriggerAddAction(gg_trg_PK1,function Trig_PK1_Actions)
endfunction
function Trig_PK2_Func003Func002C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_jdUnit[1])==true))then
return false
endif
if(not(IsUnitAliveBJ(udg_jdUnit[2])==true))then
return false
endif
return true
endfunction
function Trig_PK2_Func003C takes nothing returns boolean
if(not(GetClickedButtonBJ()==udg_PKAgree))then
return false
endif
return true
endfunction
function Trig_PK2_Actions takes nothing returns nothing
call SetUnitInvulnerable(udg_jdUnit[1],false)
call SetUnitInvulnerable(udg_jdUnit[2],false)
if(Trig_PK2_Func003C())then
call DialogClear(udg_AgreeOrRejectPK)
if(Trig_PK2_Func003Func002C())then
call AdjustPlayerStateBJ(200,GetOwningPlayer(udg_jdUnit[2]),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(("|cFF00FFFF"+GetPlayerName(GetOwningPlayer(udg_jdUnit[2])))+"|r接受了决斗的邀请,得到|cFFFFFF33400金钱|r奖励,决斗现在开始了!!"))
call SetUnitPositionLocFacingLocBJ(udg_jdUnit[1],GetRectCenter(gg_rct_PKRequesterStart),GetRectCenter(gg_rct_PKResopnsorStart))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[1]),GetRectCenter(gg_rct_PKRequesterStart),0.50)
call SetUnitPositionLocFacingLocBJ(udg_jdUnit[2],GetRectCenter(gg_rct_PKResopnsorStart),GetRectCenter(gg_rct_PKRequesterStart))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[2]),GetRectCenter(gg_rct_PKResopnsorStart),0.50)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call SetUnitLifePercentBJ(udg_jdUnit[GetForLoopIndexA()],100)
call SetUnitManaPercentBJ(udg_jdUnit[GetForLoopIndexA()],100)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call CreateNUnitsAtLocFacingLocBJ(5,'hhes',GetOwningPlayer(udg_jdUnit[1]),GetRectCenter(gg_rct_PKRequesterStart),GetRectCenter(gg_rct_PKResopnsorStart))
call CreateNUnitsAtLocFacingLocBJ(5,'hhes',GetOwningPlayer(udg_jdUnit[2]),GetRectCenter(gg_rct_PKResopnsorStart),GetRectCenter(gg_rct_PKRequesterStart))
call StartTimerBJ(udg_TimerPK,false,120.00)
call CreateTimerDialogBJ(GetLastCreatedTimerBJ(),"决斗倒计时")
call TimerDialogDisplayBJ(true,GetLastCreatedTimerDialogBJ())
set udg_TimerWindowPK=GetLastCreatedTimerDialogBJ()
call EnableTrigger(gg_trg_PK5)
call EnableTrigger(gg_trg_PK4)
call EnableTrigger(gg_trg_PK3)
else
call DisplayTimedTextToForce(GetPlayersAll(),10.00,"邀请者与被邀请者中存在阵亡单位,无法进行决斗")
set udg_jdsy=false
endif
else
call DialogClear(udg_AgreeOrRejectPK)
call AdjustPlayerStateBJ(-100,GetOwningPlayer(udg_jdUnit[2]),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(200,GetOwningPlayer(udg_jdUnit[1]),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(("|cFF00FFFF"+GetPlayerName(GetOwningPlayer(udg_jdUnit[2])))+("|r拒绝决斗的请求,增加|cFFFFFF33200金钱|r给|cFF00FFFF"+GetPlayerName(GetOwningPlayer(udg_jdUnit[1])))))
set udg_jdsy=false
endif
endfunction
function InitTrig_PK2 takes nothing returns nothing
set gg_trg_PK2=CreateTrigger()
call TriggerRegisterDialogEventBJ(gg_trg_PK2,udg_AgreeOrRejectPK)
call TriggerAddAction(gg_trg_PK2,function Trig_PK2_Actions)
endfunction
function Trig_PK3_Func014C takes nothing returns boolean
if((GetTriggerUnit()==udg_jdUnit[1]))then
return true
endif
if((GetTriggerUnit()==udg_jdUnit[2]))then
return true
endif
return false
endfunction
function Trig_PK3_Conditions takes nothing returns boolean
if(not Trig_PK3_Func014C())then
return false
endif
if(not(udg_jdsy==true))then
return false
endif
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
return true
endfunction
function Trig_PK3_Func006Func003001 takes nothing returns boolean
return(udg_x>0)
endfunction
function Trig_PK3_Func006Func007001 takes nothing returns boolean
return(udg_x>0)
endfunction
function Trig_PK3_Func006C takes nothing returns boolean
if(not(GetTriggerUnit()==udg_jdUnit[1]))then
return false
endif
return true
endfunction
function Trig_PK3_Func008Func001C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(3))==true))then
return false
endif
return true
endfunction
function Trig_PK3_Func008Func002C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(7))==true))then
return false
endif
return true
endfunction
function Trig_PK3_Func008Func003C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(11))==true))then
return false
endif
return true
endfunction
function Trig_PK3_Func009001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)!=true)
endfunction
function Trig_PK3_Func009002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_PK3_Func010001002 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[4])==true)
endfunction
function Trig_PK3_Func010A takes nothing returns nothing
call KillUnit(GetEnumUnit())
call GroupRemoveUnit(udg_All_unit_tm[4],GetEnumUnit())
endfunction
function Trig_PK3_Actions takes nothing returns nothing
call PauseTimer(udg_TimerPK)
call DestroyTimerDialog(udg_TimerWindowPK)
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(gg_trg_PK4)
call DisableTrigger(gg_trg_PK5)
if(Trig_PK3_Func006C())then
call AdjustPlayerStateBJ(2000,GetOwningPlayer(udg_jdUnit[2]),PLAYER_STATE_RESOURCE_GOLD)
set udg_x=(GetHeroLevel(udg_jdUnit[2])-GetHeroLevel(udg_jdUnit[1]))
if((udg_x>0))then
set udg_x=(udg_x*100)
else
set udg_x=0
endif
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(("|cFF00FFFF"+GetPlayerName(GetOwningPlayer(udg_jdUnit[1])))+("|r在决斗中被击败,|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(udg_jdUnit[2]))+("|r获得到|cFFFFFF332000金钱|r,和|cFFFF00CC"+(I2S(udg_x)+"EXP|r的等级差异的奖励!"))))))
else
call AdjustPlayerStateBJ(2000,GetOwningPlayer(udg_jdUnit[1]),PLAYER_STATE_RESOURCE_GOLD)
set udg_x=(GetHeroLevel(udg_jdUnit[1])-GetHeroLevel(udg_jdUnit[2]))
if((udg_x>0))then
set udg_x=(udg_x*100)
else
set udg_x=0
endif
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(("|cFF00FFFF"+GetPlayerName(GetOwningPlayer(udg_jdUnit[2])))+("|r在决斗中被击败,|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(udg_jdUnit[1]))+("|r获得到|cFFFFFF332000金钱|r,和|cFFFF00CC"+(I2S(udg_x)+"EXP|r的等级差异的奖励!"))))))
endif
call TriggerSleepAction(2)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_PK3_Func008Func001C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
if(Trig_PK3_Func008Func002C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
if(Trig_PK3_Func008Func003C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call ForGroupBJ(GetUnitsInRectMatching(gg_rct_jdc,Condition(function Trig_PK3_Func009001002)),function Trig_PK3_Func009002)
call ForGroupBJ(GetUnitsInRectMatching(gg_rct_jdc,Condition(function Trig_PK3_Func010001002)),function Trig_PK3_Func010A)
set udg_jdUnit[1]=null
set udg_jdUnit[2]=null
set udg_jdsy=false
endfunction
function InitTrig_PK3 takes nothing returns nothing
set gg_trg_PK3=CreateTrigger()
call DisableTrigger(gg_trg_PK3)
call TriggerRegisterAnyUnitEventBJ(gg_trg_PK3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_PK3,Condition(function Trig_PK3_Conditions))
call TriggerAddAction(gg_trg_PK3,function Trig_PK3_Actions)
endfunction
function Trig_PK4_Conditions takes nothing returns boolean
if(not(udg_jdsy==true))then
return false
endif
return true
endfunction
function Trig_PK4_Func007Func001C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(3))==true))then
return false
endif
return true
endfunction
function Trig_PK4_Func007Func002C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(7))==true))then
return false
endif
return true
endfunction
function Trig_PK4_Func007Func003C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(11))==true))then
return false
endif
return true
endfunction
function Trig_PK4_Func009001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)!=true)
endfunction
function Trig_PK4_Func009002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_PK4_Func010001002 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[4])==true)
endfunction
function Trig_PK4_Func010A takes nothing returns nothing
call KillUnit(GetEnumUnit())
call GroupRemoveUnit(udg_All_unit_tm[4],GetEnumUnit())
endfunction
function Trig_PK4_Actions takes nothing returns nothing
call DisableTrigger(gg_trg_PK3)
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(gg_trg_PK5)
call PauseTimer(udg_TimerPK)
call DestroyTimerDialog(udg_TimerWindowPK)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_PK4_Func007Func001C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
if(Trig_PK4_Func007Func002C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
if(Trig_PK4_Func007Func003C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call DisableTrigger(gg_trg_PK5)
call ForGroupBJ(GetUnitsInRectMatching(gg_rct_jdc,Condition(function Trig_PK4_Func009001002)),function Trig_PK4_Func009002)
call ForGroupBJ(GetUnitsInRectMatching(gg_rct_jdc,Condition(function Trig_PK4_Func010001002)),function Trig_PK4_Func010A)
call DisplayTimedTextToForce(GetPlayersAll(),10.00,"决斗时间结束,平局。")
call SetUnitInvulnerable(udg_jdUnit[1],false)
call SetUnitInvulnerable(udg_jdUnit[2],false)
set udg_jdUnit[1]=null
set udg_jdUnit[2]=null
set udg_jdsy=false
endfunction
function InitTrig_PK4 takes nothing returns nothing
set gg_trg_PK4=CreateTrigger()
call DisableTrigger(gg_trg_PK4)
call TriggerRegisterTimerExpireEventBJ(gg_trg_PK4,udg_TimerPK)
call TriggerAddCondition(gg_trg_PK4,Condition(function Trig_PK4_Conditions))
call TriggerAddAction(gg_trg_PK4,function Trig_PK4_Actions)
endfunction
function Trig_PK5_Func014C takes nothing returns boolean
if((GetTriggerUnit()==udg_jdUnit[1]))then
return true
endif
if((GetTriggerUnit()==udg_jdUnit[2]))then
return true
endif
return false
endfunction
function Trig_PK5_Conditions takes nothing returns boolean
if(not Trig_PK5_Func014C())then
return false
endif
return true
endfunction
function Trig_PK5_Func006001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)!=true)
endfunction
function Trig_PK5_Func006002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_PK5_Func008Func001C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(3))==true))then
return false
endif
return true
endfunction
function Trig_PK5_Func008Func002C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(7))==true))then
return false
endif
return true
endfunction
function Trig_PK5_Func008Func003C takes nothing returns boolean
if(not(IsUnitAlly(udg_jdUnit[GetForLoopIndexA()],Player(11))==true))then
return false
endif
return true
endfunction
function Trig_PK5_Actions takes nothing returns nothing
call PauseTimer(udg_TimerPK)
call DestroyTimerDialog(udg_TimerWindowPK)
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(gg_trg_PK4)
call DisableTrigger(gg_trg_PK3)
call ForGroupBJ(GetUnitsInRectMatching(gg_rct_jdc,Condition(function Trig_PK5_Func006001002)),function Trig_PK5_Func006002)
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" 从决斗中逃离。"))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_PK5_Func008Func001C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
if(Trig_PK5_Func008Func002C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
if(Trig_PK5_Func008Func003C())then
call SetUnitPositionLoc(udg_jdUnit[GetForLoopIndexA()],GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_jdUnit[GetForLoopIndexA()]),GetUnitLoc(udg_jdUnit[GetForLoopIndexA()]),0.50)
else
call DoNothing()
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call KillUnit(GetTriggerUnit())
call TriggerSleepAction(0.10)
set udg_jdUnit[1]=null
set udg_jdUnit[2]=null
set udg_jdsy=false
endfunction
function InitTrig_PK5 takes nothing returns nothing
set gg_trg_PK5=CreateTrigger()
call DisableTrigger(gg_trg_PK5)
call TriggerRegisterLeaveRectSimple(gg_trg_PK5,gg_rct_jdc)
call TriggerAddCondition(gg_trg_PK5,Condition(function Trig_PK5_Conditions))
call TriggerAddAction(gg_trg_PK5,function Trig_PK5_Actions)
endfunction
function Trig_PK6_Func002Func003C takes nothing returns boolean
if((GetOwningPlayer(GetTriggerUnit())==GetOwningPlayer(udg_jdUnit[1])))then
return true
endif
if((GetOwningPlayer(GetTriggerUnit())==GetOwningPlayer(udg_jdUnit[2])))then
return true
endif
if((GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_PASSIVE)))then
return true
endif
if((GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)))then
return true
endif
return false
endfunction
function Trig_PK6_Func002C takes nothing returns boolean
if(not Trig_PK6_Func002Func003C())then
return false
endif
return true
endfunction
function Trig_PK6_Actions takes nothing returns nothing
call TriggerSleepAction(0.20)
if(Trig_PK6_Func002C())then
call DoNothing()
else
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(gg_rct_Mitte))
call KillUnit(GetTriggerUnit())
endif
endfunction
function InitTrig_PK6 takes nothing returns nothing
set gg_trg_PK6=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_PK6,gg_rct_jdc)
call TriggerAddAction(gg_trg_PK6,function Trig_PK6_Actions)
endfunction
function Trig_P_wupingcaozuo1_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A032'))then
return false
endif
return true
endfunction
function Trig_P_wupingcaozuo1_Func001Func001C takes nothing returns boolean
if(not(UnitItemInSlotBJ(GetTriggerUnit(),bj_forLoopAIndex)!=null))then
return false
endif
if(not(UnitInventoryCount(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])!=6))then
return false
endif
if(not(GetItemType(UnitItemInSlotBJ(GetTriggerUnit(),bj_forLoopAIndex))!=ITEM_TYPE_PURCHASABLE))then
return false
endif
if(not(DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())]))<=2300.00))then
return false
endif
return true
endfunction
function Trig_P_wupingcaozuo1_Actions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_P_wupingcaozuo1_Func001Func001C())then
call UnitAddItem(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],UnitItemInSlotBJ(GetTriggerUnit(),bj_forLoopAIndex))
return
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_P_wupingcaozuo1 takes nothing returns nothing
set gg_trg_P_wupingcaozuo1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_P_wupingcaozuo1,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_P_wupingcaozuo1,Condition(function Trig_P_wupingcaozuo1_Conditions))
call TriggerAddAction(gg_trg_P_wupingcaozuo1,function Trig_P_wupingcaozuo1_Actions)
endfunction
function Trig_P_wupingcaozuo2_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A033'))then
return false
endif
return true
endfunction
function Trig_P_wupingcaozuo2_Func001Func001C takes nothing returns boolean
if(not(UnitItemInSlotBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],bj_forLoopAIndex)!=null))then
return false
endif
if(not(UnitInventoryCount(GetTriggerUnit())!=6))then
return false
endif
if(not(DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())]))<=2300.00))then
return false
endif
return true
endfunction
function Trig_P_wupingcaozuo2_Actions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_P_wupingcaozuo2_Func001Func001C())then
call UnitAddItem(GetTriggerUnit(),UnitItemInSlotBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],bj_forLoopAIndex))
return
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_P_wupingcaozuo2 takes nothing returns nothing
set gg_trg_P_wupingcaozuo2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_P_wupingcaozuo2,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_P_wupingcaozuo2,Condition(function Trig_P_wupingcaozuo2_Conditions))
call TriggerAddAction(gg_trg_P_wupingcaozuo2,function Trig_P_wupingcaozuo2_Actions)
endfunction
function Trig_P_wupingcaozuo3_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A034'))then
return false
endif
return true
endfunction
function Trig_P_wupingcaozuo3_Actions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call UnitDropItemPointLoc(GetTriggerUnit(),UnitItemInSlotBJ(GetTriggerUnit(),bj_forLoopAIndex),GetUnitLoc(GetTriggerUnit()))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_P_wupingcaozuo3 takes nothing returns nothing
set gg_trg_P_wupingcaozuo3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_P_wupingcaozuo3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_P_wupingcaozuo3,Condition(function Trig_P_wupingcaozuo3_Conditions))
call TriggerAddAction(gg_trg_P_wupingcaozuo3,function Trig_P_wupingcaozuo3_Actions)
endfunction
function Trig_P_leishenzhinu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03G'))then
return false
endif
return true
endfunction
function Trig_P_leishenzhinu_Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_P_leishenzhinu_Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_P_leishenzhinu_Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_P_leishenzhinu_Func002A takes nothing returns nothing
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetTriggerUnit()),GetUnitLoc(GetEnumUnit()),bj_UNIT_FACING)
call SetUnitFlyHeight(GetLastCreatedUnit(),1000.00,1000000000.00)
call IssueTargetOrder(GetLastCreatedUnit(),"chainlightning",GetEnumUnit())
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*5.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call UnitApplyTimedLifeBJ(1.50,'BTLF',GetLastCreatedUnit())
endfunction
function Trig_P_leishenzhinu_Actions takes nothing returns nothing
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetSpellTargetLoc(),Condition(function Trig_P_leishenzhinu_Func002001003)),function Trig_P_leishenzhinu_Func002A)
endfunction
function InitTrig_P_leishenzhinu takes nothing returns nothing
set gg_trg_P_leishenzhinu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_P_leishenzhinu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_P_leishenzhinu,Condition(function Trig_P_leishenzhinu_Conditions))
call TriggerAddAction(gg_trg_P_leishenzhinu,function Trig_P_leishenzhinu_Actions)
endfunction
function Trig_P_huifuyu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AIp1'))then
return false
endif
return true
endfunction
function Trig_P_huifuyu_Func002001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_P_huifuyu_Func002001003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_P_huifuyu_Func002001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_P_huifuyu_Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))!=true)
endfunction
function Trig_P_huifuyu_Func002001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))!=true))
endfunction
function Trig_P_huifuyu_Func002Func003C takes nothing returns boolean
if(not(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
return true
endfunction
function Trig_P_huifuyu_Func002A takes nothing returns nothing
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
if(Trig_P_huifuyu_Func002Func003C())then
call SetUnitLifeBJ(GetEnumUnit(),(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+((I2R(GetHeroStr(GetEnumUnit(),true))+(I2R(GetHeroAgi(GetEnumUnit(),true))+I2R(GetHeroInt(GetEnumUnit(),true))))*2.00)))
else
call SetUnitLifeBJ(GetEnumUnit(),(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+500.00))
endif
endfunction
function Trig_P_huifuyu_Actions takes nothing returns nothing
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_P_huifuyu_Func002001003)),function Trig_P_huifuyu_Func002A)
endfunction
function InitTrig_P_huifuyu takes nothing returns nothing
set gg_trg_P_huifuyu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_P_huifuyu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_P_huifuyu,Condition(function Trig_P_huifuyu_Conditions))
call TriggerAddAction(gg_trg_P_huifuyu,function Trig_P_huifuyu_Actions)
endfunction
function Trig_HC1_Func002C takes nothing returns boolean
if((GetItemTypeId(GetSoldItem())=='I004'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I006'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I005'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I009'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I007'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I008'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00C'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00B'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00A'))then
return true
endif
return false
endfunction
function Trig_HC1_Conditions takes nothing returns boolean
if(not Trig_HC1_Func002C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func001Func001Func007C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I009'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rde2'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'kpin'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func001Func001Func007C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I004'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rde1'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mcou'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I007'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rag1'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'kpin'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I006'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rst1'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mcou'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func001Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I008'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'hval'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'kpin'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I005'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'lhst'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mcou'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00C'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rde3'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00A'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'bgst'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC1_Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00B'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'ratc'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))==true))then
return false
endif
return true
endfunction
function Trig_HC1_Func001C takes nothing returns boolean
if(not Trig_HC1_Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC1_Actions takes nothing returns nothing
if(Trig_HC1_Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'ratc'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))
call UnitAddItemByIdSwapped('gcel',GetBuyingUnit())
return
else
if(Trig_HC1_Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'bgst'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))
call UnitAddItemByIdSwapped('belv',GetBuyingUnit())
return
else
if(Trig_HC1_Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rde3'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))
call UnitAddItemByIdSwapped('ajen',GetBuyingUnit())
return
else
if(Trig_HC1_Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'lhst'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mcou'))
call UnitAddItemByIdSwapped('hval',GetBuyingUnit())
return
else
if(Trig_HC1_Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'hval'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'kpin'))
call UnitAddItemByIdSwapped('bgst',GetBuyingUnit())
return
else
if(Trig_HC1_Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rst1'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mcou'))
call UnitAddItemByIdSwapped('rag1',GetBuyingUnit())
return
else
if(Trig_HC1_Func001Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rag1'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'kpin'))
call UnitAddItemByIdSwapped('ratc',GetBuyingUnit())
return
else
if(Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rde1'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mcou'))
call UnitAddItemByIdSwapped('rde2',GetBuyingUnit())
return
else
if(Trig_HC1_Func001Func001Func001Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rde2'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'kpin'))
call UnitAddItemByIdSwapped('rde3',GetBuyingUnit())
return
else
call AdjustPlayerStateBJ((R2I(GetItemLifeBJ(GetSoldItem()))/2),GetOwningPlayer(GetBuyingUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()),0,0,8.00,("错误合成,退回|cFFFFFF33"+(I2S((R2I(GetItemLifeBJ(GetSoldItem()))/2))+"金钱|r!")))
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function InitTrig_HC1 takes nothing returns nothing
set gg_trg_HC1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HC1,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_HC1,Condition(function Trig_HC1_Conditions))
call TriggerAddAction(gg_trg_HC1,function Trig_HC1_Actions)
endfunction
function Trig_HC2_Func002C takes nothing returns boolean
if((GetItemTypeId(GetSoldItem())=='I003'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I002'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I000'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I001'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00F'))then
return true
endif
return false
endfunction
function Trig_HC2_Conditions takes nothing returns boolean
if(not Trig_HC2_Func002C())then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func001Func001Func001Func001Func008C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I001'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'ciri'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'brac'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rin1'))==true))then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC2_Func001Func001Func001Func001Func001Func008C())then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I000'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rat9'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))==true))then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC2_Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I002'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rat6'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'cnob'))==true))then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC2_Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func001Func007C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I003'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rde3'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'ratc'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'bgst'))==true))then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func001C takes nothing returns boolean
if(not Trig_HC2_Func001Func001Func007C())then
return false
endif
return true
endfunction
function Trig_HC2_Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00F'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rnsp'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))==true))then
return false
endif
return true
endfunction
function Trig_HC2_Func001C takes nothing returns boolean
if(not Trig_HC2_Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC2_Actions takes nothing returns nothing
if(Trig_HC2_Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rnsp'))
call UnitAddItemByIdSwapped('azhr',GetBuyingUnit())
return
else
if(Trig_HC2_Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rde3'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'ratc'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'bgst'))
call UnitAddItemByIdSwapped('clsd',GetBuyingUnit())
return
else
if(Trig_HC2_Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rat6'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'cnob'))
call UnitAddItemByIdSwapped('crys',GetBuyingUnit())
return
else
if(Trig_HC2_Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rat9'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))
call UnitAddItemByIdSwapped('rat6',GetBuyingUnit())
return
else
if(Trig_HC2_Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'ciri'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'brac'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rin1'))
call UnitAddItemByIdSwapped('cnob',GetBuyingUnit())
return
else
call AdjustPlayerStateBJ((R2I(GetItemLifeBJ(GetSoldItem()))/2),GetOwningPlayer(GetBuyingUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()),0,0,8.00,("错误合成,退回|cFFFFFF33"+(I2S((R2I(GetItemLifeBJ(GetSoldItem()))/2))+"金钱|r!")))
endif
endif
endif
endif
endif
endfunction
function InitTrig_HC2 takes nothing returns nothing
set gg_trg_HC2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HC2,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_HC2,Condition(function Trig_HC2_Conditions))
call TriggerAddAction(gg_trg_HC2,function Trig_HC2_Actions)
endfunction
function Trig_HC3_Func002C takes nothing returns boolean
if((GetItemTypeId(GetSoldItem())=='I01B'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I01C'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00D'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I019'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I01A'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00J'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00I'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00K'))then
return true
endif
return false
endfunction
function Trig_HC3_Conditions takes nothing returns boolean
if(not Trig_HC3_Func002C())then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func001Func001Func001Func001Func007C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I01A'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'asbl'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'kpin'))==true))then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC3_Func001Func001Func001Func001Func001Func001Func001Func001Func007C())then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I019'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rat3'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mcou'))==true))then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC3_Func001Func001Func001Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00D'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'bspd'))==true))then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC3_Func001Func001Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I01C'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'pmna'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mnst'))==true))then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC3_Func001Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I01B'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rhth'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rwiz'))==true))then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC3_Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00K'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'odef'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'evtl'))==true))then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC3_Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00I'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'odef'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'k3m3'))==true))then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func001C takes nothing returns boolean
if(not Trig_HC3_Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC3_Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00J'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'odef'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'sbch'))==true))then
return false
endif
return true
endfunction
function Trig_HC3_Func001C takes nothing returns boolean
if(not Trig_HC3_Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC3_Actions takes nothing returns nothing
if(Trig_HC3_Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'odef'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'sbch'))
call UnitAddItemByIdSwapped('lgdh',GetBuyingUnit())
return
else
if(Trig_HC3_Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'odef'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'k3m3'))
call UnitAddItemByIdSwapped('k3m2',GetBuyingUnit())
return
else
if(Trig_HC3_Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'odef'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'evtl'))
call UnitAddItemByIdSwapped('afac',GetBuyingUnit())
return
else
if(Trig_HC3_Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rhth'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rwiz'))
call UnitAddItemByIdSwapped('rnsp',GetBuyingUnit())
return
else
if(Trig_HC3_Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'pmna'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mnst'))
call UnitAddItemByIdSwapped('ram3',GetBuyingUnit())
return
else
if(Trig_HC3_Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'bspd'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rlif'))
call UnitAddItemByIdSwapped('hcun',GetBuyingUnit())
return
else
if(Trig_HC3_Func001Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rat3'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'mcou'))
call UnitAddItemByIdSwapped('asbl',GetBuyingUnit())
return
else
if(Trig_HC3_Func001Func001Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'asbl'))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'kpin'))
call UnitAddItemByIdSwapped('penr',GetBuyingUnit())
return
else
call AdjustPlayerStateBJ((R2I(GetItemLifeBJ(GetSoldItem()))/2),GetOwningPlayer(GetBuyingUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()),0,0,8.00,("错误合成,退回|cFFFFFF33"+(I2S((R2I(GetItemLifeBJ(GetSoldItem()))/2))+"金钱|r!")))
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function InitTrig_HC3 takes nothing returns nothing
set gg_trg_HC3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HC3,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_HC3,Condition(function Trig_HC3_Conditions))
call TriggerAddAction(gg_trg_HC3,function Trig_HC3_Actions)
endfunction
function Trig_HC_S_Func002Func001Func001C takes nothing returns boolean
if(not(GetPlayerTechCountSimple('R002',Player(3))==10))then
return false
endif
return true
endfunction
function Trig_HC_S_Func002Func001C takes nothing returns boolean
if(not(IsUnitAlly(GetBuyingUnit(),Player(3))==true))then
return false
endif
return true
endfunction
function Trig_HC_S_Func002Func002Func001C takes nothing returns boolean
if(not(GetPlayerTechCountSimple('R002',Player(7))==10))then
return false
endif
return true
endfunction
function Trig_HC_S_Func002Func002C takes nothing returns boolean
if(not(IsUnitAlly(GetBuyingUnit(),Player(7))==true))then
return false
endif
return true
endfunction
function Trig_HC_S_Func002Func003Func001C takes nothing returns boolean
if(not(GetPlayerTechCountSimple('R002',Player(11))==10))then
return false
endif
return true
endfunction
function Trig_HC_S_Func002Func003C takes nothing returns boolean
if(not(IsUnitAlly(GetBuyingUnit(),Player(11))==true))then
return false
endif
return true
endfunction
function Trig_HC_S_Func002Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00E'))then
return false
endif
return true
endfunction
function Trig_HC_S_Func002C takes nothing returns boolean
if(not Trig_HC_S_Func002Func006C())then
return false
endif
return true
endfunction
function Trig_HC_S_Actions takes nothing returns nothing
if(Trig_HC_S_Func002C())then
if(Trig_HC_S_Func002Func001C())then
if(Trig_HC_S_Func002Func001Func001C())then
call DisplayTimedTextToForce(GetPlayersAll(),5.00,"村子的建筑防御等级已满")
else
call SetPlayerTechResearchedSwap('R002',(GetPlayerTechCountSimple('R002',Player(3))+1),Player(3))
call DisplayTimedTextToForce(GetPlayersAll(),12.00,(GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" |cFF6699FF为他的村子提升了建筑防御等级|r"))
endif
else
endif
if(Trig_HC_S_Func002Func002C())then
if(Trig_HC_S_Func002Func002Func001C())then
call DisplayTimedTextToForce(GetPlayersAll(),5.00,"村子的建筑防御等级已满")
else
call SetPlayerTechResearchedSwap('R002',(GetPlayerTechCountSimple('R002',Player(7))+1),Player(7))
call DisplayTimedTextToForce(GetPlayersAll(),12.00,(GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" |cFF6699FF为他的村子提升了建筑防御等级|r"))
endif
else
endif
if(Trig_HC_S_Func002Func003C())then
if(Trig_HC_S_Func002Func003Func001C())then
call DisplayTimedTextToForce(GetPlayersAll(),5.00,"村子的建筑防御等级已满")
else
call SetPlayerTechResearchedSwap('R002',(GetPlayerTechCountSimple('R002',Player(11))+1),Player(11))
call DisplayTimedTextToForce(GetPlayersAll(),12.00,(GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" |cFF6699FF为他的村子提升了建筑防御等级|r"))
endif
else
endif
return
else
call DoNothing()
endif
endfunction
function InitTrig_HC_S takes nothing returns nothing
set gg_trg_HC_S=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HC_S,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_HC_S,function Trig_HC_S_Actions)
endfunction
function Trig_HC_PS_Func002C takes nothing returns boolean
if((GetItemTypeId(GetSoldItem())=='I00L'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00O'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00M'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00P'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00N'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00Q'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00R'))then
return true
endif
return false
endfunction
function Trig_HC_PS_Conditions takes nothing returns boolean
if(not Trig_HC_PS_Func002C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00L'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'sbch'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func001Func001Func006C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func001Func005C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00O'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'lgdh'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func001Func005C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func005C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00M'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'k3m2'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func005C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func005C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00P'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'evtl'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func005C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001Func005C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00N'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'afac'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func001Func001Func001Func001Func005C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001Func002C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00Q'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'brac'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func001Func001Func001Func002C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001Func002C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00Q'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rin1'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func001Func001Func002C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001Func002C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00Q'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'ciri'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func001Func002C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001Func002C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00R'))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'cnob'))==true))then
return false
endif
return true
endfunction
function Trig_HC_PS_Func001C takes nothing returns boolean
if(not Trig_HC_PS_Func001Func002C())then
return false
endif
return true
endfunction
function Trig_HC_PS_Actions takes nothing returns nothing
if(Trig_HC_PS_Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'cnob'))
call UnitAddItemByIdSwapped('rde0',GetBuyingUnit())
return
else
if(Trig_HC_PS_Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'ciri'))
call UnitAddItemByIdSwapped('spsh',GetBuyingUnit())
return
else
if(Trig_HC_PS_Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'rin1'))
call UnitAddItemByIdSwapped('spsh',GetBuyingUnit())
return
else
if(Trig_HC_PS_Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'brac'))
call UnitAddItemByIdSwapped('spsh',GetBuyingUnit())
return
else
if(Trig_HC_PS_Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'afac'))
call UnitAddItemByIdSwapped('desc',GetBuyingUnit())
return
else
if(Trig_HC_PS_Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'evtl'))
call UnitAddItemByIdSwapped('rde4',GetBuyingUnit())
return
else
if(Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'k3m2'))
call UnitAddItemByIdSwapped('ckng',GetBuyingUnit())
return
else
if(Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'lgdh'))
call UnitAddItemByIdSwapped('ratf',GetBuyingUnit())
return
else
if(Trig_HC_PS_Func001Func001Func001Func001Func001Func001Func001Func001Func001C())then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetBuyingUnit(),'sbch'))
call UnitAddItemByIdSwapped('modt',GetBuyingUnit())
return
else
call AdjustPlayerStateBJ((R2I(GetItemLifeBJ(GetSoldItem()))/2),GetOwningPlayer(GetBuyingUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()),0,0,8.00,("错误合成,退回|cFFFFFF33"+(I2S((R2I(GetItemLifeBJ(GetSoldItem()))/2))+"金钱|r!")))
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function InitTrig_HC_PS takes nothing returns nothing
set gg_trg_HC_PS=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HC_PS,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_HC_PS,Condition(function Trig_HC_PS_Conditions))
call TriggerAddAction(gg_trg_HC_PS,function Trig_HC_PS_Actions)
endfunction
function Trig_RJ_Actions takes nothing returns nothing
call DisplayTimedTextToForce(GetPlayersAll(),20.00," - 各国忍者村研发了|cFF00FFFFLV2级别|r的忍具和补给品,请去忍具屋看看吧")
call AddItemToStockBJ('dsum',gg_unit_nC24_0256,1,1)
call AddItemToStockBJ('dsum',gg_unit_nC24_0257,1,1)
call AddItemToStockBJ('dsum',gg_unit_nC24_0258,1,1)
call AddItemToStockBJ('hslv',gg_unit_nC24_0256,1,3)
call AddItemToStockBJ('hslv',gg_unit_nC24_0257,1,3)
call AddItemToStockBJ('hslv',gg_unit_nC24_0258,1,3)
endfunction
function InitTrig_RJ takes nothing returns nothing
set gg_trg_RJ=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_RJ,500.00)
call TriggerAddAction(gg_trg_RJ,function Trig_RJ_Actions)
endfunction
function Trig_RJ2_Actions takes nothing returns nothing
call DisplayTimedTextToForce(GetPlayersAll(),20.00," - 各国忍者村研发了|cFF00FFFFLV3级别|r的忍具和补给品,请去忍具屋看看吧")
call AddItemToStockBJ('shea',gg_unit_nC24_0256,1,3)
call AddItemToStockBJ('shea',gg_unit_nC24_0257,1,3)
call AddItemToStockBJ('shea',gg_unit_nC24_0258,1,3)
call AddItemToStockBJ('clfm',gg_unit_nC24_0256,1,3)
call AddItemToStockBJ('clfm',gg_unit_nC24_0257,1,3)
call AddItemToStockBJ('clfm',gg_unit_nC24_0258,1,3)
call AddItemToStockBJ('ssil',gg_unit_nC24_0256,1,1)
call AddItemToStockBJ('ssil',gg_unit_nC24_0257,1,1)
call AddItemToStockBJ('ssil',gg_unit_nC24_0258,1,1)
endfunction
function InitTrig_RJ2 takes nothing returns nothing
set gg_trg_RJ2=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_RJ2,1800.00)
call TriggerAddAction(gg_trg_RJ2,function Trig_RJ2_Actions)
endfunction
function Trig_TS1_Func001C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I011'))then
return false
endif
return true
endfunction
function Trig_TS1_Actions takes nothing returns nothing
if(Trig_TS1_Func001C())then
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(GetBuyingUnit()),GetUnitLoc(GetBuyingUnit()),bj_UNIT_FACING)
call IssueImmediateOrderById(GetLastCreatedUnit(),852599)
return
else
call DoNothing()
endif
endfunction
function InitTrig_TS1 takes nothing returns nothing
set gg_trg_TS1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_TS1,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_TS1,function Trig_TS1_Actions)
endfunction
function Trig_XT_xuanye1_Func001Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I012'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0152))then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func001C takes nothing returns boolean
if(not Trig_XT_xuanye1_Func001Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func002Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I014'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0152))then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func002C takes nothing returns boolean
if(not Trig_XT_xuanye1_Func002Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func003Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I015'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0152))then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func003C takes nothing returns boolean
if(not Trig_XT_xuanye1_Func003Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func004Func004Func002C takes nothing returns boolean
if((GetSellingUnit()==gg_unit_n005_0135))then
return true
endif
if((GetSellingUnit()==gg_unit_n003_0111))then
return true
endif
if((GetSellingUnit()==gg_unit_n002_0107))then
return true
endif
return false
endfunction
function Trig_XT_xuanye1_Func004Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I016'))then
return false
endif
if(not Trig_XT_xuanye1_Func004Func004Func002C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func004C takes nothing returns boolean
if(not Trig_XT_xuanye1_Func004Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func005Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I018'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_nC02_0006))then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func005C takes nothing returns boolean
if(not Trig_XT_xuanye1_Func005Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func006Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I017'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n006_0201))then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Func006C takes nothing returns boolean
if(not Trig_XT_xuanye1_Func006Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye1_Actions takes nothing returns nothing
if(Trig_XT_xuanye1_Func001C())then
call SelectUnitForPlayerSingle(gg_unit_n005_0135,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye1_Func002C())then
call SelectUnitForPlayerSingle(gg_unit_n003_0111,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye1_Func003C())then
call SelectUnitForPlayerSingle(gg_unit_n002_0107,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye1_Func004C())then
call SelectUnitForPlayerSingle(gg_unit_n000_0152,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye1_Func005C())then
call SelectUnitForPlayerSingle(gg_unit_n006_0201,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye1_Func006C())then
call SelectUnitForPlayerSingle(gg_unit_nC02_0006,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
endfunction
function InitTrig_XT_xuanye1 takes nothing returns nothing
set gg_trg_XT_xuanye1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_XT_xuanye1,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_XT_xuanye1,function Trig_XT_xuanye1_Actions)
endfunction
function Trig_XT_xuanye2_Func001Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I012'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0161))then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func001C takes nothing returns boolean
if(not Trig_XT_xuanye2_Func001Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func002Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I014'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0161))then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func002C takes nothing returns boolean
if(not Trig_XT_xuanye2_Func002Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func003Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I015'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0161))then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func003C takes nothing returns boolean
if(not Trig_XT_xuanye2_Func003Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func004Func004Func002C takes nothing returns boolean
if((GetSellingUnit()==gg_unit_n005_0142))then
return true
endif
if((GetSellingUnit()==gg_unit_n003_0173))then
return true
endif
if((GetSellingUnit()==gg_unit_n002_0171))then
return true
endif
return false
endfunction
function Trig_XT_xuanye2_Func004Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I016'))then
return false
endif
if(not Trig_XT_xuanye2_Func004Func004Func002C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func004C takes nothing returns boolean
if(not Trig_XT_xuanye2_Func004Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func005Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I018'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_nC02_0023))then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func005C takes nothing returns boolean
if(not Trig_XT_xuanye2_Func005Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func006Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I017'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n006_0202))then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Func006C takes nothing returns boolean
if(not Trig_XT_xuanye2_Func006Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye2_Actions takes nothing returns nothing
if(Trig_XT_xuanye2_Func001C())then
call SelectUnitForPlayerSingle(gg_unit_n005_0142,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye2_Func002C())then
call SelectUnitForPlayerSingle(gg_unit_n003_0173,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye2_Func003C())then
call SelectUnitForPlayerSingle(gg_unit_n002_0171,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye2_Func004C())then
call SelectUnitForPlayerSingle(gg_unit_n000_0161,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye2_Func005C())then
call SelectUnitForPlayerSingle(gg_unit_n006_0202,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye2_Func006C())then
call SelectUnitForPlayerSingle(gg_unit_nC02_0023,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
endfunction
function InitTrig_XT_xuanye2 takes nothing returns nothing
set gg_trg_XT_xuanye2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_XT_xuanye2,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_XT_xuanye2,function Trig_XT_xuanye2_Actions)
endfunction
function Trig_XT_xuanye3_Func001Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I012'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0164))then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func001C takes nothing returns boolean
if(not Trig_XT_xuanye3_Func001Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func002Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I014'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0164))then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func002C takes nothing returns boolean
if(not Trig_XT_xuanye3_Func002Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func003Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I015'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n000_0164))then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func003C takes nothing returns boolean
if(not Trig_XT_xuanye3_Func003Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func004Func004Func002C takes nothing returns boolean
if((GetSellingUnit()==gg_unit_n005_0174))then
return true
endif
if((GetSellingUnit()==gg_unit_n003_0186))then
return true
endif
if((GetSellingUnit()==gg_unit_n002_0185))then
return true
endif
return false
endfunction
function Trig_XT_xuanye3_Func004Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I016'))then
return false
endif
if(not Trig_XT_xuanye3_Func004Func004Func002C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func004C takes nothing returns boolean
if(not Trig_XT_xuanye3_Func004Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func005Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I018'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_nC02_0043))then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func005C takes nothing returns boolean
if(not Trig_XT_xuanye3_Func005Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func006Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I017'))then
return false
endif
if(not(GetSellingUnit()==gg_unit_n006_0203))then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Func006C takes nothing returns boolean
if(not Trig_XT_xuanye3_Func006Func004C())then
return false
endif
return true
endfunction
function Trig_XT_xuanye3_Actions takes nothing returns nothing
if(Trig_XT_xuanye3_Func001C())then
call SelectUnitForPlayerSingle(gg_unit_n005_0174,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye3_Func002C())then
call SelectUnitForPlayerSingle(gg_unit_n003_0186,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye3_Func003C())then
call SelectUnitForPlayerSingle(gg_unit_n002_0185,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye3_Func004C())then
call SelectUnitForPlayerSingle(gg_unit_n000_0164,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye3_Func005C())then
call SelectUnitForPlayerSingle(gg_unit_n006_0203,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
if(Trig_XT_xuanye3_Func006C())then
call SelectUnitForPlayerSingle(gg_unit_nC02_0043,GetOwningPlayer(GetBuyingUnit()))
return
else
call DoNothing()
endif
endfunction
function InitTrig_XT_xuanye3 takes nothing returns nothing
set gg_trg_XT_xuanye3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_XT_xuanye3,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_XT_xuanye3,function Trig_XT_xuanye3_Actions)
endfunction
function Trig_X_MT_1_Conditions takes nothing returns boolean
if(not(udg_All_unit_bez[10]==false))then
return false
endif
return true
endfunction
function Trig_X_MT_1_Func004C takes nothing returns boolean
if(not(udg_All_unit_shu[0]==1.00))then
return false
endif
return true
endfunction
function Trig_X_MT_1_Func005C takes nothing returns boolean
if(not(udg_All_unit_shu[0]==2.00))then
return false
endif
return true
endfunction
function Trig_X_MT_1_Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[0]==3.00))then
return false
endif
return true
endfunction
function Trig_X_MT_1_Actions takes nothing returns nothing
set udg_All_unit_bez[10]=true
set udg_All_unit_shu[0]=I2R(GetRandomInt(1,3))
call DisplayTimedTextToForce(GetPlayersAll(),20.00," - 战场上似乎有不明的物资出现...")
if(Trig_X_MT_1_Func004C())then
call CreateNUnitsAtLoc(1,'nalb',Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(gg_rct_MT_1),bj_UNIT_FACING)
return
else
endif
if(Trig_X_MT_1_Func005C())then
call CreateNUnitsAtLoc(1,'nalb',Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(gg_rct_MT_2),bj_UNIT_FACING)
return
else
endif
if(Trig_X_MT_1_Func006C())then
call CreateNUnitsAtLoc(1,'nalb',Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(gg_rct_MT_3),bj_UNIT_FACING)
return
else
endif
endfunction
function InitTrig_X_MT_1 takes nothing returns nothing
set gg_trg_X_MT_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_X_MT_1,120.00)
call TriggerAddCondition(gg_trg_X_MT_1,Condition(function Trig_X_MT_1_Conditions))
call TriggerAddAction(gg_trg_X_MT_1,function Trig_X_MT_1_Actions)
endfunction
function Trig_X_MT_2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='nalb'))then
return false
endif
return true
endfunction
function Trig_X_MT_2_Func003C takes nothing returns boolean
if(not(udg_All_unit_shu[0]==1.00))then
return false
endif
return true
endfunction
function Trig_X_MT_2_Func004C takes nothing returns boolean
if(not(udg_All_unit_shu[0]==2.00))then
return false
endif
return true
endfunction
function Trig_X_MT_2_Func005C takes nothing returns boolean
if(not(udg_All_unit_shu[0]==3.00))then
return false
endif
return true
endfunction
function Trig_X_MT_2_Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[0]==4.00))then
return false
endif
return true
endfunction
function Trig_X_MT_2_Func007C takes nothing returns boolean
if(not(udg_All_unit_shu[0]==5.00))then
return false
endif
return true
endfunction
function Trig_X_MT_2_Actions takes nothing returns nothing
set udg_All_unit_bez[10]=false
set udg_All_unit_shu[0]=I2R(GetRandomInt(1,5))
if(Trig_X_MT_2_Func003C())then
call CreateItemLoc('lmbr',GetUnitLoc(GetTriggerUnit()))
return
else
endif
if(Trig_X_MT_2_Func004C())then
call CreateItemLoc('rhe1',GetUnitLoc(GetTriggerUnit()))
return
else
endif
if(Trig_X_MT_2_Func005C())then
call CreateItemLoc('rhe3',GetUnitLoc(GetTriggerUnit()))
return
else
endif
if(Trig_X_MT_2_Func006C())then
call CreateItemLoc('rspd',GetUnitLoc(GetTriggerUnit()))
return
else
endif
if(Trig_X_MT_2_Func007C())then
call CreateItemLoc('gold',GetUnitLoc(GetTriggerUnit()))
return
else
endif
endfunction
function InitTrig_X_MT_2 takes nothing returns nothing
set gg_trg_X_MT_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_X_MT_2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_X_MT_2,Condition(function Trig_X_MT_2_Conditions))
call TriggerAddAction(gg_trg_X_MT_2,function Trig_X_MT_2_Actions)
endfunction
function Trig_X_MT_3_Func001C takes nothing returns boolean
if(not(GetItemTypeId(GetManipulatedItem())=='gold'))then
return false
endif
return true
endfunction
function Trig_X_MT_3_Func002C takes nothing returns boolean
if(not(GetItemTypeId(GetManipulatedItem())=='lmbr'))then
return false
endif
return true
endfunction
function Trig_X_MT_3_Func003C takes nothing returns boolean
if(not(GetItemTypeId(GetManipulatedItem())=='rspd'))then
return false
endif
return true
endfunction
function Trig_X_MT_3_Func004Func006003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetTriggerUnit()))
endfunction
function Trig_X_MT_3_Func004C takes nothing returns boolean
if(not(GetItemTypeId(GetManipulatedItem())=='rhe1'))then
return false
endif
return true
endfunction
function Trig_X_MT_3_Func005Func006003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetTriggerUnit()))
endfunction
function Trig_X_MT_3_Func005C takes nothing returns boolean
if(not(GetItemTypeId(GetManipulatedItem())=='rhe3'))then
return false
endif
return true
endfunction
function Trig_X_MT_3_Actions takes nothing returns nothing
if(Trig_X_MT_3_Func001C())then
else
endif
if(Trig_X_MT_3_Func002C())then
else
endif
if(Trig_X_MT_3_Func003C())then
else
endif
if(Trig_X_MT_3_Func004C())then
call SetUnitLifeBJ(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)*0.30)))
call CreateTextTagUnitBJ(("+ "+I2S(R2I((GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)*0.30)))),GetTriggerUnit(),-80.00,11.00,0.00,100.00,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),200.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.20)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_X_MT_3_Func004Func006003001)))
else
endif
if(Trig_X_MT_3_Func005C())then
call SetUnitManaBJ(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA)*0.50)))
call CreateTextTagUnitBJ(("+ "+I2S(R2I((GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA)*0.50)))),GetTriggerUnit(),-80.00,11.00,20.00,100.00,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),200.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.20)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_X_MT_3_Func005Func006003001)))
else
endif
endfunction
function InitTrig_X_MT_3 takes nothing returns nothing
set gg_trg_X_MT_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_X_MT_3,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(gg_trg_X_MT_3,function Trig_X_MT_3_Actions)
endfunction
function Trig_X_zhiling1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])==true))then
return false
endif
if(not(udg_X_zisha[GetConvertedPlayerId(GetTriggerPlayer())]==false))then
return false
endif
return true
endfunction
function Trig_X_zhiling1_Func010C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])==true))then
return false
endif
return true
endfunction
function Trig_X_zhiling1_Actions takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],'ankh'))
call RemoveItem(GetItemOfTypeFromUnitBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],'clfm'))
call SetUnitInvulnerable(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],false)
call PauseUnit(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],false)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"你使用了自杀指令,5s后会被强制杀死,并且扣取2000金钱")
set udg_X_zisha[GetConvertedPlayerId(GetTriggerPlayer())]=true
call TriggerSleepAction(5.00)
set udg_X_zisha[GetConvertedPlayerId(GetTriggerPlayer())]=false
call AdjustPlayerStateBJ(-2000,GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)
if(Trig_X_zhiling1_Func010C())then
call KillUnit(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])
else
endif
endfunction
function InitTrig_X_zhiling1 takes nothing returns nothing
set gg_trg_X_zhiling1=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(0),"-Death",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(1),"-Death",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(2),"-Death",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(4),"-Death",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(5),"-Death",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(6),"-Death",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(8),"-Death",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(9),"-Death",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling1,Player(10),"-Death",true)
call TriggerAddCondition(gg_trg_X_zhiling1,Condition(function Trig_X_zhiling1_Conditions))
call TriggerAddAction(gg_trg_X_zhiling1,function Trig_X_zhiling1_Actions)
endfunction
function Trig_X_zhiling2_Actions takes nothing returns nothing
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,(("|cFF660099木叶忍者村|r当前进攻等级 - |cFF00FFFF等级"+I2S(udg_X_Attack[1]))+"|r"))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,(("|cFFFF66CC雾隐忍者村|r当前进攻等级 - |cFF00FFFF等级"+I2S(udg_X_Attack[2]))+"|r"))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,(("|cFF4D2903沙忍者村|r当前进攻等级 - |cFF00FFFF等级"+I2S(udg_X_Attack[3]))+"|r"))
endfunction
function InitTrig_X_zhiling2 takes nothing returns nothing
set gg_trg_X_zhiling2=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(0),"-Rank",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(1),"-Rank",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(2),"-Rank",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(4),"-Rank",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(5),"-Rank",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(6),"-Rank",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(8),"-Rank",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(9),"-Rank",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling2,Player(10),"-Rank",true)
call TriggerAddAction(gg_trg_X_zhiling2,function Trig_X_zhiling2_Actions)
endfunction
function Trig_X_zhiling3_Actions takes nothing returns nothing
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,(LoadStr(YDHT,(1),(GetUnitPointValue(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])))))
endfunction
function InitTrig_X_zhiling3 takes nothing returns nothing
set gg_trg_X_zhiling3=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling3,Player(0),"-Role",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling3,Player(1),"-Role",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling3,Player(2),"-Role",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling3,Player(4),"-Role",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling3,Player(5),"-Role",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling3,Player(0),"-Role",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling3,Player(0),"-Role",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_zhiling3,Player(0),"-Role",true)
call TriggerAddAction(gg_trg_X_zhiling3,function Trig_X_zhiling3_Actions)
endfunction
function Trig_Shuaguai1_Func002001002 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),Player(PLAYER_NEUTRAL_AGGRESSIVE))==true)
endfunction
function Trig_Shuaguai1_Func002A takes nothing returns nothing
set udg_location[udg_i]=GetUnitLoc(GetEnumUnit())
set udg_leixing[udg_i]=GetUnitTypeId(GetEnumUnit())
call SetUnitAbilityLevel(GetEnumUnit(),'Ault',udg_i)
set udg_i=(udg_i+1)
endfunction
function Trig_Shuaguai1_Actions takes nothing returns nothing
set udg_i=1
call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Trig_Shuaguai1_Func002001002)),function Trig_Shuaguai1_Func002A)
endfunction
function InitTrig_Shuaguai1 takes nothing returns nothing
set gg_trg_Shuaguai1=CreateTrigger()
call TriggerAddAction(gg_trg_Shuaguai1,function Trig_Shuaguai1_Actions)
endfunction
function Trig_Shuiguai2_Conditions takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(PLAYER_NEUTRAL_AGGRESSIVE))==true))then
return false
endif
return true
endfunction
function Trig_Shuiguai2_Actions takes nothing returns nothing
local integer l__udg_i
set l__udg_i=GetUnitAbilityLevel(GetDyingUnit(),'Ault')
call TriggerSleepAction(60.00)
call CreateNUnitsAtLoc(1,udg_leixing[l__udg_i],Player(PLAYER_NEUTRAL_AGGRESSIVE),udg_location[l__udg_i],bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ault',l__udg_i)
endfunction
function InitTrig_Shuiguai2 takes nothing returns nothing
set gg_trg_Shuiguai2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Shuiguai2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Shuiguai2,Condition(function Trig_Shuiguai2_Conditions))
call TriggerAddAction(gg_trg_Shuiguai2,function Trig_Shuiguai2_Actions)
endfunction
function Trig_X_diaoluo_Func001C takes nothing returns boolean
if(not(GetUnitTypeId(GetDyingUnit())=='nfrg'))then
return false
endif
if(not(GetRandomInt(1,100)<=12))then
return false
endif
return true
endfunction
function Trig_X_diaoluo_Func002C takes nothing returns boolean
if(not(GetUnitTypeId(GetDyingUnit())=='ndqs'))then
return false
endif
if(not(GetRandomInt(1,100)<=8))then
return false
endif
return true
endfunction
function Trig_X_diaoluo_Actions takes nothing returns nothing
if(Trig_X_diaoluo_Func001C())then
call CreateItemLoc('rlif',GetUnitLoc(GetDyingUnit()))
else
endif
if(Trig_X_diaoluo_Func002C())then
call CreateItemLoc('odef',GetUnitLoc(GetDyingUnit()))
else
endif
endfunction
function InitTrig_X_diaoluo takes nothing returns nothing
set gg_trg_X_diaoluo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_X_diaoluo,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_X_diaoluo,function Trig_X_diaoluo_Actions)
endfunction
function Trig_Mianban1_Actions takes nothing returns nothing
call CreateMultiboardBJ(5,15,"|c00fffc01游戏统计面板|r ")
call MultiboardMinimizeBJ(true,GetLastCreatedMultiboard())
set udg_Mianban_I=GetLastCreatedMultiboard()
call MultiboardSetItemsStyle(bj_lastCreatedMultiboard,true,false)
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,1,"|cFFFFFF00玩家名")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),2,1,"|cFFFFFF00角色")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),3,1,"|cFFFFFF00杀敌数")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),4,1,"|cFFFFFF00阵亡数")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),5,1,"|cFFFFFF00复活时间")
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,2,("|cff00FFFF"+(GetPlayerName(Player(0))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,3,("|cff00FFFF"+(GetPlayerName(Player(1))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,4,("|cff00FFFF"+(GetPlayerName(Player(2))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,5,("|cffFF0000"+("木叶忍者村|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,6,("|cff00FFFF"+(GetPlayerName(Player(4))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,7,("|cff00FFFF"+(GetPlayerName(Player(5))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,8,("|cff00FFFF"+(GetPlayerName(Player(6))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,9,("|cffFF0000"+("雨忍者村|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,10,("|cff00FFFF"+(GetPlayerName(Player(8))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,11,("|cff00FFFF"+(GetPlayerName(Player(9))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,12,("|cff00FFFF"+(GetPlayerName(Player(10))+"|r ")))
call MultiboardSetItemValueBJ(GetLastCreatedMultiboard(),1,13,("|cffFF0000"+("沙 忍者村|r ")))
call MultiboardSetItemValueBJ(udg_Mianban_I,1,14,("|cFFFFFF00"+("攻/御/塔/总攻|r")))
call MultiboardSetItemValueBJ(udg_Mianban_I,4,14,("|cffFFFF00"+("M.V.P|r")))
call MultiboardSetItemValueBJ(udg_Mianban_I,5,14,("|cffFFFF00"+("游戏时间|r")))
call MultiboardSetItemsWidth(udg_Mianban_I,0.05)
endfunction
function InitTrig_Mianban1 takes nothing returns nothing
set gg_trg_Mianban1=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_Mianban1,1.00)
call TriggerAddAction(gg_trg_Mianban1,function Trig_Mianban1_Actions)
endfunction
function Trig_Mianban2_Conditions takes nothing returns boolean
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
if(not(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())!='Oshd'))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(PLAYER_NEUTRAL_AGGRESSIVE)))then
return false
endif
if(not(udg_All_lixian[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false))then
return false
endif
return true
endfunction
function Trig_Mianban2_Func008C takes nothing returns boolean
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(3)))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(7)))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(11)))then
return false
endif
return true
endfunction
function Trig_Mianban2_Func009C takes nothing returns boolean
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(3)))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(7)))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(11)))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=5))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[1]))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[2]))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[3]))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[5]))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[6]))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[7]))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[9]))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[10]))then
return false
endif
if(not(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=udg_Mianban_shadi[11]))then
return false
endif
return true
endfunction
function Trig_Mianban2_Func010Func001C takes nothing returns boolean
if(not(udg_X_Attack[1]<20))then
return false
endif
return true
endfunction
function Trig_Mianban2_Func010C takes nothing returns boolean
if(not(IsUnitAlly(GetKillingUnitBJ(),Player(3))==true))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(3)))then
return false
endif
return true
endfunction
function Trig_Mianban2_Func011Func001C takes nothing returns boolean
if(not(udg_X_Attack[2]<20))then
return false
endif
return true
endfunction
function Trig_Mianban2_Func011C takes nothing returns boolean
if(not(IsUnitAlly(GetKillingUnitBJ(),Player(7))==true))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(7)))then
return false
endif
return true
endfunction
function Trig_Mianban2_Func012Func001C takes nothing returns boolean
if(not(udg_X_Attack[3]<20))then
return false
endif
return true
endfunction
function Trig_Mianban2_Func012C takes nothing returns boolean
if(not(IsUnitAlly(GetKillingUnitBJ(),Player(11))==true))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(11)))then
return false
endif
return true
endfunction
function Trig_Mianban2_Actions takes nothing returns nothing
set udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]+1)
set udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=(udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]+1)
if(Trig_Mianban2_Func008C())then
call MultiboardSetItemValueBJ(udg_Mianban_I,3,(GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))+1),("   |cffFFFFFF"+(I2S(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|r |cFF999999"+(I2S(udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|r")))))
else
endif
if(Trig_Mianban2_Func009C())then
call MultiboardSetItemValueBJ(udg_Mianban_I,4,15,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())))
else
endif
if(Trig_Mianban2_Func010C())then
if(Trig_Mianban2_Func010Func001C())then
set udg_X_Attack[1]=(udg_X_Attack[1]+1)
else
endif
set udg_Mianban_shadi[4]=(udg_Mianban_shadi[4]+1)
call MultiboardSetItemValueBJ(udg_Mianban_I,3,5,("|cFFFF0033"+(I2S(udg_Mianban_shadi[4])+"|r")))
else
endif
if(Trig_Mianban2_Func011C())then
if(Trig_Mianban2_Func011Func001C())then
set udg_X_Attack[2]=(udg_X_Attack[2]+1)
else
endif
set udg_Mianban_shadi[8]=(udg_Mianban_shadi[8]+1)
call MultiboardSetItemValueBJ(udg_Mianban_I,3,9,("|cFFFF0033"+(I2S(udg_Mianban_shadi[8])+"|r")))
else
endif
if(Trig_Mianban2_Func012C())then
if(Trig_Mianban2_Func012Func001C())then
set udg_X_Attack[3]=(udg_X_Attack[3]+1)
else
endif
set udg_Mianban_shadi[12]=(udg_Mianban_shadi[12]+1)
call MultiboardSetItemValueBJ(udg_Mianban_I,3,13,("|cFFFF0033"+(I2S(udg_Mianban_shadi[12])+"|r")))
else
endif
endfunction
function InitTrig_Mianban2 takes nothing returns nothing
set gg_trg_Mianban2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Mianban2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Mianban2,Condition(function Trig_Mianban2_Conditions))
call TriggerAddAction(gg_trg_Mianban2,function Trig_Mianban2_Actions)
endfunction
function Trig_Mianban3_Conditions takes nothing returns boolean
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())!='Oshd'))then
return false
endif
if(not(udg_All_lixian[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func001Func005Func001Func007001 takes nothing returns boolean
return(IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_Mianban3_Func001Func005Func001Func007002 takes nothing returns boolean
return(IsUnitAliveBJ(GetEnumUnit())==true)
endfunction
function Trig_Mianban3_Func001Func005Func001C takes nothing returns boolean
if(not GetBooleanAnd((IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true),(IsUnitAliveBJ(GetEnumUnit())==true)))then
return false
endif
if(not(DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetEnumUnit()))<=900.00))then
return false
endif
if(not(GetEnumUnit()!=GetKillingUnitBJ()))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func001Func005A takes nothing returns nothing
if(Trig_Mianban3_Func001Func005Func001C())then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetEnumUnit()),0,0,10.00,("|cFFFF3300【配合支援】|r奖励 |cFFFFFF33"+(I2S((10*GetHeroLevel(GetTriggerUnit())))+"金钱|r")))
call AdjustPlayerStateBJ((10*GetHeroLevel(GetTriggerUnit())),GetOwningPlayer(GetEnumUnit()),PLAYER_STATE_RESOURCE_GOLD)
call CreateTextTagUnitBJ(("+"+I2S((GetHeroLevel(GetTriggerUnit())*10))),GetEnumUnit(),0,8.50,100,100,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
else
endif
endfunction
function Trig_Mianban3_Func001Func006Func002001001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_Mianban3_Func001Func006Func002001001002 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetKillingUnitBJ()))
endfunction
function Trig_Mianban3_Func001Func006Func002001001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerAlly(GetFilterPlayer(),GetOwningPlayer(GetKillingUnitBJ()))==true),(GetFilterPlayer()!=GetOwningPlayer(GetKillingUnitBJ())))
endfunction
function Trig_Mianban3_Func001Func006Func002Func001005002001001001003001001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_Mianban3_Func001Func006Func002Func001005002001001001003001001002001 takes nothing returns boolean
return(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunction
function Trig_Mianban3_Func001Func006Func002Func001005002001001001003001001002002 takes nothing returns boolean
return(GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER)
endfunction
function Trig_Mianban3_Func001Func006Func002Func001005002001001001003001001002 takes nothing returns boolean
return GetBooleanAnd((GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING),(GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER))
endfunction
function Trig_Mianban3_Func001Func006Func002Func001005002001001001003001001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerAlly(GetFilterPlayer(),GetOwningPlayer(GetKillingUnitBJ()))==true),(GetBooleanAnd((GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING),(GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER))))
endfunction
function Trig_Mianban3_Func001Func006Func002Func002001001003001001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_Mianban3_Func001Func006Func002Func002001001003001001002001 takes nothing returns boolean
return(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunction
function Trig_Mianban3_Func001Func006Func002Func002001001003001001002002 takes nothing returns boolean
return(GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER)
endfunction
function Trig_Mianban3_Func001Func006Func002Func002001001003001001002 takes nothing returns boolean
return GetBooleanAnd((GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING),(GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER))
endfunction
function Trig_Mianban3_Func001Func006Func002Func002001001003001001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerAlly(GetFilterPlayer(),GetOwningPlayer(GetKillingUnitBJ()))==true),(GetBooleanAnd((GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING),(GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER))))
endfunction
function Trig_Mianban3_Func001Func006Func002A takes nothing returns nothing
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,0,10.00,("|cFFFF3300【忍者村击杀】|r奖励 |cFFFFFF33"+(I2S(((30/CountPlayersInForceBJ(GetPlayersMatching(Condition(function Trig_Mianban3_Func001Func006Func002Func001005002001001001003001001))))*GetHeroLevel(GetTriggerUnit())))+"金钱|r")))
call AdjustPlayerStateBJ(((30/CountPlayersInForceBJ(GetPlayersMatching(Condition(function Trig_Mianban3_Func001Func006Func002Func002001001003001001))))*GetHeroLevel(GetTriggerUnit())),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_Mianban3_Func001Func006C takes nothing returns boolean
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(3)))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(7)))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(11)))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func001Func007Func001C takes nothing returns boolean
if(not(udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>6))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func001Func007C takes nothing returns boolean
if(not(udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>0))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(3)))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(7)))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(11)))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func001C takes nothing returns boolean
if(not(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func014Func002C takes nothing returns boolean
if(not(udg_X_Attack[1]>1))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func014C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(3))==true))then
return false
endif
if(not(GetOwningPlayer(GetTriggerUnit())!=Player(3)))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func015Func002C takes nothing returns boolean
if(not(udg_X_Attack[2]>1))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func015C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(7))==true))then
return false
endif
if(not(GetOwningPlayer(GetTriggerUnit())!=Player(7)))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func016Func002C takes nothing returns boolean
if(not(udg_X_Attack[3]>1))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func016C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(11))==true))then
return false
endif
if(not(GetOwningPlayer(GetTriggerUnit())!=Player(11)))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func018Func003C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(3))==true))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func018Func004C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(7))==true))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func018Func005C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(11))==true))then
return false
endif
return true
endfunction
function Trig_Mianban3_Func018C takes nothing returns boolean
if(not(udg_Mianban_bez[GetConvertedPlayerId(GetTriggerPlayer())]==true))then
return false
endif
return true
endfunction
function Trig_Mianban3_Actions takes nothing returns nothing
if(Trig_Mianban3_Func001C())then
set udg_Mianban_shadi2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=(udg_Mianban_shadi2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+1)
set udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=0
call MultiboardSetItemValueBJ(udg_Mianban_I,4,(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+1),("    |cffFFFFFF"+(I2S(udg_Mianban_shadi2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+"|r")))
call MultiboardSetItemValueBJ(udg_Mianban_I,3,(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+1),("   |cffFFFFFF"+(I2S(udg_Mianban_shadi[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+("|r |cFF999999"+(I2S(udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+"|r")))))
call ForGroupBJ(udg_Hero_tm,function Trig_Mianban3_Func001Func005A)
if(Trig_Mianban3_Func001Func006C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(("|cFF00FFFF"+GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())))+("|r击倒了|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+("|r,获得|cFFFFFF33"+(I2S((30*GetHeroLevel(GetTriggerUnit())))+"金钱|r"))))))
call AdjustPlayerStateBJ(1,GetOwningPlayer(GetKillingUnitBJ()),PLAYER_STATE_RESOURCE_LUMBER)
call AdjustPlayerStateBJ((30*GetHeroLevel(GetTriggerUnit())),GetOwningPlayer(GetKillingUnitBJ()),PLAYER_STATE_RESOURCE_GOLD)
call CreateTextTagUnitBJ(("+"+I2S((GetHeroLevel(GetTriggerUnit())*30))),GetTriggerUnit(),0,8.50,100,100,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
else
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(("|cFF00FFFF"+GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())))+("|r击倒了|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+("|r,获得金钱平分给玩家")))))
call ForForce(GetPlayersMatching(Condition(function Trig_Mianban3_Func001Func006Func002001001)),function Trig_Mianban3_Func001Func006Func002A)
endif
if(Trig_Mianban3_Func001Func007C())then
if(Trig_Mianban3_Func001Func007Func001C())then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,10.00,("|cFFFF3300【击杀段数】|r奖励 |cFFFFFF33"+(I2S(1000)+("金钱|r—|cFF33FF33击杀×"+I2S(udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])))))
call AdjustPlayerStateBJ(1000,GetOwningPlayer(GetKillingUnitBJ()),PLAYER_STATE_RESOURCE_GOLD)
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,10.00,("|cFFFF3300【击杀段数】|r奖励 |cFFFFFF33"+(I2S((150*udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))+("金钱|r—|cFF33FF33击杀×"+I2S(udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])))))
call AdjustPlayerStateBJ((udg_Mianban_lianxishadi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]*150),GetOwningPlayer(GetKillingUnitBJ()),PLAYER_STATE_RESOURCE_GOLD)
endif
else
endif
else
endif
call CreateNUnitsAtLoc(1,'ucs1',Player(PLAYER_NEUTRAL_AGGRESSIVE),GetUnitLoc(GetTriggerUnit()),GetRandomDirectionDeg())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call SetUnitUserData(GetLastCreatedUnit(),GetRandomInt(15,40))
call GroupAddUnit(udg_Zhu_HMP,GetLastCreatedUnit())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=GetRandomInt(2,3)
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ucs2',Player(PLAYER_NEUTRAL_AGGRESSIVE),GetUnitLoc(GetTriggerUnit()),GetRandomDirectionDeg())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call SetUnitUserData(GetLastCreatedUnit(),GetRandomInt(15,30))
call GroupAddUnit(udg_Zhu_HMP,GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_X_T)
set udg_Mianban_bez[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
set udg_Mianban_fuhuotime[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=(10+GetHeroLevel(GetTriggerUnit()))
call StartTimerBJ(udg_Time_fuhuo[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],false,(10.00+I2R(GetHeroLevel(GetTriggerUnit()))))
call CreateTimerDialogBJ(udg_Time_fuhuo[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],GetHeroProperName(GetTriggerUnit()))
set udg_Time_fuhuo[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedTimerBJ()
set udg_Time_fuhchuan[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedTimerDialogBJ()
if(Trig_Mianban3_Func014C())then
set udg_Mianban_shadi2[4]=(udg_Mianban_shadi2[4]+1)
if(Trig_Mianban3_Func014Func002C())then
set udg_X_Attack[1]=(udg_X_Attack[1]-1)
else
endif
call MultiboardSetItemValueBJ(udg_Mianban_I,4,5,("|cFF00FFFF"+(I2S(udg_Mianban_shadi2[4])+"|r")))
else
endif
if(Trig_Mianban3_Func015C())then
set udg_Mianban_shadi2[8]=(udg_Mianban_shadi2[8]+1)
if(Trig_Mianban3_Func015Func002C())then
set udg_X_Attack[2]=(udg_X_Attack[2]-1)
else
endif
call MultiboardSetItemValueBJ(udg_Mianban_I,4,9,("|cFF00FFFF"+(I2S(udg_Mianban_shadi2[8])+"|r")))
else
endif
if(Trig_Mianban3_Func016C())then
set udg_Mianban_shadi2[12]=(udg_Mianban_shadi2[12]+1)
if(Trig_Mianban3_Func016Func002C())then
set udg_X_Attack[3]=(udg_X_Attack[3]-1)
else
endif
call MultiboardSetItemValueBJ(udg_Mianban_I,4,13,("|cFF00FFFF"+(I2S(udg_Mianban_shadi2[12])+"|r")))
else
endif
call TriggerSleepAction((10.00+I2R(GetHeroLevel(GetTriggerUnit()))))
if(Trig_Mianban3_Func018C())then
call DestroyTimerDialog(udg_Time_fuhchuan[GetConvertedPlayerId(GetTriggerPlayer())])
if(Trig_Mianban3_Func018Func003C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(GetPlayerName(GetTriggerPlayer())+"|cFF999999已经复活|r"))
call ReviveHeroLoc(GetTriggerUnit(),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),true)
else
call DoNothing()
endif
if(Trig_Mianban3_Func018Func004C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(GetPlayerName(GetTriggerPlayer())+"|cFF999999已经复活|r"))
call ReviveHeroLoc(GetTriggerUnit(),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),true)
else
call DoNothing()
endif
if(Trig_Mianban3_Func018Func005C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(GetPlayerName(GetTriggerPlayer())+"|cFF999999已经复活|r"))
call ReviveHeroLoc(GetTriggerUnit(),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),true)
else
call DoNothing()
endif
else
endif
endfunction
function InitTrig_Mianban3 takes nothing returns nothing
set gg_trg_Mianban3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Mianban3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Mianban3,Condition(function Trig_Mianban3_Conditions))
call TriggerAddAction(gg_trg_Mianban3,function Trig_Mianban3_Actions)
endfunction
function Trig_Mianban4_Actions takes nothing returns nothing
call MultiboardSetItemValueBJ(udg_Mianban_I,5,15,((I2S(udg_Mianban_time[3])+":")+((I2S(udg_Mianban_time[2])+":")+I2S(udg_Mianban_time[1]))))
endfunction
function InitTrig_Mianban4 takes nothing returns nothing
set gg_trg_Mianban4=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Mianban4,0.50)
call TriggerAddAction(gg_trg_Mianban4,function Trig_Mianban4_Actions)
endfunction
function Trig_Mianban5_Func001001001 takes nothing returns boolean
return(IsPlayerInForce(GetFilterPlayer(),GetPlayersAll())==true)
endfunction
function Trig_Mianban5_Func001Func001C takes nothing returns boolean
if(not(udg_Mianban_fuhuotime[GetConvertedPlayerId(GetEnumPlayer())]>0))then
return false
endif
return true
endfunction
function Trig_Mianban5_Func001A takes nothing returns nothing
if(Trig_Mianban5_Func001Func001C())then
set udg_Mianban_fuhuotime[GetConvertedPlayerId(GetEnumPlayer())]=(udg_Mianban_fuhuotime[GetConvertedPlayerId(GetEnumPlayer())]-1)
call MultiboardSetItemValueBJ(udg_Mianban_I,5,(GetConvertedPlayerId(GetEnumPlayer())+1),I2S(udg_Mianban_fuhuotime[GetConvertedPlayerId(GetEnumPlayer())]))
else
endif
endfunction
function Trig_Mianban5_Func003C takes nothing returns boolean
if(not(udg_Mianban_time[1]==60))then
return false
endif
return true
endfunction
function Trig_Mianban5_Func004C takes nothing returns boolean
if(not(udg_Mianban_time[2]==60))then
return false
endif
return true
endfunction
function Trig_Mianban5_Actions takes nothing returns nothing
call ForForce(GetPlayersMatching(Condition(function Trig_Mianban5_Func001001001)),function Trig_Mianban5_Func001A)
set udg_Mianban_time[1]=(udg_Mianban_time[1]+1)
if(Trig_Mianban5_Func003C())then
set udg_Mianban_time[1]=0
set udg_Mianban_time[2]=(udg_Mianban_time[2]+1)
else
endif
if(Trig_Mianban5_Func004C())then
set udg_Mianban_time[2]=0
set udg_Mianban_time[3]=(udg_Mianban_time[3]+1)
else
endif
endfunction
function InitTrig_Mianban5 takes nothing returns nothing
set gg_trg_Mianban5=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Mianban5,1.00)
call TriggerAddAction(gg_trg_Mianban5,function Trig_Mianban5_Actions)
endfunction
function Trig_ShowIcon1_Func002C takes nothing returns boolean
if((GetIssuedOrderIdBJ()==String2OrderIdBJ("move")))then
return true
endif
if((GetIssuedOrderIdBJ()==String2OrderIdBJ("patrol")))then
return true
endif
return false
endfunction
function Trig_ShowIcon1_Conditions takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetOrderedUnit()))==MAP_CONTROL_USER))then
return false
endif
if(not Trig_ShowIcon1_Func002C())then
return false
endif
return true
endfunction
function Trig_ShowIcon1_Func004Func002C takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("patrol")))then
return false
endif
return true
endfunction
function Trig_ShowIcon1_Func004C takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("move")))then
return false
endif
return true
endfunction
function Trig_ShowIcon1_Actions takes nothing returns nothing
set udg_point=GetOrderPointLoc()
if(Trig_ShowIcon1_Func004C())then
call IssuePointOrderLoc(GetOrderedUnit(),"attack",udg_point)
else
if(Trig_ShowIcon1_Func004Func002C())then
call IssuePointOrderLoc(GetOrderedUnit(),"move",udg_point)
else
endif
endif
call RemoveLocation(udg_point)
endfunction
function InitTrig_ShowIcon1 takes nothing returns nothing
set gg_trg_ShowIcon1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_ShowIcon1,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(gg_trg_ShowIcon1,Condition(function Trig_ShowIcon1_Conditions))
call TriggerAddAction(gg_trg_ShowIcon1,function Trig_ShowIcon1_Actions)
endfunction
function Trig_ShowIcon2_Conditions takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetOrderedUnit()))==MAP_CONTROL_USER))then
return false
endif
if(not(IsPlayerAlly(GetOwningPlayer(GetOrderedUnit()),GetOwningPlayer(GetOrderTargetUnit()))==true))then
return false
endif
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("smart")))then
return false
endif
return true
endfunction
function Trig_ShowIcon2_Actions takes nothing returns nothing
set udg_point=GetUnitLoc(GetOrderTargetUnit())
call IssuePointOrderLoc(GetOrderedUnit(),"smart",udg_point)
call RemoveLocation(udg_point)
endfunction
function InitTrig_ShowIcon2 takes nothing returns nothing
set gg_trg_ShowIcon2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_ShowIcon2,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(gg_trg_ShowIcon2,Condition(function Trig_ShowIcon2_Conditions))
call TriggerAddAction(gg_trg_ShowIcon2,function Trig_ShowIcon2_Actions)
endfunction
function Trig_ShowIcon3_Conditions takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetOrderedUnit()))==MAP_CONTROL_USER))then
return false
endif
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("move")))then
return false
endif
return true
endfunction
function Trig_ShowIcon3_Actions takes nothing returns nothing
call IssueTargetOrder(GetOrderedUnit(),"attack",GetOrderTargetUnit())
endfunction
function InitTrig_ShowIcon3 takes nothing returns nothing
set gg_trg_ShowIcon3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_ShowIcon3,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(gg_trg_ShowIcon3,Condition(function Trig_ShowIcon3_Conditions))
call TriggerAddAction(gg_trg_ShowIcon3,function Trig_ShowIcon3_Actions)
endfunction
function Trig_X_HP_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetAttacker())=='ucs1'))then
return false
endif
return true
endfunction
function Trig_X_HP_Func009003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetAttackedUnitBJ()))
endfunction
function Trig_X_HP_Actions takes nothing returns nothing
call KillUnit(GetAttacker())
call SetUnitLifeBJ(GetAttackedUnitBJ(),(GetUnitState(GetAttackedUnitBJ(),UNIT_STATE_LIFE)+(GetUnitState(GetAttackedUnitBJ(),UNIT_STATE_MAX_LIFE)*0.10)))
call AddSpecialEffectTargetUnitBJ("origin",GetAttackedUnitBJ(),"Abilities\\Spells\\Items\\AIhe\\AIheTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ(("+ "+I2S(R2I((GetUnitState(GetAttackedUnitBJ(),UNIT_STATE_MAX_LIFE)*0.10)))),GetAttackedUnitBJ(),-80.00,9.00,0.00,100.00,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),200.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.20)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_X_HP_Func009003001)))
endfunction
function InitTrig_X_HP takes nothing returns nothing
set gg_trg_X_HP=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_X_HP,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_X_HP,Condition(function Trig_X_HP_Conditions))
call TriggerAddAction(gg_trg_X_HP,function Trig_X_HP_Actions)
endfunction
function Trig_X_MP_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetAttacker())=='ucs2'))then
return false
endif
return true
endfunction
function Trig_X_MP_Func009003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetAttackedUnitBJ()))
endfunction
function Trig_X_MP_Actions takes nothing returns nothing
call KillUnit(GetAttacker())
call SetUnitManaBJ(GetAttackedUnitBJ(),(GetUnitState(GetAttackedUnitBJ(),UNIT_STATE_MANA)+(GetUnitState(GetAttackedUnitBJ(),UNIT_STATE_MAX_MANA)*0.10)))
call AddSpecialEffectTargetUnitBJ("origin",GetAttackedUnitBJ(),"Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ(("+ "+I2S(R2I((GetUnitState(GetAttackedUnitBJ(),UNIT_STATE_MAX_MANA)*0.10)))),GetAttackedUnitBJ(),-80.00,9.00,20.00,100.00,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),200.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.20)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_X_MP_Func009003001)))
endfunction
function InitTrig_X_MP takes nothing returns nothing
set gg_trg_X_MP=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_X_MP,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_X_MP,Condition(function Trig_X_MP_Conditions))
call TriggerAddAction(gg_trg_X_MP,function Trig_X_MP_Actions)
endfunction
function Trig_X_T_Func001Func002Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())<=0))then
return false
endif
return true
endfunction
function Trig_X_T_Func001Func002A takes nothing returns nothing
if(Trig_X_T_Func001Func002Func001C())then
call GroupRemoveUnit(udg_Zhu_HMP,GetEnumUnit())
call UnitApplyTimedLife(GetEnumUnit(),'BTLF',10.00)
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),GetUnitFacing(GetEnumUnit()))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-1))
endif
endfunction
function Trig_X_T_Func001C takes nothing returns boolean
if(not(CountUnitsInGroup(udg_Zhu_HMP)==0))then
return false
endif
return true
endfunction
function Trig_X_T_Actions takes nothing returns nothing
if(Trig_X_T_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
call ForGroupBJ(udg_Zhu_HMP,function Trig_X_T_Func001Func002A)
endif
endfunction
function InitTrig_X_T takes nothing returns nothing
set gg_trg_X_T=CreateTrigger()
call DisableTrigger(gg_trg_X_T)
call TriggerRegisterTimerEventPeriodic(gg_trg_X_T,0.04)
call TriggerAddAction(gg_trg_X_T,function Trig_X_T_Actions)
endfunction
function Trig_X_BY_Func001C takes nothing returns boolean
if(not(GetDyingUnit()==gg_unit_hkee_0029))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0001)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_Func002C takes nothing returns boolean
if(not(GetDyingUnit()==gg_unit_hkee_0037))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0001)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_Func003C takes nothing returns boolean
if(not(GetDyingUnit()==gg_unit_hkee_0012))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0018)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_Func004C takes nothing returns boolean
if(not(GetDyingUnit()==gg_unit_hkee_0040))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0018)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_Func005C takes nothing returns boolean
if(not(GetDyingUnit()==gg_unit_hkee_0030))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0044)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_Func006C takes nothing returns boolean
if(not(GetDyingUnit()==gg_unit_hkee_0013))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0044)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_Actions takes nothing returns nothing
if(Trig_X_BY_Func001C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00," - |cFFFF66CC雾隐忍者村|r下路据点被攻陷,|cFF660099木叶忍者村|r获得了特殊补给以及对|cFFFF66CC雾隐忍者村|r的进攻指令")
call AddItemToStockBJ('I00V',gg_unit_hcas_0001,1,1)
call EnableTrigger(gg_trg_X_BY_muye1)
else
endif
if(Trig_X_BY_Func002C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00," - |cFF4D2903沙忍者村|r左路据点被攻陷,|cFF660099木叶忍者村|r获得了特殊补给以及对|cFF4D2903沙忍者村|r的进攻指令")
call AddItemToStockBJ('I00W',gg_unit_hcas_0001,1,1)
call EnableTrigger(gg_trg_X_BY_muye2)
else
endif
if(Trig_X_BY_Func003C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00," - |cFF660099木叶忍者村|r下路据点被攻陷,|cFFFF66CC雾隐忍者村|r获得了特殊补给以及对|cFF660099木叶忍者村|r的进攻指令")
call AddItemToStockBJ('I00X',gg_unit_hcas_0018,1,1)
call EnableTrigger(gg_trg_X_BY_wuyin1)
else
endif
if(Trig_X_BY_Func004C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00," - |cFF4D2903沙忍者村|r右路据点被攻陷,|cFFFF66CC雾隐忍者村|r获得了特殊补给以及对|cFF4D2903沙忍者村|r的进攻指令")
call AddItemToStockBJ('I00Y',gg_unit_hcas_0018,1,1)
call EnableTrigger(gg_trg_X_BY_wuyin2)
else
endif
if(Trig_X_BY_Func005C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00," - |cFFFF66CC雾隐忍者村|r上路据点被攻陷,|cFF4D2903沙忍者村|r获得了特殊补给以及对|cFFFF66CC雾隐忍者村|r的进攻指令")
call AddItemToStockBJ('I010',gg_unit_hcas_0044,1,1)
call EnableTrigger(gg_trg_X_BY_sha1)
else
endif
if(Trig_X_BY_Func006C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,"- |cFF660099木叶忍者村|r上路据点被攻陷,|cFF4D2903沙忍者村|r获得了特殊补给以及对|cFF660099木叶忍者村|r的进攻指令")
call AddItemToStockBJ('I00Z',gg_unit_hcas_0044,1,1)
call EnableTrigger(gg_trg_X_BY_sha2)
else
endif
endfunction
function InitTrig_X_BY takes nothing returns nothing
set gg_trg_X_BY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_X_BY,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_X_BY,function Trig_X_BY_Actions)
endfunction
function Trig_X_BY_muye1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hcas_0001)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_muye1_Func001002 takes nothing returns nothing
call AdjustPlayerStateBJ((100*udg_X_Attack[1]),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_X_BY_muye1_Func002001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),Player(3))==true)
endfunction
function Trig_X_BY_muye1_Actions takes nothing returns nothing
call ForForce(GetPlayersAllies(Player(3)),function Trig_X_BY_muye1_Func001002)
call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_X_BY_muye1_Func002001001)),15.00,("|cFFFF3333【进攻奖励】|r增加 |cFFFFFF99"+(I2S((100*udg_X_Attack[1]))+"金钱|r 给|cFF660099木叶忍者村|r所有玩家")))
endfunction
function InitTrig_X_BY_muye1 takes nothing returns nothing
set gg_trg_X_BY_muye1=CreateTrigger()
call DisableTrigger(gg_trg_X_BY_muye1)
call TriggerRegisterTimerEventPeriodic(gg_trg_X_BY_muye1,300.00)
call TriggerAddCondition(gg_trg_X_BY_muye1,Condition(function Trig_X_BY_muye1_Conditions))
call TriggerAddAction(gg_trg_X_BY_muye1,function Trig_X_BY_muye1_Actions)
endfunction
function Trig_X_BY_muye2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hcas_0001)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_muye2_Func001002 takes nothing returns nothing
call AdjustPlayerStateBJ((100*udg_X_Attack[1]),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_X_BY_muye2_Func002001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),Player(3))==true)
endfunction
function Trig_X_BY_muye2_Actions takes nothing returns nothing
call ForForce(GetPlayersAllies(Player(3)),function Trig_X_BY_muye2_Func001002)
call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_X_BY_muye2_Func002001001)),15.00,("|cFFFF3333【进攻奖励】|r增加 |cFFFFFF99"+(I2S((100*udg_X_Attack[1]))+"金钱|r 给|cFF660099木叶忍者村|r所有玩家")))
endfunction
function InitTrig_X_BY_muye2 takes nothing returns nothing
set gg_trg_X_BY_muye2=CreateTrigger()
call DisableTrigger(gg_trg_X_BY_muye2)
call TriggerRegisterTimerEventPeriodic(gg_trg_X_BY_muye2,300.00)
call TriggerAddCondition(gg_trg_X_BY_muye2,Condition(function Trig_X_BY_muye2_Conditions))
call TriggerAddAction(gg_trg_X_BY_muye2,function Trig_X_BY_muye2_Actions)
endfunction
function Trig_X_BY_wuyin1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hcas_0018)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_wuyin1_Func001002 takes nothing returns nothing
call AdjustPlayerStateBJ((100*udg_X_Attack[2]),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_X_BY_wuyin1_Func002001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),Player(7))==true)
endfunction
function Trig_X_BY_wuyin1_Actions takes nothing returns nothing
call ForForce(GetPlayersAllies(Player(7)),function Trig_X_BY_wuyin1_Func001002)
call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_X_BY_wuyin1_Func002001001)),15.00,("|cFFFF3333【进攻奖励】|r增加 |cFFFFFF99"+(I2S((100*udg_X_Attack[2]))+"金钱|r 给|cFFFF66CC雾隐忍者村|r所有玩家")))
endfunction
function InitTrig_X_BY_wuyin1 takes nothing returns nothing
set gg_trg_X_BY_wuyin1=CreateTrigger()
call DisableTrigger(gg_trg_X_BY_wuyin1)
call TriggerRegisterTimerEventPeriodic(gg_trg_X_BY_wuyin1,300.00)
call TriggerAddCondition(gg_trg_X_BY_wuyin1,Condition(function Trig_X_BY_wuyin1_Conditions))
call TriggerAddAction(gg_trg_X_BY_wuyin1,function Trig_X_BY_wuyin1_Actions)
endfunction
function Trig_X_BY_wuyin2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hcas_0018)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_wuyin2_Func001002 takes nothing returns nothing
call AdjustPlayerStateBJ((100*udg_X_Attack[2]),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_X_BY_wuyin2_Func002001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),Player(7))==true)
endfunction
function Trig_X_BY_wuyin2_Actions takes nothing returns nothing
call ForForce(GetPlayersAllies(Player(7)),function Trig_X_BY_wuyin2_Func001002)
call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_X_BY_wuyin2_Func002001001)),15.00,("|cFFFF3333【进攻奖励】|r增加 |cFFFFFF99"+(I2S((100*udg_X_Attack[2]))+"金钱|r 给|cFFFF66CC雾隐忍者村|r所有玩家")))
endfunction
function InitTrig_X_BY_wuyin2 takes nothing returns nothing
set gg_trg_X_BY_wuyin2=CreateTrigger()
call DisableTrigger(gg_trg_X_BY_wuyin2)
call TriggerRegisterTimerEventPeriodic(gg_trg_X_BY_wuyin2,300.00)
call TriggerAddCondition(gg_trg_X_BY_wuyin2,Condition(function Trig_X_BY_wuyin2_Conditions))
call TriggerAddAction(gg_trg_X_BY_wuyin2,function Trig_X_BY_wuyin2_Actions)
endfunction
function Trig_X_BY_sha1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hcas_0044)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_sha1_Func001002 takes nothing returns nothing
call AdjustPlayerStateBJ((100*udg_X_Attack[3]),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_X_BY_sha1_Func002001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),Player(11))==true)
endfunction
function Trig_X_BY_sha1_Actions takes nothing returns nothing
call ForForce(GetPlayersAllies(Player(11)),function Trig_X_BY_sha1_Func001002)
call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_X_BY_sha1_Func002001001)),15.00,("|cFFFF3333【进攻奖励】|r增加 |cFFFFFF99"+(I2S((100*udg_X_Attack[3]))+"金钱|r 给|cFF4D2903沙忍者村|r所有玩家")))
endfunction
function InitTrig_X_BY_sha1 takes nothing returns nothing
set gg_trg_X_BY_sha1=CreateTrigger()
call DisableTrigger(gg_trg_X_BY_sha1)
call TriggerRegisterTimerEventPeriodic(gg_trg_X_BY_sha1,300.00)
call TriggerAddCondition(gg_trg_X_BY_sha1,Condition(function Trig_X_BY_sha1_Conditions))
call TriggerAddAction(gg_trg_X_BY_sha1,function Trig_X_BY_sha1_Actions)
endfunction
function Trig_X_BY_sha2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hcas_0044)==true))then
return false
endif
return true
endfunction
function Trig_X_BY_sha2_Func001002 takes nothing returns nothing
call AdjustPlayerStateBJ((100*udg_X_Attack[3]),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_X_BY_sha2_Func002001001 takes nothing returns boolean
return(IsPlayerAlly(GetFilterPlayer(),Player(11))==true)
endfunction
function Trig_X_BY_sha2_Actions takes nothing returns nothing
call ForForce(GetPlayersAllies(Player(11)),function Trig_X_BY_sha2_Func001002)
call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_X_BY_sha2_Func002001001)),15.00,("|cFFFF3333【进攻奖励】|r增加 |cFFFFFF99"+(I2S((100*udg_X_Attack[3]))+"金钱|r 给|cFF4D2903沙忍者村|r所有玩家")))
endfunction
function InitTrig_X_BY_sha2 takes nothing returns nothing
set gg_trg_X_BY_sha2=CreateTrigger()
call DisableTrigger(gg_trg_X_BY_sha2)
call TriggerRegisterTimerEventPeriodic(gg_trg_X_BY_sha2,300.00)
call TriggerAddCondition(gg_trg_X_BY_sha2,Condition(function Trig_X_BY_sha2_Conditions))
call TriggerAddAction(gg_trg_X_BY_sha2,function Trig_X_BY_sha2_Actions)
endfunction
function Trig_X_SH_Conditions takes nothing returns boolean
if(not(GetEventDamage()>10.00))then
return false
endif
if(not(GetOwningPlayer(GetTriggerUnit())!=GetOwningPlayer(GetEventDamageSource())))then
return false
endif
return true
endfunction
function Trig_X_SH_Func007003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetTriggerUnit()))
endfunction
function Trig_X_SH_Func012003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetEventDamageSource()))
endfunction
function Trig_X_SH_Actions takes nothing returns nothing
call CreateTextTagUnitBJ(I2S(R2I(GetEventDamage())),udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],-80.00,(8.50+((GetEventDamage()+150.00)/150.00)),100.00,0.00,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),250.00,GetRandomReal(80.00,100.00))
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.20)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_X_SH_Func007003001)))
call CreateTextTagUnitBJ(I2S(R2I(GetEventDamage())),udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],-80.00,(8.50+((GetEventDamage()+150.00)/150.00)),0.00,70.00,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),250.00,GetRandomReal(80.00,100.00))
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.20)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_X_SH_Func012003001)))
endfunction
function InitTrig_X_SH takes nothing returns nothing
set gg_trg_X_SH=CreateTrigger()
call TriggerAddCondition(gg_trg_X_SH,Condition(function Trig_X_SH_Conditions))
call TriggerAddAction(gg_trg_X_SH,function Trig_X_SH_Actions)
endfunction
function Trig_X_AI1_Func002001002 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())=='hspt')
endfunction
function Trig_X_AI1_Func002A takes nothing returns nothing
set udg_AI_dian[udg_AI]=GetUnitLoc(GetEnumUnit())
call SetUnitAbilityLevel(GetEnumUnit(),'Ault',udg_AI)
set udg_AI=(udg_AI+1)
endfunction
function Trig_X_AI1_Actions takes nothing returns nothing
set udg_AI=1
call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Trig_X_AI1_Func002001002)),function Trig_X_AI1_Func002A)
endfunction
function InitTrig_X_AI1 takes nothing returns nothing
set gg_trg_X_AI1=CreateTrigger()
call TriggerAddAction(gg_trg_X_AI1,function Trig_X_AI1_Actions)
endfunction
function Trig_X_AI2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='hspt'))then
return false
endif
if(not(GetUnitLifePercent(GetTriggerUnit())<=40.00))then
return false
endif
if(not(DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),udg_AI_dian[GetUnitAbilityLevel(GetTriggerUnit(),'Ault')])>=600.00))then
return false
endif
if(not(GetUnitAbilityLevel(GetTriggerUnit(),'Ault')!=50))then
return false
endif
return true
endfunction
function Trig_X_AI2_Actions takes nothing returns nothing
call IssuePointOrderByIdLoc(GetTriggerUnit(),851986,udg_AI_dian[GetUnitAbilityLevel(GetTriggerUnit(),'Ault')])
endfunction
function InitTrig_X_AI2 takes nothing returns nothing
set gg_trg_X_AI2=CreateTrigger()
call YDWESyStemAnyUnitDamagedRegistTrigger(gg_trg_X_AI2)
call TriggerAddCondition(gg_trg_X_AI2,Condition(function Trig_X_AI2_Conditions))
call TriggerAddAction(gg_trg_X_AI2,function Trig_X_AI2_Actions)
endfunction
function Trig_X_OB1_Conditions takes nothing returns boolean
if(not(udg_ALL_UNIT[9]==null))then
return false
endif
if(not(udg_ALL_UNIT[10]==null))then
return false
endif
if(not(udg_ALL_UNIT[11]==null))then
return false
endif
return true
endfunction
function Trig_X_OB1_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateFogModifierRectBJ(true,Player(8),FOG_OF_WAR_VISIBLE,GetPlayableMapRect())
call CreateFogModifierRectBJ(true,Player(9),FOG_OF_WAR_VISIBLE,GetPlayableMapRect())
call CreateFogModifierRectBJ(true,Player(10),FOG_OF_WAR_VISIBLE,GetPlayableMapRect())
set udg_choose_ture[9]=false
set udg_choose_ture[10]=false
set udg_choose_ture[11]=false
set udg_OB[9]=true
set udg_OB[10]=true
set udg_OB[11]=true
call SetPlayerName(Player(8),(GetPlayerName(Player(8))+("("+("观看者)"))))
call SetPlayerName(Player(9),(GetPlayerName(Player(9))+("("+("观看者)"))))
call SetPlayerName(Player(10),(GetPlayerName(Player(10))+("("+("观看者)"))))
call KillUnit(gg_unit_hcas_0044)
call DisplayTimedTextToForce(GetPlayersAll(),15.00,"沙忍者村队伍,输入了观看者指令,全部成员成为观看者")
endfunction
function InitTrig_X_OB1 takes nothing returns nothing
set gg_trg_X_OB1=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_X_OB1,Player(8),"-OB",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_OB1,Player(9),"-OB",true)
call TriggerRegisterPlayerChatEvent(gg_trg_X_OB1,Player(10),"-OB",true)
call TriggerAddCondition(gg_trg_X_OB1,Condition(function Trig_X_OB1_Conditions))
call TriggerAddAction(gg_trg_X_OB1,function Trig_X_OB1_Actions)
endfunction
function Trig_X_ZG_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='hspt'))then
return false
endif
return true
endfunction
function Trig_X_ZG_Func001Func002C takes nothing returns boolean
if(not(udg_X_Attack[1]>1))then
return false
endif
return true
endfunction
function Trig_X_ZG_Func001C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(3))==true))then
return false
endif
if(not(GetOwningPlayer(GetTriggerUnit())!=Player(3)))then
return false
endif
return true
endfunction
function Trig_X_ZG_Func002Func002C takes nothing returns boolean
if(not(udg_X_Attack[2]>1))then
return false
endif
return true
endfunction
function Trig_X_ZG_Func002C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(7))==true))then
return false
endif
if(not(GetOwningPlayer(GetTriggerUnit())!=Player(7)))then
return false
endif
return true
endfunction
function Trig_X_ZG_Func003Func002C takes nothing returns boolean
if(not(udg_X_Attack[3]>1))then
return false
endif
return true
endfunction
function Trig_X_ZG_Func003C takes nothing returns boolean
if(not(IsUnitAlly(GetTriggerUnit(),Player(11))==true))then
return false
endif
if(not(GetOwningPlayer(GetTriggerUnit())!=Player(11)))then
return false
endif
return true
endfunction
function Trig_X_ZG_Actions takes nothing returns nothing
if(Trig_X_ZG_Func001C())then
set udg_Mianban_shadi2[4]=(udg_Mianban_shadi2[4]+1)
if(Trig_X_ZG_Func001Func002C())then
set udg_X_Attack[1]=(udg_X_Attack[1]-1)
else
endif
call MultiboardSetItemValueBJ(udg_Mianban_I,4,5,("|cFF00FFFF"+(I2S(udg_Mianban_shadi2[4])+"|r")))
else
endif
if(Trig_X_ZG_Func002C())then
set udg_Mianban_shadi2[8]=(udg_Mianban_shadi2[8]+1)
if(Trig_X_ZG_Func002Func002C())then
set udg_X_Attack[2]=(udg_X_Attack[2]-1)
else
endif
call MultiboardSetItemValueBJ(udg_Mianban_I,4,9,("|cFF00FFFF"+(I2S(udg_Mianban_shadi2[8])+"|r")))
else
endif
if(Trig_X_ZG_Func003C())then
set udg_Mianban_shadi2[12]=(udg_Mianban_shadi2[12]+1)
if(Trig_X_ZG_Func003Func002C())then
set udg_X_Attack[3]=(udg_X_Attack[3]-1)
else
endif
call MultiboardSetItemValueBJ(udg_Mianban_I,4,13,("|cFF00FFFF"+(I2S(udg_Mianban_shadi2[12])+"|r")))
else
endif
endfunction
function InitTrig_X_ZG takes nothing returns nothing
set gg_trg_X_ZG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_X_ZG,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_X_ZG,Condition(function Trig_X_ZG_Conditions))
call TriggerAddAction(gg_trg_X_ZG,function Trig_X_ZG_Actions)
endfunction
function Trig_G0_Func001002 takes nothing returns nothing
call AdjustPlayerStateBJ(1000,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_G0_Actions takes nothing returns nothing
call ForForce(GetPlayersAll(),function Trig_G0_Func001002)
call DisplayTimedTextToForce(GetPlayersAll(),50.00,"NARUTO[Zero]——疾风传\n有什么问题或者意见,请加入玩家QQ群 - 43476139(超级群)\n地图的部分信息可以按F9查看\n\n(VS新开专房——魔兽RPG-地图工厂电信专区-疾风传,Zero)\n\n地图专区:Narutojfz.uuu9.com\n幻の羁绊制作组:www.war3rpg.net\n\n模型提供:稀饭,部分为转载\n\n模型声明:地图中多数模型为[幻の羁绊制作组]向合作者稀饭购买使用,若要使用部分该地图的模型请联系模型作者稀饭")
endfunction
function InitTrig_G0 takes nothing returns nothing
set gg_trg_G0=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_G0,10.00)
call TriggerAddAction(gg_trg_G0,function Trig_G0_Actions)
endfunction
function Trig_G1_Func001C takes nothing returns boolean
if(not(IsUnitEnemy(GetBuyingUnit(),GetOwningPlayer(GetTriggerUnit()))==true))then
return false
endif
return true
endfunction
function Trig_G1_Actions takes nothing returns nothing
if(Trig_G1_Func001C())then
call DisplayTimedTextToForce(GetPlayersByMapControl(GetPlayerController(GetOwningPlayer(GetBuyingUnit()))),10.00,("|cFFFF0000在敌方处购买物品要罚钱!盛顾"+(I2S((GetHeroLevel(GetBuyingUnit())*50))+"!")))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()),PLAYER_STATE_RESOURCE_GOLD,(GetPlayerState(GetOwningPlayer(GetBuyingUnit()),PLAYER_STATE_RESOURCE_GOLD)-(GetHeroLevel(GetBuyingUnit())*100)))
else
call DoNothing()
endif
endfunction
function InitTrig_G1 takes nothing returns nothing
set gg_trg_G1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_G1,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_G1,function Trig_G1_Actions)
endfunction
function Trig_G2_Actions takes nothing returns nothing
call TriggerSleepAction(120.00)
call DestructableRestoreLife(GetDyingDestructable(),GetDestructableMaxLife(GetLastCreatedDestructable()),true)
endfunction
function InitTrig_G2 takes nothing returns nothing
set gg_trg_G2=CreateTrigger()
call TriggerAddAction(gg_trg_G2,function Trig_G2_Actions)
endfunction
function Trig_G3_Func001002 takes nothing returns nothing
call TriggerRegisterDeathEvent(gg_trg_G2,GetEnumDestructable())
endfunction
function Trig_G3_Actions takes nothing returns nothing
call EnumDestructablesInRectAll(GetPlayableMapRect(),function Trig_G3_Func001002)
endfunction
function InitTrig_G3 takes nothing returns nothing
set gg_trg_G3=CreateTrigger()
call TriggerAddAction(gg_trg_G3,function Trig_G3_Actions)
endfunction
function Trig_G4_Func005Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])==true))then
return false
endif
return true
endfunction
function Trig_G4_Func005C takes nothing returns boolean
if(not(IsUnitAlly(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],Player(3))==true))then
return false
endif
return true
endfunction
function Trig_G4_Func006Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])==true))then
return false
endif
return true
endfunction
function Trig_G4_Func006C takes nothing returns boolean
if(not(IsUnitAlly(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],Player(7))==true))then
return false
endif
return true
endfunction
function Trig_G4_Func007Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])==true))then
return false
endif
return true
endfunction
function Trig_G4_Func007C takes nothing returns boolean
if(not(IsUnitAlly(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],Player(11))==true))then
return false
endif
return true
endfunction
function Trig_G4_Actions takes nothing returns nothing
set udg_All_lixian[GetConvertedPlayerId(GetTriggerPlayer())]=true
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(("|cFFFF0000"+(GetPlayerName(GetTriggerPlayer())+"|r"))+" 离开了游戏,所有相关单位全部删除"))
call MultiboardSetItemValueBJ(udg_Mianban_I,1,(GetConvertedPlayerId(GetTriggerPlayer())+1),"|cFF949596[已离开]|r")
call DestroyTimerDialog(udg_Time_fuhchuan[GetConvertedPlayerId(GetTriggerPlayer())])
if(Trig_G4_Func005C())then
if(Trig_G4_Func005Func001C())then
call SetUnitPositionLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
else
call ReviveHeroLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),true)
endif
else
call DoNothing()
endif
if(Trig_G4_Func006C())then
if(Trig_G4_Func006Func001C())then
call SetUnitPositionLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
else
call ReviveHeroLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),true)
endif
else
call DoNothing()
endif
if(Trig_G4_Func007C())then
if(Trig_G4_Func007Func001C())then
call SetUnitPositionLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
else
call ReviveHeroLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),true)
endif
else
call DoNothing()
endif
call KillUnit(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateItemLoc(GetItemTypeId(UnitItemInSlotBJ(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],bj_forLoopAIndex)),GetUnitLoc(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())]))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(5.00)
call RemoveUnit(udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())])
endfunction
function InitTrig_G4 takes nothing returns nothing
set gg_trg_G4=CreateTrigger()
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(0))
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(1))
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(2))
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(4))
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(5))
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(6))
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(8))
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(9))
call TriggerRegisterPlayerEventLeave(gg_trg_G4,Player(10))
call TriggerAddAction(gg_trg_G4,function Trig_G4_Actions)
endfunction
function Trig_G5_Conditions takes nothing returns boolean
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
return true
endfunction
function Trig_G5_Actions takes nothing returns nothing
call CreateTextTagUnitBJ((GetAbilityName(GetSpellAbilityId())+"!"),GetTriggerUnit(),0,10.50,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.20)
endfunction
function InitTrig_G5 takes nothing returns nothing
set gg_trg_G5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_G5,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(gg_trg_G5,Condition(function Trig_G5_Conditions))
call TriggerAddAction(gg_trg_G5,function Trig_G5_Actions)
endfunction
function Trig_G6_Actions takes nothing returns nothing
call ClearTextMessagesBJ(GetPlayersByMapControl(GetPlayerController(GetTriggerPlayer())))
endfunction
function InitTrig_G6 takes nothing returns nothing
set gg_trg_G6=CreateTrigger()
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(0))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(1))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(2))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(4))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(5))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(6))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(8))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(9))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(10))
call TriggerRegisterPlayerEventEndCinematic(gg_trg_G6,Player(11))
call TriggerAddAction(gg_trg_G6,function Trig_G6_Actions)
endfunction
function Trig_G7_Func002Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(ConvertedPlayer(GetForLoopIndexA()))==PLAYER_SLOT_STATE_LEFT))then
return false
endif
return true
endfunction
function Trig_G7_Func003Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(ConvertedPlayer(GetForLoopIndexA()))==PLAYER_SLOT_STATE_LEFT))then
return false
endif
return true
endfunction
function Trig_G7_Func004Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(ConvertedPlayer(GetForLoopIndexA()))==PLAYER_SLOT_STATE_LEFT))then
return false
endif
return true
endfunction
function Trig_G7_Actions takes nothing returns nothing
call TriggerSleepAction(3.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G7_Func002Func001C())then
call ConditionalTriggerExecute(gg_trg_muye_die2)
else
call DoNothing()
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=5
set bj_forLoopAIndexEnd=7
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G7_Func003Func001C())then
call ConditionalTriggerExecute(gg_trg_wuyen_die2)
else
call DoNothing()
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=9
set bj_forLoopAIndexEnd=11
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G7_Func004Func001C())then
call ConditionalTriggerExecute(gg_trg_sha_dies2)
else
call DoNothing()
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_G7 takes nothing returns nothing
set gg_trg_G7=CreateTrigger()
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(0))
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(1))
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(2))
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(4))
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(5))
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(6))
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(8))
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(9))
call TriggerRegisterPlayerEventLeave(gg_trg_G7,Player(10))
call TriggerAddAction(gg_trg_G7,function Trig_G7_Actions)
endfunction
function Trig_G8_Conditions takes nothing returns boolean
if(not(GetItemTypeId(GetManipulatedItem())=='ankh'))then
return false
endif
return true
endfunction
function Trig_G8_Func003Func001C takes nothing returns boolean
if(not(GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(),bj_forLoopAIndex))=='ankh'))then
return false
endif
return true
endfunction
function Trig_G8_Func004C takes nothing returns boolean
if(not(GetItemUserData(GetManipulatedItem())>1))then
return false
endif
return true
endfunction
function Trig_G8_Actions takes nothing returns nothing
call SetItemUserData(GetManipulatedItem(),0)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G8_Func003Func001C())then
call SetItemUserData(GetManipulatedItem(),(GetItemUserData(GetManipulatedItem())+1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if(Trig_G8_Func004C())then
call UnitRemoveItemSwapped(GetManipulatedItem(),GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),5.00,"不能带2个 |cff56D6D6[复活·充魔石]")
else
call DoNothing()
endif
endfunction
function InitTrig_G8 takes nothing returns nothing
set gg_trg_G8=CreateTrigger()
call DisableTrigger(gg_trg_G8)
call TriggerRegisterAnyUnitEventBJ(gg_trg_G8,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_G8,Condition(function Trig_G8_Conditions))
call TriggerAddAction(gg_trg_G8,function Trig_G8_Actions)
endfunction
function Trig_G9_Conditions takes nothing returns boolean
if(not(GetTriggerExecCount(GetTriggeringTrigger())<20))then
return false
endif
return true
endfunction
function Trig_G9_Func002Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(ConvertedPlayer(bj_forLoopAIndex))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
return true
endfunction
function Trig_G9_Actions takes nothing returns nothing
call MultiboardSetItemValueBJ(udg_Mianban_I,1,15,(I2S(GetTriggerExecCount(gg_trg_G9))+(" / "+(I2S(GetTriggerExecCount(gg_trg_G9_2))+(((" / "+I2S(GetTriggerExecCount(gg_trg_G9_3)))+(" / "+I2S(GetTriggerExecCount(gg_trg_G9_4))))+" ")))))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=13
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G9_Func002Func001C())then
call SetPlayerTechResearchedSwap('R000',GetTriggerExecCount(GetTriggeringTrigger()),ConvertedPlayer(bj_forLoopAIndex))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_G9 takes nothing returns nothing
set gg_trg_G9=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_G9,240.00)
call TriggerAddCondition(gg_trg_G9,Condition(function Trig_G9_Conditions))
call TriggerAddAction(gg_trg_G9,function Trig_G9_Actions)
endfunction
function Trig_G9_2_Conditions takes nothing returns boolean
if(not(GetTriggerExecCount(GetTriggeringTrigger())<20))then
return false
endif
return true
endfunction
function Trig_G9_2_Func002Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(ConvertedPlayer(bj_forLoopAIndex))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
return true
endfunction
function Trig_G9_2_Actions takes nothing returns nothing
call MultiboardSetItemValueBJ(udg_Mianban_I,1,15,(I2S(GetTriggerExecCount(gg_trg_G9))+(" / "+(I2S(GetTriggerExecCount(gg_trg_G9_2))+(((" / "+I2S(GetTriggerExecCount(gg_trg_G9_3)))+(" / "+I2S(GetTriggerExecCount(gg_trg_G9_4))))+" ")))))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=13
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G9_2_Func002Func001C())then
call SetPlayerTechResearchedSwap('R001',GetTriggerExecCount(GetTriggeringTrigger()),ConvertedPlayer(bj_forLoopAIndex))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_G9_2 takes nothing returns nothing
set gg_trg_G9_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_G9_2,300.00)
call TriggerAddCondition(gg_trg_G9_2,Condition(function Trig_G9_2_Conditions))
call TriggerAddAction(gg_trg_G9_2,function Trig_G9_2_Actions)
endfunction
function Trig_G9_3_Conditions takes nothing returns boolean
if(not(GetTriggerExecCount(GetTriggeringTrigger())<10))then
return false
endif
return true
endfunction
function Trig_G9_3_Func002Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(ConvertedPlayer(bj_forLoopAIndex))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
return true
endfunction
function Trig_G9_3_Actions takes nothing returns nothing
call MultiboardSetItemValueBJ(udg_Mianban_I,1,15,(I2S(GetTriggerExecCount(gg_trg_G9))+(" / "+(I2S(GetTriggerExecCount(gg_trg_G9_2))+(((" / "+I2S(GetTriggerExecCount(gg_trg_G9_3)))+(" / "+I2S(GetTriggerExecCount(gg_trg_G9_4))))+" ")))))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=13
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G9_3_Func002Func001C())then
call SetPlayerTechResearchedSwap('R003',GetTriggerExecCount(GetTriggeringTrigger()),ConvertedPlayer(bj_forLoopAIndex))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_G9_3 takes nothing returns nothing
set gg_trg_G9_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_G9_3,500.00)
call TriggerAddCondition(gg_trg_G9_3,Condition(function Trig_G9_3_Conditions))
call TriggerAddAction(gg_trg_G9_3,function Trig_G9_3_Actions)
endfunction
function Trig_G9_4_Conditions takes nothing returns boolean
if(not(GetTriggerExecCount(GetTriggeringTrigger())<3))then
return false
endif
return true
endfunction
function Trig_G9_4_Func003Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(ConvertedPlayer(bj_forLoopAIndex))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
return true
endfunction
function Trig_G9_4_Actions takes nothing returns nothing
call DisplayTimedTextToForce(GetPlayersAll(),10.00,"各国忍者村发布全面进攻命令,全部忍者综合水平提升!!!")
call MultiboardSetItemValueBJ(udg_Mianban_I,1,15,(I2S(GetTriggerExecCount(gg_trg_G9))+(" / "+(I2S(GetTriggerExecCount(gg_trg_G9_2))+(((" / "+I2S(GetTriggerExecCount(gg_trg_G9_3)))+(" / "+I2S(GetTriggerExecCount(gg_trg_G9_4))))+" ")))))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=13
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G9_4_Func003Func001C())then
call SetPlayerTechResearchedSwap('R004',GetTriggerExecCount(GetTriggeringTrigger()),ConvertedPlayer(bj_forLoopAIndex))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_G9_4 takes nothing returns nothing
set gg_trg_G9_4=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_G9_4,1800.00)
call TriggerAddCondition(gg_trg_G9_4,Condition(function Trig_G9_4_Conditions))
call TriggerAddAction(gg_trg_G9_4,function Trig_G9_4_Actions)
endfunction
function Trig_G9_5_Conditions takes nothing returns boolean
if(not(GetTriggerExecCount(GetTriggeringTrigger())<5))then
return false
endif
return true
endfunction
function Trig_G9_5_Func002Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(ConvertedPlayer(bj_forLoopAIndex))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
return true
endfunction
function Trig_G9_5_Actions takes nothing returns nothing
call DisplayTimedTextToForce(GetPlayersAll(),10.00,"各忍村,高级忍者能力大幅度提升!")
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=13
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_G9_5_Func002Func001C())then
call SetPlayerTechResearchedSwap('R005',GetTriggerExecCount(GetTriggeringTrigger()),ConvertedPlayer(bj_forLoopAIndex))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_G9_5 takes nothing returns nothing
set gg_trg_G9_5=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_G9_5,550.00)
call TriggerAddCondition(gg_trg_G9_5,Condition(function Trig_G9_5_Conditions))
call TriggerAddAction(gg_trg_G9_5,function Trig_G9_5_Actions)
endfunction
function Trig_G10_Actions takes nothing returns nothing
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"地图资料","玩家QQ群 - 43476139(超级群)\n论坛地址 - Narutojfz.uuu9.com\n幻の羁绊制作组 - www.war3rpg.net\n感谢以下辛苦测试玩家们~\n - 代号、黑猫、小猪、禽兽、木木、修罗、緖、小凯等许多忘记名字的人","ReplaceableTextures\\CommandButtons\\BTNPatrol.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"模式介绍","1V1模式\n适合单挑的游戏模式,击杀敌人英雄5次便可取得胜利,游戏开始时双方会比其他模式额外多出10点EX点数\n\n死亡模式\n增加新的胜利条件:势力击杀数达到30就能胜利\n\n生存模式\n淘汰制的模式,新胜利条件:势力死亡数达到30边会判定为失败,当只剩下一方势力时,该势力会获得胜利","ReplaceableTextures\\CommandButtons\\BTNPatrol.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"幻の羁绊.制作组","幻の羁绊制作组是一个类似通魔作坊的,魔兽RPG地图制作以及与魔兽地图制作相关的团体...\n\n团长是一只白痴...\n\n——完毕","ReplaceableTextures\\CommandButtons\\BTNPatrol.blp")
endfunction
function InitTrig_G10 takes nothing returns nothing
set gg_trg_G10=CreateTrigger()
call TriggerAddAction(gg_trg_G10,function Trig_G10_Actions)
endfunction
function Trig_G11_Conditions takes nothing returns boolean
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==true))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func001Func002002 takes nothing returns nothing
call AdjustPlayerStateBJ(500,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_G11_Func001Func001Func003Func001Func005001 takes nothing returns boolean
return(IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_G11_Func001Func001Func003Func001Func005002 takes nothing returns boolean
return(IsUnitAliveBJ(GetEnumUnit())==true)
endfunction
function Trig_G11_Func001Func001Func003Func001C takes nothing returns boolean
if(not GetBooleanAnd((IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true),(IsUnitAliveBJ(GetEnumUnit())==true)))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func001Func003A takes nothing returns nothing
if(Trig_G11_Func001Func001Func003Func001C())then
call CreateTextTagUnitBJ(("+500"),GetEnumUnit(),0,8.00,100,100,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
else
endif
endfunction
function Trig_G11_Func001Func001C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='ntx2'))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func002Func002002 takes nothing returns nothing
call AdjustPlayerStateBJ(800,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_G11_Func001Func002Func003Func001Func005001 takes nothing returns boolean
return(IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_G11_Func001Func002Func003Func001Func005002 takes nothing returns boolean
return(IsUnitAliveBJ(GetEnumUnit())==true)
endfunction
function Trig_G11_Func001Func002Func003Func001C takes nothing returns boolean
if(not GetBooleanAnd((IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true),(IsUnitAliveBJ(GetEnumUnit())==true)))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func002Func003A takes nothing returns nothing
if(Trig_G11_Func001Func002Func003Func001C())then
call CreateTextTagUnitBJ(("+800"),GetEnumUnit(),0,8.00,100,100,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
else
endif
endfunction
function Trig_G11_Func001Func002C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='hctw'))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func003Func002002 takes nothing returns nothing
call AdjustPlayerStateBJ(1000,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_G11_Func001Func003Func003Func001Func005001 takes nothing returns boolean
return(IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_G11_Func001Func003Func003Func001Func005002 takes nothing returns boolean
return(IsUnitAliveBJ(GetEnumUnit())==true)
endfunction
function Trig_G11_Func001Func003Func003Func001C takes nothing returns boolean
if(not GetBooleanAnd((IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true),(IsUnitAliveBJ(GetEnumUnit())==true)))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func003Func003A takes nothing returns nothing
if(Trig_G11_Func001Func003Func003Func001C())then
call CreateTextTagUnitBJ(("+1000"),GetEnumUnit(),0,8.00,100,100,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
else
endif
endfunction
function Trig_G11_Func001Func003C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='hkee'))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func004Func002002 takes nothing returns nothing
call AdjustPlayerStateBJ(800,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_G11_Func001Func004Func003Func001Func005001 takes nothing returns boolean
return(IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_G11_Func001Func004Func003Func001Func005002 takes nothing returns boolean
return(IsUnitAliveBJ(GetEnumUnit())==true)
endfunction
function Trig_G11_Func001Func004Func003Func001C takes nothing returns boolean
if(not GetBooleanAnd((IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true),(IsUnitAliveBJ(GetEnumUnit())==true)))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func004Func003A takes nothing returns nothing
if(Trig_G11_Func001Func004Func003Func001C())then
call CreateTextTagUnitBJ(("+800"),GetEnumUnit(),0,8.00,100,100,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
else
endif
endfunction
function Trig_G11_Func001Func004C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='hatw'))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func006Func002002 takes nothing returns nothing
call AdjustPlayerStateBJ(300,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function Trig_G11_Func001Func006Func003Func001Func005001 takes nothing returns boolean
return(IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true)
endfunction
function Trig_G11_Func001Func006Func003Func001Func005002 takes nothing returns boolean
return(IsUnitAliveBJ(GetEnumUnit())==true)
endfunction
function Trig_G11_Func001Func006Func003Func001C takes nothing returns boolean
if(not GetBooleanAnd((IsUnitAlly(GetEnumUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true),(IsUnitAliveBJ(GetEnumUnit())==true)))then
return false
endif
return true
endfunction
function Trig_G11_Func001Func006Func003A takes nothing returns nothing
if(Trig_G11_Func001Func006Func003Func001C())then
call CreateTextTagUnitBJ(("+300"),GetEnumUnit(),0,8.00,100,100,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
else
endif
endfunction
function Trig_G11_Func001Func006C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='owtw'))then
return false
endif
return true
endfunction
function Trig_G11_Func001C takes nothing returns boolean
if(not(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true))then
return false
endif
return true
endfunction
function Trig_G11_Actions takes nothing returns nothing
if(Trig_G11_Func001C())then
if(Trig_G11_Func001Func001C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(((""+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))+"的|cFFFFCC99")+(GetUnitName(GetTriggerUnit())+("|r被|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"|r摧毁了,破坏者全员获得|cFFFFFF33500金钱|r!")))))
call ForForce(GetPlayersAllies(GetOwningPlayer(GetKillingUnitBJ())),function Trig_G11_Func001Func001Func002002)
call ForGroupBJ(udg_Hero_tm,function Trig_G11_Func001Func001Func003A)
else
endif
if(Trig_G11_Func001Func002C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(((""+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))+"的|cFFFFCC99")+(GetUnitName(GetTriggerUnit())+("|r被|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"|r摧毁了,破坏者全员获得|cFFFFFF33800金钱|r!")))))
call ForForce(GetPlayersAllies(GetOwningPlayer(GetKillingUnitBJ())),function Trig_G11_Func001Func002Func002002)
call ForGroupBJ(udg_Hero_tm,function Trig_G11_Func001Func002Func003A)
else
endif
if(Trig_G11_Func001Func003C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(((""+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))+"的|cFFFFCC99")+(GetUnitName(GetTriggerUnit())+("|r被|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"|r摧毁了,破坏者全员获得|cFFFFFF331000金钱|r!")))))
call ForForce(GetPlayersAllies(GetOwningPlayer(GetKillingUnitBJ())),function Trig_G11_Func001Func003Func002002)
call ForGroupBJ(udg_Hero_tm,function Trig_G11_Func001Func003Func003A)
else
endif
if(Trig_G11_Func001Func004C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(((""+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))+"的|cFFFFCC99")+(GetUnitName(GetTriggerUnit())+("|r被|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"|r摧毁了,破坏者全员获得|cFFFFFF33800金钱|r!")))))
call ForForce(GetPlayersAllies(GetOwningPlayer(GetKillingUnitBJ())),function Trig_G11_Func001Func004Func002002)
call ForGroupBJ(udg_Hero_tm,function Trig_G11_Func001Func004Func003A)
else
endif
if(Trig_G11_Func001Func006C())then
call DisplayTimedTextToForce(GetPlayersAll(),10.00,(((""+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))+"的|cFFFFCC99")+(GetUnitName(GetTriggerUnit())+("|r被|cFF00FFFF"+(GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"|r摧毁了,破坏者全员获得|cFFFFFF33300金钱|r!")))))
call ForForce(GetPlayersAllies(GetOwningPlayer(GetKillingUnitBJ())),function Trig_G11_Func001Func006Func002002)
call ForGroupBJ(udg_Hero_tm,function Trig_G11_Func001Func006Func003A)
else
endif
else
endif
endfunction
function InitTrig_G11 takes nothing returns nothing
set gg_trg_G11=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_G11,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_G11,Condition(function Trig_G11_Conditions))
call TriggerAddAction(gg_trg_G11,function Trig_G11_Actions)
endfunction
function Trig_G12_Func002C takes nothing returns boolean
if(not(IsUnitType(GetAttackedUnitBJ(),UNIT_TYPE_STRUCTURE)==true))then
return false
endif
if(not(GetUnitLifePercent(GetAttackedUnitBJ())>=20.00))then
return false
endif
if(not(IsPlayerAlly(GetOwningPlayer(GetAttacker()),GetOwningPlayer(GetTriggerUnit()))==true))then
return false
endif
if(not(IsUnitType(GetAttacker(),UNIT_TYPE_HERO)==true))then
return false
endif
return true
endfunction
function Trig_G12_Conditions takes nothing returns boolean
if(not Trig_G12_Func002C())then
return false
endif
return true
endfunction
function Trig_G12_Actions takes nothing returns nothing
call IssueImmediateOrder(GetAttacker(),"stop")
endfunction
function InitTrig_G12 takes nothing returns nothing
set gg_trg_G12=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_G12,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_G12,Condition(function Trig_G12_Conditions))
call TriggerAddAction(gg_trg_G12,function Trig_G12_Actions)
endfunction
function Trig_G13_Func001C takes nothing returns boolean
if(not(GetUnitPointValue(GetTriggerUnit())==41))then
return false
endif
return true
endfunction
function Trig_G13_Func002Func002C takes nothing returns boolean
if((GetUnitPointValue(GetTriggerUnit())==42))then
return true
endif
if((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return true
endif
return false
endfunction
function Trig_G13_Func002C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())!='Oshd'))then
return false
endif
if(not Trig_G13_Func002Func002C())then
return false
endif
return true
endfunction
function Trig_G13_Func003C takes nothing returns boolean
if(not(GetUnitPointValue(GetTriggerUnit())==43))then
return false
endif
return true
endfunction
function Trig_G13_Actions takes nothing returns nothing
if(Trig_G13_Func001C())then
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"war3mapImported\\T_smallbloodex-nosplat.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
else
endif
if(Trig_G13_Func002C())then
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"war3mapImported\\T_bloodex-special-2.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
else
endif
if(Trig_G13_Func003C())then
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"war3mapImported\\T_explosionbig.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function InitTrig_G13 takes nothing returns nothing
set gg_trg_G13=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_G13,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_G13,function Trig_G13_Actions)
endfunction
function Trig_Spawn_muye_Func002Func016A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[1])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[1])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function Trig_Spawn_muye_Func002C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00V'))then
return false
endif
return true
endfunction
function Trig_Spawn_muye_Func003Func016A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[1])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[1])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function Trig_Spawn_muye_Func003C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00W'))then
return false
endif
return true
endfunction
function Trig_Spawn_muye_Actions takes nothing returns nothing
if(Trig_Spawn_muye_Func002C())then
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[1],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[1],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[1],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[1],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'ebal',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[1],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'hspt',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call UnitAddAbility(GetLastCreatedUnit(),'A02H')
call UnitAddAbility(GetLastCreatedUnit(),'A02I')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ault',50)
call GroupAddUnit(udg_X_jingong[1],GetLastCreatedUnit())
call ForGroupBJ(udg_X_jingong[1],function Trig_Spawn_muye_Func002Func016A)
return
else
call DoNothing()
endif
if(Trig_Spawn_muye_Func003C())then
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[2],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[2],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[2],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[2],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'ebal',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[2],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'hspt',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call UnitAddAbility(GetLastCreatedUnit(),'A02H')
call UnitAddAbility(GetLastCreatedUnit(),'A02I')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ault',50)
call GroupAddUnit(udg_X_jingong[2],GetLastCreatedUnit())
call ForGroupBJ(udg_X_jingong[2],function Trig_Spawn_muye_Func003Func016A)
return
else
call DoNothing()
endif
endfunction
function InitTrig_Spawn_muye takes nothing returns nothing
set gg_trg_Spawn_muye=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Spawn_muye,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_Spawn_muye,function Trig_Spawn_muye_Actions)
endfunction
function Trig_Spawn_wuyin_Func002Func016A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[2])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[2])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function Trig_Spawn_wuyin_Func002C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00X'))then
return false
endif
return true
endfunction
function Trig_Spawn_wuyin_Func003Func016A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[2])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[2])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function Trig_Spawn_wuyin_Func003C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00Y'))then
return false
endif
return true
endfunction
function Trig_Spawn_wuyin_Actions takes nothing returns nothing
if(Trig_Spawn_wuyin_Func002C())then
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[3],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[3],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[3],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[3],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'ebal',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[3],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'hspt',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call UnitAddAbility(GetLastCreatedUnit(),'A02H')
call UnitAddAbility(GetLastCreatedUnit(),'A02I')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ault',50)
call GroupAddUnit(udg_X_jingong[3],GetLastCreatedUnit())
call ForGroupBJ(udg_X_jingong[3],function Trig_Spawn_wuyin_Func002Func016A)
return
else
call DoNothing()
endif
if(Trig_Spawn_wuyin_Func003C())then
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[4],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[4],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[4],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[4],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'ebal',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[4],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'hspt',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call UnitAddAbility(GetLastCreatedUnit(),'A02H')
call UnitAddAbility(GetLastCreatedUnit(),'A02I')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ault',50)
call GroupAddUnit(udg_X_jingong[4],GetLastCreatedUnit())
call ForGroupBJ(udg_X_jingong[4],function Trig_Spawn_wuyin_Func003Func016A)
return
else
call DoNothing()
endif
endfunction
function InitTrig_Spawn_wuyin takes nothing returns nothing
set gg_trg_Spawn_wuyin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Spawn_wuyin,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_Spawn_wuyin,function Trig_Spawn_wuyin_Actions)
endfunction
function Trig_Spawn_sha_Func002Func016A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[3])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[3])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function Trig_Spawn_sha_Func002C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00Z'))then
return false
endif
return true
endfunction
function Trig_Spawn_sha_Func003Func016A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[3])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[3])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function Trig_Spawn_sha_Func003C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I010'))then
return false
endif
return true
endfunction
function Trig_Spawn_sha_Actions takes nothing returns nothing
if(Trig_Spawn_sha_Func002C())then
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[5],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[5],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[5],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[5],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'ebal',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[5],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'hspt',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call UnitAddAbility(GetLastCreatedUnit(),'A02H')
call UnitAddAbility(GetLastCreatedUnit(),'A02I')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ault',50)
call GroupAddUnit(udg_X_jingong[5],GetLastCreatedUnit())
call ForGroupBJ(udg_X_jingong[5],function Trig_Spawn_sha_Func002Func016A)
return
else
call DoNothing()
endif
if(Trig_Spawn_sha_Func003C())then
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[6],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'esen',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[6],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[6],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'edry',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[6],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'ebal',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_X_jingong[6],GetLastCreatedUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'hspt',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call UnitAddAbility(GetLastCreatedUnit(),'A02H')
call UnitAddAbility(GetLastCreatedUnit(),'A02I')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ault',50)
call GroupAddUnit(udg_X_jingong[6],GetLastCreatedUnit())
call ForGroupBJ(udg_X_jingong[6],function Trig_Spawn_sha_Func003Func016A)
return
else
call DoNothing()
endif
endfunction
function InitTrig_Spawn_sha takes nothing returns nothing
set gg_trg_Spawn_sha=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Spawn_sha,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_Spawn_sha,function Trig_Spawn_sha_Actions)
endfunction
function Trig_Spawn_G1_Func001Func002A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[1])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[1])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function Trig_Spawn_G1_Func001C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_X_jingong[1])==false))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0018)==true))then
return false
endif
return true
endfunction
function Trig_Spawn_G1_Func002Func002A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[1])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[1])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function Trig_Spawn_G1_Func002C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_X_jingong[2])==false))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0044)==true))then
return false
endif
return true
endfunction
function Trig_Spawn_G1_Func003Func002A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[2])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[2])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function Trig_Spawn_G1_Func003C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_X_jingong[3])==false))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0001)==true))then
return false
endif
return true
endfunction
function Trig_Spawn_G1_Func004Func002A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[2])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[2])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function Trig_Spawn_G1_Func004C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_X_jingong[4])==false))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0044)==true))then
return false
endif
return true
endfunction
function Trig_Spawn_G1_Func005Func002A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[3])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[3])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function Trig_Spawn_G1_Func005C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_X_jingong[5])==false))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0001)==true))then
return false
endif
return true
endfunction
function Trig_Spawn_G1_Func006Func002A takes nothing returns nothing
call SetUnitAbilityLevel(GetEnumUnit(),'A02H',udg_X_Attack[3])
call SetUnitAbilityLevel(GetEnumUnit(),'A02I',udg_X_Attack[3])
call IssuePointOrderLoc(GetEnumUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function Trig_Spawn_G1_Func006C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_X_jingong[6])==false))then
return false
endif
if(not(IsUnitAliveBJ(gg_unit_hcas_0018)==true))then
return false
endif
return true
endfunction
function Trig_Spawn_G1_Actions takes nothing returns nothing
if(Trig_Spawn_G1_Func001C())then
call ForGroupBJ(udg_X_jingong[1],function Trig_Spawn_G1_Func001Func002A)
else
call DoNothing()
endif
if(Trig_Spawn_G1_Func002C())then
call ForGroupBJ(udg_X_jingong[2],function Trig_Spawn_G1_Func002Func002A)
else
call DoNothing()
endif
if(Trig_Spawn_G1_Func003C())then
call ForGroupBJ(udg_X_jingong[3],function Trig_Spawn_G1_Func003Func002A)
else
call DoNothing()
endif
if(Trig_Spawn_G1_Func004C())then
call ForGroupBJ(udg_X_jingong[4],function Trig_Spawn_G1_Func004Func002A)
else
call DoNothing()
endif
if(Trig_Spawn_G1_Func005C())then
call ForGroupBJ(udg_X_jingong[5],function Trig_Spawn_G1_Func005Func002A)
else
call DoNothing()
endif
if(Trig_Spawn_G1_Func006C())then
call ForGroupBJ(udg_X_jingong[6],function Trig_Spawn_G1_Func006Func002A)
else
call DoNothing()
endif
endfunction
function InitTrig_Spawn_G1 takes nothing returns nothing
set gg_trg_Spawn_G1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_G1,10.00)
call TriggerAddAction(gg_trg_Spawn_G1,function Trig_Spawn_G1_Actions)
endfunction
function Trig_Spawn_G2_Func001Func001C takes nothing returns boolean
if(not(IsUnitInGroup(GetTriggerUnit(),udg_X_jingong[bj_forLoopAIndex])==true))then
return false
endif
return true
endfunction
function Trig_Spawn_G2_Actions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_Spawn_G2_Func001Func001C())then
call GroupRemoveUnit(udg_X_jingong[bj_forLoopAIndex],GetTriggerUnit())
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_Spawn_G2 takes nothing returns nothing
set gg_trg_Spawn_G2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Spawn_G2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_Spawn_G2,function Trig_Spawn_G2_Actions)
endfunction
function Trig_Spawn_Purple_Middle_1_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Purple_Middle_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_Purple_Middle_1 takes nothing returns nothing
set gg_trg_Spawn_Purple_Middle_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Purple_Middle_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_Purple_Middle_1,Condition(function Trig_Spawn_Purple_Middle_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_Purple_Middle_1,function Trig_Spawn_Purple_Middle_1_Actions)
endfunction
function Trig_Spawn_Purple_East_1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0012)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Purple_East_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_Spawn_Purple_East_1 takes nothing returns nothing
set gg_trg_Spawn_Purple_East_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Purple_East_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_Purple_East_1,Condition(function Trig_Spawn_Purple_East_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_Purple_East_1,function Trig_Spawn_Purple_East_1_Actions)
endfunction
function Trig_Spawn_Purple_North_1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0013)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Purple_North_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_Spawn_Purple_North_1 takes nothing returns nothing
set gg_trg_Spawn_Purple_North_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Purple_North_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_Purple_North_1,Condition(function Trig_Spawn_Purple_North_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_Purple_North_1,function Trig_Spawn_Purple_North_1_Actions)
endfunction
function Trig_Spawn_Pink_Middle_1_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Pink_Middle_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_Pink_Middle_1 takes nothing returns nothing
set gg_trg_Spawn_Pink_Middle_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Pink_Middle_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_Pink_Middle_1,Condition(function Trig_Spawn_Pink_Middle_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_Pink_Middle_1,function Trig_Spawn_Pink_Middle_1_Actions)
endfunction
function Trig_Spawn_pink_west_1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0029)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_pink_west_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_Spawn_pink_west_1 takes nothing returns nothing
set gg_trg_Spawn_pink_west_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_pink_west_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_pink_west_1,Condition(function Trig_Spawn_pink_west_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_pink_west_1,function Trig_Spawn_pink_west_1_Actions)
endfunction
function Trig_Spawn_pink_north_1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0030)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_pink_north_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_Spawn_pink_north_1 takes nothing returns nothing
set gg_trg_Spawn_pink_north_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_pink_north_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_pink_north_1,Condition(function Trig_Spawn_pink_north_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_pink_north_1,function Trig_Spawn_pink_north_1_Actions)
endfunction
function Trig_Spawn_Brown_middle_1_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Brown_middle_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(11),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(11),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(11),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(11),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_Brown_middle_1 takes nothing returns nothing
set gg_trg_Spawn_Brown_middle_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Brown_middle_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_Brown_middle_1,Condition(function Trig_Spawn_Brown_middle_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_Brown_middle_1,function Trig_Spawn_Brown_middle_1_Actions)
endfunction
function Trig_Spawn_brown_east_1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0040)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_brown_east_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_Spawn_brown_east_1 takes nothing returns nothing
set gg_trg_Spawn_brown_east_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_brown_east_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_brown_east_1,Condition(function Trig_Spawn_brown_east_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_brown_east_1,function Trig_Spawn_brown_east_1_Actions)
endfunction
function Trig_Spawn_Brown_west_1_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0037)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Brown_west_1_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmil',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'earc',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_Spawn_Brown_west_1 takes nothing returns nothing
set gg_trg_Spawn_Brown_west_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Brown_west_1,15.00)
call TriggerAddCondition(gg_trg_Spawn_Brown_west_1,Condition(function Trig_Spawn_Brown_west_1_Conditions))
call TriggerAddAction(gg_trg_Spawn_Brown_west_1,function Trig_Spawn_Brown_west_1_Actions)
endfunction
function Trig_Spawn_Purple_middle_2_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Purple_middle_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_Purple_middle_2 takes nothing returns nothing
set gg_trg_Spawn_Purple_middle_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Purple_middle_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_Purple_middle_2,Condition(function Trig_Spawn_Purple_middle_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_Purple_middle_2,function Trig_Spawn_Purple_middle_2_Actions)
endfunction
function Trig_Spawn_purple_east_2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0012)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_purple_east_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_Spawn_purple_east_2 takes nothing returns nothing
set gg_trg_Spawn_purple_east_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_purple_east_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_purple_east_2,Condition(function Trig_Spawn_purple_east_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_purple_east_2,function Trig_Spawn_purple_east_2_Actions)
endfunction
function Trig_Spawn_Purple_north_2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0013)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Purple_north_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_Spawn_Purple_north_2 takes nothing returns nothing
set gg_trg_Spawn_Purple_north_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Purple_north_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_Purple_north_2,Condition(function Trig_Spawn_Purple_north_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_Purple_north_2,function Trig_Spawn_Purple_north_2_Actions)
endfunction
function Trig_Spawn_Pink_middle_2_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Pink_middle_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_Pink_middle_2 takes nothing returns nothing
set gg_trg_Spawn_Pink_middle_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Pink_middle_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_Pink_middle_2,Condition(function Trig_Spawn_Pink_middle_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_Pink_middle_2,function Trig_Spawn_Pink_middle_2_Actions)
endfunction
function Trig_Spawn_pink_west_2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0029)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_pink_west_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_Spawn_pink_west_2 takes nothing returns nothing
set gg_trg_Spawn_pink_west_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_pink_west_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_pink_west_2,Condition(function Trig_Spawn_pink_west_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_pink_west_2,function Trig_Spawn_pink_west_2_Actions)
endfunction
function Trig_Spawn_pink_north_2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0030)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_pink_north_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_Spawn_pink_north_2 takes nothing returns nothing
set gg_trg_Spawn_pink_north_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_pink_north_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_pink_north_2,Condition(function Trig_Spawn_pink_north_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_pink_north_2,function Trig_Spawn_pink_north_2_Actions)
endfunction
function Trig_Spawn_Brown_middle_2_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Brown_middle_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(11),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(11),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(11),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_Brown_middle_2 takes nothing returns nothing
set gg_trg_Spawn_Brown_middle_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Brown_middle_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_Brown_middle_2,Condition(function Trig_Spawn_Brown_middle_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_Brown_middle_2,function Trig_Spawn_Brown_middle_2_Actions)
endfunction
function Trig_Spawn_brown_east_2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0040)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_brown_east_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_Spawn_brown_east_2 takes nothing returns nothing
set gg_trg_Spawn_brown_east_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_brown_east_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_brown_east_2,Condition(function Trig_Spawn_brown_east_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_brown_east_2,function Trig_Spawn_brown_east_2_Actions)
endfunction
function Trig_Spawn_brown_west_2_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0037)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_brown_west_2_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'hmtm',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call CreateNUnitsAtLocFacingLocBJ(1,'nenf',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_Spawn_brown_west_2 takes nothing returns nothing
set gg_trg_Spawn_brown_west_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_brown_west_2,45.00)
call TriggerAddCondition(gg_trg_Spawn_brown_west_2,Condition(function Trig_Spawn_brown_west_2_Conditions))
call TriggerAddAction(gg_trg_Spawn_brown_west_2,function Trig_Spawn_brown_west_2_Actions)
endfunction
function Trig_Spawn_Purple_middle_3_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Purple_middle_3_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"move",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_Purple_middle_3 takes nothing returns nothing
set gg_trg_Spawn_Purple_middle_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Purple_middle_3,90.00)
call TriggerAddCondition(gg_trg_Spawn_Purple_middle_3,Condition(function Trig_Spawn_Purple_middle_3_Conditions))
call TriggerAddAction(gg_trg_Spawn_Purple_middle_3,function Trig_Spawn_Purple_middle_3_Actions)
endfunction
function Trig_Spawn_Purple_East_3_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0012)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Purple_East_3_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_Spawn_Purple_East_3 takes nothing returns nothing
set gg_trg_Spawn_Purple_East_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Purple_East_3,90.00)
call TriggerAddCondition(gg_trg_Spawn_Purple_East_3,Condition(function Trig_Spawn_Purple_East_3_Conditions))
call TriggerAddAction(gg_trg_Spawn_Purple_East_3,function Trig_Spawn_Purple_East_3_Actions)
endfunction
function Trig_Spawn_Pink_Middle_3_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Pink_Middle_3_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"move",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_Pink_Middle_3 takes nothing returns nothing
set gg_trg_Spawn_Pink_Middle_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Pink_Middle_3,90.00)
call TriggerAddCondition(gg_trg_Spawn_Pink_Middle_3,Condition(function Trig_Spawn_Pink_Middle_3_Conditions))
call TriggerAddAction(gg_trg_Spawn_Pink_Middle_3,function Trig_Spawn_Pink_Middle_3_Actions)
endfunction
function Trig_Spawn_Pink_West_3_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0029)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Pink_West_3_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_west),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_Spawn_Pink_West_3 takes nothing returns nothing
set gg_trg_Spawn_Pink_West_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Pink_West_3,90.00)
call TriggerAddCondition(gg_trg_Spawn_Pink_West_3,Condition(function Trig_Spawn_Pink_West_3_Conditions))
call TriggerAddAction(gg_trg_Spawn_Pink_West_3,function Trig_Spawn_Pink_West_3_Actions)
endfunction
function Trig_Spawn_Purple_North_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0013)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Purple_North_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(3),GetRectCenter(gg_rct_SpawnPoint_muye_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_Spawn_Purple_North takes nothing returns nothing
set gg_trg_Spawn_Purple_North=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Purple_North,90.00)
call TriggerAddCondition(gg_trg_Spawn_Purple_North,Condition(function Trig_Spawn_Purple_North_Conditions))
call TriggerAddAction(gg_trg_Spawn_Purple_North,function Trig_Spawn_Purple_North_Actions)
endfunction
function Trig_Spawn_Pink_North_3_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0030)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Pink_North_3_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(7),GetRectCenter(gg_rct_Spawnpoint_wuyin_north),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_Spawn_Pink_North_3 takes nothing returns nothing
set gg_trg_Spawn_Pink_North_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Pink_North_3,90.00)
call TriggerAddCondition(gg_trg_Spawn_Pink_North_3,Condition(function Trig_Spawn_Pink_North_3_Conditions))
call TriggerAddAction(gg_trg_Spawn_Pink_North_3,function Trig_Spawn_Pink_North_3_Actions)
endfunction
function Trig_Spawn_Brown_East_3_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0040)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Brown_East_3_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_East),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_Spawn_Brown_East_3 takes nothing returns nothing
set gg_trg_Spawn_Brown_East_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Brown_East_3,90.00)
call TriggerAddCondition(gg_trg_Spawn_Brown_East_3,Condition(function Trig_Spawn_Brown_East_3_Conditions))
call TriggerAddAction(gg_trg_Spawn_Brown_East_3,function Trig_Spawn_Brown_East_3_Actions)
endfunction
function Trig_Spawn_brown_middle_3_Conditions takes nothing returns boolean
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_brown_middle_3_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(11),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"move",GetRectCenter(gg_rct_Mitte))
endfunction
function InitTrig_Spawn_brown_middle_3 takes nothing returns nothing
set gg_trg_Spawn_brown_middle_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_brown_middle_3,90.00)
call TriggerAddCondition(gg_trg_Spawn_brown_middle_3,Condition(function Trig_Spawn_brown_middle_3_Conditions))
call TriggerAddAction(gg_trg_Spawn_brown_middle_3,function Trig_Spawn_brown_middle_3_Actions)
endfunction
function Trig_Spawn_Brown_West_3_Conditions takes nothing returns boolean
if(not(IsUnitAliveBJ(gg_unit_hkee_0037)==true))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Spawn_Brown_West_3_Actions takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'hfoo',Player(11),GetRectCenter(gg_rct_Spawnpoint_sha_West),GetUnitLoc(GetTriggerUnit()))
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_Spawn_Brown_West_3 takes nothing returns nothing
set gg_trg_Spawn_Brown_West_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Spawn_Brown_West_3,90.00)
call TriggerAddCondition(gg_trg_Spawn_Brown_West_3,Condition(function Trig_Spawn_Brown_West_3_Conditions))
call TriggerAddAction(gg_trg_Spawn_Brown_West_3,function Trig_Spawn_Brown_West_3_Actions)
endfunction
function Trig_Mitte_lila_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(3)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Mitte_lila_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_Mitte_lila takes nothing returns nothing
set gg_trg_Mitte_lila=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Mitte_lila,gg_rct_Mitte)
call TriggerAddCondition(gg_trg_Mitte_lila,Condition(function Trig_Mitte_lila_Conditions))
call TriggerAddAction(gg_trg_Mitte_lila,function Trig_Mitte_lila_Actions)
endfunction
function Trig_Mitte_rosa_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(7)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Mitte_rosa_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_Mitte_rosa takes nothing returns nothing
set gg_trg_Mitte_rosa=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Mitte_rosa,gg_rct_Mitte)
call TriggerAddCondition(gg_trg_Mitte_rosa,Condition(function Trig_Mitte_rosa_Conditions))
call TriggerAddAction(gg_trg_Mitte_rosa,function Trig_Mitte_rosa_Actions)
endfunction
function Trig_Mitte_braun_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(11)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_Mitte_braun_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_Mitte_braun takes nothing returns nothing
set gg_trg_Mitte_braun=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Mitte_braun,gg_rct_Mitte)
call TriggerAddCondition(gg_trg_Mitte_braun,Condition(function Trig_Mitte_braun_Conditions))
call TriggerAddAction(gg_trg_Mitte_braun,function Trig_Mitte_braun_Actions)
endfunction
function Trig_lila_in_rosa_lager_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(3)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_lila_in_rosa_lager_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_lila_in_rosa_lager takes nothing returns nothing
set gg_trg_lila_in_rosa_lager=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_lila_in_rosa_lager,gg_rct_Spawnpoint_wuyin_Schloss)
call TriggerAddCondition(gg_trg_lila_in_rosa_lager,Condition(function Trig_lila_in_rosa_lager_Conditions))
call TriggerAddAction(gg_trg_lila_in_rosa_lager,function Trig_lila_in_rosa_lager_Actions)
endfunction
function Trig_braun_in_rosa_lager_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(11)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_braun_in_rosa_lager_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_braun_in_rosa_lager takes nothing returns nothing
set gg_trg_braun_in_rosa_lager=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_braun_in_rosa_lager,gg_rct_Spawnpoint_wuyin_Schloss)
call TriggerAddCondition(gg_trg_braun_in_rosa_lager,Condition(function Trig_braun_in_rosa_lager_Conditions))
call TriggerAddAction(gg_trg_braun_in_rosa_lager,function Trig_braun_in_rosa_lager_Actions)
endfunction
function Trig_lila_in_Braun_lager_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(3)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_lila_in_Braun_lager_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_lila_in_Braun_lager takes nothing returns nothing
set gg_trg_lila_in_Braun_lager=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_lila_in_Braun_lager,gg_rct_SpawnPoint_sha_Schloss)
call TriggerAddCondition(gg_trg_lila_in_Braun_lager,Condition(function Trig_lila_in_Braun_lager_Conditions))
call TriggerAddAction(gg_trg_lila_in_Braun_lager,function Trig_lila_in_Braun_lager_Actions)
endfunction
function Trig_rosa_in_braun_lager_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(7)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_rosa_in_braun_lager_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
endfunction
function InitTrig_rosa_in_braun_lager takes nothing returns nothing
set gg_trg_rosa_in_braun_lager=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rosa_in_braun_lager,gg_rct_SpawnPoint_sha_Schloss)
call TriggerAddCondition(gg_trg_rosa_in_braun_lager,Condition(function Trig_rosa_in_braun_lager_Conditions))
call TriggerAddAction(gg_trg_rosa_in_braun_lager,function Trig_rosa_in_braun_lager_Actions)
endfunction
function Trig_braun_in_lila_lager_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(11)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_braun_in_lila_lager_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
endfunction
function InitTrig_braun_in_lila_lager takes nothing returns nothing
set gg_trg_braun_in_lila_lager=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_braun_in_lila_lager,gg_rct_SpawnPoint_muye_Schloss)
call TriggerAddCondition(gg_trg_braun_in_lila_lager,Condition(function Trig_braun_in_lila_lager_Conditions))
call TriggerAddAction(gg_trg_braun_in_lila_lager,function Trig_braun_in_lila_lager_Actions)
endfunction
function Trig_rosa_in_lila_lager_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(7)))then
return false
endif
if(not(udg_GAME_OVER==false))then
return false
endif
return true
endfunction
function Trig_rosa_in_lila_lager_Actions takes nothing returns nothing
call IssuePointOrderLoc(GetTriggerUnit(),"attack",GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
endfunction
function InitTrig_rosa_in_lila_lager takes nothing returns nothing
set gg_trg_rosa_in_lila_lager=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_rosa_in_lila_lager,gg_rct_SpawnPoint_muye_Schloss)
call TriggerAddCondition(gg_trg_rosa_in_lila_lager,Condition(function Trig_rosa_in_lila_lager_Conditions))
call TriggerAddAction(gg_trg_rosa_in_lila_lager,function Trig_rosa_in_lila_lager_Actions)
endfunction
function Trig_Moshi0_Func001Func001C takes nothing returns boolean
if(not(GetPlayerController(GetEnumPlayer())==MAP_CONTROL_USER))then
return false
endif
return true
endfunction
function Trig_Moshi0_Func001A takes nothing returns nothing
if(Trig_Moshi0_Func001Func001C())then
set udg_All_unit_shu[0]=(udg_All_unit_shu[0]+1)
else
endif
endfunction
function Trig_Moshi0_Func002C takes nothing returns boolean
if(not(GetPlayerSlotState(Player(0))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerController(Player(0))==MAP_CONTROL_USER))then
return false
endif
if(not(udg_All_unit_shu[0]==1.00))then
return false
endif
return true
endfunction
function Trig_Moshi0_Func003C takes nothing returns boolean
if(not(GetPlayerSlotState(Player(0))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerController(Player(0))==MAP_CONTROL_USER))then
return false
endif
return true
endfunction
function Trig_Moshi0_Actions takes nothing returns nothing
call ForForce(GetPlayersAll(),function Trig_Moshi0_Func001A)
if(Trig_Moshi0_Func002C())then
call DisplayTimedTextToForce(GetPlayersAll(),30," - 单人游戏时能在'忍者村(主要)'使用一些便利的指令")
call DialogSetMessage(udg_Kuan_duizhanxuanze,"只检测到一位玩家")
call DialogAddButtonBJ(udg_Kuan_duizhanxuanze,"单机模式")
set udg_AN_moshixuanze[9]=GetLastCreatedButtonBJ()
call DialogDisplayBJ(true,udg_Kuan_duizhanxuanze,Player(0))
return
else
endif
if(Trig_Moshi0_Func003C())then
call DisplayTimedTextToForce(GetPlayersAll(),30,(" - 请稍等"+(GetPlayerName(Player(0))+"选择游戏进行模式......")))
call DialogSetMessage(udg_Kuan_duizhanxuanze,"请选择游戏模式")
call DialogAddButtonBJ(udg_Kuan_duizhanxuanze,"正常模式")
set udg_AN_moshixuanze[3]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(udg_Kuan_duizhanxuanze,"特殊模式")
set udg_AN_moshixuanze[4]=GetLastCreatedButtonBJ()
call DialogDisplayBJ(true,udg_Kuan_duizhanxuanze,Player(0))
else
call EnableTrigger(gg_trg_Moshi5)
call EnableTrigger(gg_trg_Moshi4)
call EnableTrigger(gg_trg_Moshi3)
call DisplayTimedTextToForce(GetPlayersAll(),20.00," - |cFFFF0000没有检测到红色玩家,默认为正常模式,请玩家们双击选择想要使用的英雄，如果想随机选择英雄可以单击红色的问号。|r")
endif
endfunction
function InitTrig_Moshi0 takes nothing returns nothing
set gg_trg_Moshi0=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_Moshi0,3.00)
call TriggerAddAction(gg_trg_Moshi0,function Trig_Moshi0_Actions)
endfunction
function Trig_Moshi0_CS_Conditions takes nothing returns boolean
if(not(GetClickedButtonBJ()==udg_AN_moshixuanze[9]))then
return false
endif
return true
endfunction
function Trig_Moshi0_CS_Actions takes nothing returns nothing
call DisplayTimedTextToForce(GetPlayersAll(),30," - 你已选择了测试模式")
call AddItemToStockBJ('tdex',gg_unit_hcas_0001,1,1)
call AddItemToStockBJ('tdx2',gg_unit_hcas_0001,1,1)
call AddItemToStockBJ('tint',gg_unit_hcas_0001,1,1)
call EnableTrigger(gg_trg_Moshi5)
call EnableTrigger(gg_trg_Moshi4)
call EnableTrigger(gg_trg_Moshi3)
endfunction
function InitTrig_Moshi0_CS takes nothing returns nothing
set gg_trg_Moshi0_CS=CreateTrigger()
call TriggerRegisterDialogEventBJ(gg_trg_Moshi0_CS,udg_Kuan_duizhanxuanze)
call TriggerAddCondition(gg_trg_Moshi0_CS,Condition(function Trig_Moshi0_CS_Conditions))
call TriggerAddAction(gg_trg_Moshi0_CS,function Trig_Moshi0_CS_Actions)
endfunction
function Trig_Moshi0_S1_Conditions takes nothing returns boolean
if(not(GetClickedButtonBJ()==udg_AN_moshixuanze[4]))then
return false
endif
return true
endfunction
function Trig_Moshi0_S1_Func005C takes nothing returns boolean
if(not(GetPlayerSlotState(Player(0))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerController(Player(0))==MAP_CONTROL_USER))then
return false
endif
return true
endfunction
function Trig_Moshi0_S1_Actions takes nothing returns nothing
call TriggerSleepAction(0.50)
call DialogClear(udg_Kuan_duizhanxuanze)
if(Trig_Moshi0_S1_Func005C())then
call DisplayTimedTextToForce(GetPlayersAll(),30,(" - 请稍等"+(GetPlayerName(Player(0))+"|cFF00FFFF选择特殊对战方式|r.")))
call DialogSetMessage(udg_Kuan_duizhanxuanze,"请选择特殊配置")
call DialogAddButtonBJ(udg_Kuan_duizhanxuanze,"1V1.战斗")
set udg_AN_moshixuanze[5]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(udg_Kuan_duizhanxuanze,"生存战斗")
set udg_AN_moshixuanze[6]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(udg_Kuan_duizhanxuanze,"死亡战斗")
set udg_AN_moshixuanze[7]=GetLastCreatedButtonBJ()
call DialogDisplayBJ(true,udg_Kuan_duizhanxuanze,Player(0))
else
endif
endfunction
function InitTrig_Moshi0_S1 takes nothing returns nothing
set gg_trg_Moshi0_S1=CreateTrigger()
call TriggerRegisterDialogEventBJ(gg_trg_Moshi0_S1,udg_Kuan_duizhanxuanze)
call TriggerAddCondition(gg_trg_Moshi0_S1,Condition(function Trig_Moshi0_S1_Conditions))
call TriggerAddAction(gg_trg_Moshi0_S1,function Trig_Moshi0_S1_Actions)
endfunction
function Trig_Moshi0_S2_Func001C takes nothing returns boolean
if(not(GetClickedButtonBJ()==udg_AN_moshixuanze[3]))then
return false
endif
return true
endfunction
function Trig_Moshi0_S2_Func002Func002A takes nothing returns nothing
call AdjustPlayerStateBJ(10,GetEnumPlayer(),PLAYER_STATE_RESOURCE_LUMBER)
endfunction
function Trig_Moshi0_S2_Func002C takes nothing returns boolean
if(not(GetClickedButtonBJ()==udg_AN_moshixuanze[5]))then
return false
endif
return true
endfunction
function Trig_Moshi0_S2_Func003C takes nothing returns boolean
if(not(GetClickedButtonBJ()==udg_AN_moshixuanze[6]))then
return false
endif
return true
endfunction
function Trig_Moshi0_S2_Func004C takes nothing returns boolean
if(not(GetClickedButtonBJ()==udg_AN_moshixuanze[7]))then
return false
endif
return true
endfunction
function Trig_Moshi0_S2_Actions takes nothing returns nothing
if(Trig_Moshi0_S2_Func001C())then
call MultiboardSetRowCount(udg_Mianban_I,17)
call MultiboardSetItemValueBJ(udg_Mianban_I,1,16,"|cFF99CCFF队伍-|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,2,16,"|cFF660099木叶忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,3,16,"|cFFFF99CC雨忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,4,16,"|cFF996666沙 忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,5,16,"|cFFFFFF00正常模式|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,1,17,"|cFFFF3366进攻等级|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,I2S(udg_X_Attack[1]))
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,I2S(udg_X_Attack[2]))
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,I2S(udg_X_Attack[3]))
call EnableTrigger(gg_trg_Moshi0_TS0)
else
endif
if(Trig_Moshi0_S2_Func002C())then
call DisplayTimedTextToForce(GetPlayersAll(),30,(GetPlayerName(Player(0))+"已经选择[1V1战斗](EX点数默认为10点),杀敌数优先到达5的一方获胜..."))
call ForForce(GetPlayersAll(),function Trig_Moshi0_S2_Func002Func002A)
call MultiboardSetRowCount(udg_Mianban_I,17)
call MultiboardSetItemValueBJ(udg_Mianban_I,1,16,"|cFF99CCFF队伍-|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,2,16,"|cFF660099木叶忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,3,16,"|cFFFF99CC雨忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,4,16,"|cFF996666沙 忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,5,16,"|cFFFFFF001V1模式|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,1,17,"|cFFFF3366击杀数-|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,"0/5")
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,"0/5")
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,"0/5")
call EnableTrigger(gg_trg_Moshi0_TS1)
else
endif
if(Trig_Moshi0_S2_Func003C())then
call DisplayTimedTextToForce(GetPlayersAll(),30,(GetPlayerName(Player(0))+"已经选择[生存战斗],团队的死亡数优先达到30就会被强制退出游戏,最后留下来的一方获得胜利..."))
call MultiboardSetRowCount(udg_Mianban_I,17)
call MultiboardSetItemValueBJ(udg_Mianban_I,1,16,"|cFF99CCFF队伍-|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,2,16,"|cFF660099木叶忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,3,16,"|cFFFF99CC雨忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,4,16,"|cFF996666沙 忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,5,16,"|cFFFFFF00生存模式|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,1,17,"|cFFFF3366生命数-|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,"30")
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,"30")
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,"30")
call EnableTrigger(gg_trg_Moshi0_TS2)
else
endif
if(Trig_Moshi0_S2_Func004C())then
set udg_X_jisha=30
call DisplayTimedTextToForce(GetPlayersAll(),30,(GetPlayerName(Player(0))+"已经选择[死亡战斗],团队杀敌数优先到达30(默认)的一方获胜...红色玩家可在20秒内输入(任意10位数数字)进行设置"))
call MultiboardSetRowCount(udg_Mianban_I,17)
call MultiboardSetItemValueBJ(udg_Mianban_I,1,16,"|cFF99CCFF队伍-|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,2,16,"|cFF660099木叶忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,3,16,"|cFFFF99CC雨忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,4,16,"|cFF996666沙 忍者村|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,5,16,"|cFFFFFF00死亡模式|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,1,17,"|cFFFF3366击杀数-|r")
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,"0/30")
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,"0/30")
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,"0/30")
call EnableTrigger(gg_trg_Moshi0_TS3)
call EnableTrigger(gg_trg_Moshi0_TS3_SS)
call TriggerSleepAction(20.00)
call DisableTrigger(gg_trg_Moshi0_TS3_SS)
else
endif
endfunction
function InitTrig_Moshi0_S2 takes nothing returns nothing
set gg_trg_Moshi0_S2=CreateTrigger()
call TriggerRegisterDialogEventBJ(gg_trg_Moshi0_S2,udg_Kuan_duizhanxuanze)
call TriggerAddAction(gg_trg_Moshi0_S2,function Trig_Moshi0_S2_Actions)
endfunction
function Trig_Moshi0_TS0_Func004Func001C takes nothing returns boolean
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
if(not(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())!='Oshd'))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(PLAYER_NEUTRAL_AGGRESSIVE)))then
return false
endif
if(not(udg_All_lixian[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS0_Func004Func002C takes nothing returns boolean
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())!='Oshd'))then
return false
endif
if(not(udg_All_lixian[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS0_Func004C takes nothing returns boolean
if(Trig_Moshi0_TS0_Func004Func001C())then
return true
endif
if(Trig_Moshi0_TS0_Func004Func002C())then
return true
endif
return false
endfunction
function Trig_Moshi0_TS0_Conditions takes nothing returns boolean
if(not Trig_Moshi0_TS0_Func004C())then
return false
endif
return true
endfunction
function Trig_Moshi0_TS0_Actions takes nothing returns nothing
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,I2S(udg_X_Attack[1]))
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,I2S(udg_X_Attack[2]))
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,I2S(udg_X_Attack[3]))
endfunction
function InitTrig_Moshi0_TS0 takes nothing returns nothing
set gg_trg_Moshi0_TS0=CreateTrigger()
call DisableTrigger(gg_trg_Moshi0_TS0)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Moshi0_TS0,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Moshi0_TS0,Condition(function Trig_Moshi0_TS0_Conditions))
call TriggerAddAction(gg_trg_Moshi0_TS0,function Trig_Moshi0_TS0_Actions)
endfunction
function Trig_Moshi0_TS1_Conditions takes nothing returns boolean
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
if(not(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())!='Oshd'))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(PLAYER_NEUTRAL_AGGRESSIVE)))then
return false
endif
if(not(udg_All_lixian[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS1_Func004C takes nothing returns boolean
if(not(udg_Mianban_shadi[4]>=5))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS1_Func005C takes nothing returns boolean
if(not(udg_Mianban_shadi[8]>=5))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS1_Func006C takes nothing returns boolean
if(not(udg_Mianban_shadi[12]>=5))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS1_Actions takes nothing returns nothing
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,(I2S(udg_Mianban_shadi[4])+"/5"))
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,(I2S(udg_Mianban_shadi[8])+"/5"))
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,(I2S(udg_Mianban_shadi[12])+"/5"))
if(Trig_Moshi0_TS1_Func004C())then
call KillUnit(gg_unit_hcas_0018)
call KillUnit(gg_unit_hcas_0044)
else
endif
if(Trig_Moshi0_TS1_Func005C())then
call KillUnit(gg_unit_hcas_0001)
call KillUnit(gg_unit_hcas_0044)
else
endif
if(Trig_Moshi0_TS1_Func006C())then
call KillUnit(gg_unit_hcas_0001)
call KillUnit(gg_unit_hcas_0018)
else
endif
endfunction
function InitTrig_Moshi0_TS1 takes nothing returns nothing
set gg_trg_Moshi0_TS1=CreateTrigger()
call DisableTrigger(gg_trg_Moshi0_TS1)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Moshi0_TS1,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Moshi0_TS1,Condition(function Trig_Moshi0_TS1_Conditions))
call TriggerAddAction(gg_trg_Moshi0_TS1,function Trig_Moshi0_TS1_Actions)
endfunction
function Trig_Moshi0_TS2_Func004C takes nothing returns boolean
if(not(udg_Mianban_shadi2[4]>=30))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS2_Func005C takes nothing returns boolean
if(not(udg_Mianban_shadi2[8]>=30))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS2_Func006C takes nothing returns boolean
if(not(udg_Mianban_shadi2[12]>=30))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS2_Actions takes nothing returns nothing
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,I2S((30-udg_Mianban_shadi2[4])))
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,I2S((30-udg_Mianban_shadi2[8])))
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,I2S((30-udg_Mianban_shadi2[12])))
if(Trig_Moshi0_TS2_Func004C())then
call KillUnit(gg_unit_hcas_0001)
else
endif
if(Trig_Moshi0_TS2_Func005C())then
call KillUnit(gg_unit_hcas_0018)
else
endif
if(Trig_Moshi0_TS2_Func006C())then
call KillUnit(gg_unit_hcas_0044)
else
endif
endfunction
function InitTrig_Moshi0_TS2 takes nothing returns nothing
set gg_trg_Moshi0_TS2=CreateTrigger()
call DisableTrigger(gg_trg_Moshi0_TS2)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Moshi0_TS2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_Moshi0_TS2,function Trig_Moshi0_TS2_Actions)
endfunction
function Trig_Moshi0_TS3_Conditions takes nothing returns boolean
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
if(not(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())!='Oshd'))then
return false
endif
if(not(GetOwningPlayer(GetKillingUnitBJ())!=Player(PLAYER_NEUTRAL_AGGRESSIVE)))then
return false
endif
if(not(udg_All_lixian[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS3_Func004C takes nothing returns boolean
if(not(udg_Mianban_shadi[4]>=udg_X_jisha))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS3_Func005C takes nothing returns boolean
if(not(udg_Mianban_shadi[8]>=udg_X_jisha))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS3_Func006C takes nothing returns boolean
if(not(udg_Mianban_shadi[12]>=udg_X_jisha))then
return false
endif
return true
endfunction
function Trig_Moshi0_TS3_Actions takes nothing returns nothing
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,(I2S(udg_Mianban_shadi[4])+("/"+I2S(udg_X_jisha))))
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,(I2S(udg_Mianban_shadi[8])+("/"+I2S(udg_X_jisha))))
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,(I2S(udg_Mianban_shadi[12])+("/"+I2S(udg_X_jisha))))
if(Trig_Moshi0_TS3_Func004C())then
call KillUnit(gg_unit_hcas_0018)
call KillUnit(gg_unit_hcas_0044)
else
endif
if(Trig_Moshi0_TS3_Func005C())then
call KillUnit(gg_unit_hcas_0001)
call KillUnit(gg_unit_hcas_0044)
else
endif
if(Trig_Moshi0_TS3_Func006C())then
call KillUnit(gg_unit_hcas_0001)
call KillUnit(gg_unit_hcas_0018)
else
endif
endfunction
function InitTrig_Moshi0_TS3 takes nothing returns nothing
set gg_trg_Moshi0_TS3=CreateTrigger()
call DisableTrigger(gg_trg_Moshi0_TS3)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Moshi0_TS3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Moshi0_TS3,Condition(function Trig_Moshi0_TS3_Conditions))
call TriggerAddAction(gg_trg_Moshi0_TS3,function Trig_Moshi0_TS3_Actions)
endfunction
function Trig_Moshi0_TS3_SS_Actions takes nothing returns nothing
set udg_X_jisha=S2I(GetEventPlayerChatString())
call DisplayTimedTextToForce(GetPlayersAll(),8.00,("[死亡模式] - 击杀人数改成了 "+(I2S(udg_X_jisha)+" 个。")))
call MultiboardSetItemValueBJ(udg_Mianban_I,2,17,("0/"+I2S(udg_X_jisha)))
call MultiboardSetItemValueBJ(udg_Mianban_I,3,17,("0/"+I2S(udg_X_jisha)))
call MultiboardSetItemValueBJ(udg_Mianban_I,4,17,("0/"+I2S(udg_X_jisha)))
endfunction
function InitTrig_Moshi0_TS3_SS takes nothing returns nothing
set gg_trg_Moshi0_TS3_SS=CreateTrigger()
call DisableTrigger(gg_trg_Moshi0_TS3_SS)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"10",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"20",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"30",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"40",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"50",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"60",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"80",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"90",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Moshi0_TS3_SS,Player(0),"100",false)
call TriggerAddAction(gg_trg_Moshi0_TS3_SS,function Trig_Moshi0_TS3_SS_Actions)
endfunction
function Trig_Moshi1_Func001C takes nothing returns boolean
if((GetClickedButtonBJ()==udg_AN_moshixuanze[3]))then
return true
endif
if((GetClickedButtonBJ()==udg_AN_moshixuanze[5]))then
return true
endif
if((GetClickedButtonBJ()==udg_AN_moshixuanze[6]))then
return true
endif
if((GetClickedButtonBJ()==udg_AN_moshixuanze[7]))then
return true
endif
return false
endfunction
function Trig_Moshi1_Conditions takes nothing returns boolean
if(not Trig_Moshi1_Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi1_Func004C takes nothing returns boolean
if(not(GetPlayerSlotState(Player(0))==PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerController(Player(0))==MAP_CONTROL_USER))then
return false
endif
return true
endfunction
function Trig_Moshi1_Actions takes nothing returns nothing
call TriggerSleepAction(0.50)
if(Trig_Moshi1_Func004C())then
call DisplayTimedTextToForce(GetPlayersAll(),30,("请稍等"+(GetPlayerName(Player(0))+"选择英雄选取模式......")))
call DialogSetMessage(udg_Kuan_heroxuanze,"请选择英雄选取模式")
call DialogAddButtonBJ(udg_Kuan_heroxuanze,"所有玩家随机选择英雄")
set udg_AN_moshixuanze[1]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(udg_Kuan_heroxuanze,"所有玩家自由选择英雄")
set udg_AN_moshixuanze[2]=GetLastCreatedButtonBJ()
call DialogDisplayBJ(true,udg_Kuan_heroxuanze,Player(0))
else
endif
endfunction
function InitTrig_Moshi1 takes nothing returns nothing
set gg_trg_Moshi1=CreateTrigger()
call TriggerRegisterDialogEventBJ(gg_trg_Moshi1,udg_Kuan_duizhanxuanze)
call TriggerAddCondition(gg_trg_Moshi1,Condition(function Trig_Moshi1_Conditions))
call TriggerAddAction(gg_trg_Moshi1,function Trig_Moshi1_Actions)
endfunction
function Trig_Moshi2_Func001Func001C takes nothing returns boolean
if((GetClickedButtonBJ()==udg_AN_moshixuanze[1]))then
return true
endif
return false
endfunction
function Trig_Moshi2_Func001Func003001001001 takes nothing returns boolean
return(GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER)
endfunction
function Trig_Moshi2_Func001Func003001001002001 takes nothing returns boolean
return(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunction
function Trig_Moshi2_Func001Func003001001002002 takes nothing returns boolean
return(GetPlayerSlotState(GetFilterPlayer())!=PLAYER_SLOT_STATE_LEFT)
endfunction
function Trig_Moshi2_Func001Func003001001002 takes nothing returns boolean
return GetBooleanAnd((GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING),(GetPlayerSlotState(GetFilterPlayer())!=PLAYER_SLOT_STATE_LEFT))
endfunction
function Trig_Moshi2_Func001Func003001001 takes nothing returns boolean
return GetBooleanAnd((GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER),(GetBooleanAnd((GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING),(GetPlayerSlotState(GetFilterPlayer())!=PLAYER_SLOT_STATE_LEFT))))
endfunction
function Trig_Moshi2_Func001Func003Func001001002002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)
endfunction
function Trig_Moshi2_Func001Func003Func001Func001Func001C takes nothing returns boolean
if((IsPlayerAlly(GetEnumPlayer(),Player(3))==true))then
return true
endif
return false
endfunction
function Trig_Moshi2_Func001Func003Func001Func001C takes nothing returns boolean
if(not Trig_Moshi2_Func001Func003Func001Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi2_Func001Func003Func001Func002Func001C takes nothing returns boolean
if((IsPlayerAlly(GetEnumPlayer(),Player(7))==true))then
return true
endif
return false
endfunction
function Trig_Moshi2_Func001Func003Func001Func002C takes nothing returns boolean
if(not Trig_Moshi2_Func001Func003Func001Func002Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi2_Func001Func003Func001Func003Func001C takes nothing returns boolean
if((IsPlayerAlly(GetEnumPlayer(),Player(11))==true))then
return true
endif
return false
endfunction
function Trig_Moshi2_Func001Func003Func001Func003C takes nothing returns boolean
if(not Trig_Moshi2_Func001Func003Func001Func003Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi2_Func001Func003Func001A takes nothing returns nothing
if(Trig_Moshi2_Func001Func003Func001Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetEnumPlayer())],GetRectCenter(gg_rct_wup_muye))
else
call DoNothing()
endif
if(Trig_Moshi2_Func001Func003Func001Func002C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetEnumPlayer())],GetRectCenter(gg_rct_wup_wuyin))
else
call DoNothing()
endif
if(Trig_Moshi2_Func001Func003Func001Func003C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetEnumPlayer())],GetRectCenter(gg_rct_wup_sha))
else
call DoNothing()
endif
call MultiboardSetItemValue(MultiboardGetItem(udg_Mianban_I,(GetConvertedPlayerId(GetEnumPlayer())+0),1),GetHeroProperName(GetEnumUnit()))
call MultiboardSetItemStyle(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetEnumPlayer()),1),true,true)
call MultiboardSetItemIcon(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetEnumPlayer()),1),udg_Photo[GetUnitPointValue(GetEnumUnit())])
call SetPlayerName(GetEnumPlayer(),(GetPlayerName(GetEnumPlayer())+("("+(GetHeroProperName(GetEnumUnit())+")"))))
call UnitAddItemByIdSwapped('ankh',GetEnumUnit())
call UnitAddItemByIdSwapped('rhth',GetEnumUnit())
call PanCameraToTimedLocForPlayer(GetEnumPlayer(),GetUnitLoc(GetEnumUnit()),0.50)
call SetUnitOwner(GetEnumUnit(),GetEnumPlayer(),true)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetEnumPlayer())
set udg_ALL_UNIT[GetConvertedPlayerId(GetEnumPlayer())]=GetEnumUnit()
call GroupAddUnitSimple(GetEnumUnit(),udg_Hero_tm)
call TriggerRegisterUnitEvent(gg_trg_X_SH,udg_ALL_UNIT[GetConvertedPlayerId(GetEnumPlayer())],EVENT_UNIT_DAMAGED)
endfunction
function Trig_Moshi2_Func001Func003A takes nothing returns nothing
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRectMatching(gg_rct_East_Spawn_Viz,Condition(function Trig_Moshi2_Func001Func003Func001001002002))),function Trig_Moshi2_Func001Func003Func001A)
set udg_choose_ture[GetConvertedPlayerId(GetEnumPlayer())]=false
endfunction
function Trig_Moshi2_Func001C takes nothing returns boolean
if(not Trig_Moshi2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi2_Func002C takes nothing returns boolean
if(not(GetClickedButtonBJ()==udg_AN_moshixuanze[2]))then
return false
endif
return true
endfunction
function Trig_Moshi2_Actions takes nothing returns nothing
if(Trig_Moshi2_Func001C())then
call DisplayTimedTextToForce(GetPlayersAll(),30,(GetPlayerName(Player(0))+"已经选择所有玩家随机选取英雄模式......"))
call ForForce(GetPlayersMatching(Condition(function Trig_Moshi2_Func001Func003001001)),function Trig_Moshi2_Func001Func003A)
else
endif
if(Trig_Moshi2_Func002C())then
call DisplayTimedTextToForce(GetPlayersAll(),30,(GetPlayerName(Player(0))+"已经选择所有玩家自由选取英雄模式......"))
call DisplayTimedTextToForce(GetPlayersAll(),20.00,"|cFFFF0000请玩家双击选择想要使用的英雄，如果想随机选择英雄可以单击红色的问号。|r")
call EnableTrigger(gg_trg_Moshi5)
call EnableTrigger(gg_trg_Moshi4)
call EnableTrigger(gg_trg_Moshi3)
else
endif
call DialogClear(udg_Kuan_heroxuanze)
endfunction
function InitTrig_Moshi2 takes nothing returns nothing
set gg_trg_Moshi2=CreateTrigger()
call TriggerRegisterDialogEventBJ(gg_trg_Moshi2,udg_Kuan_heroxuanze)
call TriggerAddAction(gg_trg_Moshi2,function Trig_Moshi2_Actions)
endfunction
function Trig_Moshi2_S1_Func002Func001C takes nothing returns boolean
if((GetClickedButtonBJ()==udg_AN_moshixuanze[8]))then
return true
endif
return false
endfunction
function Trig_Moshi2_S1_Func002Func003001001001 takes nothing returns boolean
return(GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER)
endfunction
function Trig_Moshi2_S1_Func002Func003001001002001 takes nothing returns boolean
return(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunction
function Trig_Moshi2_S1_Func002Func003001001002002 takes nothing returns boolean
return(GetPlayerSlotState(GetFilterPlayer())!=PLAYER_SLOT_STATE_LEFT)
endfunction
function Trig_Moshi2_S1_Func002Func003001001002 takes nothing returns boolean
return GetBooleanAnd((GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING),(GetPlayerSlotState(GetFilterPlayer())!=PLAYER_SLOT_STATE_LEFT))
endfunction
function Trig_Moshi2_S1_Func002Func003001001 takes nothing returns boolean
return GetBooleanAnd((GetPlayerController(GetFilterPlayer())==MAP_CONTROL_USER),(GetBooleanAnd((GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING),(GetPlayerSlotState(GetFilterPlayer())!=PLAYER_SLOT_STATE_LEFT))))
endfunction
function Trig_Moshi2_S1_Func002Func003Func001001002002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)
endfunction
function Trig_Moshi2_S1_Func002Func003Func001Func001Func001C takes nothing returns boolean
if((IsPlayerAlly(GetEnumPlayer(),Player(3))==true))then
return true
endif
return false
endfunction
function Trig_Moshi2_S1_Func002Func003Func001Func001C takes nothing returns boolean
if(not Trig_Moshi2_S1_Func002Func003Func001Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi2_S1_Func002Func003Func001Func002Func001C takes nothing returns boolean
if((IsPlayerAlly(GetEnumPlayer(),Player(7))==true))then
return true
endif
return false
endfunction
function Trig_Moshi2_S1_Func002Func003Func001Func002C takes nothing returns boolean
if(not Trig_Moshi2_S1_Func002Func003Func001Func002Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi2_S1_Func002Func003Func001Func003Func001C takes nothing returns boolean
if((IsPlayerAlly(GetEnumPlayer(),Player(11))==true))then
return true
endif
return false
endfunction
function Trig_Moshi2_S1_Func002Func003Func001Func003C takes nothing returns boolean
if(not Trig_Moshi2_S1_Func002Func003Func001Func003Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi2_S1_Func002Func003Func001A takes nothing returns nothing
if(Trig_Moshi2_S1_Func002Func003Func001Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetEnumPlayer())],GetRectCenter(gg_rct_wup_muye))
else
call DoNothing()
endif
if(Trig_Moshi2_S1_Func002Func003Func001Func002C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetEnumPlayer())],GetRectCenter(gg_rct_wup_wuyin))
else
call DoNothing()
endif
if(Trig_Moshi2_S1_Func002Func003Func001Func003C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetEnumPlayer())],GetRectCenter(gg_rct_wup_sha))
else
call DoNothing()
endif
call MultiboardSetItemValue(MultiboardGetItem(udg_Mianban_I,(GetConvertedPlayerId(GetEnumPlayer())+0),1),GetHeroProperName(GetEnumUnit()))
call MultiboardSetItemStyle(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetEnumPlayer()),1),true,true)
call MultiboardSetItemIcon(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetEnumPlayer()),1),udg_Photo[GetUnitPointValue(GetEnumUnit())])
call SetPlayerName(GetEnumPlayer(),(GetPlayerName(GetEnumPlayer())+("("+(GetHeroProperName(GetEnumUnit())+")"))))
call UnitAddItemByIdSwapped('ankh',GetEnumUnit())
call UnitAddItemByIdSwapped('rhth',GetEnumUnit())
call PanCameraToTimedLocForPlayer(GetEnumPlayer(),GetUnitLoc(GetEnumUnit()),0.50)
call SetUnitOwner(GetEnumUnit(),GetEnumPlayer(),true)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetEnumPlayer())
set udg_ALL_UNIT[GetConvertedPlayerId(GetEnumPlayer())]=GetEnumUnit()
call GroupAddUnitSimple(GetEnumUnit(),udg_Hero_tm)
call TriggerRegisterUnitEvent(gg_trg_X_SH,udg_ALL_UNIT[GetConvertedPlayerId(GetEnumPlayer())],EVENT_UNIT_DAMAGED)
endfunction
function Trig_Moshi2_S1_Func002Func003A takes nothing returns nothing
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRectMatching(gg_rct_East_Spawn_Viz,Condition(function Trig_Moshi2_S1_Func002Func003Func001001002002))),function Trig_Moshi2_S1_Func002Func003Func001A)
set udg_choose_ture[GetConvertedPlayerId(GetEnumPlayer())]=false
endfunction
function Trig_Moshi2_S1_Func002C takes nothing returns boolean
if(not Trig_Moshi2_S1_Func002Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi2_S1_Actions takes nothing returns nothing
if(Trig_Moshi2_S1_Func002C())then
call DisplayTimedTextToForce(GetPlayersAll(),30,(GetPlayerName(Player(0))+"已经选择所有玩家随机选取英雄模式......"))
call ForForce(GetPlayersMatching(Condition(function Trig_Moshi2_S1_Func002Func003001001)),function Trig_Moshi2_S1_Func002Func003A)
else
endif
call DialogClear(udg_Kuan_heroxuanze)
endfunction
function InitTrig_Moshi2_S1 takes nothing returns nothing
set gg_trg_Moshi2_S1=CreateTrigger()
call TriggerRegisterDialogEventBJ(gg_trg_Moshi2_S1,udg_Kuan_duizhanxuanze)
call TriggerAddAction(gg_trg_Moshi2_S1,function Trig_Moshi2_S1_Actions)
endfunction
function Trig_Moshi3_Conditions takes nothing returns boolean
if(not(GetTriggerUnit()==gg_unit_e00F_0233))then
return false
endif
if(not(udg_choose_ture[GetConvertedPlayerId(GetTriggerPlayer())]==true))then
return false
endif
return true
endfunction
function Trig_Moshi3_Func001Func001001002002001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)
endfunction
function Trig_Moshi3_Func001Func001001002002002 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())!='hfoo')
endfunction
function Trig_Moshi3_Func001Func001001002002 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true),(GetUnitTypeId(GetFilterUnit())!='hfoo'))
endfunction
function Trig_Moshi3_Func001Func001Func001Func001C takes nothing returns boolean
if((GetTriggerPlayer()==Player(4)))then
return true
endif
if((GetTriggerPlayer()==Player(5)))then
return true
endif
if((GetTriggerPlayer()==Player(6)))then
return true
endif
return false
endfunction
function Trig_Moshi3_Func001Func001Func001C takes nothing returns boolean
if(not Trig_Moshi3_Func001Func001Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi3_Func001Func001Func002Func001C takes nothing returns boolean
if((GetTriggerPlayer()==Player(0)))then
return true
endif
if((GetTriggerPlayer()==Player(1)))then
return true
endif
if((GetTriggerPlayer()==Player(2)))then
return true
endif
return false
endfunction
function Trig_Moshi3_Func001Func001Func002C takes nothing returns boolean
if(not Trig_Moshi3_Func001Func001Func002Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi3_Func001Func001Func003Func001C takes nothing returns boolean
if((GetTriggerPlayer()==Player(8)))then
return true
endif
if((GetTriggerPlayer()==Player(9)))then
return true
endif
if((GetTriggerPlayer()==Player(10)))then
return true
endif
return false
endfunction
function Trig_Moshi3_Func001Func001Func003C takes nothing returns boolean
if(not Trig_Moshi3_Func001Func001Func003Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi3_Func001Func001A takes nothing returns nothing
if(Trig_Moshi3_Func001Func001Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_wup_wuyin))
else
call DoNothing()
endif
if(Trig_Moshi3_Func001Func001Func002C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_wup_muye))
else
call DoNothing()
endif
if(Trig_Moshi3_Func001Func001Func003C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_wup_sha))
else
call DoNothing()
endif
call MultiboardSetItemValue(MultiboardGetItem(udg_Mianban_I,(GetConvertedPlayerId(GetTriggerPlayer())+0),1),GetHeroProperName(GetEnumUnit()))
call MultiboardSetItemStyle(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetTriggerPlayer()),1),true,true)
call MultiboardSetItemIcon(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetTriggerPlayer()),1),udg_Photo[GetUnitPointValue(GetEnumUnit())])
call SetPlayerName(GetTriggerPlayer(),(GetPlayerName(GetTriggerPlayer())+("("+(GetHeroProperName(GetEnumUnit())+")"))))
call UnitAddItemByIdSwapped('ankh',GetEnumUnit())
call UnitAddItemByIdSwapped('rhth',GetEnumUnit())
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),GetUnitLoc(GetEnumUnit()),0)
call SetUnitOwner(GetEnumUnit(),GetTriggerPlayer(),true)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetTriggerPlayer())
set udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())]=GetEnumUnit()
call GroupAddUnitSimple(GetEnumUnit(),udg_Hero_tm)
call TriggerRegisterUnitEvent(gg_trg_X_SH,udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],EVENT_UNIT_DAMAGED)
endfunction
function Trig_Moshi3_Func001C takes nothing returns boolean
if(not(GetTriggerUnit()==udg_hero_choose[GetConvertedPlayerId(GetTriggerPlayer())]))then
return false
endif
return true
endfunction
function Trig_Moshi3_Actions takes nothing returns nothing
if(Trig_Moshi3_Func001C())then
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRectMatching(gg_rct_East_Spawn_Viz,Condition(function Trig_Moshi3_Func001Func001001002002))),function Trig_Moshi3_Func001Func001A)
set udg_choose_ture[GetConvertedPlayerId(GetTriggerPlayer())]=false
else
set udg_hero_choose[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerUnit()
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,(LoadStr(YDHT,(1),(GetUnitPointValue(GetTriggerUnit())))))
call PolledWait(0.30)
set udg_hero_choose[GetConvertedPlayerId(GetTriggerPlayer())]=null
endif
endfunction
function InitTrig_Moshi3 takes nothing returns nothing
set gg_trg_Moshi3=CreateTrigger()
call DisableTrigger(gg_trg_Moshi3)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(0),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(1),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(2),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(4),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(5),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(6),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(8),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(9),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi3,Player(10),true)
call TriggerAddCondition(gg_trg_Moshi3,Condition(function Trig_Moshi3_Conditions))
call TriggerAddAction(gg_trg_Moshi3,function Trig_Moshi3_Actions)
endfunction
function Trig_Moshi4_Conditions takes nothing returns boolean
if(not(GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_PASSIVE)))then
return false
endif
if(not(udg_choose_ture[GetConvertedPlayerId(GetTriggerPlayer())]==true))then
return false
endif
if(not(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true))then
return false
endif
if(not(RectContainsUnit(gg_rct_East_Spawn_Viz,GetTriggerUnit())==true))then
return false
endif
return true
endfunction
function Trig_Moshi4_Func001Func007Func001C takes nothing returns boolean
if((GetTriggerPlayer()==Player(0)))then
return true
endif
if((GetTriggerPlayer()==Player(1)))then
return true
endif
if((GetTriggerPlayer()==Player(2)))then
return true
endif
return false
endfunction
function Trig_Moshi4_Func001Func007C takes nothing returns boolean
if(not Trig_Moshi4_Func001Func007Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi4_Func001Func008Func001C takes nothing returns boolean
if((GetTriggerPlayer()==Player(4)))then
return true
endif
if((GetTriggerPlayer()==Player(5)))then
return true
endif
if((GetTriggerPlayer()==Player(6)))then
return true
endif
return false
endfunction
function Trig_Moshi4_Func001Func008C takes nothing returns boolean
if(not Trig_Moshi4_Func001Func008Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi4_Func001Func009Func001C takes nothing returns boolean
if((GetTriggerPlayer()==Player(8)))then
return true
endif
if((GetTriggerPlayer()==Player(9)))then
return true
endif
if((GetTriggerPlayer()==Player(10)))then
return true
endif
return false
endfunction
function Trig_Moshi4_Func001Func009C takes nothing returns boolean
if(not Trig_Moshi4_Func001Func009Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi4_Func001C takes nothing returns boolean
if(not(GetTriggerUnit()==udg_hero_choose[GetConvertedPlayerId(GetTriggerPlayer())]))then
return false
endif
return true
endfunction
function Trig_Moshi4_Actions takes nothing returns nothing
if(Trig_Moshi4_Func001C())then
set udg_choose_ture[GetConvertedPlayerId(GetTriggerPlayer())]=false
set udg_hero_choose[GetConvertedPlayerId(GetTriggerPlayer())]=null
if(Trig_Moshi4_Func001Func007C())then
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_wup_muye))
else
call DoNothing()
endif
if(Trig_Moshi4_Func001Func008C())then
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_wup_wuyin))
else
call DoNothing()
endif
if(Trig_Moshi4_Func001Func009C())then
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetTriggerPlayer())],GetRectCenter(gg_rct_wup_sha))
else
call DoNothing()
endif
call MultiboardSetItemValue(MultiboardGetItem(udg_Mianban_I,(GetConvertedPlayerId(GetTriggerPlayer())+0),1),GetHeroProperName(GetTriggerUnit()))
call MultiboardSetItemStyle(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetTriggerPlayer()),1),true,true)
call MultiboardSetItemIcon(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetTriggerPlayer()),1),udg_Photo[GetUnitPointValue(GetTriggerUnit())])
call SetPlayerName(GetTriggerPlayer(),(GetPlayerName(GetTriggerPlayer())+("("+(GetHeroProperName(GetTriggerUnit())+")"))))
call UnitAddItemByIdSwapped('ankh',GetTriggerUnit())
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),0.50)
call SetUnitOwner(GetTriggerUnit(),GetTriggerPlayer(),true)
set udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerUnit()
call GroupAddUnitSimple(GetTriggerUnit(),udg_Hero_tm)
call TriggerRegisterUnitEvent(gg_trg_X_SH,udg_ALL_UNIT[GetConvertedPlayerId(GetTriggerPlayer())],EVENT_UNIT_DAMAGED)
else
set udg_hero_choose[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerUnit()
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,(LoadStr(YDHT,(1),(GetUnitPointValue(GetTriggerUnit())))))
call PolledWait(0.30)
set udg_hero_choose[GetConvertedPlayerId(GetTriggerPlayer())]=null
endif
endfunction
function InitTrig_Moshi4 takes nothing returns nothing
set gg_trg_Moshi4=CreateTrigger()
call DisableTrigger(gg_trg_Moshi4)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(0),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(1),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(2),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(4),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(5),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(6),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(8),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(9),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_Moshi4,Player(10),true)
call TriggerAddCondition(gg_trg_Moshi4,Condition(function Trig_Moshi4_Conditions))
call TriggerAddAction(gg_trg_Moshi4,function Trig_Moshi4_Actions)
endfunction
function Trig_Moshi5_Func001C takes nothing returns boolean
if((GetItemTypeId(GetSoldItem())=='I00T'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00U'))then
return true
endif
if((GetItemTypeId(GetSoldItem())=='I00S'))then
return true
endif
return false
endfunction
function Trig_Moshi5_Conditions takes nothing returns boolean
if(not Trig_Moshi5_Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func001Func001001001 takes nothing returns boolean
return(GetFilterPlayer()==GetOwningPlayer(GetBuyingUnit()))
endfunction
function Trig_Moshi5_Func002Func001Func001Func003001002002001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)
endfunction
function Trig_Moshi5_Func002Func001Func001Func003001002002002 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_SJXZ_tm[3])==true)
endfunction
function Trig_Moshi5_Func002Func001Func001Func003001002002 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true),(IsUnitInGroup(GetFilterUnit(),udg_SJXZ_tm[3])==true))
endfunction
function Trig_Moshi5_Func002Func001Func001Func003Func001Func001C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(0)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(1)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(2)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func001Func001Func003Func001C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func001Func001Func003Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func001Func003Func002Func001C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(4)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(5)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(6)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func001Func001Func003Func002C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func001Func001Func003Func002Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func001Func003Func003Func001C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(8)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(9)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(10)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func001Func001Func003Func003C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func001Func001Func003Func003Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func001Func003A takes nothing returns nothing
if(Trig_Moshi5_Func002Func001Func001Func003Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_muye))
else
call DoNothing()
endif
if(Trig_Moshi5_Func002Func001Func001Func003Func002C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_wuyin))
else
call DoNothing()
endif
if(Trig_Moshi5_Func002Func001Func001Func003Func003C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_sha))
else
call DoNothing()
endif
call MultiboardSetItemValue(MultiboardGetItem(udg_Mianban_I,(GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))+0),1),GetHeroProperName(GetEnumUnit()))
call MultiboardSetItemStyle(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit())),1),true,true)
call MultiboardSetItemIcon(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit())),1),udg_Photo[GetUnitPointValue(GetEnumUnit())])
call SetPlayerName(GetOwningPlayer(GetBuyingUnit()),(GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+("("+(GetHeroProperName(GetEnumUnit())+")"))))
call UnitAddItemByIdSwapped('ankh',GetEnumUnit())
call UnitAddItemByIdSwapped('rhth',GetEnumUnit())
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetBuyingUnit()),GetUnitLoc(GetEnumUnit()),0)
call SetUnitOwner(GetEnumUnit(),GetOwningPlayer(GetBuyingUnit()),true)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetOwningPlayer(GetBuyingUnit()))
set udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=GetEnumUnit()
call GroupAddUnitSimple(GetEnumUnit(),udg_Hero_tm)
call TriggerRegisterUnitEvent(gg_trg_X_SH,udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],EVENT_UNIT_DAMAGED)
endfunction
function Trig_Moshi5_Func002Func001Func001Func005C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00S'))then
return false
endif
if(not(udg_choose_ture[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true))then
return false
endif
if(not(IsUnitGroupEmptyBJ(udg_SJXZ_tm[3])!=true))then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func001C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func001Func001Func005C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func003001002002001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)
endfunction
function Trig_Moshi5_Func002Func001Func003001002002002 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_SJXZ_tm[2])==true)
endfunction
function Trig_Moshi5_Func002Func001Func003001002002 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true),(IsUnitInGroup(GetFilterUnit(),udg_SJXZ_tm[2])==true))
endfunction
function Trig_Moshi5_Func002Func001Func003Func001Func001C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(0)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(1)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(2)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func001Func003Func001C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func001Func003Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func003Func002Func001C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(4)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(5)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(6)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func001Func003Func002C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func001Func003Func002Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func003Func003Func002C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(8)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(9)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(10)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func001Func003Func003C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func001Func003Func003Func002C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001Func003A takes nothing returns nothing
if(Trig_Moshi5_Func002Func001Func003Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_muye))
else
call DoNothing()
endif
if(Trig_Moshi5_Func002Func001Func003Func002C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_wuyin))
else
call DoNothing()
endif
if(Trig_Moshi5_Func002Func001Func003Func003C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_sha))
else
call DoNothing()
endif
call MultiboardSetItemValue(MultiboardGetItem(udg_Mianban_I,(GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))+0),1),GetHeroProperName(GetEnumUnit()))
call MultiboardSetItemStyle(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit())),1),true,true)
call MultiboardSetItemIcon(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit())),1),udg_Photo[GetUnitPointValue(GetEnumUnit())])
call SetPlayerName(GetOwningPlayer(GetBuyingUnit()),(GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+("("+(GetHeroProperName(GetEnumUnit())+")"))))
call UnitAddItemByIdSwapped('ankh',GetEnumUnit())
call UnitAddItemByIdSwapped('rhth',GetEnumUnit())
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetBuyingUnit()),GetUnitLoc(GetEnumUnit()),0)
call SetUnitOwner(GetEnumUnit(),GetOwningPlayer(GetBuyingUnit()),true)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetOwningPlayer(GetBuyingUnit()))
set udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=GetEnumUnit()
call GroupAddUnitSimple(GetEnumUnit(),udg_Hero_tm)
call TriggerRegisterUnitEvent(gg_trg_X_SH,udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],EVENT_UNIT_DAMAGED)
endfunction
function Trig_Moshi5_Func002Func001Func005C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00U'))then
return false
endif
if(not(udg_choose_ture[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true))then
return false
endif
if(not(IsUnitGroupEmptyBJ(udg_SJXZ_tm[2])!=true))then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func001C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func001Func005C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func003001002002001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true)
endfunction
function Trig_Moshi5_Func002Func003001002002002 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_SJXZ_tm[1])==true)
endfunction
function Trig_Moshi5_Func002Func003001002002 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true),(IsUnitInGroup(GetFilterUnit(),udg_SJXZ_tm[1])==true))
endfunction
function Trig_Moshi5_Func002Func003Func001Func001C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(0)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(1)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(2)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func003Func001C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func003Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func003Func002Func001C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(4)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(5)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(6)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func003Func002C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func003Func002Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func003Func003Func001C takes nothing returns boolean
if((GetOwningPlayer(GetBuyingUnit())==Player(8)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(9)))then
return true
endif
if((GetOwningPlayer(GetBuyingUnit())==Player(10)))then
return true
endif
return false
endfunction
function Trig_Moshi5_Func002Func003Func003C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func003Func003Func001C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002Func003A takes nothing returns nothing
if(Trig_Moshi5_Func002Func003Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_muye_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_muye))
else
call DoNothing()
endif
if(Trig_Moshi5_Func002Func003Func002C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_Spawnpoint_wuyin_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_wuyin))
else
call DoNothing()
endif
if(Trig_Moshi5_Func002Func003Func003C())then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(gg_rct_SpawnPoint_sha_Schloss))
call SetUnitPositionLoc(udg_SZ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],GetRectCenter(gg_rct_wup_sha))
else
call DoNothing()
endif
call MultiboardSetItemValue(MultiboardGetItem(udg_Mianban_I,(GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))+0),1),GetHeroProperName(GetEnumUnit()))
call MultiboardSetItemStyle(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit())),1),true,true)
call MultiboardSetItemIcon(MultiboardGetItem(udg_Mianban_I,GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit())),1),udg_Photo[GetUnitPointValue(GetEnumUnit())])
call SetPlayerName(GetOwningPlayer(GetBuyingUnit()),(GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+("("+(GetHeroProperName(GetEnumUnit())+")"))))
call UnitAddItemByIdSwapped('ankh',GetEnumUnit())
call UnitAddItemByIdSwapped('rhth',GetEnumUnit())
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetBuyingUnit()),GetUnitLoc(GetEnumUnit()),0)
call SetUnitOwner(GetEnumUnit(),GetOwningPlayer(GetBuyingUnit()),true)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetOwningPlayer(GetBuyingUnit()))
set udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=GetEnumUnit()
call GroupAddUnitSimple(GetEnumUnit(),udg_Hero_tm)
call TriggerRegisterUnitEvent(gg_trg_X_SH,udg_ALL_UNIT[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))],EVENT_UNIT_DAMAGED)
endfunction
function Trig_Moshi5_Func002Func005C takes nothing returns boolean
if(not(GetItemTypeId(GetSoldItem())=='I00T'))then
return false
endif
if(not(udg_choose_ture[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true))then
return false
endif
if(not(IsUnitGroupEmptyBJ(udg_SJXZ_tm[1])!=true))then
return false
endif
return true
endfunction
function Trig_Moshi5_Func002C takes nothing returns boolean
if(not Trig_Moshi5_Func002Func005C())then
return false
endif
return true
endfunction
function Trig_Moshi5_Actions takes nothing returns nothing
if(Trig_Moshi5_Func002C())then
set udg_choose_ture[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRectMatching(gg_rct_East_Spawn_Viz,Condition(function Trig_Moshi5_Func002Func003001002002))),function Trig_Moshi5_Func002Func003A)
return
else
if(Trig_Moshi5_Func002Func001C())then
set udg_choose_ture[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRectMatching(gg_rct_East_Spawn_Viz,Condition(function Trig_Moshi5_Func002Func001Func003001002002))),function Trig_Moshi5_Func002Func001Func003A)
return
else
if(Trig_Moshi5_Func002Func001Func001C())then
set udg_choose_ture[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRectMatching(gg_rct_East_Spawn_Viz,Condition(function Trig_Moshi5_Func002Func001Func001Func003001002002))),function Trig_Moshi5_Func002Func001Func001Func003A)
return
else
call DisplayTextToForce(GetPlayersMatching(Condition(function Trig_Moshi5_Func002Func001Func001Func001001001)),"你已经选择过一个人物,或者已经没有该属性的人物了~")
endif
endif
endif
endfunction
function InitTrig_Moshi5 takes nothing returns nothing
set gg_trg_Moshi5=CreateTrigger()
call DisableTrigger(gg_trg_Moshi5)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Moshi5,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_Moshi5,Condition(function Trig_Moshi5_Conditions))
call TriggerAddAction(gg_trg_Moshi5,function Trig_Moshi5_Actions)
endfunction
function Trig_muye_die_Func014002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_muye_die_Func015002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_muye_die_Func016002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_muye_die_Func017002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_muye_die_Actions takes nothing returns nothing
call DisableTrigger(gg_trg_Spawn_Purple_North_1)
call DisableTrigger(gg_trg_Spawn_Purple_north_2)
call DisableTrigger(gg_trg_Spawn_Purple_East_1)
call DisableTrigger(gg_trg_Spawn_purple_east_2)
call DisableTrigger(gg_trg_Spawn_Purple_Middle_1)
call DisableTrigger(gg_trg_Spawn_Purple_middle_2)
call DisableTrigger(gg_trg_Spawn_Purple_middle_3)
call RemoveUnit(gg_unit_nC25_0011)
call RemoveUnit(gg_unit_nC03_0008)
call RemoveUnit(gg_unit_nC00_0010)
call RemoveUnit(gg_unit_nC24_0256)
call RemoveUnit(gg_unit_nC02_0006)
call RemoveUnit(gg_unit_n006_0201)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(0)),function Trig_muye_die_Func014002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(1)),function Trig_muye_die_Func015002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(2)),function Trig_muye_die_Func016002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(3)),function Trig_muye_die_Func017002)
call TriggerSleepAction(4.00)
call DisplayTimedTextToForce(GetPlayersAll(),30," - 木叶忍者村被摧毁了！")
call CustomDefeatBJ(Player(0),"木叶忍者村被摧毁了！你们失败了！")
call CustomDefeatBJ(Player(1),"木叶忍者村被摧毁了！你们失败了！")
call CustomDefeatBJ(Player(2),"木叶忍者村被摧毁了！你们失败了！")
call CustomDefeatBJ(Player(3),"木叶忍者村被摧毁了！你们失败了！")
endfunction
function InitTrig_muye_die takes nothing returns nothing
set gg_trg_muye_die=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_muye_die,gg_unit_hcas_0001,EVENT_UNIT_DEATH)
call TriggerAddAction(gg_trg_muye_die,function Trig_muye_die_Actions)
endfunction
function Trig_muye_die2_Func001C takes nothing returns boolean
if(not(GetPlayerSlotState(Player(0))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerSlotState(Player(1))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerSlotState(Player(2))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
return true
endfunction
function Trig_muye_die2_Conditions takes nothing returns boolean
if(not Trig_muye_die2_Func001C())then
return false
endif
return true
endfunction
function Trig_muye_die2_Func004A takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function Trig_muye_die2_Actions takes nothing returns nothing
call KillUnit(gg_unit_hcas_0001)
call EnumItemsInRectBJ(gg_rct_SpawnPoint_muye_Schloss,function Trig_muye_die2_Func004A)
endfunction
function InitTrig_muye_die2 takes nothing returns nothing
set gg_trg_muye_die2=CreateTrigger()
call TriggerAddCondition(gg_trg_muye_die2,Condition(function Trig_muye_die2_Conditions))
call TriggerAddAction(gg_trg_muye_die2,function Trig_muye_die2_Actions)
endfunction
function Trig_muye_wins_Conditions takes nothing returns boolean
if(not(IsUnitDeadBJ(gg_unit_hcas_0044)==true))then
return false
endif
if(not(IsUnitDeadBJ(gg_unit_hcas_0018)==true))then
return false
endif
return true
endfunction
function Trig_muye_wins_Actions takes nothing returns nothing
call CustomVictoryBJ(Player(0),true,true)
call CustomVictoryBJ(Player(1),true,true)
call CustomVictoryBJ(Player(2),true,true)
set udg_GAME_OVER=true
endfunction
function InitTrig_muye_wins takes nothing returns nothing
set gg_trg_muye_wins=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_muye_wins,gg_unit_hcas_0044,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_muye_wins,gg_unit_hcas_0018,EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_muye_wins,Condition(function Trig_muye_wins_Conditions))
call TriggerAddAction(gg_trg_muye_wins,function Trig_muye_wins_Actions)
endfunction
function Trig_wuyen_die_Func014002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_wuyen_die_Func015002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_wuyen_die_Func016002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_wuyen_die_Func017002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_wuyen_die_Actions takes nothing returns nothing
call DisableTrigger(gg_trg_Spawn_Pink_Middle_1)
call DisableTrigger(gg_trg_Spawn_Pink_middle_2)
call DisableTrigger(gg_trg_Spawn_Pink_Middle_3)
call DisableTrigger(gg_trg_Spawn_pink_north_1)
call DisableTrigger(gg_trg_Spawn_pink_north_2)
call DisableTrigger(gg_trg_Spawn_pink_west_1)
call DisableTrigger(gg_trg_Spawn_pink_west_2)
call RemoveUnit(gg_unit_nC25_0051)
call RemoveUnit(gg_unit_nC03_0026)
call RemoveUnit(gg_unit_nC24_0257)
call RemoveUnit(gg_unit_nC00_0027)
call RemoveUnit(gg_unit_nC02_0023)
call RemoveUnit(gg_unit_n006_0202)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(4)),function Trig_wuyen_die_Func014002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(5)),function Trig_wuyen_die_Func015002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(6)),function Trig_wuyen_die_Func016002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(7)),function Trig_wuyen_die_Func017002)
call TriggerSleepAction(4.00)
call CustomDefeatBJ(Player(4),"雨忍者村被摧毁！你们失败了！")
call CustomDefeatBJ(Player(5),"雨忍者村被摧毁！你们失败了！")
call CustomDefeatBJ(Player(6),"雨忍者村被摧毁！你们失败了！")
call CustomDefeatBJ(Player(7),"雨忍者村被摧毁！你们失败了！")
call DisplayTimedTextToForce(GetPlayersAll(),30," - 雨忍者村被摧毁！")
endfunction
function InitTrig_wuyen_die takes nothing returns nothing
set gg_trg_wuyen_die=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_wuyen_die,gg_unit_hcas_0018,EVENT_UNIT_DEATH)
call TriggerAddAction(gg_trg_wuyen_die,function Trig_wuyen_die_Actions)
endfunction
function Trig_wuyen_die2_Func004C takes nothing returns boolean
if(not(GetPlayerSlotState(Player(4))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerSlotState(Player(5))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerSlotState(Player(6))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
return true
endfunction
function Trig_wuyen_die2_Conditions takes nothing returns boolean
if(not Trig_wuyen_die2_Func004C())then
return false
endif
return true
endfunction
function Trig_wuyen_die2_Func002A takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function Trig_wuyen_die2_Actions takes nothing returns nothing
call KillUnit(gg_unit_hcas_0018)
call EnumItemsInRectBJ(gg_rct_Spawnpoint_wuyin_Schloss,function Trig_wuyen_die2_Func002A)
endfunction
function InitTrig_wuyen_die2 takes nothing returns nothing
set gg_trg_wuyen_die2=CreateTrigger()
call TriggerAddCondition(gg_trg_wuyen_die2,Condition(function Trig_wuyen_die2_Conditions))
call TriggerAddAction(gg_trg_wuyen_die2,function Trig_wuyen_die2_Actions)
endfunction
function Trig_wuyen_wins_Conditions takes nothing returns boolean
if(not(IsUnitDeadBJ(gg_unit_hcas_0044)==true))then
return false
endif
if(not(IsUnitDeadBJ(gg_unit_hcas_0001)==true))then
return false
endif
return true
endfunction
function Trig_wuyen_wins_Actions takes nothing returns nothing
call CustomVictoryBJ(Player(4),true,true)
call CustomVictoryBJ(Player(5),true,true)
call CustomVictoryBJ(Player(6),true,true)
set udg_GAME_OVER=true
endfunction
function InitTrig_wuyen_wins takes nothing returns nothing
set gg_trg_wuyen_wins=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_wuyen_wins,gg_unit_hcas_0001,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_wuyen_wins,gg_unit_hcas_0044,EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_wuyen_wins,Condition(function Trig_wuyen_wins_Conditions))
call TriggerAddAction(gg_trg_wuyen_wins,function Trig_wuyen_wins_Actions)
endfunction
function Trig_sha_dies_Func014002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_sha_dies_Func015002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_sha_dies_Func016002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_sha_dies_Func017002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_sha_dies_Func019C takes nothing returns boolean
if(not(udg_OB[9]==false))then
return false
endif
return true
endfunction
function Trig_sha_dies_Func020C takes nothing returns boolean
if(not(udg_OB[10]==false))then
return false
endif
return true
endfunction
function Trig_sha_dies_Func021C takes nothing returns boolean
if(not(udg_OB[11]==false))then
return false
endif
return true
endfunction
function Trig_sha_dies_Actions takes nothing returns nothing
call DisableTrigger(gg_trg_Spawn_Brown_middle_1)
call DisableTrigger(gg_trg_Spawn_Brown_middle_2)
call DisableTrigger(gg_trg_Spawn_brown_middle_3)
call DisableTrigger(gg_trg_Spawn_Brown_west_1)
call DisableTrigger(gg_trg_Spawn_brown_west_2)
call DisableTrigger(gg_trg_Spawn_brown_east_1)
call DisableTrigger(gg_trg_Spawn_brown_east_2)
call RemoveUnit(gg_unit_nC00_0050)
call RemoveUnit(gg_unit_nC24_0258)
call RemoveUnit(gg_unit_nC25_0025)
call RemoveUnit(gg_unit_nC03_0042)
call RemoveUnit(gg_unit_nC02_0043)
call RemoveUnit(gg_unit_n006_0203)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(8)),function Trig_sha_dies_Func014002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(9)),function Trig_sha_dies_Func015002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(10)),function Trig_sha_dies_Func016002)
call ForGroupBJ(GetUnitsOfPlayerAll(Player(11)),function Trig_sha_dies_Func017002)
call TriggerSleepAction(4.00)
if(Trig_sha_dies_Func019C())then
call CustomDefeatBJ(Player(8),"砂忍者村被摧毁！你们失败了！")
else
endif
if(Trig_sha_dies_Func020C())then
call CustomDefeatBJ(Player(9),"砂忍者村被摧毁！你们失败了！")
else
endif
if(Trig_sha_dies_Func021C())then
call CustomDefeatBJ(Player(10),"砂忍者村被摧毁！你们失败了！")
else
endif
call CustomDefeatBJ(Player(11),"砂忍者村被摧毁！你们失败了！")
call DisplayTimedTextToForce(GetPlayersAll(),30," - 砂忍者村被摧毁！")
endfunction
function InitTrig_sha_dies takes nothing returns nothing
set gg_trg_sha_dies=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_sha_dies,gg_unit_hcas_0044,EVENT_UNIT_DEATH)
call TriggerAddAction(gg_trg_sha_dies,function Trig_sha_dies_Actions)
endfunction
function Trig_sha_dies2_Func004C takes nothing returns boolean
if(not(GetPlayerSlotState(Player(8))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerSlotState(Player(9))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
if(not(GetPlayerSlotState(Player(10))!=PLAYER_SLOT_STATE_PLAYING))then
return false
endif
return true
endfunction
function Trig_sha_dies2_Conditions takes nothing returns boolean
if(not Trig_sha_dies2_Func004C())then
return false
endif
return true
endfunction
function Trig_sha_dies2_Func002A takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function Trig_sha_dies2_Actions takes nothing returns nothing
call KillUnit(gg_unit_hcas_0044)
call EnumItemsInRectBJ(gg_rct_SpawnPoint_sha_Schloss,function Trig_sha_dies2_Func002A)
endfunction
function InitTrig_sha_dies2 takes nothing returns nothing
set gg_trg_sha_dies2=CreateTrigger()
call TriggerAddCondition(gg_trg_sha_dies2,Condition(function Trig_sha_dies2_Conditions))
call TriggerAddAction(gg_trg_sha_dies2,function Trig_sha_dies2_Actions)
endfunction
function Trig_sha_wins_Conditions takes nothing returns boolean
if(not(IsUnitDeadBJ(gg_unit_hcas_0018)==true))then
return false
endif
if(not(IsUnitDeadBJ(gg_unit_hcas_0001)==true))then
return false
endif
return true
endfunction
function Trig_sha_wins_Actions takes nothing returns nothing
call CustomVictoryBJ(Player(8),true,true)
call CustomVictoryBJ(Player(9),true,true)
call CustomVictoryBJ(Player(10),true,true)
set udg_GAME_OVER=true
endfunction
function InitTrig_sha_wins takes nothing returns nothing
set gg_trg_sha_wins=CreateTrigger()
call TriggerRegisterUnitEvent(gg_trg_sha_wins,gg_unit_hcas_0018,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_sha_wins,gg_unit_hcas_0001,EVENT_UNIT_DEATH)
call TriggerAddCondition(gg_trg_sha_wins,Condition(function Trig_sha_wins_Conditions))
call TriggerAddAction(gg_trg_sha_wins,function Trig_sha_wins_Actions)
endfunction
function Trig_Q_luoxuanwan_Func009C takes nothing returns boolean
if((GetSpellAbilityId()=='A03S'))then
return true
endif
if((GetSpellAbilityId()=='A03M'))then
return true
endif
return false
endfunction
function Trig_Q_luoxuanwan_Conditions takes nothing returns boolean
if(not Trig_Q_luoxuanwan_Func009C())then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan_Func008C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_MR[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan_Actions takes nothing returns nothing
set udg_Unit_MR[1]=GetTriggerUnit()
set udg_Unit_MR[2]=GetSpellTargetUnit()
set udg_All_unit_shu[56]=0.00
set udg_All_unit_shu[57]=0.00
set udg_All_unit_shu[58]=0.00
set udg_All_unit_shu[62]=0.00
set udg_All_unit_bez[14]=false
if(Trig_Q_luoxuanwan_Func008C())then
call TriggerSleepAction(0.10)
call UnitAddAbility(udg_Unit_MR[1],'A01H')
call SetUnitTimeScale(udg_Unit_MR[1],0.00)
call PauseUnit(udg_Unit_MR[1],true)
call CreateNUnitsAtLoc(1,'ucsC',GetOwningPlayer(udg_Unit_MR[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),115.00,(GetUnitFacing(udg_Unit_MR[1])-60.00)),(GetUnitFacing(udg_Unit_MR[1])+120.00))
call SetUnitAnimation(GetLastCreatedUnit(),"spell one")
call SetUnitTimeScale(GetLastCreatedUnit(),1.80)
set udg_Unit_MR[3]=GetLastCreatedUnit()
call TriggerSleepAction(0.50)
call CreateNUnitsAtLoc(1,'uplg',GetTriggerPlayer(),GetUnitLoc(udg_Unit_MR[3]),bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call KillUnit(GetLastCreatedUnit())
call KillUnit(udg_Unit_MR[3])
call SetUnitPathing(udg_Unit_MR[1],false)
call SetUnitTimeScale(udg_Unit_MR[1],1.30)
call SetUnitAnimation(udg_Unit_MR[1],"spell throw")
call EnableTrigger(gg_trg_Q_luoxuanwan2)
else
call UnitAddAbility(udg_Unit_MR[1],'A01H')
call TriggerSleepAction(0.10)
call SetUnitTimeScale(udg_Unit_MR[1],1.30)
call PauseUnit(udg_Unit_MR[1],true)
call SetUnitPathing(udg_Unit_MR[1],false)
call SetUnitAnimation(udg_Unit_MR[1],"spell throw")
call EnableTrigger(gg_trg_Q_luoxuanwan2)
endif
endfunction
function InitTrig_Q_luoxuanwan takes nothing returns nothing
set gg_trg_Q_luoxuanwan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_luoxuanwan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_luoxuanwan,Condition(function Trig_Q_luoxuanwan_Conditions))
call TriggerAddAction(gg_trg_Q_luoxuanwan,function Trig_Q_luoxuanwan_Actions)
endfunction
function Trig_Q_luoxuanwan2_Func001Func001C takes nothing returns boolean
if((udg_All_unit_shu[62]>=65.00))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_MR[2])==true))then
return true
endif
if((R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2])))>1200))then
return true
endif
return false
endfunction
function Trig_Q_luoxuanwan2_Func001Func007Func002Func001Func001C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_MR[1],GetUnitsInRangeOfLocAll(155.00,GetUnitLoc(udg_Unit_MR[2])))==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan2_Func001Func007Func002Func001C takes nothing returns boolean
if(not(udg_All_unit_bez[14]==false))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan2_Func001Func007Func002C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_MR[1],GetUnitsInRangeOfLocAll(400.00,GetUnitLoc(udg_Unit_MR[2])))==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan2_Func001Func007Func009C takes nothing returns boolean
if(not(udg_All_unit_bez[15]==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan2_Func001Func007C takes nothing returns boolean
if(not(udg_All_unit_shu[57]>=25.00))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan2_Func001C takes nothing returns boolean
if(not Trig_Q_luoxuanwan2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan2_Actions takes nothing returns nothing
if(Trig_Q_luoxuanwan2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitPathing(udg_Unit_MR[1],true)
call PauseUnit(udg_Unit_MR[1],false)
call UnitRemoveAbility(udg_Unit_MR[1],'A01H')
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
else
if(Trig_Q_luoxuanwan2_Func001Func007C())then
call DisableTrigger(GetTriggeringTrigger())
set udg_All_unit_shu[58]=GetUnitFacing(udg_Unit_MR[1])
call SetUnitPathing(udg_Unit_MR[2],false)
call EnableTrigger(gg_trg_Q_luoxuanwan4)
call SetUnitTimeScale(udg_Unit_MR[1],0.00)
if(Trig_Q_luoxuanwan2_Func001Func007Func009C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nbee',GetOwningPlayer(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]),GetRandomDirectionDeg())
call SetUnitTimeScale(GetLastCreatedUnit(),GetRandomReal(1.10,1.40))
call SetUnitScale(GetLastCreatedUnit(),2.10,2.10,2.10)
call SetUnitVertexColor(GetLastCreatedUnit(),50,80,255,255)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call GroupAddUnit(udg_All_unit_tm[35],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nbee',GetOwningPlayer(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]),bj_UNIT_FACING)
call SetUnitScale(GetLastCreatedUnit(),1.60,1.60,1.60)
call SetUnitVertexColor(GetLastCreatedUnit(),70,120,255,230)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call GroupAddUnit(udg_All_unit_tm[35],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endif
else
if(Trig_Q_luoxuanwan2_Func001Func007Func002C())then
if(Trig_Q_luoxuanwan2_Func001Func007Func002Func001C())then
set udg_All_unit_bez[14]=true
call SetUnitAnimation(udg_Unit_MR[1],"spell four")
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
call SetUnitPositionLocFacingBJ(udg_Unit_MR[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),12.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2])))
else
if(Trig_Q_luoxuanwan2_Func001Func007Func002Func001Func001C())then
call SetUnitPositionLocFacingBJ(udg_Unit_MR[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),135.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),GetUnitFacing(udg_Unit_MR[2]))
set udg_All_unit_shu[57]=(udg_All_unit_shu[57]+1)
else
call SetUnitPositionLocFacingBJ(udg_Unit_MR[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),12.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2])))
set udg_All_unit_shu[57]=(udg_All_unit_shu[57]+1)
endif
endif
else
call SetUnitPositionLocFacingBJ(udg_Unit_MR[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),18.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2])))
endif
set udg_All_unit_shu[62]=(udg_All_unit_shu[62]+1)
endif
endif
endfunction
function InitTrig_Q_luoxuanwan2 takes nothing returns nothing
set gg_trg_Q_luoxuanwan2=CreateTrigger()
call DisableTrigger(gg_trg_Q_luoxuanwan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_luoxuanwan2,0.02)
call TriggerAddAction(gg_trg_Q_luoxuanwan2,function Trig_Q_luoxuanwan2_Actions)
endfunction
function Trig_Q_luoxuanwan3_Func001Func002A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),GetUnitLoc(udg_Unit_MR[2]),GetUnitFacing(udg_Unit_MR[2]))
endfunction
function Trig_Q_luoxuanwan3_Func001Func004001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_Q_luoxuanwan3_Func001Func004001003001002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luoxuanwan3_Func001Func004001003001002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_MR[2])
endfunction
function Trig_Q_luoxuanwan3_Func001Func004001003001002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_MR[2]))
endfunction
function Trig_Q_luoxuanwan3_Func001Func004001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_MR[2]))))
endfunction
function Trig_Q_luoxuanwan3_Func001Func004001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luoxuanwan3_Func001Func004001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_MR[2]))))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luoxuanwan3_Func001Func004A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),40.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[2]),GetUnitLoc(GetEnumUnit()))),GetUnitFacing(GetEnumUnit()))
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_MR[1],'A03M'))*15.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luoxuanwan3_Func001Func006A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),GetUnitLoc(udg_Unit_MR[2]),GetUnitFacing(udg_Unit_MR[2]))
endfunction
function Trig_Q_luoxuanwan3_Func001Func009001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luoxuanwan3_Func001Func009001001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_Q_luoxuanwan3_Func001Func009001001003002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_MR[2])
endfunction
function Trig_Q_luoxuanwan3_Func001Func009001001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetFilterUnit()!=udg_Unit_MR[2]))
endfunction
function Trig_Q_luoxuanwan3_Func001Func009001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetFilterUnit()!=udg_Unit_MR[2]))))
endfunction
function Trig_Q_luoxuanwan3_Func001C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_Q_luoxuanwan3_Func001Func009001001003)))==true))then
return false
endif
if(not(IsTerrainPathableBJ(GetUnitLoc(udg_Unit_MR[2]),PATHING_TYPE_WALKABILITY)!=true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan3_Actions takes nothing returns nothing
if(Trig_Q_luoxuanwan3_Func001C())then
call SetUnitPositionLocFacingBJ(udg_Unit_MR[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[2]),30.00,udg_All_unit_shu[58]),(GetUnitFacing(udg_Unit_MR[2])+20.00))
call ForGroupBJ(udg_All_unit_tm[35],function Trig_Q_luoxuanwan3_Func001Func006A)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_MR[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call SetUnitPositionLocFacingBJ(udg_Unit_MR[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[2]),32.00,udg_All_unit_shu[58]),(GetUnitFacing(udg_Unit_MR[2])+20.00))
call ForGroupBJ(udg_All_unit_tm[35],function Trig_Q_luoxuanwan3_Func001Func002A)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_Q_luoxuanwan3_Func001Func004001003)),function Trig_Q_luoxuanwan3_Func001Func004A)
endif
endfunction
function InitTrig_Q_luoxuanwan3 takes nothing returns nothing
set gg_trg_Q_luoxuanwan3=CreateTrigger()
call DisableTrigger(gg_trg_Q_luoxuanwan3)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_luoxuanwan3,0.04)
call TriggerAddAction(gg_trg_Q_luoxuanwan3,function Trig_Q_luoxuanwan3_Actions)
endfunction
function Trig_Q_luoxuanwan4_Func001Func001C takes nothing returns boolean
if((udg_All_unit_shu[56]>=4.00))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_MR[2])==true))then
return true
endif
return false
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func002001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func002001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func002001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func002001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func002001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),((0.75*I2R(GetHeroStr(udg_Unit_MR[1],true)))*I2R(GetUnitAbilityLevelSwapped('A03S',udg_Unit_MR[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func005001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func005001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func005001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func005001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func005001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),((0.75*I2R(GetHeroStr(udg_Unit_MR[1],true)))*I2R(GetUnitAbilityLevelSwapped('A03S',udg_Unit_MR[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func007C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_MR[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func013Func010003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(udg_Unit_MR[1]))
endfunction
function Trig_Q_luoxuanwan4_Func001Func008Func013C takes nothing returns boolean
if(not(udg_All_unit_shu[59]<=100.00))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan4_Func001Func008C takes nothing returns boolean
if(not(udg_All_unit_bez[15]==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func003001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func003001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func003001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func003001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func003001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),((0.15*I2R(GetHeroStr(udg_Unit_MR[1],true)))*I2R(GetUnitAbilityLevelSwapped('A03S',udg_Unit_MR[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_MR[2],"war3mapImported\\T_icenova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func004001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func004001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func004001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func004001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func004001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002Func004A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),((0.15*I2R(GetHeroStr(udg_Unit_MR[1],true)))*I2R(GetUnitAbilityLevelSwapped('A03S',udg_Unit_MR[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_MR[2],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func002C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_MR[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func003001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func003001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func003001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func003001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func003001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),((0.25*I2R(GetHeroStr(udg_Unit_MR[1],true)))*I2R(GetUnitAbilityLevelSwapped('A03M',udg_Unit_MR[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_MR[2],"war3mapImported\\T_icenova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func004001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func004001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func004001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func004001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func004001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003Func004A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),((0.25*I2R(GetHeroStr(udg_Unit_MR[1],true)))*I2R(GetUnitAbilityLevelSwapped('A03M',udg_Unit_MR[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_MR[2],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luoxuanwan4_Func001Func011Func003C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_MR[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan4_Func001Func011C takes nothing returns boolean
if(not(udg_All_unit_bez[15]==true))then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan4_Func001C takes nothing returns boolean
if(not Trig_Q_luoxuanwan4_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Q_luoxuanwan4_Actions takes nothing returns nothing
if(Trig_Q_luoxuanwan4_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(udg_Unit_MR[1],false)
call SetUnitPathing(udg_Unit_MR[1],true)
call UnitRemoveAbility(udg_Unit_MR[1],'A01H')
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
call SetUnitPathing(udg_Unit_MR[2],true)
if(Trig_Q_luoxuanwan4_Func001Func008C())then
call CreateNUnitsAtLoc(1,'nckb',GetOwningPlayer(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call CreateNUnitsAtLoc(1,'o002',GetOwningPlayer(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]),bj_UNIT_FACING)
call SetUnitScale(GetLastCreatedUnit(),2.00,2.00,2.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
if(Trig_Q_luoxuanwan4_Func001Func008Func007C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_Q_luoxuanwan4_Func001Func008Func007Func005001003)),function Trig_Q_luoxuanwan4_Func001Func008Func007Func005A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(240.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_Q_luoxuanwan4_Func001Func008Func007Func002001003)),function Trig_Q_luoxuanwan4_Func001Func008Func007Func002A)
endif
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_MR[1],false)
call GroupClear(udg_All_unit_tm[35])
set udg_All_unit_bez[14]=false
set udg_All_unit_shu[59]=(udg_All_unit_shu[59]-(30.00*I2R(GetUnitAbilityLevel(udg_Unit_MR[1],'A03S'))))
if(Trig_Q_luoxuanwan4_Func001Func008Func013C())then
set udg_All_unit_bez[15]=false
set udg_All_unit_shu[59]=0.00
call SetUnitAbilityLevel(udg_Unit_MR[1],'A03V',1)
call UnitRemoveAbility(udg_Unit_MR[1],'A03W')
else
call CreateTextTagUnitBJ(("■|cFF0099FF"+I2S(R2I(udg_All_unit_shu[59]))),udg_Unit_MR[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),20.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_Q_luoxuanwan4_Func001Func008Func013Func010003001)))
endif
else
call EnableTrigger(gg_trg_Q_luoxuanwan3)
call TriggerSleepAction(0.40)
call PauseUnit(udg_Unit_MR[1],false)
call DisableTrigger(gg_trg_Q_luoxuanwan3)
call GroupClear(udg_All_unit_tm[35])
set udg_All_unit_bez[14]=false
endif
else
set udg_All_unit_shu[56]=(udg_All_unit_shu[56]+1)
call SetUnitPositionLocFacingBJ(udg_Unit_MR[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),135.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),GetUnitFacing(udg_Unit_MR[2]))
if(Trig_Q_luoxuanwan4_Func001Func011C())then
if(Trig_Q_luoxuanwan4_Func001Func011Func002C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(220.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_Q_luoxuanwan4_Func001Func011Func002Func003001003)),function Trig_Q_luoxuanwan4_Func001Func011Func002Func003A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(180.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_Q_luoxuanwan4_Func001Func011Func002Func004001003)),function Trig_Q_luoxuanwan4_Func001Func011Func002Func004A)
endif
else
if(Trig_Q_luoxuanwan4_Func001Func011Func003C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(220.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_Q_luoxuanwan4_Func001Func011Func003Func003001003)),function Trig_Q_luoxuanwan4_Func001Func011Func003Func003A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(170.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_Q_luoxuanwan4_Func001Func011Func003Func004001003)),function Trig_Q_luoxuanwan4_Func001Func011Func003Func004A)
endif
endif
endif
endfunction
function InitTrig_Q_luoxuanwan4 takes nothing returns nothing
set gg_trg_Q_luoxuanwan4=CreateTrigger()
call DisableTrigger(gg_trg_Q_luoxuanwan4)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_luoxuanwan4,0.25)
call TriggerAddAction(gg_trg_Q_luoxuanwan4,function Trig_Q_luoxuanwan4_Actions)
endfunction
function Trig_W_yingfenshen0_Conditions takes nothing returns boolean
if(not(GetLearnedSkill()=='AOmi'))then
return false
endif
return true
endfunction
function Trig_W_yingfenshen0_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(gg_trg_W_yingfenshen)
set udg_Unit_MR[1]=GetTriggerUnit()
endfunction
function InitTrig_W_yingfenshen0 takes nothing returns nothing
set gg_trg_W_yingfenshen0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_yingfenshen0,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_W_yingfenshen0,Condition(function Trig_W_yingfenshen0_Conditions))
call TriggerAddAction(gg_trg_W_yingfenshen0,function Trig_W_yingfenshen0_Actions)
endfunction
function Trig_W_yingfenshen_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetEventDamageSource())=='Obla'))then
return false
endif
if(not(GetRandomInt(1,25)==1))then
return false
endif
if(not(IsUnitAliveBJ(GetEventDamageSource())==true))then
return false
endif
if(not(IsUnitPausedBJ(GetEventDamageSource())!=true))then
return false
endif
return true
endfunction
function Trig_W_yingfenshen_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetEventDamageSource()),GetUnitLoc(GetEventDamageSource()),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A03N',GetUnitAbilityLevel(udg_Unit_MR[1],'AOmi'))
call IssueTargetOrderById(GetLastCreatedUnit(),852274,GetEventDamageSource())
endfunction
function InitTrig_W_yingfenshen takes nothing returns nothing
set gg_trg_W_yingfenshen=CreateTrigger()
call DisableTrigger(gg_trg_W_yingfenshen)
call YDWESyStemAnyUnitDamagedRegistTrigger(gg_trg_W_yingfenshen)
call TriggerAddCondition(gg_trg_W_yingfenshen,Condition(function Trig_W_yingfenshen_Conditions))
call TriggerAddAction(gg_trg_W_yingfenshen,function Trig_W_yingfenshen_Actions)
endfunction
function Trig_W_yingfenshen2_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03T'))then
return false
endif
return true
endfunction
function Trig_W_yingfenshen2_Func003Func010003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(udg_Unit_MR[1]))
endfunction
function Trig_W_yingfenshen2_Func003C takes nothing returns boolean
if(not(udg_All_unit_shu[59]<=100.00))then
return false
endif
return true
endfunction
function Trig_W_yingfenshen2_Actions takes nothing returns nothing
set udg_All_unit_shu[59]=(udg_All_unit_shu[59]-(25.00*I2R(GetUnitAbilityLevel(udg_Unit_MR[1],'A03T'))))
call TriggerSleepAction(0.01)
if(Trig_W_yingfenshen2_Func003C())then
set udg_All_unit_bez[15]=false
set udg_All_unit_shu[59]=0.00
call SetUnitAbilityLevel(udg_Unit_MR[1],'A03V',1)
call UnitRemoveAbility(udg_Unit_MR[1],'A03W')
else
call CreateTextTagUnitBJ(("■|cFF0099FF"+I2S(R2I(udg_All_unit_shu[59]))),udg_Unit_MR[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),20.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_W_yingfenshen2_Func003Func010003001)))
endif
endfunction
function InitTrig_W_yingfenshen2 takes nothing returns nothing
set gg_trg_W_yingfenshen2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_yingfenshen2,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_yingfenshen2,Condition(function Trig_W_yingfenshen2_Conditions))
call TriggerAddAction(gg_trg_W_yingfenshen2,function Trig_W_yingfenshen2_Actions)
endfunction
function Trig_E_fenshentishen_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Aspl'))then
return false
endif
return true
endfunction
function Trig_E_fenshentishen_Func009Func005001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_E_fenshentishen_Func009Func005001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_E_fenshentishen_Func009Func005001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_E_fenshentishen_Func009Func005001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_E_fenshentishen_Func009Func005001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_E_fenshentishen_Func009Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),500.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_E_fenshentishen_Func009C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_MR[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_E_fenshentishen_Actions takes nothing returns nothing
set udg_Unit_MR[1]=GetTriggerUnit()
set udg_All_unit_Dian[22]=GetUnitLoc(GetSpellTargetUnit())
call KillUnit(GetSpellTargetUnit())
call CreateNUnitsAtLoc(1,'uplg',GetTriggerPlayer(),udg_All_unit_Dian[22],bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call KillUnit(GetLastCreatedUnit())
call TriggerSleepAction(0.10)
if(Trig_E_fenshentishen_Func009C())then
call CreateNUnitsAtLoc(1,'e001',GetTriggerPlayer(),GetUnitLoc(udg_Unit_MR[1]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A03P',GetUnitAbilityLevel(udg_Unit_MR[1],'Aspl'))
call IssueTargetOrderById(GetLastCreatedUnit(),852101,udg_Unit_MR[1])
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(240.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_E_fenshentishen_Func009Func005001003)),function Trig_E_fenshentishen_Func009Func005A)
else
endif
call SetUnitPositionLoc(udg_Unit_MR[1],udg_All_unit_Dian[22])
call RemoveLocation(udg_All_unit_Dian[22])
endfunction
function InitTrig_E_fenshentishen takes nothing returns nothing
set gg_trg_E_fenshentishen=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_fenshentishen,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_fenshentishen,Condition(function Trig_E_fenshentishen_Conditions))
call TriggerAddAction(gg_trg_E_fenshentishen,function Trig_E_fenshentishen_Actions)
endfunction
function Trig_R_xianren_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03Q'))then
return false
endif
return true
endfunction
function Trig_R_xianren_Actions takes nothing returns nothing
set udg_Unit_MR[1]=GetTriggerUnit()
call EnableTrigger(gg_trg_R_xianren3)
call UnitAddAbility(udg_Unit_MR[1],'A03O')
endfunction
function InitTrig_R_xianren takes nothing returns nothing
set gg_trg_R_xianren=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_xianren,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_xianren,Condition(function Trig_R_xianren_Conditions))
call TriggerAddAction(gg_trg_R_xianren,function Trig_R_xianren_Actions)
endfunction
function Trig_R_xianren2_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03Q'))then
return false
endif
return true
endfunction
function Trig_R_xianren2_Func003C takes nothing returns boolean
if(not(udg_All_unit_shu[59]>=1000.00))then
return false
endif
if(not(udg_All_unit_bez[15]==false))then
return false
endif
return true
endfunction
function Trig_R_xianren2_Actions takes nothing returns nothing
call UnitRemoveAbility(udg_Unit_MR[1],'A03O')
call DisableTrigger(gg_trg_R_xianren3)
if(Trig_R_xianren2_Func003C())then
set udg_All_unit_bez[15]=true
call CreateNUnitsAtLoc(1,'ocat',GetOwningPlayer(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[1]),bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),2.50)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.80)
call SetUnitAbilityLevel(udg_Unit_MR[1],'A03V',2)
call UnitAddAbility(udg_Unit_MR[1],'A03W')
else
endif
endfunction
function InitTrig_R_xianren2 takes nothing returns nothing
set gg_trg_R_xianren2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_xianren2,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(gg_trg_R_xianren2,Condition(function Trig_R_xianren2_Conditions))
call TriggerAddAction(gg_trg_R_xianren2,function Trig_R_xianren2_Actions)
endfunction
function Trig_R_xianren3_Func002Func008003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(udg_Unit_MR[1]))
endfunction
function Trig_R_xianren3_Func002C takes nothing returns boolean
if(not(udg_All_unit_shu[59]>=(500.00+(500.00*I2R(GetUnitAbilityLevel(udg_Unit_MR[1],'A03Q'))))))then
return false
endif
return true
endfunction
function Trig_R_xianren3_Actions takes nothing returns nothing
set udg_All_unit_shu[59]=(udg_All_unit_shu[59]+100.00)
if(Trig_R_xianren3_Func002C())then
set udg_All_unit_shu[59]=(500.00+(500.00*I2R(GetUnitAbilityLevel(udg_Unit_MR[1],'A03Q'))))
call IssueImmediateOrderById(udg_Unit_MR[1],851972)
else
call CreateTextTagUnitBJ(("■|cFF0099FF"+I2S(R2I(udg_All_unit_shu[59]))),udg_Unit_MR[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),20.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.00)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_R_xianren3_Func002Func008003001)))
endif
endfunction
function InitTrig_R_xianren3 takes nothing returns nothing
set gg_trg_R_xianren3=CreateTrigger()
call DisableTrigger(gg_trg_R_xianren3)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_xianren3,1.00)
call TriggerAddAction(gg_trg_R_xianren3,function Trig_R_xianren3_Actions)
endfunction
function Trig_D_luoxuanshoulijian_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03X'))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian_Actions takes nothing returns nothing
set udg_Unit_MR[1]=GetTriggerUnit()
set udg_Unit_MR[2]=GetSpellTargetUnit()
set udg_All_unit_shu[56]=0.00
set udg_All_unit_shu[57]=0.00
set udg_All_unit_shu[58]=0.00
set udg_All_unit_shu[60]=0.00
set udg_All_unit_bez[14]=false
call TriggerSleepAction(0.10)
call UnitAddAbility(udg_Unit_MR[1],'A03Y')
call SetUnitTimeScale(udg_Unit_MR[1],0.00)
call PauseUnit(udg_Unit_MR[1],true)
call CreateNUnitsAtLoc(1,'ucsC',GetOwningPlayer(udg_Unit_MR[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),125.00,(GetUnitFacing(udg_Unit_MR[1])-35.00)),(GetUnitFacing(udg_Unit_MR[1])+150.00))
call SetUnitAnimation(GetLastCreatedUnit(),"spell one")
call SetUnitTimeScale(GetLastCreatedUnit(),1.80)
set udg_Unit_MR[3]=GetLastCreatedUnit()
call CreateNUnitsAtLoc(1,'ucsC',GetOwningPlayer(udg_Unit_MR[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),125.00,(GetUnitFacing(udg_Unit_MR[1])-75.00)),(GetUnitFacing(udg_Unit_MR[1])+100.00))
call SetUnitAnimation(GetLastCreatedUnit(),"spell one")
call SetUnitTimeScale(GetLastCreatedUnit(),1.80)
set udg_Unit_MR[5]=GetLastCreatedUnit()
call TriggerSleepAction(1.20)
call CreateNUnitsAtLoc(1,'uplg',GetTriggerPlayer(),GetUnitLoc(udg_Unit_MR[3]),bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call KillUnit(GetLastCreatedUnit())
call KillUnit(udg_Unit_MR[3])
call KillUnit(udg_Unit_MR[5])
call SetUnitPathing(udg_Unit_MR[1],false)
call SetUnitTimeScale(udg_Unit_MR[1],1.30)
call SetUnitAnimation(udg_Unit_MR[1],"spell throw")
call EnableTrigger(gg_trg_D_luoxuanshoulijian2)
endfunction
function InitTrig_D_luoxuanshoulijian takes nothing returns nothing
set gg_trg_D_luoxuanshoulijian=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_luoxuanshoulijian,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_luoxuanshoulijian,Condition(function Trig_D_luoxuanshoulijian_Conditions))
call TriggerAddAction(gg_trg_D_luoxuanshoulijian,function Trig_D_luoxuanshoulijian_Actions)
endfunction
function Trig_D_luoxuanshoulijian2_Func001Func006Func002Func001Func001C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_MR[1],GetUnitsInRangeOfLocAll(155.00,GetUnitLoc(udg_Unit_MR[2])))==true))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian2_Func001Func006Func002Func001C takes nothing returns boolean
if(not(udg_All_unit_bez[14]==false))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian2_Func001Func006Func002C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_MR[1],GetUnitsInRangeOfLocAll(400.00,GetUnitLoc(udg_Unit_MR[2])))==true))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian2_Func001Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[57]>=25.00))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian2_Func001C takes nothing returns boolean
if(not(IsUnitDeadBJ(udg_Unit_MR[2])==true))then
return false
endif
if(not(R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2])))>1200))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian2_Actions takes nothing returns nothing
if(Trig_D_luoxuanshoulijian2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitPathing(udg_Unit_MR[1],true)
call PauseUnit(udg_Unit_MR[1],false)
call UnitRemoveAbility(udg_Unit_MR[1],'A03Y')
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
else
if(Trig_D_luoxuanshoulijian2_Func001Func006C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifeBJ(udg_Unit_MR[1],(GetUnitState(udg_Unit_MR[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_MR[1],UNIT_STATE_LIFE)*0.50)))
call UnitDamageTargetBJ(udg_Unit_MR[1],udg_Unit_MR[2],(2.00*I2R(GetHeroStr(udg_Unit_MR[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
set udg_All_unit_bez[14]=false
set udg_All_unit_shu[58]=GetUnitFacing(udg_Unit_MR[1])
call UnitRemoveAbility(udg_Unit_MR[1],'A03Y')
call EnableTrigger(gg_trg_D_luoxuanshoulijian3)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_MR[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nbee',GetOwningPlayer(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]),GetRandomDirectionDeg())
call SetUnitTimeScale(GetLastCreatedUnit(),GetRandomReal(1.10,1.40))
call SetUnitScale(GetLastCreatedUnit(),1.90,1.90,1.90)
call SetUnitVertexColor(GetLastCreatedUnit(),50,80,255,255)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call GroupAddUnit(udg_All_unit_tm[35],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(0.10)
call SetUnitPathing(udg_Unit_MR[1],true)
call PauseUnit(udg_Unit_MR[1],false)
else
if(Trig_D_luoxuanshoulijian2_Func001Func006Func002C())then
if(Trig_D_luoxuanshoulijian2_Func001Func006Func002Func001C())then
set udg_All_unit_bez[14]=true
call SetUnitAnimation(udg_Unit_MR[1],"spell four")
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
call SetUnitPositionLocFacingBJ(udg_Unit_MR[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),12.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2])))
else
if(Trig_D_luoxuanshoulijian2_Func001Func006Func002Func001Func001C())then
call SetUnitPositionLocFacingBJ(udg_Unit_MR[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),135.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),GetUnitFacing(udg_Unit_MR[2]))
set udg_All_unit_shu[57]=(udg_All_unit_shu[57]+1)
else
call SetUnitPositionLocFacingBJ(udg_Unit_MR[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),12.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2])))
set udg_All_unit_shu[57]=(udg_All_unit_shu[57]+1)
endif
endif
else
call SetUnitPositionLocFacingBJ(udg_Unit_MR[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),18.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2])))
endif
endif
endif
endfunction
function InitTrig_D_luoxuanshoulijian2 takes nothing returns nothing
set gg_trg_D_luoxuanshoulijian2=CreateTrigger()
call DisableTrigger(gg_trg_D_luoxuanshoulijian2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_luoxuanshoulijian2,0.02)
call TriggerAddAction(gg_trg_D_luoxuanshoulijian2,function Trig_D_luoxuanshoulijian2_Actions)
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func004A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),GetUnitLoc(udg_Unit_MR[2]),GetUnitFacing(udg_Unit_MR[2]))
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func006001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func006001003001002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func006001003001002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_MR[2])
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func006001003001002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_MR[2]))
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func006001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_MR[2]))))
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func006001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func006001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_MR[2]))))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func006A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),40.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[2]),GetUnitLoc(GetEnumUnit()))),GetUnitFacing(GetEnumUnit()))
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),100.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func008A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),GetUnitLoc(udg_Unit_MR[2]),GetUnitFacing(udg_Unit_MR[2]))
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func011001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func011001001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func011001001003002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_MR[2])
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func011001001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetFilterUnit()!=udg_Unit_MR[2]))
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008Func011001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetFilterUnit()!=udg_Unit_MR[2]))))
endfunction
function Trig_D_luoxuanshoulijian3_Func001Func008C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_D_luoxuanshoulijian3_Func001Func008Func011001001003)))==true))then
return false
endif
if(not(IsTerrainPathableBJ(GetUnitLoc(udg_Unit_MR[2]),PATHING_TYPE_WALKABILITY)!=true))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian3_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[60]>=20.00))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian3_Actions takes nothing returns nothing
if(Trig_D_luoxuanshoulijian3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(gg_trg_D_luoxuanshoulijian4)
call GroupClear(udg_All_unit_tm[35])
set udg_All_unit_Dian[23]=GetUnitLoc(udg_Unit_MR[2])
call CreateNUnitsAtLoc(1,'nwad',GetOwningPlayer(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'oshm',GetOwningPlayer(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[2]),GetRandomDirectionDeg())
call SetUnitAbilityLevel(GetLastCreatedUnit(),'SCae',3)
call SetUnitTimeScale(GetLastCreatedUnit(),GetRandomReal(1.10,1.40))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
if(Trig_D_luoxuanshoulijian3_Func001Func008C())then
call SetUnitPositionLocFacingBJ(udg_Unit_MR[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[2]),35.00,udg_All_unit_shu[58]),(GetUnitFacing(udg_Unit_MR[2])+20.00))
call ForGroupBJ(udg_All_unit_tm[35],function Trig_D_luoxuanshoulijian3_Func001Func008Func008A)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_MR[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call SetUnitPositionLocFacingBJ(udg_Unit_MR[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[2]),32.00,udg_All_unit_shu[58]),(GetUnitFacing(udg_Unit_MR[2])+20.00))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_MR[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call ForGroupBJ(udg_All_unit_tm[35],function Trig_D_luoxuanshoulijian3_Func001Func008Func004A)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_MR[2]),Condition(function Trig_D_luoxuanshoulijian3_Func001Func008Func006001003)),function Trig_D_luoxuanshoulijian3_Func001Func008Func006A)
endif
set udg_All_unit_shu[60]=(udg_All_unit_shu[60]+1)
endif
endfunction
function InitTrig_D_luoxuanshoulijian3 takes nothing returns nothing
set gg_trg_D_luoxuanshoulijian3=CreateTrigger()
call DisableTrigger(gg_trg_D_luoxuanshoulijian3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_luoxuanshoulijian3,0.04)
call TriggerAddAction(gg_trg_D_luoxuanshoulijian3,function Trig_D_luoxuanshoulijian3_Actions)
endfunction
function Trig_D_luoxuanshoulijian4_Func001Func002001003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_D_luoxuanshoulijian4_Func001Func002001003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_luoxuanshoulijian4_Func001Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_D_luoxuanshoulijian4_Func001Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),I2R(GetHeroStr(udg_Unit_MR[1],true)),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_luoxuanshoulijian4_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[60]>=36.00))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijian4_Actions takes nothing returns nothing
if(Trig_D_luoxuanshoulijian4_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(udg_All_unit_Dian[23])
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(400.00,udg_All_unit_Dian[23],Condition(function Trig_D_luoxuanshoulijian4_Func001Func002001003)),function Trig_D_luoxuanshoulijian4_Func001Func002A)
set udg_All_unit_shu[60]=(udg_All_unit_shu[60]+1)
endif
endfunction
function InitTrig_D_luoxuanshoulijian4 takes nothing returns nothing
set gg_trg_D_luoxuanshoulijian4=CreateTrigger()
call DisableTrigger(gg_trg_D_luoxuanshoulijian4)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_luoxuanshoulijian4,0.10)
call TriggerAddAction(gg_trg_D_luoxuanshoulijian4,function Trig_D_luoxuanshoulijian4_Actions)
endfunction
function Trig_D_luoxuanshoulijianX1_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03Z'))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijianX1_Func008C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_MR[1])==true))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_MR[0])==true))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijianX1_Func009Func017Func010003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(udg_Unit_MR[1]))
endfunction
function Trig_D_luoxuanshoulijianX1_Func009Func017C takes nothing returns boolean
if(not(udg_All_unit_shu[59]<=100.00))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijianX1_Func009C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_MR[1])==true))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_MR[0])==true))then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijianX1_Actions takes nothing returns nothing
set udg_Unit_MR[1]=GetTriggerUnit()
set udg_Unit_MR[0]=GetSpellTargetUnit()
call TriggerSleepAction(0.10)
call UnitAddAbility(udg_Unit_MR[1],'A03Y')
call SetUnitTimeScale(udg_Unit_MR[1],0.00)
call PauseUnit(udg_Unit_MR[1],true)
call TriggerSleepAction(0.15)
if(Trig_D_luoxuanshoulijianX1_Func008C())then
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
call SetUnitAnimation(udg_Unit_MR[1],"spell three")
call SetUnitFacingToFaceLocTimed(udg_Unit_MR[1],GetUnitLoc(udg_Unit_MR[0]),1.00)
call TriggerSleepAction(1.40)
call SetUnitTimeScale(udg_Unit_MR[1],1.30)
else
call UnitRemoveAbility(udg_Unit_MR[1],'A03Y')
call PauseUnit(udg_Unit_MR[1],false)
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
endif
if(Trig_D_luoxuanshoulijianX1_Func009C())then
call SetUnitAnimation(udg_Unit_MR[1],"spell slam")
call TriggerSleepAction(0.10)
call CreateNUnitsAtLoc(1,'o005',GetOwningPlayer(udg_Unit_MR[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[1]),100.00,(GetUnitFacing(udg_Unit_MR[1])-25.00)),AngleBetweenPoints(GetUnitLoc(udg_Unit_MR[1]),GetUnitLoc(udg_Unit_MR[0])))
set udg_Unit_MR[6]=GetLastCreatedUnit()
set udg_All_unit_shu[60]=0.00
call UnitRemoveAbility(udg_Unit_MR[1],'A03Y')
call EnableTrigger(gg_trg_D_luoxuanshoulijianX2)
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_MR[1],false)
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
set udg_All_unit_shu[59]=(udg_All_unit_shu[59]-500.00)
if(Trig_D_luoxuanshoulijianX1_Func009Func017C())then
set udg_All_unit_bez[15]=false
set udg_All_unit_shu[59]=0.00
call SetUnitAbilityLevel(udg_Unit_MR[1],'A03V',1)
call UnitRemoveAbility(udg_Unit_MR[1],'A03W')
else
call CreateTextTagUnitBJ(("■|cFF0099FF"+I2S(R2I(udg_All_unit_shu[59]))),udg_Unit_MR[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),20.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_D_luoxuanshoulijianX1_Func009Func017Func010003001)))
endif
else
call UnitRemoveAbility(udg_Unit_MR[1],'A03Y')
call PauseUnit(udg_Unit_MR[1],false)
call SetUnitTimeScale(udg_Unit_MR[1],1.00)
endif
endfunction
function InitTrig_D_luoxuanshoulijianX1 takes nothing returns nothing
set gg_trg_D_luoxuanshoulijianX1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_luoxuanshoulijianX1,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_luoxuanshoulijianX1,Condition(function Trig_D_luoxuanshoulijianX1_Conditions))
call TriggerAddAction(gg_trg_D_luoxuanshoulijianX1,function Trig_D_luoxuanshoulijianX1_Actions)
endfunction
function Trig_D_luoxuanshoulijianX2_Func001Func001C takes nothing returns boolean
if((udg_All_unit_shu[60]>=20.00))then
return true
endif
if((DistanceBetweenPoints(GetUnitLoc(udg_Unit_MR[0]),GetUnitLoc(udg_Unit_MR[6]))<=150.00))then
return true
endif
return false
endfunction
function Trig_D_luoxuanshoulijianX2_Func001Func014001003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true)
endfunction
function Trig_D_luoxuanshoulijianX2_Func001Func014001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[36])==false)
endfunction
function Trig_D_luoxuanshoulijianX2_Func001Func014001003002002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_luoxuanshoulijianX2_Func001Func014001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[36])==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_D_luoxuanshoulijianX2_Func001Func014001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_MR[1]))==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[36])==false),(IsUnitAliveBJ(GetFilterUnit())==true))))
endfunction
function Trig_D_luoxuanshoulijianX2_Func001Func014A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_MR[1],GetEnumUnit(),I2R(GetHeroStr(udg_Unit_MR[1],true)),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[36],GetEnumUnit())
endfunction
function Trig_D_luoxuanshoulijianX2_Func001C takes nothing returns boolean
if(not Trig_D_luoxuanshoulijianX2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_D_luoxuanshoulijianX2_Actions takes nothing returns nothing
if(Trig_D_luoxuanshoulijianX2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
set udg_All_unit_shu[60]=20.00
call GroupClear(udg_All_unit_tm[36])
call KillUnit(udg_Unit_MR[6])
set udg_All_unit_Dian[23]=GetUnitLoc(udg_Unit_MR[6])
call CreateNUnitsAtLoc(1,'nwad',GetOwningPlayer(udg_Unit_MR[1]),udg_All_unit_Dian[23],GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'oshm',GetOwningPlayer(udg_Unit_MR[1]),udg_All_unit_Dian[23],GetRandomDirectionDeg())
call SetUnitAbilityLevel(GetLastCreatedUnit(),'SCae',3)
call SetUnitTimeScale(GetLastCreatedUnit(),GetRandomReal(1.10,1.40))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_D_luoxuanshoulijian4)
else
call SetUnitPositionLoc(udg_Unit_MR[6],PolarProjectionBJ(GetUnitLoc(udg_Unit_MR[6]),65.00,GetUnitFacing(udg_Unit_MR[6])))
call SetUnitScale(udg_Unit_MR[6],(0.90+(0.10*udg_All_unit_shu[60])),(0.90+(0.10*udg_All_unit_shu[60])),(0.90+(0.10*udg_All_unit_shu[60])))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(160.00,GetUnitLoc(udg_Unit_MR[6]),Condition(function Trig_D_luoxuanshoulijianX2_Func001Func014001003)),function Trig_D_luoxuanshoulijianX2_Func001Func014A)
set udg_All_unit_shu[60]=(udg_All_unit_shu[60]+1)
endif
endfunction
function InitTrig_D_luoxuanshoulijianX2 takes nothing returns nothing
set gg_trg_D_luoxuanshoulijianX2=CreateTrigger()
call DisableTrigger(gg_trg_D_luoxuanshoulijianX2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_luoxuanshoulijianX2,0.04)
call TriggerAddAction(gg_trg_D_luoxuanshoulijianX2,function Trig_D_luoxuanshoulijianX2_Actions)
endfunction
function Trig_W_chunzhida_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Awrs'))then
return false
endif
return true
endfunction
function Trig_W_chunzhida_Func004Func004001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_chunzhida_Func004Func004001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_W_chunzhida_Func004Func004001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_W_chunzhida_Func004Func004001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_chunzhida_Func004Func004001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_chunzhida_Func004Func004A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_XY[1],GetEnumUnit(),(udg_All_unit_shu[15]*I2R(GetHeroStr(udg_Unit_XY[1],true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_chunzhida_Func004C takes nothing returns boolean
if(not(udg_All_unit_shu[15]>=1.00))then
return false
endif
return true
endfunction
function Trig_W_chunzhida_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'njks',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
call SetUnitScale(GetLastCreatedUnit(),1.60,1.60,1.60)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
if(Trig_W_chunzhida_Func004C())then
call CreateNUnitsAtLoc(1,'o002',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(320.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_W_chunzhida_Func004Func004001003)),function Trig_W_chunzhida_Func004Func004A)
else
endif
endfunction
function InitTrig_W_chunzhida takes nothing returns nothing
set gg_trg_W_chunzhida=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_chunzhida,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_chunzhida,Condition(function Trig_W_chunzhida_Conditions))
call TriggerAddAction(gg_trg_W_chunzhida,function Trig_W_chunzhida_Actions)
endfunction
function Trig_E_xiaoyingneixin_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Ara2'))then
return false
endif
return true
endfunction
function Trig_E_xiaoyingneixin_Actions takes nothing returns nothing
set udg_Unit_XY[1]=GetTriggerUnit()
set udg_All_unit_shu[15]=0.00
call EnableTrigger(gg_trg_E_xiaoyingneixin2)
endfunction
function InitTrig_E_xiaoyingneixin takes nothing returns nothing
set gg_trg_E_xiaoyingneixin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_xiaoyingneixin,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_xiaoyingneixin,Condition(function Trig_E_xiaoyingneixin_Conditions))
call TriggerAddAction(gg_trg_E_xiaoyingneixin,function Trig_E_xiaoyingneixin_Actions)
endfunction
function Trig_E_xiaoyingneixin2_Func001Func012003001 takes nothing returns boolean
return(IsPlayerEnemy(GetFilterPlayer(),GetOwningPlayer(udg_Unit_XY[1]))==true)
endfunction
function Trig_E_xiaoyingneixin2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[15]==(3.00+I2R(GetUnitAbilityLevel(udg_Unit_XY[1],'Ara2')))))then
return false
endif
return true
endfunction
function Trig_E_xiaoyingneixin2_Actions takes nothing returns nothing
if(Trig_E_xiaoyingneixin2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
set udg_All_unit_shu[15]=0.00
else
set udg_All_unit_shu[15]=(udg_All_unit_shu[15]+1.00)
call AddSpecialEffectTargetUnitBJ("left hand",udg_Unit_XY[1],"Abilities\\Spells\\Items\\AIda\\AIdaTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectTargetUnitBJ("right hand",udg_Unit_XY[1],"Abilities\\Spells\\Items\\AIda\\AIdaTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ(("LV-"+I2S(R2I(udg_All_unit_shu[15]))),udg_Unit_XY[1],0,9.00,100,10.00,10.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),80.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.00)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_E_xiaoyingneixin2_Func001Func012003001)))
endif
endfunction
function InitTrig_E_xiaoyingneixin2 takes nothing returns nothing
set gg_trg_E_xiaoyingneixin2=CreateTrigger()
call DisableTrigger(gg_trg_E_xiaoyingneixin2)
call TriggerRegisterTimerEventPeriodic(gg_trg_E_xiaoyingneixin2,1.00)
call TriggerAddAction(gg_trg_E_xiaoyingneixin2,function Trig_E_xiaoyingneixin2_Actions)
endfunction
function Trig_R_gangshan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACfl'))then
return false
endif
return true
endfunction
function Trig_R_gangshan_Actions takes nothing returns nothing
set udg_Unit_XY[1]=GetTriggerUnit()
set udg_Unit_XY[2]=GetSpellTargetUnit()
call TriggerSleepAction(0.10)
call PauseUnitBJ(true,udg_Unit_XY[1])
call SetUnitPathing(udg_Unit_XY[1],false)
call SetUnitTimeScalePercent(udg_Unit_XY[1],300.00)
call SetUnitAnimationByIndex(udg_Unit_XY[1],3)
call UnitAddAbility(udg_Unit_XY[1],'A00A')
call EnableTrigger(gg_trg_R_gangshan2)
endfunction
function InitTrig_R_gangshan takes nothing returns nothing
set gg_trg_R_gangshan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_gangshan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_gangshan,Condition(function Trig_R_gangshan_Conditions))
call TriggerAddAction(gg_trg_R_gangshan,function Trig_R_gangshan_Actions)
endfunction
function Trig_R_gangshan2_Func001Func001C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_XY[2])==true))then
return true
endif
if((IsUnitInGroup(udg_Unit_XY[1],GetUnitsInRangeOfLocAll(100.00,GetUnitLoc(udg_Unit_XY[2])))==true))then
return true
endif
return false
endfunction
function Trig_R_gangshan2_Func001C takes nothing returns boolean
if(not Trig_R_gangshan2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_R_gangshan2_Actions takes nothing returns nothing
if(Trig_R_gangshan2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitAnimationByIndex(udg_Unit_XY[1],4)
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_XY[1]),GetUnitLoc(udg_Unit_XY[2]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AEsh',GetUnitAbilityLevel(udg_Unit_XY[1],'ACfl'))
call IssueTargetOrderById(GetLastCreatedUnit(),852527,udg_Unit_XY[2])
call TriggerSleepAction(0.20)
call UnitRemoveAbility(udg_Unit_XY[1],'A00A')
call SetUnitTimeScalePercent(udg_Unit_XY[1],100.00)
call SetUnitPathing(udg_Unit_XY[1],true)
call PauseUnitBJ(false,udg_Unit_XY[1])
else
call SetUnitPositionLocFacingLocBJ(udg_Unit_XY[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_XY[1]),12.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_XY[1]),GetUnitLoc(udg_Unit_XY[2]))),GetUnitLoc(udg_Unit_XY[2]))
endif
endfunction
function InitTrig_R_gangshan2 takes nothing returns nothing
set gg_trg_R_gangshan2=CreateTrigger()
call DisableTrigger(gg_trg_R_gangshan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_gangshan2,0.02)
call TriggerAddAction(gg_trg_R_gangshan2,function Trig_R_gangshan2_Actions)
endfunction
function Trig_D_yinghuachong_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A00C'))then
return false
endif
return true
endfunction
function Trig_D_yinghuachong_Func011001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_yinghuachong_Func011001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_D_yinghuachong_Func011001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_D_yinghuachong_Func011001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_yinghuachong_Func011001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_D_yinghuachong_Func011A takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),GetRandomInt(50,80))
call GroupAddUnit(udg_All_unit_tm[6],GetEnumUnit())
call UnitDamageTargetBJ(udg_Unit_XY[1],GetEnumUnit(),1000.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call UnitDamageTargetBJ(udg_Unit_XY[1],GetEnumUnit(),(udg_All_unit_shu[15]*I2R(GetHeroStr(udg_Unit_XY[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_yinghuachong_Actions takes nothing returns nothing
set udg_Unit_XY[1]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call UnitAddAbility(udg_Unit_XY[1],'A03U')
call PauseUnitBJ(true,udg_Unit_XY[1])
call SetUnitAnimationByIndex(udg_Unit_XY[1],2)
call TriggerSleepAction(0.10)
call CreateNUnitsAtLoc(1,'nhym',GetOwningPlayer(udg_Unit_XY[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_XY[1]),30.00,GetUnitFacing(udg_Unit_XY[1])),(GetUnitFacing(udg_Unit_XY[1])+180.00))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nanc',GetOwningPlayer(udg_Unit_XY[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_XY[1]),30.00,GetUnitFacing(udg_Unit_XY[1])),GetUnitFacing(udg_Unit_XY[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,PolarProjectionBJ(GetUnitLoc(udg_Unit_XY[1]),200.00,GetUnitFacing(udg_Unit_XY[1])),Condition(function Trig_D_yinghuachong_Func011001003)),function Trig_D_yinghuachong_Func011A)
call EnableTrigger(gg_trg_D_yinghuachong2)
call TriggerSleepAction(0.30)
call UnitRemoveAbility(udg_Unit_XY[1],'A03U')
call PauseUnitBJ(false,udg_Unit_XY[1])
endfunction
function InitTrig_D_yinghuachong takes nothing returns nothing
set gg_trg_D_yinghuachong=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_yinghuachong,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_yinghuachong,Condition(function Trig_D_yinghuachong_Conditions))
call TriggerAddAction(gg_trg_D_yinghuachong,function Trig_D_yinghuachong_Actions)
endfunction
function Trig_D_yinghuachong2_Func001Func002Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())<=8))then
return false
endif
return true
endfunction
function Trig_D_yinghuachong2_Func001Func002A takes nothing returns nothing
if(Trig_D_yinghuachong2_Func001Func002Func001C())then
call GroupRemoveUnit(udg_All_unit_tm[6],GetEnumUnit())
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),AngleBetweenPoints(GetUnitLoc(udg_Unit_XY[1]),GetUnitLoc(GetEnumUnit())))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-5))
endif
endfunction
function Trig_D_yinghuachong2_Func001C takes nothing returns boolean
if(not(CountUnitsInGroup(udg_All_unit_tm[6])==0))then
return false
endif
return true
endfunction
function Trig_D_yinghuachong2_Actions takes nothing returns nothing
if(Trig_D_yinghuachong2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
call ForGroupBJ(udg_All_unit_tm[6],function Trig_D_yinghuachong2_Func001Func002A)
endif
endfunction
function InitTrig_D_yinghuachong2 takes nothing returns nothing
set gg_trg_D_yinghuachong2=CreateTrigger()
call DisableTrigger(gg_trg_D_yinghuachong2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_yinghuachong2,0.04)
call TriggerAddAction(gg_trg_D_yinghuachong2,function Trig_D_yinghuachong2_Actions)
endfunction
function Trig_Q_yingxiaosha_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACfn'))then
return false
endif
return true
endfunction
function Trig_Q_yingxiaosha_Func004001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_yingxiaosha_Func004001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_LW[1]))==true)
endfunction
function Trig_Q_yingxiaosha_Func004001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_LW[1]))==true))
endfunction
function Trig_Q_yingxiaosha_Func004A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_LW[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_LW[1],'ACfn'))*I2R(50)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_yingxiaosha_Actions takes nothing returns nothing
set udg_Unit_LW[1]=GetTriggerUnit()
set udg_Unit_LW[2]=GetSpellTargetUnit()
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_LW[2]),Condition(function Trig_Q_yingxiaosha_Func004001003)),function Trig_Q_yingxiaosha_Func004A)
call RemoveLocation(GetUnitLoc(udg_Unit_LW[2]))
endfunction
function InitTrig_Q_yingxiaosha takes nothing returns nothing
set gg_trg_Q_yingxiaosha=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_yingxiaosha,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_yingxiaosha,Condition(function Trig_Q_yingxiaosha_Conditions))
call TriggerAddAction(gg_trg_Q_yingxiaosha,function Trig_Q_yingxiaosha_Actions)
endfunction
function Trig_W_baoshiqianying_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AHpx'))then
return false
endif
return true
endfunction
function Trig_W_baoshiqianying_Func002Func002A takes nothing returns nothing
call KillUnit(GetEnumUnit())
call GroupRemoveUnit(udg_All_unit_tm[4],GetEnumUnit())
endfunction
function Trig_W_baoshiqianying_Func002C takes nothing returns boolean
if(not(udg_All_unit_shu[6]<2.00))then
return false
endif
return true
endfunction
function Trig_W_baoshiqianying_Actions takes nothing returns nothing
set udg_Unit_LW[1]=GetTriggerUnit()
if(Trig_W_baoshiqianying_Func002C())then
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),150.00,GetUnitFacing(GetTriggerUnit()))
call CreateNUnitsAtLoc(1,'hdes',GetTriggerPlayer(),udg_ALL_PointPX,bj_UNIT_FACING)
call RemoveLocation(udg_ALL_PointPX)
call GroupAddUnit(udg_All_unit_tm[4],GetLastCreatedUnit())
set udg_All_unit_shu[6]=(udg_All_unit_shu[6]+1)
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl")
call RemoveLocation(GetUnitLoc(GetLastCreatedUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
else
call ForGroupBJ(udg_All_unit_tm[4],function Trig_W_baoshiqianying_Func002Func002A)
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),150.00,GetUnitFacing(GetTriggerUnit()))
call CreateNUnitsAtLoc(1,'hdes',GetTriggerPlayer(),udg_ALL_PointPX,bj_UNIT_FACING)
call RemoveLocation(udg_ALL_PointPX)
call GroupAddUnit(udg_All_unit_tm[4],GetLastCreatedUnit())
set udg_All_unit_shu[6]=(udg_All_unit_shu[6]+1)
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl")
call RemoveLocation(GetUnitLoc(GetLastCreatedUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function InitTrig_W_baoshiqianying takes nothing returns nothing
set gg_trg_W_baoshiqianying=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_baoshiqianying,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_baoshiqianying,Condition(function Trig_W_baoshiqianying_Conditions))
call TriggerAddAction(gg_trg_W_baoshiqianying,function Trig_W_baoshiqianying_Actions)
endfunction
function Trig_W_baoshiqianying2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetAttacker())=='hdes'))then
return false
endif
return true
endfunction
function Trig_W_baoshiqianying2_Actions takes nothing returns nothing
call KillUnit(GetAttacker())
endfunction
function InitTrig_W_baoshiqianying2 takes nothing returns nothing
set gg_trg_W_baoshiqianying2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_baoshiqianying2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_W_baoshiqianying2,Condition(function Trig_W_baoshiqianying2_Conditions))
call TriggerAddAction(gg_trg_W_baoshiqianying2,function Trig_W_baoshiqianying2_Actions)
endfunction
function Trig_W_baoshiqianying3_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='hdes'))then
return false
endif
return true
endfunction
function Trig_W_baoshiqianying3_Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_baoshiqianying3_Func006001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_LW[1]))==true)
endfunction
function Trig_W_baoshiqianying3_Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_LW[1]))==true))
endfunction
function Trig_W_baoshiqianying3_Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_LW[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_LW[1],'AHpx'))*I2R(GetHeroInt(udg_Unit_LW[1],true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\BallsOfFireMissile\\BallsOfFireMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_baoshiqianying3_Actions takes nothing returns nothing
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[6]=(udg_All_unit_shu[6]-1)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_W_baoshiqianying3_Func006001003)),function Trig_W_baoshiqianying3_Func006A)
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
endfunction
function InitTrig_W_baoshiqianying3 takes nothing returns nothing
set gg_trg_W_baoshiqianying3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_baoshiqianying3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_W_baoshiqianying3,Condition(function Trig_W_baoshiqianying3_Conditions))
call TriggerAddAction(gg_trg_W_baoshiqianying3,function Trig_W_baoshiqianying3_Actions)
endfunction
function Trig_R_yingfeng_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AUls'))then
return false
endif
return true
endfunction
function Trig_R_yingfeng_Actions takes nothing returns nothing
set udg_Unit_LW[1]=GetTriggerUnit()
endfunction
function InitTrig_R_yingfeng takes nothing returns nothing
set gg_trg_R_yingfeng=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_yingfeng,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_yingfeng,Condition(function Trig_R_yingfeng_Conditions))
call TriggerAddAction(gg_trg_R_yingfeng,function Trig_R_yingfeng_Actions)
endfunction
function Trig_R_yingfeng2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetAttacker())=='uloc'))then
return false
endif
return true
endfunction
function Trig_R_yingfeng2_Func005C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetAttackedUnitBJ(),'B00B')==true))then
return false
endif
return true
endfunction
function Trig_R_yingfeng2_Actions takes nothing returns nothing
call UnitApplyTimedLife(GetAttacker(),'BHwe',0.30)
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetAttackedUnitBJ()),350.00,AngleBetweenPoints(GetUnitLoc(GetAttacker()),GetUnitLoc(GetAttackedUnitBJ())))
call SetUnitPositionLoc(GetAttacker(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
if(Trig_R_yingfeng2_Func005C())then
call AddSpecialEffectLocBJ(GetUnitLoc(GetAttackedUnitBJ()),"Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl")
call RemoveLocation(GetUnitLoc(GetAttackedUnitBJ()))
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(GetAttackedUnitBJ()),"Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl")
call RemoveLocation(GetUnitLoc(GetAttackedUnitBJ()))
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(udg_Unit_LW[1],GetAttackedUnitBJ(),(2.40*I2R(GetHeroInt(udg_Unit_LW[1],true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
call AddSpecialEffectLocBJ(GetUnitLoc(GetAttackedUnitBJ()),"Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl")
call RemoveLocation(GetUnitLoc(GetAttackedUnitBJ()))
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(udg_Unit_LW[1],GetAttackedUnitBJ(),(1.00*I2R(GetHeroInt(udg_Unit_LW[1],true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endif
endfunction
function InitTrig_R_yingfeng2 takes nothing returns nothing
set gg_trg_R_yingfeng2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_yingfeng2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_R_yingfeng2,Condition(function Trig_R_yingfeng2_Conditions))
call TriggerAddAction(gg_trg_R_yingfeng2,function Trig_R_yingfeng2_Actions)
endfunction
function Trig_D_yingsha_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACfd'))then
return false
endif
return true
endfunction
function Trig_D_yingsha_Actions takes nothing returns nothing
set udg_Unit_LW[1]=GetTriggerUnit()
set udg_Unit_LW[2]=GetSpellTargetUnit()
set udg_All_unit_shu[7]=0.00
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_LW[1],true)
call SetUnitAnimation(udg_Unit_LW[1],"spell")
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_LW[1]),50.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_LW[2]),GetUnitLoc(udg_Unit_LW[1])))
call CreateNUnitsAtLocFacingLocBJ(1,'nhef',GetTriggerPlayer(),GetUnitLoc(udg_Unit_LW[1]),udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.20)
call RemoveLocation(udg_ALL_PointPX)
call RemoveLocation(GetUnitLoc(udg_Unit_LW[1]))
set udg_Unit_LW[3]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_D_yingsha2)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nhef',GetTriggerPlayer(),GetUnitLoc(udg_Unit_LW[1]),(GetUnitFacing(udg_Unit_LW[1])+GetRandomReal(-80.00,80.00)))
call RemoveLocation(GetUnitLoc(udg_Unit_LW[1]))
call GroupAddUnit(udg_All_unit_tm[30],GetLastCreatedUnit())
call SetUnitUserData(GetLastCreatedUnit(),bj_forLoopAIndex)
call SetUnitScale(GetLastCreatedUnit(),0.50,0.50,0.50)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.60)
call SaveLocationHandle(YDHT,(5),(GetUnitUserData(GetLastCreatedUnit())),(PolarProjectionBJ(GetUnitLoc(udg_Unit_LW[2]),GetRandomReal(0,350.00),GetRandomDirectionDeg())))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_D_yingsha takes nothing returns nothing
set gg_trg_D_yingsha=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_yingsha,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_yingsha,Condition(function Trig_D_yingsha_Conditions))
call TriggerAddAction(gg_trg_D_yingsha,function Trig_D_yingsha_Actions)
endfunction
function Trig_D_yingsha2_Func001Func003Func013001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_yingsha2_Func001Func003Func013001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_LW[1]))==true)
endfunction
function Trig_D_yingsha2_Func001Func003Func013001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_LW[1]))==true))
endfunction
function Trig_D_yingsha2_Func001Func003Func013A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_LW[1],GetEnumUnit(),(10.00*I2R(GetHeroInt(udg_Unit_LW[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_yingsha2_Func001Func003Func017Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_LW[2]),GetUnitLoc(GetEnumUnit()))<=200.00))then
return false
endif
return true
endfunction
function Trig_D_yingsha2_Func001Func003Func017A takes nothing returns nothing
if(Trig_D_yingsha2_Func001Func003Func017Func001C())then
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),22.00,GetUnitFacing(GetEnumUnit()))
call SetUnitPositionLocFacingLocBJ(GetEnumUnit(),udg_ALL_PointPX,(LoadLocationHandle(YDHT,(5),(GetUnitUserData(GetEnumUnit())))))
call RemoveLocation(udg_ALL_PointPX)
endif
endfunction
function Trig_D_yingsha2_Func001Func003C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_LW[2]),GetUnitLoc(udg_Unit_LW[3]))<=200.00))then
return false
endif
return true
endfunction
function Trig_D_yingsha2_Func001C takes nothing returns boolean
if(not(IsUnitDeadBJ(udg_Unit_LW[3])==true))then
return false
endif
return true
endfunction
function Trig_D_yingsha2_Actions takes nothing returns nothing
if(Trig_D_yingsha2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(udg_Unit_LW[1],false)
else
if(Trig_D_yingsha2_Func001Func003C())then
call DisableTrigger(GetTriggeringTrigger())
call GroupClear(udg_All_unit_tm[30])
call CreateNUnitsAtLoc(1,'nmed',GetOwningPlayer(udg_Unit_LW[1]),GetUnitLoc(udg_Unit_LW[2]),bj_UNIT_FACING)
call RemoveLocation(GetUnitLoc(udg_Unit_LW[2]))
call SetUnitVertexColor(GetLastCreatedUnit(),0,0,0,155)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call IssueImmediateOrderById(GetLastCreatedUnit(),852096)
set udg_Unit_LW[4]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_D_yingsha3)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_LW[2]),GetRandomReal(0,50.00),GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,'nser',GetOwningPlayer(udg_Unit_LW[1]),udg_ALL_PointPX,GetRandomDirectionDeg())
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call SetUnitAnimation(GetLastCreatedUnit(),"birth")
call SetUnitScale(GetLastCreatedUnit(),GetRandomReal(2.00,3.00),GetRandomReal(2.00,3.00),GetRandomReal(2.00,3.00))
call SetUnitTimeScale(GetLastCreatedUnit(),GetRandomReal(1.00,2.00))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_LW[2]),Condition(function Trig_D_yingsha2_Func001Func003Func013001003)),function Trig_D_yingsha2_Func001Func003Func013A)
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_LW[3]),13.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_LW[3]),GetUnitLoc(udg_Unit_LW[2])))
call SetUnitPositionLocFacingLocBJ(udg_Unit_LW[3],udg_ALL_PointPX,PolarProjectionBJ(GetUnitLoc(udg_Unit_LW[3]),300.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_LW[2]),GetUnitLoc(udg_Unit_LW[3]))))
call RemoveLocation(udg_ALL_PointPX)
call ForGroupBJ(udg_All_unit_tm[30],function Trig_D_yingsha2_Func001Func003Func017A)
endif
endif
endfunction
function InitTrig_D_yingsha2 takes nothing returns nothing
set gg_trg_D_yingsha2=CreateTrigger()
call DisableTrigger(gg_trg_D_yingsha2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_yingsha2,0.02)
call TriggerAddAction(gg_trg_D_yingsha2,function Trig_D_yingsha2_Actions)
endfunction
function Trig_D_yingsha3_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[7]>=50.00))then
return false
endif
return true
endfunction
function Trig_D_yingsha3_Actions takes nothing returns nothing
if(Trig_D_yingsha3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(udg_Unit_LW[1],false)
else
call SetUnitScale(udg_Unit_LW[4],udg_All_unit_shu[7],udg_All_unit_shu[7],udg_All_unit_shu[7])
set udg_All_unit_shu[7]=(udg_All_unit_shu[7]+2.00)
endif
endfunction
function InitTrig_D_yingsha3 takes nothing returns nothing
set gg_trg_D_yingsha3=CreateTrigger()
call DisableTrigger(gg_trg_D_yingsha3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_yingsha3,0.02)
call TriggerAddAction(gg_trg_D_yingsha3,function Trig_D_yingsha3_Actions)
endfunction
function Trig_Q_roudanzhanche_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACsf'))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche_Func001Func023002 takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),0)
endfunction
function Trig_Q_roudanzhanche_Func001Func045002 takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),0)
endfunction
function Trig_Q_roudanzhanche_Func001C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00Q')==true))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche_Actions takes nothing returns nothing
if(Trig_Q_roudanzhanche_Func001C())then
set udg_Unit_DC[1]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_DC[1],true)
call SetUnitAnimation(udg_Unit_DC[1],"spell channel")
call SetUnitTimeScale(udg_Unit_DC[1],1.50)
call CreateNUnitsAtLoc(1,'ubot',GetOwningPlayer(udg_Unit_DC[1]),GetUnitLoc(udg_Unit_DC[1]),bj_UNIT_FACING)
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
set udg_Unit_DC[3]=GetLastCreatedUnit()
call SelectUnitForPlayerSingle(udg_Unit_DC[3],GetOwningPlayer(udg_Unit_DC[1]))
call EnableTrigger(gg_trg_Q_roudanzhanche3)
call EnableTrigger(gg_trg_Q_roudanzhanche4)
call EnableTrigger(gg_trg_Q_roudanzhanche5)
call TriggerSleepAction(2.50)
call DisableTrigger(gg_trg_Q_roudanzhanche3)
call DisableTrigger(gg_trg_Q_roudanzhanche4)
call DisableTrigger(gg_trg_Q_roudanzhanche5)
call UnitRemoveAbility(udg_Unit_DC[1],'B00Q')
call SelectUnitForPlayerSingle(udg_Unit_DC[1],GetOwningPlayer(udg_Unit_DC[1]))
call KillUnit(udg_Unit_DC[3])
call SetUnitTimeScale(udg_Unit_DC[1],1.00)
call ResetUnitAnimation(udg_Unit_DC[1])
call PauseUnit(udg_Unit_DC[1],false)
call ForGroupBJ(udg_All_unit_tm[23],function Trig_Q_roudanzhanche_Func001Func023002)
call GroupClear(udg_All_unit_tm[23])
else
set udg_Unit_DC[1]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_DC[1],true)
call SetUnitAnimation(udg_Unit_DC[1],"spell channel")
call SetUnitTimeScale(udg_Unit_DC[1],2.00)
call CreateNUnitsAtLoc(1,'ubot',GetOwningPlayer(udg_Unit_DC[1]),GetUnitLoc(udg_Unit_DC[1]),bj_UNIT_FACING)
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
set udg_Unit_DC[3]=GetLastCreatedUnit()
call SelectUnitForPlayerSingle(udg_Unit_DC[3],GetOwningPlayer(udg_Unit_DC[1]))
call EnableTrigger(gg_trg_Q_roudanzhanche2)
call EnableTrigger(gg_trg_Q_roudanzhanche3)
call TriggerSleepAction(1.20)
call DisableTrigger(gg_trg_Q_roudanzhanche2)
call DisableTrigger(gg_trg_Q_roudanzhanche3)
call SelectUnitForPlayerSingle(udg_Unit_DC[1],GetOwningPlayer(udg_Unit_DC[1]))
call KillUnit(udg_Unit_DC[3])
call SetUnitTimeScale(udg_Unit_DC[1],1.00)
call ResetUnitAnimation(udg_Unit_DC[1])
call PauseUnit(udg_Unit_DC[1],false)
call ForGroupBJ(udg_All_unit_tm[23],function Trig_Q_roudanzhanche_Func001Func045002)
call GroupClear(udg_All_unit_tm[23])
endif
endfunction
function InitTrig_Q_roudanzhanche takes nothing returns nothing
set gg_trg_Q_roudanzhanche=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_roudanzhanche,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_roudanzhanche,Condition(function Trig_Q_roudanzhanche_Conditions))
call TriggerAddAction(gg_trg_Q_roudanzhanche,function Trig_Q_roudanzhanche_Actions)
endfunction
function Trig_Q_roudanzhanche2_Func001Func001Func001Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())<=0))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche2_Func001Func001Func001A takes nothing returns nothing
if(Trig_Q_roudanzhanche2_Func001Func001Func001Func001C())then
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),AngleBetweenPoints(GetUnitLoc(udg_Unit_DC[1]),GetUnitLoc(GetEnumUnit())))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-5))
endif
endfunction
function Trig_Q_roudanzhanche2_Func001Func001C takes nothing returns boolean
if(not(CountUnitsInGroup(udg_All_unit_tm[23])==0))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche2_Func001Func010001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_roudanzhanche2_Func001Func010001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true)
endfunction
function Trig_Q_roudanzhanche2_Func001Func010001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true))
endfunction
function Trig_Q_roudanzhanche2_Func001Func010001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_roudanzhanche2_Func001Func010001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_roudanzhanche2_Func001Func010Func004C takes nothing returns boolean
if(not(IsUnitInGroup(GetEnumUnit(),udg_All_unit_tm[23])==true))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche2_Func001Func010A takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),25.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_DC[1]),GetUnitLoc(GetEnumUnit())))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
if(Trig_Q_roudanzhanche2_Func001Func010Func004C())then
else
call GroupAddUnit(udg_All_unit_tm[23],GetEnumUnit())
call UnitDamageTarget(udg_Unit_DC[1],GetEnumUnit(),(I2R(GetHeroStr(udg_Unit_DC[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_DC[1],'ACsf'))),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitUserData(GetEnumUnit(),GetRandomInt(45,50))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endif
endfunction
function Trig_Q_roudanzhanche2_Func001Func012Func001Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())<=0))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche2_Func001Func012Func001A takes nothing returns nothing
if(Trig_Q_roudanzhanche2_Func001Func012Func001Func001C())then
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),AngleBetweenPoints(GetUnitLoc(udg_Unit_DC[1]),GetUnitLoc(GetEnumUnit())))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-5))
endif
endfunction
function Trig_Q_roudanzhanche2_Func001Func012C takes nothing returns boolean
if(not(CountUnitsInGroup(udg_All_unit_tm[23])==0))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_DC[1])==true))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche2_Actions takes nothing returns nothing
if(Trig_Q_roudanzhanche2_Func001C())then
call SelectUnitForPlayerSingle(udg_Unit_DC[3],GetOwningPlayer(udg_Unit_DC[1]))
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_DC[1]),36.00,GetUnitFacing(udg_Unit_DC[1]))
call SetUnitPositionLoc(udg_Unit_DC[1],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_DC[1]),"Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(180.00,GetUnitLoc(udg_Unit_DC[1]),Condition(function Trig_Q_roudanzhanche2_Func001Func010001003)),function Trig_Q_roudanzhanche2_Func001Func010A)
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
if(Trig_Q_roudanzhanche2_Func001Func012C())then
else
call ForGroupBJ(udg_All_unit_tm[23],function Trig_Q_roudanzhanche2_Func001Func012Func001A)
endif
else
if(Trig_Q_roudanzhanche2_Func001Func001C())then
else
call ForGroupBJ(udg_All_unit_tm[23],function Trig_Q_roudanzhanche2_Func001Func001Func001A)
endif
endif
endfunction
function InitTrig_Q_roudanzhanche2 takes nothing returns nothing
set gg_trg_Q_roudanzhanche2=CreateTrigger()
call DisableTrigger(gg_trg_Q_roudanzhanche2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_roudanzhanche2,0.04)
call TriggerAddAction(gg_trg_Q_roudanzhanche2,function Trig_Q_roudanzhanche2_Actions)
endfunction
function Trig_Q_roudanzhanche3_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='ubot'))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche3_Actions takes nothing returns nothing
call SetUnitFacing(udg_Unit_DC[1],AngleBetweenPoints(GetUnitLoc(udg_Unit_DC[1]),GetOrderPointLoc()))
endfunction
function InitTrig_Q_roudanzhanche3 takes nothing returns nothing
set gg_trg_Q_roudanzhanche3=CreateTrigger()
call DisableTrigger(gg_trg_Q_roudanzhanche3)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_roudanzhanche3,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(gg_trg_Q_roudanzhanche3,Condition(function Trig_Q_roudanzhanche3_Conditions))
call TriggerAddAction(gg_trg_Q_roudanzhanche3,function Trig_Q_roudanzhanche3_Actions)
endfunction
function Trig_Q_roudanzhanche4_Func001Func003Func001Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())<=0))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche4_Func001Func003Func001A takes nothing returns nothing
if(Trig_Q_roudanzhanche4_Func001Func003Func001Func001C())then
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),AngleBetweenPoints(GetUnitLoc(udg_Unit_DC[1]),GetUnitLoc(GetEnumUnit())))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-8))
endif
endfunction
function Trig_Q_roudanzhanche4_Func001Func003C takes nothing returns boolean
if(not(CountUnitsInGroup(udg_All_unit_tm[23])==0))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche4_Func001Func011001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_roudanzhanche4_Func001Func011001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true)
endfunction
function Trig_Q_roudanzhanche4_Func001Func011001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true))
endfunction
function Trig_Q_roudanzhanche4_Func001Func011001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_roudanzhanche4_Func001Func011001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_roudanzhanche4_Func001Func011Func001C takes nothing returns boolean
if(not(IsUnitInGroup(GetEnumUnit(),udg_All_unit_tm[23])==true))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche4_Func001Func011A takes nothing returns nothing
if(Trig_Q_roudanzhanche4_Func001Func011Func001C())then
else
call GroupAddUnit(udg_All_unit_tm[23],GetEnumUnit())
call UnitDamageTarget(udg_Unit_DC[1],GetEnumUnit(),(I2R(GetHeroStr(udg_Unit_DC[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_DC[1],'ACsf'))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitUserData(GetEnumUnit(),GetRandomInt(45,50))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endif
endfunction
function Trig_Q_roudanzhanche4_Func001Func013Func001Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())<=0))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche4_Func001Func013Func001A takes nothing returns nothing
if(Trig_Q_roudanzhanche4_Func001Func013Func001Func001C())then
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),AngleBetweenPoints(GetUnitLoc(udg_Unit_DC[1]),GetUnitLoc(GetEnumUnit())))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-8))
endif
endfunction
function Trig_Q_roudanzhanche4_Func001Func013C takes nothing returns boolean
if(not(CountUnitsInGroup(udg_All_unit_tm[23])==0))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche4_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_DC[1])==true))then
return false
endif
return true
endfunction
function Trig_Q_roudanzhanche4_Actions takes nothing returns nothing
if(Trig_Q_roudanzhanche4_Func001C())then
call SelectUnitForPlayerSingle(udg_Unit_DC[3],GetOwningPlayer(udg_Unit_DC[1]))
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_DC[1]),15.00,GetUnitFacing(udg_Unit_DC[1]))
call SetUnitPositionLoc(udg_Unit_DC[1],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_DC[1]),"Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(udg_Unit_DC[1]),Condition(function Trig_Q_roudanzhanche4_Func001Func011001003)),function Trig_Q_roudanzhanche4_Func001Func011A)
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
if(Trig_Q_roudanzhanche4_Func001Func013C())then
else
call ForGroupBJ(udg_All_unit_tm[23],function Trig_Q_roudanzhanche4_Func001Func013Func001A)
endif
else
call DisableTrigger(gg_trg_Q_roudanzhanche5)
if(Trig_Q_roudanzhanche4_Func001Func003C())then
else
call ForGroupBJ(udg_All_unit_tm[23],function Trig_Q_roudanzhanche4_Func001Func003Func001A)
endif
endif
endfunction
function InitTrig_Q_roudanzhanche4 takes nothing returns nothing
set gg_trg_Q_roudanzhanche4=CreateTrigger()
call DisableTrigger(gg_trg_Q_roudanzhanche4)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_roudanzhanche4,0.04)
call TriggerAddAction(gg_trg_Q_roudanzhanche4,function Trig_Q_roudanzhanche4_Actions)
endfunction
function Trig_Q_roudanzhanche5_Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_roudanzhanche5_Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true)
endfunction
function Trig_Q_roudanzhanche5_Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true))
endfunction
function Trig_Q_roudanzhanche5_Func002A takes nothing returns nothing
call UnitDamageTarget(udg_Unit_DC[1],GetEnumUnit(),(10.00*I2R(GetUnitAbilityLevel(udg_Unit_DC[1],'ACsf'))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_roudanzhanche5_Actions takes nothing returns nothing
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_DC[1]),Condition(function Trig_Q_roudanzhanche5_Func002001003)),function Trig_Q_roudanzhanche5_Func002A)
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
endfunction
function InitTrig_Q_roudanzhanche5 takes nothing returns nothing
set gg_trg_Q_roudanzhanche5=CreateTrigger()
call DisableTrigger(gg_trg_Q_roudanzhanche5)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_roudanzhanche5,0.20)
call TriggerAddAction(gg_trg_Q_roudanzhanche5,function Trig_Q_roudanzhanche5_Actions)
endfunction
function Trig_W_chaobeihua_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Arsq'))then
return false
endif
return true
endfunction
function Trig_W_chaobeihua_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'e003',GetOwningPlayer(GetTriggerUnit()),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call SetUnitAbilityLevel(GetLastCreatedUnit(),'ACbl',GetUnitAbilityLevel(GetTriggerUnit(),'Arsq'))
call IssueTargetOrderById(GetLastCreatedUnit(),852101,GetTriggerUnit())
endfunction
function InitTrig_W_chaobeihua takes nothing returns nothing
set gg_trg_W_chaobeihua=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_chaobeihua,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_chaobeihua,Condition(function Trig_W_chaobeihua_Conditions))
call TriggerAddAction(gg_trg_W_chaobeihua,function Trig_W_chaobeihua_Actions)
endfunction
function Trig_R_beihuayasi_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Aslp'))then
return false
endif
return true
endfunction
function Trig_R_beihuayasi_Func001C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00Q')==true))then
return false
endif
return true
endfunction
function Trig_R_beihuayasi_Actions takes nothing returns nothing
if(Trig_R_beihuayasi_Func001C())then
set udg_Unit_DC[1]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_DC[1],true)
call SetUnitAnimation(udg_Unit_DC[1],"spell slam")
call SetUnitTimeScale(udg_Unit_DC[1],1.55)
call TriggerSleepAction(1.00)
call CreateNUnitsAtLoc(1,'njks',GetOwningPlayer(udg_Unit_DC[1]),GetUnitLoc(udg_Unit_DC[1]),GetUnitFacing(udg_Unit_DC[1]))
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
call SetUnitScale(GetLastCreatedUnit(),3.50,3.50,3.50)
call SetUnitTimeScale(GetLastCreatedUnit(),1.20)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_DC[1]),GetUnitLoc(udg_Unit_DC[1]),bj_UNIT_FACING)
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AOws',5)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
call TriggerSleepAction(0.10)
call SetUnitTimeScale(udg_Unit_DC[1],1.00)
call UnitRemoveAbility(udg_Unit_DC[1],'B00Q')
call PauseUnit(udg_Unit_DC[1],false)
else
call CreateTextTagUnitBJ("非倍化术状态下,无法使用",GetTriggerUnit(),0.00,10.00,100.00,0.00,0.00,0)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),150.00,GetRandomReal(80.00,100.00))
call ShowTextTagForceBJ(true,GetLastCreatedTextTag(),GetPlayersAllies(GetTriggerPlayer()))
endif
endfunction
function InitTrig_R_beihuayasi takes nothing returns nothing
set gg_trg_R_beihuayasi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_beihuayasi,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_beihuayasi,Condition(function Trig_R_beihuayasi_Conditions))
call TriggerAddAction(gg_trg_R_beihuayasi,function Trig_R_beihuayasi_Actions)
endfunction
function Trig_D_chaoroudan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A01T'))then
return false
endif
return true
endfunction
function Trig_D_chaoroudan_Func001C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00Q')==true))then
return false
endif
return true
endfunction
function Trig_D_chaoroudan_Actions takes nothing returns nothing
if(Trig_D_chaoroudan_Func001C())then
set udg_Unit_DC[1]=GetTriggerUnit()
set udg_All_unit_shu[33]=0.00
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_DC[1],true)
call SetUnitAnimation(udg_Unit_DC[1],"spell throw")
call SetUnitTimeScale(udg_Unit_DC[1],1.50)
call TriggerSleepAction(0.50)
call TerrainDeformationRippleBJ(2.00,true,GetUnitLoc(udg_Unit_DC[1]),650.00,650.00,250.00,2.00,150.00)
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_DC[1]),GetUnitLoc(udg_Unit_DC[1]),bj_UNIT_FACING)
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AHtc',2)
call IssueImmediateOrderById(GetLastCreatedUnit(),852096)
call EnableTrigger(gg_trg_D_chaoroudan2)
else
call CreateTextTagUnitBJ("非倍化术状态下,无法使用",GetTriggerUnit(),0.00,10.00,100.00,0.00,0.00,0)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),150.00,GetRandomReal(80.00,100.00))
call ShowTextTagForceBJ(true,GetLastCreatedTextTag(),GetPlayersAllies(GetTriggerPlayer()))
endif
endfunction
function InitTrig_D_chaoroudan takes nothing returns nothing
set gg_trg_D_chaoroudan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_chaoroudan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_chaoroudan,Condition(function Trig_D_chaoroudan_Conditions))
call TriggerAddAction(gg_trg_D_chaoroudan,function Trig_D_chaoroudan_Actions)
endfunction
function Trig_D_chaoroudan2_Func001Func001C takes nothing returns boolean
if((udg_All_unit_shu[33]>=6.00))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_DC[1])==true))then
return true
endif
return false
endfunction
function Trig_D_chaoroudan2_Func001Func014001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_chaoroudan2_Func001Func014001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true)
endfunction
function Trig_D_chaoroudan2_Func001Func014001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DC[1]))==true))
endfunction
function Trig_D_chaoroudan2_Func001Func014A takes nothing returns nothing
call UnitDamageTarget(udg_Unit_DC[1],GetEnumUnit(),(2.00*I2R(GetHeroStr(udg_Unit_DC[1],true))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_chaoroudan2_Func001C takes nothing returns boolean
if(not Trig_D_chaoroudan2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_D_chaoroudan2_Actions takes nothing returns nothing
if(Trig_D_chaoroudan2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(0.20)
call ResetUnitAnimation(udg_Unit_DC[1])
call SetUnitTimeScale(udg_Unit_DC[1],1.00)
call UnitRemoveAbility(udg_Unit_DC[1],'B00Q')
call PauseUnit(udg_Unit_DC[1],false)
else
call CreateNUnitsAtLoc(1,'unec',GetOwningPlayer(udg_Unit_DC[1]),GetUnitLoc(udg_Unit_DC[1]),GetUnitFacing(udg_Unit_DC[1]))
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',4.00)
call SetUnitVertexColor(GetLastCreatedUnit(),50,150,255,255)
call SetUnitTimeScale(GetLastCreatedUnit(),0.65)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(450.00,GetUnitLoc(udg_Unit_DC[1]),Condition(function Trig_D_chaoroudan2_Func001Func014001003)),function Trig_D_chaoroudan2_Func001Func014A)
call RemoveLocation(GetUnitLoc(udg_Unit_DC[1]))
set udg_All_unit_shu[33]=(udg_All_unit_shu[33]+1)
endif
endfunction
function InitTrig_D_chaoroudan2 takes nothing returns nothing
set gg_trg_D_chaoroudan2=CreateTrigger()
call DisableTrigger(gg_trg_D_chaoroudan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_chaoroudan2,0.12)
call TriggerAddAction(gg_trg_D_chaoroudan2,function Trig_D_chaoroudan2_Actions)
endfunction
function Trig_Q_caosiqiu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A00L'))then
return false
endif
return true
endfunction
function Trig_Q_caosiqiu_Func003001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_caosiqiu_Func003001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_Q_caosiqiu_Func003001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_Q_caosiqiu_Func003001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_caosiqiu_Func003001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_caosiqiu_Func003A takes nothing returns nothing
call CreateNUnitsAtLocFacingLocBJ(1,'e003',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetEnumUnit()))
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A037',((GetUnitAbilityLevel(GetTriggerUnit(),'AEar')/2)+GetUnitAbilityLevel(GetTriggerUnit(),'A00L')))
call IssueTargetOrderById(GetLastCreatedUnit(),852095,GetEnumUnit())
endfunction
function Trig_Q_caosiqiu_Actions takes nothing returns nothing
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(600.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_Q_caosiqiu_Func003001003)),function Trig_Q_caosiqiu_Func003A)
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
endfunction
function InitTrig_Q_caosiqiu takes nothing returns nothing
set gg_trg_Q_caosiqiu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_caosiqiu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_caosiqiu,Condition(function Trig_Q_caosiqiu_Conditions))
call TriggerAddAction(gg_trg_Q_caosiqiu,function Trig_Q_caosiqiu_Actions)
endfunction
function Trig_W_baoshanyu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANc2'))then
return false
endif
return true
endfunction
function Trig_W_baoshanyu_Func009001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_baoshanyu_Func009001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_TT[1]))==true)
endfunction
function Trig_W_baoshanyu_Func009001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_TT[1]))==true))
endfunction
function Trig_W_baoshanyu_Func009A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_TT[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_TT[1],'ANc2'))*(0.90*I2R(GetHeroAgi(udg_Unit_TT[1],true)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"abilities\\weapons\\catapult\\catapultmissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endfunction
function Trig_W_baoshanyu_Actions takes nothing returns nothing
set udg_Unit_TT[1]=GetTriggerUnit()
set udg_All_unit_Dian[7]=GetSpellTargetLoc()
call TriggerSleepAction(0.50)
call CreateNUnitsAtLoc(1,'hbsh',GetTriggerPlayer(),udg_All_unit_Dian[7],0.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call SetUnitTimeScale(GetLastCreatedUnit(),1.60)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ohun',GetTriggerPlayer(),udg_All_unit_Dian[7],(60.00*I2R(bj_forLoopAIndex)))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(150.00,udg_All_unit_Dian[7],Condition(function Trig_W_baoshanyu_Func009001003)),function Trig_W_baoshanyu_Func009A)
call RemoveLocation(udg_All_unit_Dian[7])
endfunction
function InitTrig_W_baoshanyu takes nothing returns nothing
set gg_trg_W_baoshanyu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_baoshanyu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_baoshanyu,Condition(function Trig_W_baoshanyu_Conditions))
call TriggerAddAction(gg_trg_W_baoshanyu,function Trig_W_baoshanyu_Actions)
endfunction
function Trig_R_caojuchongzou_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEst'))then
return false
endif
return true
endfunction
function Trig_R_caojuchongzou_Actions takes nothing returns nothing
set udg_Unit_TT[1]=GetTriggerUnit()
set udg_All_unit_shu[16]=0.00
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=18
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'owyv',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),(20.00*I2R(bj_forLoopAIndex)))
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call GroupAddUnit(udg_All_unit_tm[7],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_R_caojuchongzou2)
endfunction
function InitTrig_R_caojuchongzou takes nothing returns nothing
set gg_trg_R_caojuchongzou=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_caojuchongzou,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_caojuchongzou,Condition(function Trig_R_caojuchongzou_Conditions))
call TriggerAddAction(gg_trg_R_caojuchongzou,function Trig_R_caojuchongzou_Actions)
endfunction
function Trig_R_caojuchongzou2_Func001Func004Func003005001001002003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_caojuchongzou2_Func001Func004Func003005001001002003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true)
endfunction
function Trig_R_caojuchongzou2_Func001Func004Func003005001001002003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true))
endfunction
function Trig_R_caojuchongzou2_Func001Func004A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
call GroupRemoveUnit(udg_All_unit_tm[7],GetEnumUnit())
call CreateNUnitsAtLocFacingLocBJ(1,'owyv',GetOwningPlayer(udg_Unit_TT[1]),GetUnitLoc(GetEnumUnit()),GetUnitLoc(FirstOfGroup(GetRandomSubGroup(1,GetUnitsInRangeOfLocMatching(550.00,GetUnitLoc(udg_Unit_TT[1]),Condition(function Trig_R_caojuchongzou2_Func001Func004Func003005001001002003))))))
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call GroupAddUnit(udg_All_unit_tm[31],GetLastCreatedUnit())
endfunction
function Trig_R_caojuchongzou2_Func001Func006Func001C takes nothing returns boolean
if(not(IsTerrainPathableBJ(GetUnitLoc(GetEnumUnit()),PATHING_TYPE_WALKABILITY)==true))then
return false
endif
return true
endfunction
function Trig_R_caojuchongzou2_Func001Func006A takes nothing returns nothing
if(Trig_R_caojuchongzou2_Func001Func006Func001C())then
call RemoveUnit(GetEnumUnit())
call GroupRemoveUnit(udg_All_unit_tm[7],GetEnumUnit())
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),43.00,GetUnitFacing(GetEnumUnit()))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
endif
endfunction
function Trig_R_caojuchongzou2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[16]>=10.00))then
return false
endif
return true
endfunction
function Trig_R_caojuchongzou2_Actions takes nothing returns nothing
if(Trig_R_caojuchongzou2_Func001C())then
set udg_All_unit_shu[16]=0.00
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(gg_trg_R_caojuchongzou3)
call ForGroupBJ(udg_All_unit_tm[7],function Trig_R_caojuchongzou2_Func001Func004A)
call GroupClear(udg_All_unit_tm[7])
else
call ForGroupBJ(udg_All_unit_tm[7],function Trig_R_caojuchongzou2_Func001Func006A)
set udg_All_unit_shu[16]=(udg_All_unit_shu[16]+1.00)
endif
endfunction
function InitTrig_R_caojuchongzou2 takes nothing returns nothing
set gg_trg_R_caojuchongzou2=CreateTrigger()
call DisableTrigger(gg_trg_R_caojuchongzou2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_caojuchongzou2,0.04)
call TriggerAddAction(gg_trg_R_caojuchongzou2,function Trig_R_caojuchongzou2_Actions)
endfunction
function Trig_R_caojuchongzou3_Func001Func002002 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true)
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true))
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_TT[1],GetEnumUnit(),I2R(GetHeroAgi(udg_Unit_TT[1],true)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001Func009Func002001001003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true)
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001Func009Func002001001003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001Func009Func002001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001Func009C takes nothing returns boolean
if((IsTerrainPathableBJ(GetUnitLoc(GetEnumUnit()),PATHING_TYPE_WALKABILITY)==true))then
return true
endif
if((IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(115.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_R_caojuchongzou3_Func001Func004Func001Func009Func002001001003)))!=true))then
return true
endif
return false
endfunction
function Trig_R_caojuchongzou3_Func001Func004Func001C takes nothing returns boolean
if(not Trig_R_caojuchongzou3_Func001Func004Func001Func009C())then
return false
endif
if(not(IsUnitAliveBJ(GetEnumUnit())==true))then
return false
endif
return true
endfunction
function Trig_R_caojuchongzou3_Func001Func004A takes nothing returns nothing
if(Trig_R_caojuchongzou3_Func001Func004Func001C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(120.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_R_caojuchongzou3_Func001Func004Func001Func003001003)),function Trig_R_caojuchongzou3_Func001Func004Func001Func003A)
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call KillUnit(GetEnumUnit())
call GroupRemoveUnit(udg_All_unit_tm[31],GetEnumUnit())
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),46.00,GetUnitFacing(GetEnumUnit()))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
endif
endfunction
function Trig_R_caojuchongzou3_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[16]>=16.00))then
return false
endif
return true
endfunction
function Trig_R_caojuchongzou3_Actions takes nothing returns nothing
if(Trig_R_caojuchongzou3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call ForGroupBJ(udg_All_unit_tm[31],function Trig_R_caojuchongzou3_Func001Func002002)
call GroupClear(udg_All_unit_tm[31])
else
call ForGroupBJ(udg_All_unit_tm[31],function Trig_R_caojuchongzou3_Func001Func004A)
set udg_All_unit_shu[16]=(udg_All_unit_shu[16]+1.00)
endif
endfunction
function InitTrig_R_caojuchongzou3 takes nothing returns nothing
set gg_trg_R_caojuchongzou3=CreateTrigger()
call DisableTrigger(gg_trg_R_caojuchongzou3)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_caojuchongzou3,0.04)
call TriggerAddAction(gg_trg_R_caojuchongzou3,function Trig_R_caojuchongzou3_Actions)
endfunction
function Trig_D_jusanhua_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AOs2'))then
return false
endif
return true
endfunction
function Trig_D_jusanhua_Actions takes nothing returns nothing
set udg_Unit_TT[1]=GetTriggerUnit()
call CreateNUnitsAtLocFacingLocBJ(1,'otbr',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call IssueImmediateOrderById(GetLastCreatedUnit(),852556)
set udg_Unit_TT[2]=GetLastCreatedUnit()
call GroupClear(udg_All_unit_tm[8])
call EnableTrigger(gg_trg_D_jusanhua3)
endfunction
function InitTrig_D_jusanhua takes nothing returns nothing
set gg_trg_D_jusanhua=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_jusanhua,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_jusanhua,Condition(function Trig_D_jusanhua_Conditions))
call TriggerAddAction(gg_trg_D_jusanhua,function Trig_D_jusanhua_Actions)
endfunction
function Trig_D_jusanhua2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='owar'))then
return false
endif
return true
endfunction
function Trig_D_jusanhua2_Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_jusanhua2_Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true)
endfunction
function Trig_D_jusanhua2_Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true))
endfunction
function Trig_D_jusanhua2_Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_TT[1],GetEnumUnit(),I2R(GetHeroAgi(udg_Unit_TT[1],true)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_jusanhua2_Actions takes nothing returns nothing
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_D_jusanhua2_Func002001003)),function Trig_D_jusanhua2_Func002A)
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
endfunction
function InitTrig_D_jusanhua2 takes nothing returns nothing
set gg_trg_D_jusanhua2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_jusanhua2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_D_jusanhua2,Condition(function Trig_D_jusanhua2_Conditions))
call TriggerAddAction(gg_trg_D_jusanhua2,function Trig_D_jusanhua2_Actions)
endfunction
function Trig_D_jusanhua3_Func001Func001Func009001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_jusanhua3_Func001Func001Func009001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[8])!=true)
endfunction
function Trig_D_jusanhua3_Func001Func001Func009001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true)
endfunction
function Trig_D_jusanhua3_Func001Func001Func009001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[8])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true))
endfunction
function Trig_D_jusanhua3_Func001Func001Func009001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[8])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true))))
endfunction
function Trig_D_jusanhua3_Func001Func001Func009A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_TT[1],GetEnumUnit(),(I2R(GetHeroAgi(udg_Unit_TT[1],true))*4.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call GroupAddUnit(udg_All_unit_tm[8],GetEnumUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_jusanhua3_Func001Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_TT[1]),GetUnitLoc(udg_Unit_TT[2]))>=1200.00))then
return false
endif
return true
endfunction
function Trig_D_jusanhua3_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_TT[2])==true))then
return false
endif
return true
endfunction
function Trig_D_jusanhua3_Actions takes nothing returns nothing
if(Trig_D_jusanhua3_Func001C())then
if(Trig_D_jusanhua3_Func001Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call UnitPauseTimedLife(udg_Unit_TT[2],true)
call EnableTrigger(gg_trg_D_jusanhua4)
call GroupClear(udg_All_unit_tm[8])
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_TT[2]),35.00,GetUnitFacing(udg_Unit_TT[2]))
call SetUnitPositionLocFacingBJ(udg_Unit_TT[2],udg_ALL_PointPX,GetUnitFacing(udg_Unit_TT[2]))
call RemoveLocation(udg_ALL_PointPX)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(240.00,GetUnitLoc(udg_Unit_TT[2]),Condition(function Trig_D_jusanhua3_Func001Func001Func009001003)),function Trig_D_jusanhua3_Func001Func001Func009A)
call RemoveLocation(GetUnitLoc(udg_Unit_TT[2]))
endif
else
call DisableTrigger(GetTriggeringTrigger())
endif
endfunction
function InitTrig_D_jusanhua3 takes nothing returns nothing
set gg_trg_D_jusanhua3=CreateTrigger()
call DisableTrigger(gg_trg_D_jusanhua3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_jusanhua3,0.04)
call TriggerAddAction(gg_trg_D_jusanhua3,function Trig_D_jusanhua3_Actions)
endfunction
function Trig_D_jusanhua4_Func001Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_jusanhua4_Func001Func006001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[8])!=true)
endfunction
function Trig_D_jusanhua4_Func001Func006001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true)
endfunction
function Trig_D_jusanhua4_Func001Func006001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[8])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true))
endfunction
function Trig_D_jusanhua4_Func001Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[8])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_TT[1]))==true))))
endfunction
function Trig_D_jusanhua4_Func001Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_TT[1],GetEnumUnit(),(I2R(GetHeroAgi(udg_Unit_TT[1],true))*3.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call GroupAddUnit(udg_All_unit_tm[8],GetEnumUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_jusanhua4_Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_TT[1]),GetUnitLoc(udg_Unit_TT[2]))>=100.00))then
return false
endif
return true
endfunction
function Trig_D_jusanhua4_Actions takes nothing returns nothing
if(Trig_D_jusanhua4_Func001C())then
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_TT[2]),32.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_TT[2]),GetUnitLoc(udg_Unit_TT[1])))
call SetUnitPositionLocFacingBJ(udg_Unit_TT[2],udg_ALL_PointPX,AngleBetweenPoints(GetUnitLoc(udg_Unit_TT[2]),GetUnitLoc(udg_Unit_TT[1])))
call RemoveLocation(udg_ALL_PointPX)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(240.00,GetUnitLoc(udg_Unit_TT[2]),Condition(function Trig_D_jusanhua4_Func001Func006001003)),function Trig_D_jusanhua4_Func001Func006A)
call RemoveLocation(GetUnitLoc(udg_Unit_TT[2]))
else
call DisableTrigger(GetTriggeringTrigger())
call KillUnit(udg_Unit_TT[2])
endif
endfunction
function InitTrig_D_jusanhua4 takes nothing returns nothing
set gg_trg_D_jusanhua4=CreateTrigger()
call DisableTrigger(gg_trg_D_jusanhua4)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_jusanhua4,0.04)
call TriggerAddAction(gg_trg_D_jusanhua4,function Trig_D_jusanhua4_Actions)
endfunction
function Trig_Q_baguakongzhang_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Aeye'))then
return false
endif
return true
endfunction
function Trig_Q_baguakongzhang_Func006C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00D')==true))then
return false
endif
return true
endfunction
function Trig_Q_baguakongzhang_Actions takes nothing returns nothing
set udg_Unit_NC[1]=GetTriggerUnit()
call CreateNUnitsAtLocFacingLocBJ(1,'e000',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A00V',GetUnitAbilityLevel(GetTriggerUnit(),'Aeye'))
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852218,GetSpellTargetLoc())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ugho',GetOwningPlayer(udg_Unit_NC[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),GetRandomReal(100.00,350.00),(GetUnitFacing(udg_Unit_NC[1])+GetRandomReal(-20.00,20.00))),GetRandomDirectionDeg())
call KillUnit(GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if(Trig_Q_baguakongzhang_Func006C())then
call TriggerSleepAction(0.05)
call PauseUnit(udg_Unit_NC[1],true)
call SetUnitAnimation(udg_Unit_NC[1],"stand channel")
call SetUnitTimeScale(udg_Unit_NC[1],1.30)
call UnitAddAbility(udg_Unit_NC[1],'A00Y')
call TriggerSleepAction(0.40)
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),GetUnitLoc(udg_Unit_NC[1]),GetUnitFacing(udg_Unit_NC[1]))
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A00V',(GetUnitAbilityLevel(udg_Unit_NC[1],'Aeye')/2))
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852218,PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),400.00,GetUnitFacing(udg_Unit_NC[1])))
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_NC[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),256,GetUnitFacing(udg_Unit_NC[1])),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AOws',4)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
call CreateNUnitsAtLoc(1,'nanc',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),100.00,GetUnitFacing(udg_Unit_NC[1])),GetUnitFacing(udg_Unit_NC[1]))
call SetUnitScale(GetLastCreatedUnit(),0.60,0.60,0.60)
call SetUnitVertexColor(GetLastCreatedUnit(),0,255,255,255)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=15
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ugho',GetOwningPlayer(udg_Unit_NC[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),GetRandomReal(100.00,500.00),(GetUnitFacing(udg_Unit_NC[1])+GetRandomReal(-20.00,20.00))),GetRandomDirectionDeg())
call KillUnit(GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(0.20)
call UnitRemoveAbility(udg_Unit_NC[1],'A00Y')
call SetUnitTimeScale(udg_Unit_NC[1],1.00)
call PauseUnit(udg_Unit_NC[1],false)
else
endif
endfunction
function InitTrig_Q_baguakongzhang takes nothing returns nothing
set gg_trg_Q_baguakongzhang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_baguakongzhang,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_baguakongzhang,Condition(function Trig_Q_baguakongzhang_Conditions))
call TriggerAddAction(gg_trg_Q_baguakongzhang,function Trig_Q_baguakongzhang_Actions)
endfunction
function Trig_W_huitian_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A01K'))then
return false
endif
return true
endfunction
function Trig_W_huitian_Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_huitian_Func003001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true)
endfunction
function Trig_W_huitian_Func003001003002002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_huitian_Func003001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_huitian_Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))))
endfunction
function Trig_W_huitian_Func003A takes nothing returns nothing
call UnitDamageTarget(udg_Unit_NC[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_NC[1],'A01K'))*I2R(GetHeroAgi(udg_Unit_NC[1],true))),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_All_unit_tm[14],GetEnumUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_huitian_Actions takes nothing returns nothing
set udg_Unit_NC[1]=GetTriggerUnit()
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(280.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_W_huitian_Func003001003)),function Trig_W_huitian_Func003A)
call EnableTrigger(gg_trg_W_huitian2)
call TriggerSleepAction(0.20)
call DisableTrigger(gg_trg_W_huitian2)
call GroupClear(udg_All_unit_tm[14])
endfunction
function InitTrig_W_huitian takes nothing returns nothing
set gg_trg_W_huitian=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_huitian,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_huitian,Condition(function Trig_W_huitian_Conditions))
call TriggerAddAction(gg_trg_W_huitian,function Trig_W_huitian_Actions)
endfunction
function Trig_W_huitian2_Func002A takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),23.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(GetEnumUnit()))))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_huitian2_Actions takes nothing returns nothing
call ForGroupBJ(udg_All_unit_tm[14],function Trig_W_huitian2_Func002A)
endfunction
function InitTrig_W_huitian2 takes nothing returns nothing
set gg_trg_W_huitian2=CreateTrigger()
call DisableTrigger(gg_trg_W_huitian2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_huitian2,0.04)
call TriggerAddAction(gg_trg_W_huitian2,function Trig_W_huitian2_Actions)
endfunction
function Trig_E_baiyan_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("immolation")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Hpal'))then
return false
endif
return true
endfunction
function Trig_E_baiyan_Actions takes nothing returns nothing
call UnitAddAbility(GetTriggerUnit(),'A027')
call SetUnitAbilityLevel(GetTriggerUnit(),'A027',2)
endfunction
function InitTrig_E_baiyan takes nothing returns nothing
set gg_trg_E_baiyan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_baiyan,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_E_baiyan,Condition(function Trig_E_baiyan_Conditions))
call TriggerAddAction(gg_trg_E_baiyan,function Trig_E_baiyan_Actions)
endfunction
function Trig_E_baiyan2_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("unimmolation")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Hpal'))then
return false
endif
return true
endfunction
function Trig_E_baiyan2_Actions takes nothing returns nothing
call UnitRemoveAbility(GetTriggerUnit(),'A027')
endfunction
function InitTrig_E_baiyan2 takes nothing returns nothing
set gg_trg_E_baiyan2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_baiyan2,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_E_baiyan2,Condition(function Trig_E_baiyan2_Conditions))
call TriggerAddAction(gg_trg_E_baiyan2,function Trig_E_baiyan2_Actions)
endfunction
function Trig_R_64zhang_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANso'))then
return false
endif
return true
endfunction
function Trig_R_64zhang_Actions takes nothing returns nothing
set udg_Unit_NC[1]=GetTriggerUnit()
set udg_Unit_NC[2]=GetSpellTargetUnit()
set udg_All_unit_shu[23]=0.00
set udg_All_unit_shu[24]=AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[2]))
call CreateTextTagUnitBJ(("|cFF33FF00"+(I2S(2)+"|r 掌")),udg_Unit_NC[2],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call TriggerSleepAction(0.10)
call CreateNUnitsAtLoc(1,'e001',GetTriggerPlayer(),GetUnitLoc(udg_Unit_NC[1]),bj_UNIT_FACING)
call IssueTargetOrderById(GetLastCreatedUnit(),852095,udg_Unit_NC[2])
call PauseUnit(udg_Unit_NC[1],true)
call SetUnitTimeScale(udg_Unit_NC[1],5.00)
call SetUnitAnimationByIndex(udg_Unit_NC[1],5)
call EnableTrigger(gg_trg_R_64zhang2)
endfunction
function InitTrig_R_64zhang takes nothing returns nothing
set gg_trg_R_64zhang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_64zhang,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_64zhang,Condition(function Trig_R_64zhang_Conditions))
call TriggerAddAction(gg_trg_R_64zhang,function Trig_R_64zhang_Actions)
endfunction
function Trig_R_64zhang2_Func001Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[23]<1.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001Func001Func006Func001Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=27.00))then
return false
endif
if(not(udg_All_unit_shu[23]<28.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001Func001Func006Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=19.00))then
return false
endif
if(not(udg_All_unit_shu[23]<27.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001Func001Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=18.00))then
return false
endif
if(not(udg_All_unit_shu[23]<19.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=13.00))then
return false
endif
if(not(udg_All_unit_shu[23]<18.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=12.00))then
return false
endif
if(not(udg_All_unit_shu[23]<13.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=6.00))then
return false
endif
if(not(udg_All_unit_shu[23]<12.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007Func001Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=5.00))then
return false
endif
if(not(udg_All_unit_shu[23]<6.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=3.00))then
return false
endif
if(not(udg_All_unit_shu[23]<5.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007Func007C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=2.00))then
return false
endif
if(not(udg_All_unit_shu[23]<3.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001Func007C takes nothing returns boolean
if(not(udg_All_unit_shu[23]>=1.00))then
return false
endif
if(not(udg_All_unit_shu[23]<2.00))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_NC[1])==true))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_NC[2])==true))then
return false
endif
return true
endfunction
function Trig_R_64zhang2_Actions takes nothing returns nothing
if(Trig_R_64zhang2_Func001C())then
if(Trig_R_64zhang2_Func001Func006C())then
call SetUnitPositionLoc(udg_Unit_NC[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),12.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[2]))))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_NC[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_NC[2],"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+0.50)
call UnitDamageTargetBJ(udg_Unit_NC[1],udg_Unit_NC[2],(0.25*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
endif
if(Trig_R_64zhang2_Func001Func007C())then
call CreateTextTagUnitBJ(("|cFF33FF00"+(I2S(4)+"|r 掌")),udg_Unit_NC[2],0,11.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
else
if(Trig_R_64zhang2_Func001Func007Func007C())then
call SetUnitTimeScale(udg_Unit_NC[1],8.00)
call SetUnitAnimationByIndex(udg_Unit_NC[1],4)
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_NC[2],"Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
call UnitDamageTargetBJ(udg_Unit_NC[1],udg_Unit_NC[2],(0.25*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
if(Trig_R_64zhang2_Func001Func007Func007Func001C())then
call SetUnitAnimationByIndex(udg_Unit_NC[1],7)
call UnitAddAbility(udg_Unit_NC[1],'A03R')
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_NC[2],"abilities\\weapons\\catapult\\catapultmissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
call UnitDamageTargetBJ(udg_Unit_NC[1],udg_Unit_NC[2],(0.25*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
if(Trig_R_64zhang2_Func001Func007Func007Func001Func001C())then
call SetUnitPositionLoc(udg_Unit_NC[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),100.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[2]))))
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
call CreateTextTagUnitBJ(("|cFF33FF00"+(I2S(8)+"|r 掌")),udg_Unit_NC[2],0,12.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call UnitDamageTargetBJ(udg_Unit_NC[1],udg_Unit_NC[2],(1.00*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
if(Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001C())then
call SetUnitAnimation(udg_Unit_NC[1],"attack")
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_NC[2],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitPositionLocFacingLocBJ(udg_Unit_NC[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),GetRandomReal(100.00,160.00),(AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[2]))+GetRandomReal(20.00,60.00))),GetUnitLoc(udg_Unit_NC[2]))
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
call UnitDamageTargetBJ(udg_Unit_NC[1],udg_Unit_NC[2],(0.25*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
if(Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001C())then
call SetUnitTimeScale(udg_Unit_NC[1],2.00)
call SetUnitAnimationByIndex(udg_Unit_NC[1],2)
call SetUnitPositionLocFacingBJ(udg_Unit_NC[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),100.00,(udg_All_unit_shu[24]+180.00)),udg_All_unit_shu[24])
call CreateTextTagUnitBJ(("|cFF33FF00"+(I2S(16)+"|r 掌")),udg_Unit_NC[2],0,13.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
else
if(Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001Func001C())then
call SetUnitPositionLoc(udg_Unit_NC[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),20.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[2]))))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_NC[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_NC[2],"Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
call UnitDamageTargetBJ(udg_Unit_NC[1],udg_Unit_NC[2],(0.80*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
if(Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001Func001Func006C())then
call SetUnitAnimationByIndex(udg_Unit_NC[1],10)
call CreateTextTagUnitBJ(("|cFF33FF00"+(I2S(32)+"|r 掌")),udg_Unit_NC[2],0,14.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
else
if(Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001Func001Func006Func001C())then
call SetUnitAnimation(udg_Unit_NC[1],"attack")
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_NC[2],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitPositionLocFacingLocBJ(udg_Unit_NC[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),100.00,(AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[2]),GetUnitLoc(udg_Unit_NC[1]))+0.00)),GetUnitLoc(udg_Unit_NC[2]))
call SetUnitPositionLocFacingLocBJ(udg_Unit_NC[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),20.00,(AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[2]))+GetRandomReal(-20.00,20.00))),GetUnitLoc(udg_Unit_NC[1]))
set udg_All_unit_shu[23]=(udg_All_unit_shu[23]+1.00)
call UnitDamageTargetBJ(udg_Unit_NC[1],udg_Unit_NC[2],(0.25*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
if(Trig_R_64zhang2_Func001Func007Func007Func001Func001Func001Func001Func001Func006Func001Func001C())then
call CreateTextTagUnitBJ(("|cFF33FF00"+(I2S(64)+"|r 掌")),udg_Unit_NC[2],0,15.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.80)
call DisableTrigger(GetTriggeringTrigger())
call UnitRemoveAbility(udg_Unit_NC[1],'A03R')
call SetUnitTimeScale(udg_Unit_NC[1],1.30)
call SetUnitAnimation(udg_Unit_NC[1],"stand channel")
call UnitAddAbility(udg_Unit_NC[1],'A00Y')
call CreateNUnitsAtLoc(1,'umtw',GetOwningPlayer(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[1]),0.00)
call SetUnitPositionLocFacingBJ(GetLastCreatedUnit(),GetUnitLoc(GetLastCreatedUnit()),(GetUnitFacing(GetLastCreatedUnit())+90.00))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.50)
call TriggerSleepAction(0.40)
call CreateNUnitsAtLoc(1,'ownr',GetOwningPlayer(udg_Unit_NC[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),130.00,GetUnitFacing(udg_Unit_NC[1])),GetUnitFacing(udg_Unit_NC[1]))
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call SetUnitPositionLoc(udg_Unit_NC[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),150.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[2]))))
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_NC[2],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(0.05)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call UnitDamageTargetBJ(udg_Unit_NC[1],udg_Unit_NC[2],(3.50*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nanc',GetOwningPlayer(udg_Unit_NC[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),150.00,GetUnitFacing(udg_Unit_NC[1])),GetUnitFacing(udg_Unit_NC[1]))
call SetUnitScale(GetLastCreatedUnit(),0.80,0.80,0.80)
call SetUnitVertexColor(GetLastCreatedUnit(),0,255,0,255)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call CreateNUnitsAtLoc(1,'nspc',GetOwningPlayer(udg_Unit_NC[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),150.00,GetUnitFacing(udg_Unit_NC[1])),GetUnitFacing(udg_Unit_NC[1]))
call KillUnit(GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TerrainDeformationRippleBJ(0.20,false,GetUnitLoc(udg_Unit_NC[2]),230.00,230.00,64,0.10,160.00)
call UnitRemoveAbility(udg_Unit_NC[1],'A00Y')
call EnableTrigger(gg_trg_R_64zhang3)
call TriggerSleepAction(0.20)
call DisableTrigger(gg_trg_R_64zhang3)
call UnitRemoveAbility(udg_Unit_NC[2],'BPSE')
call PauseUnit(udg_Unit_NC[1],false)
call SetUnitTimeScale(udg_Unit_NC[1],1.00)
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
call DisableTrigger(GetTriggeringTrigger())
call UnitRemoveAbility(udg_Unit_NC[1],'A03R')
call UnitRemoveAbility(udg_Unit_NC[2],'BPSE')
call PauseUnit(udg_Unit_NC[1],false)
call SetUnitTimeScale(udg_Unit_NC[1],1.00)
endif
endfunction
function InitTrig_R_64zhang2 takes nothing returns nothing
set gg_trg_R_64zhang2=CreateTrigger()
call DisableTrigger(gg_trg_R_64zhang2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_64zhang2,0.15)
call TriggerAddAction(gg_trg_R_64zhang2,function Trig_R_64zhang2_Actions)
endfunction
function Trig_R_64zhang3_Actions takes nothing returns nothing
call SetUnitPositionLocFacingLocBJ(udg_Unit_NC[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),30.00,(AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[1]),GetUnitLoc(udg_Unit_NC[2]))+GetRandomReal(-20.00,20.00))),GetUnitLoc(udg_Unit_NC[1]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_NC[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function InitTrig_R_64zhang3 takes nothing returns nothing
set gg_trg_R_64zhang3=CreateTrigger()
call DisableTrigger(gg_trg_R_64zhang3)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_64zhang3,0.04)
call TriggerAddAction(gg_trg_R_64zhang3,function Trig_R_64zhang3_Actions)
endfunction
function Trig_D_poshanji_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACfb'))then
return false
endif
return true
endfunction
function Trig_D_poshanji_Actions takes nothing returns nothing
set udg_Unit_NC[1]=GetTriggerUnit()
set udg_Unit_NC[2]=GetSpellTargetUnit()
call UnitAddAbility(udg_Unit_NC[1],'A010')
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_NC[1],true)
call SetUnitPositionLocFacingLocBJ(udg_Unit_NC[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[2]),100.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_NC[2]),GetUnitLoc(udg_Unit_NC[1]))),GetUnitLoc(udg_Unit_NC[2]))
call SetUnitAnimation(udg_Unit_NC[1],"Spell Swim")
call CreateNUnitsAtLoc(1,'nhea',GetOwningPlayer(udg_Unit_NC[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),80.00,GetUnitFacing(udg_Unit_NC[1])),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
call TriggerSleepAction(0.40)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ucry',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),(70.00*I2R(bj_forLoopAIndex)),GetUnitFacing(udg_Unit_NC[1])),GetUnitFacing(udg_Unit_NC[1]))
call SetUnitScale(GetLastCreatedUnit(),(1.50+(0.40*I2R(bj_forLoopAIndex))),(1.50+(0.40*I2R(bj_forLoopAIndex))),(1.50+(0.40*I2R(bj_forLoopAIndex))))
call SetUnitTimeScale(GetLastCreatedUnit(),1.50)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.50)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call CreateNUnitsAtLoc(1,'nanc',GetTriggerPlayer(),GetUnitLoc(udg_Unit_NC[1]),GetUnitFacing(udg_Unit_NC[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),GetUnitLoc(udg_Unit_NC[1]),GetUnitFacing(udg_Unit_NC[1]))
set udg_Unit_NC[3]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_D_poshanji2)
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_NC[1]),40.00)
call TriggerSleepAction(0.20)
call DisableTrigger(gg_trg_D_poshanji2)
call PauseUnitBJ(false,udg_Unit_NC[1])
call UnitRemoveAbility(udg_Unit_NC[1],'A010')
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_NC[1]))
call GroupClear(udg_All_unit_tm[15])
endfunction
function InitTrig_D_poshanji takes nothing returns nothing
set gg_trg_D_poshanji=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_poshanji,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_poshanji,Condition(function Trig_D_poshanji_Conditions))
call TriggerAddAction(gg_trg_D_poshanji,function Trig_D_poshanji_Actions)
endfunction
function Trig_D_poshanji2_Func004001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_poshanji2_Func004001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[15])!=true)
endfunction
function Trig_D_poshanji2_Func004001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_NC[1]))==true)
endfunction
function Trig_D_poshanji2_Func004001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[15])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_NC[1]))==true))
endfunction
function Trig_D_poshanji2_Func004001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[15])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_NC[1]))==true))))
endfunction
function Trig_D_poshanji2_Func004Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()),GetUnitLoc(udg_Unit_NC[1]))<=350.00))then
return false
endif
return true
endfunction
function Trig_D_poshanji2_Func004A takes nothing returns nothing
if(Trig_D_poshanji2_Func004Func001C())then
call UnitDamageTargetBJ(udg_Unit_NC[1],GetEnumUnit(),(10.00*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
call UnitDamageTargetBJ(udg_Unit_NC[1],GetEnumUnit(),(6.00*I2R(GetHeroAgi(udg_Unit_NC[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endif
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[15],GetEnumUnit())
endfunction
function Trig_D_poshanji2_Actions takes nothing returns nothing
call SetUnitPositionLoc(udg_Unit_NC[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[1]),10.00,(GetUnitFacing(udg_Unit_NC[1])+180.00)))
call SetUnitPositionLocFacingBJ(udg_Unit_NC[3],PolarProjectionBJ(GetUnitLoc(udg_Unit_NC[3]),80.00,GetUnitFacing(udg_Unit_NC[3])),GetUnitFacing(udg_Unit_NC[3]))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(220.00,GetUnitLoc(udg_Unit_NC[3]),Condition(function Trig_D_poshanji2_Func004001003)),function Trig_D_poshanji2_Func004A)
endfunction
function InitTrig_D_poshanji2 takes nothing returns nothing
set gg_trg_D_poshanji2=CreateTrigger()
call DisableTrigger(gg_trg_D_poshanji2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_poshanji2,0.04)
call TriggerAddAction(gg_trg_D_poshanji2,function Trig_D_poshanji2_Actions)
endfunction
function Trig_Q_muyexuanguang_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANwm'))then
return false
endif
return true
endfunction
function Trig_Q_muyexuanguang_Func004001002003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_muyexuanguang_Func004001002003002001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true)
endfunction
function Trig_Q_muyexuanguang_Func004001002003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true)
endfunction
function Trig_Q_muyexuanguang_Func004001002003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))
endfunction
function Trig_Q_muyexuanguang_Func004001002003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))))
endfunction
function Trig_Q_muyexuanguang_Func004A takes nothing returns nothing
set udg_Unit_L[2]=GetEnumUnit()
call GroupAddUnit(udg_All_unit_tm[17],GetEnumUnit())
endfunction
function Trig_Q_muyexuanguang_Func005C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_All_unit_tm[17])==true))then
return false
endif
return true
endfunction
function Trig_Q_muyexuanguang_Actions takes nothing returns nothing
set udg_Unit_L[1]=GetTriggerUnit()
set udg_All_unit_shu[26]=0.00
call TriggerSleepAction(0.10)
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRangeOfLocMatching(100.00,PolarProjectionBJ(GetUnitLoc(udg_Unit_L[1]),100.00,GetUnitFacing(udg_Unit_L[1])),Condition(function Trig_Q_muyexuanguang_Func004001002003))),function Trig_Q_muyexuanguang_Func004A)
if(Trig_Q_muyexuanguang_Func005C())then
call DestroyGroup(GetLastCreatedGroup())
else
call DestroyGroup(GetLastCreatedGroup())
call PauseUnit(udg_Unit_L[1],true)
call SetUnitTimeScale(udg_Unit_L[1],1.50)
call SetUnitAnimationByIndex(udg_Unit_L[1],10)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(udg_Unit_L[1],udg_Unit_L[2],200.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call EnableTrigger(gg_trg_Q_muyexuanguang2)
call TriggerSleepAction(0.12)
call SetUnitAnimationByIndex(udg_Unit_L[1],15)
call SetUnitPathing(udg_Unit_L[1],false)
set udg_All_unit_shu[26]=1.00
endif
endfunction
function InitTrig_Q_muyexuanguang takes nothing returns nothing
set gg_trg_Q_muyexuanguang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_muyexuanguang,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_muyexuanguang,Condition(function Trig_Q_muyexuanguang_Conditions))
call TriggerAddAction(gg_trg_Q_muyexuanguang,function Trig_Q_muyexuanguang_Actions)
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func001C takes nothing returns boolean
if((IsUnitInGroup(udg_Unit_L[1],GetUnitsInRangeOfLocAll(100.00,GetUnitLoc(udg_Unit_L[2])))==true))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_L[2])==true))then
return true
endif
if((udg_Unit_L[2]==null))then
return true
endif
return false
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func001C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_L[1],'oslo'))==true))then
return false
endif
return true
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func006001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true)
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_L[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_L[1],true))*I2R(GetUnitAbilityLevelSwapped('ANwm',udg_Unit_L[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func010001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func010001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true)
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func010001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005Func010A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_L[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevelSwapped('ANwm',udg_Unit_L[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_muyexuanguang2_Func001Func004Func005C takes nothing returns boolean
if(not(UnitHasBuffBJ(udg_Unit_L[1],'B00L')==true))then
return false
endif
return true
endfunction
function Trig_Q_muyexuanguang2_Func001Func004C takes nothing returns boolean
if(not Trig_Q_muyexuanguang2_Func001Func004Func001C())then
return false
endif
return true
endfunction
function Trig_Q_muyexuanguang2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[26]==0.00))then
return false
endif
return true
endfunction
function Trig_Q_muyexuanguang2_Actions takes nothing returns nothing
if(Trig_Q_muyexuanguang2_Func001C())then
call SetUnitPositionLocFacingLocBJ(udg_Unit_L[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_L[2]),23.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[2]))),GetUnitLoc(udg_Unit_L[2]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
if(Trig_Q_muyexuanguang2_Func001Func004C())then
call DisableTrigger(GetTriggeringTrigger())
call GroupClear(udg_All_unit_tm[17])
call TerrainDeformationRippleBJ(0.20,true,GetUnitLoc(udg_Unit_L[2]),230.00,230.00,64.00,0.20,100.00)
if(Trig_Q_muyexuanguang2_Func001Func004Func005C())then
if(Trig_Q_muyexuanguang2_Func001Func004Func005Func001C())then
call SetUnitLifeBJ(udg_Unit_L[1],(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.10)))
else
call SetUnitLifeBJ(udg_Unit_L[1],(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.20)))
endif
call CreateNUnitsAtLoc(1,'nspc',GetOwningPlayer(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[2]),bj_UNIT_FACING)
call SetUnitVertexColor(GetLastCreatedUnit(),255,200,50,255)
call KillUnit(GetLastCreatedUnit())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(udg_Unit_L[2]),Condition(function Trig_Q_muyexuanguang2_Func001Func004Func005Func006001003)),function Trig_Q_muyexuanguang2_Func001Func004Func005Func006A)
else
call CreateNUnitsAtLoc(1,'nspc',GetOwningPlayer(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[2]),bj_UNIT_FACING)
call KillUnit(GetLastCreatedUnit())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(udg_Unit_L[2]),Condition(function Trig_Q_muyexuanguang2_Func001Func004Func005Func010001003)),function Trig_Q_muyexuanguang2_Func001Func004Func005Func010A)
endif
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call PauseUnit(udg_Unit_L[1],false)
call SetUnitTimeScale(udg_Unit_L[1],1.00)
call SetUnitPathing(udg_Unit_L[1],true)
else
call SetUnitPositionLocFacingLocBJ(udg_Unit_L[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_L[1]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[2]))),GetUnitLoc(udg_Unit_L[2]))
endif
endif
endfunction
function InitTrig_Q_muyexuanguang2 takes nothing returns nothing
set gg_trg_Q_muyexuanguang2=CreateTrigger()
call DisableTrigger(gg_trg_Q_muyexuanguang2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_muyexuanguang2,0.04)
call TriggerAddAction(gg_trg_Q_muyexuanguang2,function Trig_Q_muyexuanguang2_Actions)
endfunction
function Trig_W_biaolianhua_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACcb'))then
return false
endif
return true
endfunction
function Trig_W_biaolianhua_Actions takes nothing returns nothing
set udg_Unit_L[1]=GetTriggerUnit()
set udg_Unit_L[2]=GetSpellTargetUnit()
set udg_All_unit_shu[25]=0.00
call TriggerSleepAction(0.10)
call SetUnitTimeScale(udg_Unit_L[1],2.00)
call PauseUnit(udg_Unit_L[1],true)
call SetUnitAnimation(udg_Unit_L[1],"spell channel")
call TriggerSleepAction(0.30)
call SetUnitPathing(udg_Unit_L[1],false)
call UnitAddAbility(udg_Unit_L[1],'A03R')
call SetUnitAnimationByIndex(udg_Unit_L[1],4)
call EnableTrigger(gg_trg_W_biaolianhua2)
endfunction
function InitTrig_W_biaolianhua takes nothing returns nothing
set gg_trg_W_biaolianhua=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_biaolianhua,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_biaolianhua,Condition(function Trig_W_biaolianhua_Conditions))
call TriggerAddAction(gg_trg_W_biaolianhua,function Trig_W_biaolianhua_Actions)
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func002C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_L[1],'oslo'))==true))then
return false
endif
return true
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func004001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func004001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true)
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func004001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func004A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_L[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_L[1],true))*I2R(GetUnitAbilityLevelSwapped('ACcb',udg_Unit_L[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true)
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_L[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_L[1],true))*I2R(GetUnitAbilityLevelSwapped('ACcb',udg_Unit_L[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_biaolianhua2_Func001Func001Func011C takes nothing returns boolean
if(not(UnitHasBuffBJ(udg_Unit_L[1],'B00L')==true))then
return false
endif
return true
endfunction
function Trig_W_biaolianhua2_Func001Func001Func022C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_L[2])==true))then
return true
endif
if((udg_All_unit_shu[25]>=18.00))then
return true
endif
return false
endfunction
function Trig_W_biaolianhua2_Func001Func001C takes nothing returns boolean
if(not Trig_W_biaolianhua2_Func001Func001Func022C())then
return false
endif
return true
endfunction
function Trig_W_biaolianhua2_Func001Func003C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_L[2])==true))then
return true
endif
if((IsUnitInGroup(udg_Unit_L[1],GetUnitsInRangeOfLocAll(100.00,GetUnitLoc(udg_Unit_L[2])))==true))then
return true
endif
if((udg_All_unit_shu[25]>=18.00))then
return true
endif
return false
endfunction
function Trig_W_biaolianhua2_Func001C takes nothing returns boolean
if(not Trig_W_biaolianhua2_Func001Func003C())then
return false
endif
return true
endfunction
function Trig_W_biaolianhua2_Actions takes nothing returns nothing
if(Trig_W_biaolianhua2_Func001C())then
if(Trig_W_biaolianhua2_Func001Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call UnitRemoveAbility(udg_Unit_L[1],'A03R')
call PauseUnit(udg_Unit_L[1],false)
call SetUnitTimeScale(udg_Unit_L[1],1.00)
call SetUnitPathing(udg_Unit_L[1],true)
else
call DisableTrigger(GetTriggeringTrigger())
call UnitRemoveAbility(udg_Unit_L[1],'A03R')
call SetUnitAnimation(udg_Unit_L[1],"spell slam")
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[2]),"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[1]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A00Z',2)
call IssueTargetOrderById(GetLastCreatedUnit(),852095,udg_Unit_L[2])
call TriggerSleepAction(0.60)
call CreateNUnitsAtLoc(1,'ushd',GetOwningPlayer(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[1]),bj_UNIT_FACING)
if(Trig_W_biaolianhua2_Func001Func001Func011C())then
if(Trig_W_biaolianhua2_Func001Func001Func011Func002C())then
call SetUnitLifeBJ(udg_Unit_L[1],(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.15)))
else
call SetUnitLifeBJ(udg_Unit_L[1],(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.30)))
endif
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_L[2]),Condition(function Trig_W_biaolianhua2_Func001Func001Func011Func005001003)),function Trig_W_biaolianhua2_Func001Func001Func011Func005A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_L[2]),Condition(function Trig_W_biaolianhua2_Func001Func001Func011Func004001003)),function Trig_W_biaolianhua2_Func001Func001Func011Func004A)
endif
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[1]),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call PauseUnit(udg_Unit_L[1],false)
call SetUnitTimeScale(udg_Unit_L[1],1.00)
call SetUnitPathing(udg_Unit_L[1],true)
endif
else
set udg_All_unit_shu[25]=(udg_All_unit_shu[25]+1)
call SetUnitPositionLocFacingLocBJ(udg_Unit_L[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_L[1]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[2]))),GetUnitLoc(udg_Unit_L[2]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[1]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function InitTrig_W_biaolianhua2 takes nothing returns nothing
set gg_trg_W_biaolianhua2=CreateTrigger()
call DisableTrigger(gg_trg_W_biaolianhua2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_biaolianhua2,0.02)
call TriggerAddAction(gg_trg_W_biaolianhua2,function Trig_W_biaolianhua2_Actions)
endfunction
function Trig_R_bamen_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACro'))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Otch'))then
return false
endif
return true
endfunction
function Trig_R_bamen_Func016001003001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true)
endfunction
function Trig_R_bamen_Func016001003002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_bamen_Func016001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true)
endfunction
function Trig_R_bamen_Func016001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))
endfunction
function Trig_R_bamen_Func016001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))))
endfunction
function Trig_R_bamen_Func016A takes nothing returns nothing
call GroupAddUnit(udg_All_unit_tm[16],GetEnumUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_R_bamen_Actions takes nothing returns nothing
set udg_Unit_L[1]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_L[1],true)
call SetUnitTimeScale(udg_Unit_L[1],0.80)
call SetUnitAnimation(udg_Unit_L[1],"spell channel")
call TriggerSleepAction(1.20)
call CreateNUnitsAtLoc(1,'uban',GetOwningPlayer(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[1]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.50)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[1]),bj_UNIT_FACING)
call IssueTargetOrderById(GetLastCreatedUnit(),852209,udg_Unit_L[1])
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_L[1]),Condition(function Trig_R_bamen_Func016001003)),function Trig_R_bamen_Func016A)
call EnableTrigger(gg_trg_R_bamen2)
call TriggerSleepAction(0.20)
call DisableTrigger(gg_trg_R_bamen2)
call PauseUnit(udg_Unit_L[1],false)
call SetUnitTimeScale(udg_Unit_L[1],1.00)
call GroupClear(udg_All_unit_tm[16])
endfunction
function InitTrig_R_bamen takes nothing returns nothing
set gg_trg_R_bamen=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_bamen,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_bamen,Condition(function Trig_R_bamen_Conditions))
call TriggerAddAction(gg_trg_R_bamen,function Trig_R_bamen_Actions)
endfunction
function Trig_R_bamen2_Func001Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()),GetUnitLoc(udg_Unit_L[1]))>=300.00))then
return false
endif
return true
endfunction
function Trig_R_bamen2_Func001A takes nothing returns nothing
if(Trig_R_bamen2_Func001Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),10.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_L[1]),GetUnitLoc(GetEnumUnit()))))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),35.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_L[1]),GetUnitLoc(GetEnumUnit()))))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function Trig_R_bamen2_Actions takes nothing returns nothing
call ForGroupBJ(udg_All_unit_tm[16],function Trig_R_bamen2_Func001A)
endfunction
function InitTrig_R_bamen2 takes nothing returns nothing
set gg_trg_R_bamen2=CreateTrigger()
call DisableTrigger(gg_trg_R_bamen2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_bamen2,0.04)
call TriggerAddAction(gg_trg_R_bamen2,function Trig_R_bamen2_Actions)
endfunction
function Trig_D_lilianhua_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A011'))then
return false
endif
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00L')==true))then
return false
endif
return true
endfunction
function Trig_D_lilianhua_Func018C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_L[1],'oslo'))==true))then
return false
endif
return true
endfunction
function Trig_D_lilianhua_Func024001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_lilianhua_Func024001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true)
endfunction
function Trig_D_lilianhua_Func024001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_L[1]))==true))
endfunction
function Trig_D_lilianhua_Func024A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_L[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_L[1],true))*13.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_lilianhua_Actions takes nothing returns nothing
set udg_Unit_L[1]=GetTriggerUnit()
set udg_Unit_L[2]=GetSpellTargetUnit()
call UnitAddAbility(udg_Unit_L[1],'A00I')
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_L[1],true)
call SetUnitPositionLocFacingLocBJ(udg_Unit_L[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_L[2]),120.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_L[2]),GetUnitLoc(udg_Unit_L[1]))),GetUnitLoc(udg_Unit_L[2]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitAnimationByIndex(udg_Unit_L[1],8)
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_L[1]),GetUnitLoc(udg_Unit_L[1]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A00Z',2)
call IssueTargetOrderById(GetLastCreatedUnit(),852095,udg_Unit_L[2])
call UnitRemoveAbility(udg_Unit_L[1],'A00I')
call TriggerSleepAction(0.10)
call SetUnitTimeScale(udg_Unit_L[1],0.03)
call UnitAddAbility(udg_Unit_L[1],'A013')
call TriggerSleepAction(0.80)
if(Trig_D_lilianhua_Func018C())then
call SetUnitLifeBJ(udg_Unit_L[1],(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.30)))
else
call SetUnitLifeBJ(udg_Unit_L[1],(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.50)))
endif
call UnitRemoveAbility(udg_Unit_L[1],'A013')
call SetUnitTimeScale(udg_Unit_L[1],1.00)
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_L[1]),40.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'uabo',GetOwningPlayer(udg_Unit_L[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_L[1]),60.00,GetUnitFacing(udg_Unit_L[1])),GetUnitFacing(udg_Unit_L[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.60)
call CreateNUnitsAtLoc(1,'unec',GetOwningPlayer(udg_Unit_L[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_L[1]),60.00,GetUnitFacing(udg_Unit_L[1])),GetUnitFacing(udg_Unit_L[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.30)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_L[1]),Condition(function Trig_D_lilianhua_Func024001003)),function Trig_D_lilianhua_Func024A)
call TerrainDeformationRippleBJ(1.00,false,GetUnitLoc(udg_Unit_L[1]),500.00,500.00,200.00,0.20,100.00)
call TriggerSleepAction(0.20)
call PauseUnit(udg_Unit_L[1],false)
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_L[1]))
endfunction
function InitTrig_D_lilianhua takes nothing returns nothing
set gg_trg_D_lilianhua=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_lilianhua,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_lilianhua,Condition(function Trig_D_lilianhua_Conditions))
call TriggerAddAction(gg_trg_D_lilianhua,function Trig_D_lilianhua_Actions)
endfunction
function Trig_Q_ganglixuanfeng_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACs7'))then
return false
endif
return true
endfunction
function Trig_Q_ganglixuanfeng_Func005Func004001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_ganglixuanfeng_Func005Func004001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true)
endfunction
function Trig_Q_ganglixuanfeng_Func005Func004001003002002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_ganglixuanfeng_Func005Func004001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_ganglixuanfeng_Func005Func004001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))))
endfunction
function Trig_Q_ganglixuanfeng_Func005Func004A takes nothing returns nothing
call UnitDamageTarget(udg_Unit_AK[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_AK[1],'ACs7'))*75.00),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_All_unit_tm[18],GetEnumUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_ganglixuanfeng_Func005Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_ganglixuanfeng_Func005Func005001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true)
endfunction
function Trig_Q_ganglixuanfeng_Func005Func005001003002002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_ganglixuanfeng_Func005Func005001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_ganglixuanfeng_Func005Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))))
endfunction
function Trig_Q_ganglixuanfeng_Func005Func005A takes nothing returns nothing
call UnitDamageTarget(udg_Unit_AK[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_AK[1],'ACs7'))*50.00),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_All_unit_tm[18],GetEnumUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_ganglixuanfeng_Func005C takes nothing returns boolean
if(not(UnitHasBuffBJ(udg_Unit_AK[1],'B00L')==true))then
return false
endif
return true
endfunction
function Trig_Q_ganglixuanfeng_Actions takes nothing returns nothing
set udg_Unit_AK[1]=GetTriggerUnit()
call CreateNUnitsAtLoc(1,'uktn',GetOwningPlayer(udg_Unit_AK[1]),GetUnitLoc(udg_Unit_AK[1]),bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.50)
if(Trig_Q_ganglixuanfeng_Func005C())then
call SetUnitLifeBJ(udg_Unit_AK[1],(GetUnitState(udg_Unit_AK[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.10)))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_Q_ganglixuanfeng_Func005Func004001003)),function Trig_Q_ganglixuanfeng_Func005Func004A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_Q_ganglixuanfeng_Func005Func005001003)),function Trig_Q_ganglixuanfeng_Func005Func005A)
endif
call EnableTrigger(gg_trg_Q_ganglixuanfeng2)
call TriggerSleepAction(0.20)
call DisableTrigger(gg_trg_Q_ganglixuanfeng2)
call GroupClear(udg_All_unit_tm[18])
endfunction
function InitTrig_Q_ganglixuanfeng takes nothing returns nothing
set gg_trg_Q_ganglixuanfeng=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_ganglixuanfeng,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_ganglixuanfeng,Condition(function Trig_Q_ganglixuanfeng_Conditions))
call TriggerAddAction(gg_trg_Q_ganglixuanfeng,function Trig_Q_ganglixuanfeng_Actions)
endfunction
function Trig_Q_ganglixuanfeng2_Func002Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()),GetUnitLoc(udg_Unit_AK[1]))>=300.00))then
return false
endif
return true
endfunction
function Trig_Q_ganglixuanfeng2_Func002A takes nothing returns nothing
if(Trig_Q_ganglixuanfeng2_Func002Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),12.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_AK[1]),GetUnitLoc(GetEnumUnit()))))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),35.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_AK[1]),GetUnitLoc(GetEnumUnit()))))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function Trig_Q_ganglixuanfeng2_Actions takes nothing returns nothing
call ForGroupBJ(udg_All_unit_tm[18],function Trig_Q_ganglixuanfeng2_Func002A)
endfunction
function InitTrig_Q_ganglixuanfeng2 takes nothing returns nothing
set gg_trg_Q_ganglixuanfeng2=CreateTrigger()
call DisableTrigger(gg_trg_Q_ganglixuanfeng2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_ganglixuanfeng2,0.04)
call TriggerAddAction(gg_trg_Q_ganglixuanfeng2,function Trig_Q_ganglixuanfeng2_Actions)
endfunction
function Trig_W_yefenghuang_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACst'))then
return false
endif
return true
endfunction
function Trig_W_yefenghuang_Actions takes nothing returns nothing
set udg_Unit_AK[1]=GetTriggerUnit()
set udg_All_unit_shu[28]=0.00
set udg_All_unit_shu[27]=AngleBetweenPoints(GetUnitLoc(udg_Unit_AK[1]),GetSpellTargetLoc())
call TriggerSleepAction(0.10)
call CreateNUnitsAtLoc(1,'hphx',GetOwningPlayer(udg_Unit_AK[1]),GetUnitLoc(udg_Unit_AK[1]),GetUnitFacing(udg_Unit_AK[1]))
call SetUnitTimeScale(GetLastCreatedUnit(),4.00)
set udg_Unit_AK[3]=GetLastCreatedUnit()
call UnitAddAbility(udg_Unit_AK[1],'A015')
call PauseUnit(udg_Unit_AK[1],true)
call SetUnitTimeScale(udg_Unit_AK[1],1.20)
call SetUnitAnimation(udg_Unit_AK[1],"spell throw")
call SetUnitPathing(udg_Unit_AK[1],false)
call EnableTrigger(gg_trg_W_yefenghuang2)
endfunction
function InitTrig_W_yefenghuang takes nothing returns nothing
set gg_trg_W_yefenghuang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_yefenghuang,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_yefenghuang,Condition(function Trig_W_yefenghuang_Conditions))
call TriggerAddAction(gg_trg_W_yefenghuang,function Trig_W_yefenghuang_Actions)
endfunction
function Trig_W_yefenghuang2_Func001Func001Func003Func002001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_yefenghuang2_Func001Func001Func003Func002001001003002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_AK[1])
endfunction
function Trig_W_yefenghuang2_Func001Func001Func003Func002001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_AK[1]))
endfunction
function Trig_W_yefenghuang2_Func001Func001Func003C takes nothing returns boolean
if(not(udg_All_unit_shu[28]>=8.00))then
return false
endif
if(not(IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(130.00,PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[1]),50.00,GetUnitFacing(udg_Unit_AK[1])),Condition(function Trig_W_yefenghuang2_Func001Func001Func003Func002001001003)))!=true))then
return false
endif
return true
endfunction
function Trig_W_yefenghuang2_Func001Func001C takes nothing returns boolean
if((IsTerrainPathableBJ(GetUnitLoc(udg_Unit_AK[3]),PATHING_TYPE_WALKABILITY)==true))then
return true
endif
if((udg_All_unit_shu[28]>=25.00))then
return true
endif
if(Trig_W_yefenghuang2_Func001Func001Func003C())then
return true
endif
return false
endfunction
function Trig_W_yefenghuang2_Func001Func015Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_yefenghuang2_Func001Func015Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AK[1]))==true)
endfunction
function Trig_W_yefenghuang2_Func001Func015Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AK[1]))==true))
endfunction
function Trig_W_yefenghuang2_Func001Func015Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_AK[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_STR,udg_Unit_AK[1],true))*I2R(GetUnitAbilityLevelSwapped('ACst',udg_Unit_AK[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_FlameBomb.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_yefenghuang2_Func001Func015Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_yefenghuang2_Func001Func015Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AK[1]))==true)
endfunction
function Trig_W_yefenghuang2_Func001Func015Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AK[1]))==true))
endfunction
function Trig_W_yefenghuang2_Func001Func015Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_AK[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_STR,udg_Unit_AK[1],true))*I2R(GetUnitAbilityLevelSwapped('ACst',udg_Unit_AK[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_FlameBomb.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_yefenghuang2_Func001Func015C takes nothing returns boolean
if(not(UnitHasBuffBJ(udg_Unit_AK[1],'B00L')==true))then
return false
endif
return true
endfunction
function Trig_W_yefenghuang2_Func001C takes nothing returns boolean
if(not Trig_W_yefenghuang2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_W_yefenghuang2_Actions takes nothing returns nothing
if(Trig_W_yefenghuang2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call KillUnit(udg_Unit_AK[3])
call CreateNUnitsAtLoc(1,'hbsh',GetOwningPlayer(udg_Unit_AK[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[1]),60.00,GetUnitFacing(udg_Unit_AK[1])),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call CreateNUnitsAtLoc(1,'unec',GetOwningPlayer(udg_Unit_AK[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[1]),60.00,GetUnitFacing(udg_Unit_AK[1])),GetUnitFacing(udg_Unit_AK[1]))
call SetUnitScale(GetLastCreatedUnit(),1.50,1.50,1.50)
call SetUnitTimeScale(GetLastCreatedUnit(),0.30)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,0,255)
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_AK[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[1]),60.00,GetUnitFacing(udg_Unit_AK[1])),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AOws',4)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
if(Trig_W_yefenghuang2_Func001Func015C())then
call SetUnitLifeBJ(udg_Unit_AK[1],(GetUnitState(udg_Unit_AK[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.20)))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(220.00,PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[1]),60.00,GetUnitFacing(udg_Unit_AK[1])),Condition(function Trig_W_yefenghuang2_Func001Func015Func005001003)),function Trig_W_yefenghuang2_Func001Func015Func005A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(220.00,PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[1]),60.00,GetUnitFacing(udg_Unit_AK[1])),Condition(function Trig_W_yefenghuang2_Func001Func015Func002001003)),function Trig_W_yefenghuang2_Func001Func015Func002A)
endif
call UnitRemoveAbility(udg_Unit_AK[1],'A015')
call SetUnitPathing(udg_Unit_AK[1],true)
call TriggerSleepAction(0.10)
call SetUnitTimeScalePercent(udg_Unit_AK[1],100.00)
call PauseUnitBJ(false,udg_Unit_AK[1])
else
set udg_All_unit_shu[28]=(udg_All_unit_shu[28]+1)
call SetUnitPositionLocFacingBJ(udg_Unit_AK[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[1]),36.00,GetUnitFacing(udg_Unit_AK[1])),GetUnitFacing(udg_Unit_AK[1]))
call SetUnitPositionLocFacingBJ(udg_Unit_AK[3],PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[1]),50.00,GetUnitFacing(udg_Unit_AK[1])),GetUnitFacing(udg_Unit_AK[1]))
endif
endfunction
function InitTrig_W_yefenghuang2 takes nothing returns nothing
set gg_trg_W_yefenghuang2=CreateTrigger()
call DisableTrigger(gg_trg_W_yefenghuang2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_yefenghuang2,0.02)
call TriggerAddAction(gg_trg_W_yefenghuang2,function Trig_W_yefenghuang2_Actions)
endfunction
function Trig_R_bamenK_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACro'))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Nbst'))then
return false
endif
return true
endfunction
function Trig_R_bamenK_Func016001003001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true)
endfunction
function Trig_R_bamenK_Func016001003002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_bamenK_Func016001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AK[1]))==true)
endfunction
function Trig_R_bamenK_Func016001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AK[1]))==true))
endfunction
function Trig_R_bamenK_Func016001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AK[1]))==true))))
endfunction
function Trig_R_bamenK_Func016A takes nothing returns nothing
call GroupAddUnit(udg_All_unit_tm[19],GetEnumUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_R_bamenK_Actions takes nothing returns nothing
set udg_Unit_AK[1]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_AK[1],true)
call SetUnitTimeScale(udg_Unit_AK[1],1.10)
call SetUnitAnimation(udg_Unit_AK[1],"spell channel")
call TriggerSleepAction(0.80)
call CreateNUnitsAtLoc(1,'uban',GetOwningPlayer(udg_Unit_AK[1]),GetUnitLoc(udg_Unit_AK[1]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.50)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_AK[1]),GetUnitLoc(udg_Unit_AK[1]),bj_UNIT_FACING)
call IssueTargetOrderById(GetLastCreatedUnit(),852209,udg_Unit_AK[1])
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(350.00,GetUnitLoc(udg_Unit_AK[1]),Condition(function Trig_R_bamenK_Func016001003)),function Trig_R_bamenK_Func016A)
call EnableTrigger(gg_trg_R_bamenK2)
call TriggerSleepAction(0.20)
call DisableTrigger(gg_trg_R_bamenK2)
call PauseUnit(udg_Unit_AK[1],false)
call SetUnitTimeScale(udg_Unit_AK[1],1.00)
call GroupClear(udg_All_unit_tm[19])
endfunction
function InitTrig_R_bamenK takes nothing returns nothing
set gg_trg_R_bamenK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_bamenK,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_bamenK,Condition(function Trig_R_bamenK_Conditions))
call TriggerAddAction(gg_trg_R_bamenK,function Trig_R_bamenK_Actions)
endfunction
function Trig_R_bamenK2_Func001Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()),GetUnitLoc(udg_Unit_AK[1]))>=500.00))then
return false
endif
return true
endfunction
function Trig_R_bamenK2_Func001A takes nothing returns nothing
if(Trig_R_bamenK2_Func001Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),10.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_AK[1]),GetUnitLoc(GetEnumUnit()))))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),45.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_AK[1]),GetUnitLoc(GetEnumUnit()))))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function Trig_R_bamenK2_Actions takes nothing returns nothing
call ForGroupBJ(udg_All_unit_tm[19],function Trig_R_bamenK2_Func001A)
endfunction
function InitTrig_R_bamenK2 takes nothing returns nothing
set gg_trg_R_bamenK2=CreateTrigger()
call DisableTrigger(gg_trg_R_bamenK2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_bamenK2,0.04)
call TriggerAddAction(gg_trg_R_bamenK2,function Trig_R_bamenK2_Actions)
endfunction
function Trig_D_chaokongque_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANcf'))then
return false
endif
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00L')==true))then
return false
endif
return true
endfunction
function Trig_D_chaokongque_Func001C takes nothing returns boolean
if(not(GetSpellTargetUnit()==null))then
return false
endif
return true
endfunction
function Trig_D_chaokongque_Actions takes nothing returns nothing
if(Trig_D_chaokongque_Func001C())then
set udg_Unit_AK[1]=GetTriggerUnit()
set udg_All_unit_shu[29]=0.00
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_AK[1],true)
call SetUnitTimeScale(udg_Unit_AK[1],4.00)
call EnableTrigger(gg_trg_D_chaokongque2)
call TriggerSleepAction(2.00)
call DisableTrigger(gg_trg_D_chaokongque2)
call PauseUnit(udg_Unit_AK[1],false)
call SetUnitTimeScale(udg_Unit_AK[1],1.00)
call SetUnitLifeBJ(udg_Unit_AK[1],(GetUnitState(udg_Unit_AK[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.15)))
else
set udg_Unit_AK[1]=GetTriggerUnit()
set udg_Unit_AK[2]=GetSpellTargetUnit()
set udg_All_unit_shu[29]=0.00
call UnitAddAbility(udg_Unit_AK[1],'A015')
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_AK[1],true)
call SetUnitTimeScale(udg_Unit_AK[1],4.00)
call SetUnitPositionLocFacingLocBJ(udg_Unit_AK[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_AK[2]),120.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_AK[2]),GetUnitLoc(udg_Unit_AK[1]))),GetUnitLoc(udg_Unit_AK[2]))
call UnitDamageTargetBJ(udg_Unit_AK[1],udg_Unit_AK[2],(I2R(GetHeroStatBJ(bj_HEROSTAT_STR,udg_Unit_AK[1],true))*8.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_L[2]),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitAnimation(udg_Unit_AK[1],"spell channel")
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_AK[1]),GetUnitLoc(udg_Unit_AK[2]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A00Z',2)
call IssueTargetOrderById(GetLastCreatedUnit(),852095,udg_Unit_AK[2])
call UnitRemoveAbility(udg_Unit_AK[1],'A015')
call EnableTrigger(gg_trg_D_chaokongque3)
call TriggerSleepAction(1.40)
call DisableTrigger(gg_trg_D_chaokongque3)
call PauseUnit(udg_Unit_AK[1],false)
call SetUnitTimeScale(udg_Unit_AK[1],1.00)
call SetUnitLifeBJ(udg_Unit_AK[1],(GetUnitState(udg_Unit_AK[1],UNIT_STATE_LIFE)-(GetUnitState(udg_Unit_L[1],UNIT_STATE_LIFE)*0.25)))
endif
endfunction
function InitTrig_D_chaokongque takes nothing returns nothing
set gg_trg_D_chaokongque=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_chaokongque,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_chaokongque,Condition(function Trig_D_chaokongque_Conditions))
call TriggerAddAction(gg_trg_D_chaokongque,function Trig_D_chaokongque_Actions)
endfunction
function Trig_D_chaokongque2_Func003C takes nothing returns boolean
if(not(udg_All_unit_shu[29]==0.00))then
return false
endif
return true
endfunction
function Trig_D_chaokongque2_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_AK[1]),GetUnitLoc(udg_Unit_AK[1]),(GetUnitFacing(udg_Unit_AK[1])+GetRandomReal(-40.00,40.00)))
call SetUnitScale(GetLastCreatedUnit(),1.50,1.50,1.50)
if(Trig_D_chaokongque2_Func003C())then
call SetUnitAnimationByIndex(udg_Unit_AK[1],2)
set udg_All_unit_shu[29]=1.00
call AddSpecialEffectTargetUnitBJ("left hand",udg_Unit_AK[1],"Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call SetUnitAnimationByIndex(udg_Unit_AK[1],11)
set udg_All_unit_shu[29]=0.00
call AddSpecialEffectTargetUnitBJ("right hand",udg_Unit_AK[1],"Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852218,PolarProjectionBJ(GetUnitLoc(GetLastCreatedUnit()),256,GetUnitFacing(GetLastCreatedUnit())))
endfunction
function InitTrig_D_chaokongque2 takes nothing returns nothing
set gg_trg_D_chaokongque2=CreateTrigger()
call DisableTrigger(gg_trg_D_chaokongque2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_chaokongque2,0.10)
call TriggerAddAction(gg_trg_D_chaokongque2,function Trig_D_chaokongque2_Actions)
endfunction
function Trig_D_chaokongque3_Func004C takes nothing returns boolean
if(not(udg_All_unit_shu[29]==0.00))then
return false
endif
return true
endfunction
function Trig_D_chaokongque3_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_AK[1]),GetUnitLoc(udg_Unit_AK[1]),(GetUnitFacing(udg_Unit_AK[1])+GetRandomReal(-80.00,80.00)))
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A017',2)
call SetUnitScale(GetLastCreatedUnit(),1.80,1.80,1.80)
if(Trig_D_chaokongque3_Func004C())then
call SetUnitAnimationByIndex(udg_Unit_AK[1],2)
set udg_All_unit_shu[29]=1.00
call AddSpecialEffectTargetUnitBJ("left hand",udg_Unit_AK[1],"Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call SetUnitAnimationByIndex(udg_Unit_AK[1],11)
set udg_All_unit_shu[29]=0.00
call AddSpecialEffectTargetUnitBJ("right hand",udg_Unit_AK[1],"Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852218,PolarProjectionBJ(GetUnitLoc(GetLastCreatedUnit()),256,GetUnitFacing(GetLastCreatedUnit())))
endfunction
function InitTrig_D_chaokongque3 takes nothing returns nothing
set gg_trg_D_chaokongque3=CreateTrigger()
call DisableTrigger(gg_trg_D_chaokongque3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_chaokongque3,0.10)
call TriggerAddAction(gg_trg_D_chaokongque3,function Trig_D_chaokongque3_Actions)
endfunction
function Trig_Q_leiqie_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A042'))then
return false
endif
if(not(GetSpellTargetUnit()!=null))then
return false
endif
return true
endfunction
function Trig_Q_leiqie_Actions takes nothing returns nothing
set udg_Unit_KKS[1]=GetTriggerUnit()
set udg_Unit_KKS[2]=GetSpellTargetUnit()
set udg_All_unit_shu[44]=0.00
call SetUnitTimeScalePercent(udg_Unit_KKS[1],200.00)
call TriggerSleepAction(0.05)
call UnitAddAbility(udg_Unit_KKS[1],'A00B')
call SetUnitAnimation(udg_Unit_KKS[1],"spell two")
call PauseUnitBJ(true,udg_Unit_KKS[1])
call SetUnitPathing(udg_Unit_KKS[1],false)
call TriggerSleepAction(0.10)
call SetUnitAnimation(udg_Unit_KKS[1],"spell three")
call CreateNUnitsAtLoc(1,'o003',GetOwningPlayer(udg_Unit_KKS[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),40.00,(GetUnitFacing(udg_Unit_KKS[1])-65.00)),GetUnitFacing(udg_Unit_KKS[1]))
set udg_Unit_KKS[5]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_Q_leiqie2)
endfunction
function InitTrig_Q_leiqie takes nothing returns nothing
set gg_trg_Q_leiqie=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_leiqie,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_leiqie,Condition(function Trig_Q_leiqie_Conditions))
call TriggerAddAction(gg_trg_Q_leiqie,function Trig_Q_leiqie_Actions)
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[44]==1.00))then
return false
endif
return true
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006Func001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006Func001001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006Func001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006Func001A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_KKS[1],true))*I2R(GetUnitAbilityLevelSwapped('A042',udg_Unit_KKS[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_KKS[1],true))*I2R(GetUnitAbilityLevelSwapped('A042',udg_Unit_KKS[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_leiqie2_Func001Func001Func002Func006C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_KKS[1],'oli2'))==true))then
return false
endif
return true
endfunction
function Trig_Q_leiqie2_Func001Func001Func002C takes nothing returns boolean
if(not(udg_All_unit_shu[44]<=12.00))then
return false
endif
return true
endfunction
function Trig_Q_leiqie2_Func001Func001C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_KKS[1],GetUnitsInRangeOfLocAll(300.00,GetUnitLoc(udg_Unit_KKS[2])))==true))then
return false
endif
return true
endfunction
function Trig_Q_leiqie2_Func001Func008C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_KKS[2])==true))then
return true
endif
if((R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2])))>1400))then
return true
endif
return false
endfunction
function Trig_Q_leiqie2_Func001C takes nothing returns boolean
if(not Trig_Q_leiqie2_Func001Func008C())then
return false
endif
return true
endfunction
function Trig_Q_leiqie2_Actions takes nothing returns nothing
if(Trig_Q_leiqie2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnitBJ(false,udg_Unit_KKS[1])
call SetUnitTimeScalePercent(udg_Unit_KKS[1],100.00)
call SetUnitPathing(udg_Unit_KKS[1],true)
call UnitRemoveAbility(udg_Unit_KKS[1],'A00B')
call KillUnit(udg_Unit_KKS[5])
else
if(Trig_Q_leiqie2_Func001Func001C())then
set udg_All_unit_shu[44]=(udg_All_unit_shu[44]+1)
if(Trig_Q_leiqie2_Func001Func001Func002C())then
if(Trig_Q_leiqie2_Func001Func001Func002Func001C())then
call SetUnitAnimation(udg_Unit_KKS[1],"spell slam")
else
endif
call SetUnitPositionLocFacingLocBJ(udg_Unit_KKS[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),16.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]))),GetUnitLoc(udg_Unit_KKS[2]))
call SetUnitPositionLocFacingBJ(udg_Unit_KKS[5],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),40.00,(GetUnitFacing(udg_Unit_KKS[1])-65.00)),GetUnitFacing(udg_Unit_KKS[1]))
else
call DisableTrigger(GetTriggeringTrigger())
set bj_wantDestroyGroup=true
if(Trig_Q_leiqie2_Func001Func001Func002Func006C())then
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_KKS[2]),Condition(function Trig_Q_leiqie2_Func001Func001Func002Func006Func002001003)),function Trig_Q_leiqie2_Func001Func001Func002Func006Func002A)
else
call ForGroupBJ(GetUnitsInRangeOfLocMatching(180.00,GetUnitLoc(udg_Unit_KKS[2]),Condition(function Trig_Q_leiqie2_Func001Func001Func002Func006Func001001003)),function Trig_Q_leiqie2_Func001Func001Func002Func006Func001A)
endif
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_KKS[2]),"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(0.10)
call PauseUnitBJ(false,udg_Unit_KKS[1])
call SetUnitTimeScalePercent(udg_Unit_KKS[1],100.00)
call SetUnitPathing(udg_Unit_KKS[1],true)
call UnitRemoveAbility(udg_Unit_KKS[1],'A00B')
call KillUnit(udg_Unit_KKS[5])
endif
else
call SetUnitPositionLocFacingLocBJ(udg_Unit_KKS[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),20.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]))),GetUnitLoc(udg_Unit_KKS[2]))
call SetUnitPositionLocFacingBJ(udg_Unit_KKS[5],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),40.00,(GetUnitFacing(udg_Unit_KKS[1])-65.00)),GetUnitFacing(udg_Unit_KKS[1]))
endif
endif
endfunction
function InitTrig_Q_leiqie2 takes nothing returns nothing
set gg_trg_Q_leiqie2=CreateTrigger()
call DisableTrigger(gg_trg_Q_leiqie2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_leiqie2,0.02)
call TriggerAddAction(gg_trg_Q_leiqie2,function Trig_Q_leiqie2_Actions)
endfunction
function Trig_Q_leiqieS_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A042'))then
return false
endif
if(not(GetSpellTargetUnit()==null))then
return false
endif
return true
endfunction
function Trig_Q_leiqieS_Actions takes nothing returns nothing
set udg_Unit_KKS[1]=GetTriggerUnit()
call TriggerSleepAction(0.05)
call PauseUnitBJ(true,udg_Unit_KKS[1])
call SetUnitTimeScale(udg_Unit_KKS[1],2.50)
call SetUnitAnimation(udg_Unit_KKS[1],"spell one")
call TriggerSleepAction(0.10)
call CreateNUnitsAtLoc(1,'hkni',GetOwningPlayer(udg_Unit_KKS[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),130.00,GetUnitFacing(udg_Unit_KKS[1])),GetUnitFacing(udg_Unit_KKS[1]))
set udg_Unit_KKS[6]=GetLastCreatedUnit()
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.60)
call EnableTrigger(gg_trg_Q_leiqieS2)
call TriggerSleepAction(0.10)
call SetUnitTimeScale(udg_Unit_KKS[1],1.00)
call PauseUnitBJ(false,udg_Unit_KKS[1])
endfunction
function InitTrig_Q_leiqieS takes nothing returns nothing
set gg_trg_Q_leiqieS=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_leiqieS,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_leiqieS,Condition(function Trig_Q_leiqieS_Conditions))
call TriggerAddAction(gg_trg_Q_leiqieS,function Trig_Q_leiqieS_Actions)
endfunction
function Trig_Q_leiqieS2_Func001Func003C takes nothing returns boolean
if((IsTerrainPathableBJ(GetUnitLoc(udg_Unit_KKS[6]),PATHING_TYPE_WALKABILITY)==true))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_KKS[6])==true))then
return true
endif
return false
endfunction
function Trig_Q_leiqieS2_Func001Func007Func005001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_leiqieS2_Func001Func007Func005001003001002 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[38])==false)
endfunction
function Trig_Q_leiqieS2_Func001Func007Func005001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[38])==false))
endfunction
function Trig_Q_leiqieS2_Func001Func007Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_Q_leiqieS2_Func001Func007Func005001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[38])==false))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_Q_leiqieS2_Func001Func007Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(75.00*I2R(GetUnitAbilityLevel(udg_Unit_KKS[1],'A042'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[38],GetEnumUnit())
endfunction
function Trig_Q_leiqieS2_Func001Func007Func007001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_leiqieS2_Func001Func007Func007001003001002 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[38])==false)
endfunction
function Trig_Q_leiqieS2_Func001Func007Func007001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[38])==false))
endfunction
function Trig_Q_leiqieS2_Func001Func007Func007001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_Q_leiqieS2_Func001Func007Func007001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[38])==false))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_Q_leiqieS2_Func001Func007Func007A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(udg_Unit_KKS[1],'A042'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[38],GetEnumUnit())
endfunction
function Trig_Q_leiqieS2_Func001Func007C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_KKS[1],'oli2'))==true))then
return false
endif
return true
endfunction
function Trig_Q_leiqieS2_Func001Func016001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_leiqieS2_Func001Func016001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_Q_leiqieS2_Func001Func016001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_Q_leiqieS2_Func001Func016A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(udg_Unit_KKS[1],'A042'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",GetTriggerUnit(),"Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_leiqieS2_Func001C takes nothing returns boolean
if(not Trig_Q_leiqieS2_Func001Func003C())then
return false
endif
return true
endfunction
function Trig_Q_leiqieS2_Actions takes nothing returns nothing
if(Trig_Q_leiqieS2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call GroupClear(udg_All_unit_tm[38])
call KillUnit(udg_Unit_KKS[6])
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_KKS[6]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_KKS[6]))
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(180.00,GetUnitLoc(udg_Unit_KKS[6]),Condition(function Trig_Q_leiqieS2_Func001Func016001003)),function Trig_Q_leiqieS2_Func001Func016A)
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[6]),60.00,GetUnitFacing(udg_Unit_KKS[6]))
call SetUnitPositionLoc(udg_Unit_KKS[6],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
if(Trig_Q_leiqieS2_Func001Func007C())then
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_KKS[6]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_KKS[6]))
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(140.00,GetUnitLoc(udg_Unit_KKS[6]),Condition(function Trig_Q_leiqieS2_Func001Func007Func005001003)),function Trig_Q_leiqieS2_Func001Func007Func005A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(130.00,GetUnitLoc(udg_Unit_KKS[6]),Condition(function Trig_Q_leiqieS2_Func001Func007Func007001003)),function Trig_Q_leiqieS2_Func001Func007Func007A)
endif
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_KKS[6]),"Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_KKS[6]))
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function InitTrig_Q_leiqieS2 takes nothing returns nothing
set gg_trg_Q_leiqieS2=CreateTrigger()
call DisableTrigger(gg_trg_Q_leiqieS2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_leiqieS2,0.04)
call TriggerAddAction(gg_trg_Q_leiqieS2,function Trig_Q_leiqieS2_Actions)
endfunction
function Trig_Q_shenwei_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='SNdd'))then
return false
endif
return true
endfunction
function Trig_Q_shenwei_Actions takes nothing returns nothing
set udg_Unit_KKS[1]=GetTriggerUnit()
set udg_Unit_KKS[2]=GetSpellTargetUnit()
set udg_All_unit_shu[38]=0.00
set udg_All_unit_Dian[18]=GetSpellTargetLoc()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_KKS[1],true)
call SetUnitAnimation(udg_Unit_KKS[1],"stand ready")
call CreateNUnitsAtLoc(1,'o006',GetOwningPlayer(udg_Unit_KKS[1]),udg_All_unit_Dian[18],bj_UNIT_FACING)
call GroupAddUnit(udg_All_unit_tm[25],GetLastCreatedUnit())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'echm',GetOwningPlayer(udg_Unit_KKS[1]),udg_All_unit_Dian[18],bj_UNIT_FACING)
call GroupAddUnit(udg_All_unit_tm[25],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_Q_shenwei2)
endfunction
function InitTrig_Q_shenwei takes nothing returns nothing
set gg_trg_Q_shenwei=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_shenwei,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_shenwei,Condition(function Trig_Q_shenwei_Conditions))
call TriggerAddAction(gg_trg_Q_shenwei,function Trig_Q_shenwei_Actions)
endfunction
function Trig_Q_shenwei2_Func001Func002A takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Trig_Q_shenwei2_Func001Func006Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_shenwei2_Func001Func006Func006001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_Q_shenwei2_Func001Func006Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_Q_shenwei2_Func001Func006Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_KKS[1],true))*I2R(GetUnitAbilityLevelSwapped('A042',udg_Unit_KKS[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_shenwei2_Func001Func006Func007A takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Trig_Q_shenwei2_Func001Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[38]>=4.00))then
return false
endif
return true
endfunction
function Trig_Q_shenwei2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_KKS[1])==true))then
return false
endif
return true
endfunction
function Trig_Q_shenwei2_Actions takes nothing returns nothing
if(Trig_Q_shenwei2_Func001C())then
if(Trig_Q_shenwei2_Func001Func006C())then
call DisableTrigger(GetTriggeringTrigger())
call AddSpecialEffectLocBJ(udg_All_unit_Dian[18],"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ehpr',GetOwningPlayer(udg_Unit_KKS[1]),udg_All_unit_Dian[18],(-90.00+(I2R(bj_forLoopAIndex)*180.00)))
call SetUnitTimeScale(GetLastCreatedUnit(),1.50)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(280.00,udg_All_unit_Dian[18],Condition(function Trig_Q_shenwei2_Func001Func006Func006001003)),function Trig_Q_shenwei2_Func001Func006Func006A)
call ForGroupBJ(udg_All_unit_tm[25],function Trig_Q_shenwei2_Func001Func006Func007A)
call GroupClear(udg_All_unit_tm[25])
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_KKS[1],false)
else
set udg_All_unit_shu[38]=(udg_All_unit_shu[38]+0.15)
endif
else
call DisableTrigger(GetTriggeringTrigger())
call ForGroupBJ(udg_All_unit_tm[25],function Trig_Q_shenwei2_Func001Func002A)
call GroupClear(udg_All_unit_tm[25])
call PauseUnitBJ(false,udg_Unit_KKS[1])
endif
endfunction
function InitTrig_Q_shenwei2 takes nothing returns nothing
set gg_trg_Q_shenwei2=CreateTrigger()
call DisableTrigger(gg_trg_Q_shenwei2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_shenwei2,0.04)
call TriggerAddAction(gg_trg_Q_shenwei2,function Trig_Q_shenwei2_Actions)
endfunction
function Trig_W_suileiya_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A02O'))then
return false
endif
return true
endfunction
function Trig_W_suileiya_Actions takes nothing returns nothing
set udg_Unit_KKS[1]=GetTriggerUnit()
set udg_Unit_KKS[2]=GetSpellTargetUnit()
call TriggerSleepAction(0.05)
call PauseUnitBJ(true,udg_Unit_KKS[1])
call SetUnitTimeScale(udg_Unit_KKS[1],2.20)
call SetUnitAnimation(udg_Unit_KKS[1],"spell one")
call SetUnitFacingToFaceUnitTimed(udg_Unit_KKS[1],udg_Unit_KKS[2],0.05)
call TriggerSleepAction(0.15)
call CreateNUnitsAtLoc(1,'edoc',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),300.00,(GetUnitFacing(GetTriggerUnit())+180.00)),(GetUnitFacing(udg_Unit_KKS[1])+GetRandomReal(-80.00,80.00)))
call SetUnitTimeScale(GetLastCreatedUnit(),2.50)
call SetUnitVertexColor(GetLastCreatedUnit(),255,255,255,50)
call SetUnitUserData(GetLastCreatedUnit(),70)
set udg_Unit_KKS[3]=GetLastCreatedUnit()
call CreateNUnitsAtLoc(1,'edot',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[3]),90.00,GetUnitFacing(udg_Unit_KKS[3])),GetUnitFacing(udg_Unit_KKS[3]))
set udg_Unit_KKS[4]=GetLastCreatedUnit()
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_KKS[3]),"Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitAnimationByIndex(udg_Unit_KKS[3],2)
call EnableTrigger(gg_trg_W_suileiya2)
call TriggerSleepAction(0.10)
call SetUnitTimeScale(udg_Unit_KKS[1],1.00)
call PauseUnitBJ(false,udg_Unit_KKS[1])
endfunction
function InitTrig_W_suileiya takes nothing returns nothing
set gg_trg_W_suileiya=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_suileiya,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_suileiya,Condition(function Trig_W_suileiya_Conditions))
call TriggerAddAction(gg_trg_W_suileiya,function Trig_W_suileiya_Actions)
endfunction
function Trig_W_suileiya2_Func001Func001C takes nothing returns boolean
if((GetUnitUserData(udg_Unit_KKS[3])<5))then
return true
endif
if((DistanceBetweenPoints(GetUnitLoc(udg_Unit_KKS[3]),GetUnitLoc(udg_Unit_KKS[2]))<=100.00))then
return true
endif
return false
endfunction
function Trig_W_suileiya2_Func001Func007Func001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_suileiya2_Func001Func007Func001001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_W_suileiya2_Func001Func007Func001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_W_suileiya2_Func001Func007Func001A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevelSwapped('A02O',udg_Unit_KKS[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(GetEnumUnit()),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Aprg',2)
call IssueTargetOrderById(GetLastCreatedUnit(),852111,GetEnumUnit())
endfunction
function Trig_W_suileiya2_Func001Func007Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_suileiya2_Func001Func007Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_W_suileiya2_Func001Func007Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_W_suileiya2_Func001Func007Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(70.00*I2R(GetUnitAbilityLevelSwapped('A02O',udg_Unit_KKS[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(GetEnumUnit()),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Aprg',4)
call IssueTargetOrderById(GetLastCreatedUnit(),852111,GetEnumUnit())
endfunction
function Trig_W_suileiya2_Func001Func007C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_KKS[1],'oli2'))==true))then
return false
endif
return true
endfunction
function Trig_W_suileiya2_Func001C takes nothing returns boolean
if(not Trig_W_suileiya2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_W_suileiya2_Actions takes nothing returns nothing
if(Trig_W_suileiya2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitAnimationByIndex(udg_Unit_KKS[3],4)
call KillUnit(udg_Unit_KKS[4])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'hmtt',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[3]),bj_UNIT_FACING)
call SetUnitScale(GetLastCreatedUnit(),2.00,2.00,2.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.70)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
if(Trig_W_suileiya2_Func001Func007C())then
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_KKS[3]),Condition(function Trig_W_suileiya2_Func001Func007Func002001003)),function Trig_W_suileiya2_Func001Func007Func002A)
else
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_KKS[3]),Condition(function Trig_W_suileiya2_Func001Func007Func001001003)),function Trig_W_suileiya2_Func001Func007Func001A)
endif
call TriggerSleepAction(0.10)
call RemoveUnit(udg_Unit_KKS[3])
else
call SetUnitPositionLocFacingLocBJ(udg_Unit_KKS[3],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[3]),I2R(GetUnitUserData(udg_Unit_KKS[3])),GetUnitFacing(udg_Unit_KKS[3])),GetUnitLoc(udg_Unit_KKS[2]))
call SetUnitUserData(udg_Unit_KKS[3],(GetUnitUserData(udg_Unit_KKS[3])-2))
call SetUnitPositionLocFacingBJ(udg_Unit_KKS[4],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[3]),90.00,GetUnitFacing(udg_Unit_KKS[3])),GetUnitFacing(udg_Unit_KKS[3]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_KKS[3]),"Abilities\\Weapons\\Bolt\\BoltImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function InitTrig_W_suileiya2 takes nothing returns nothing
set gg_trg_W_suileiya2=CreateTrigger()
call DisableTrigger(gg_trg_W_suileiya2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_suileiya2,0.04)
call TriggerAddAction(gg_trg_W_suileiya2,function Trig_W_suileiya2_Actions)
endfunction
function Trig_R_whtxielunyan_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("immolation")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Hmkg'))then
return false
endif
return true
endfunction
function Trig_R_whtxielunyan_Actions takes nothing returns nothing
call UnitAddAbility(GetTriggerUnit(),'A027')
call SetUnitAbilityLevel(GetTriggerUnit(),'A027',5)
call SetUnitAbilityLevel(GetTriggerUnit(),'A040',2)
endfunction
function InitTrig_R_whtxielunyan takes nothing returns nothing
set gg_trg_R_whtxielunyan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_whtxielunyan,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_R_whtxielunyan,Condition(function Trig_R_whtxielunyan_Conditions))
call TriggerAddAction(gg_trg_R_whtxielunyan,function Trig_R_whtxielunyan_Actions)
endfunction
function Trig_R_whtxielunyan2_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("unimmolation")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Hmkg'))then
return false
endif
return true
endfunction
function Trig_R_whtxielunyan2_Actions takes nothing returns nothing
call UnitRemoveAbility(GetTriggerUnit(),'A027')
call SetUnitAbilityLevel(GetTriggerUnit(),'A040',1)
endfunction
function InitTrig_R_whtxielunyan2 takes nothing returns nothing
set gg_trg_R_whtxielunyan2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_whtxielunyan2,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_R_whtxielunyan2,Condition(function Trig_R_whtxielunyan2_Conditions))
call TriggerAddAction(gg_trg_R_whtxielunyan2,function Trig_R_whtxielunyan2_Actions)
endfunction
function Trig_R_kongjianxishou_Conditions takes nothing returns boolean
if(not(GetLearnedSkill()=='A02M'))then
return false
endif
return true
endfunction
function Trig_R_kongjianxishou_Func002C takes nothing returns boolean
if(not(udg_All_unit_bez[5]==true))then
return false
endif
return true
endfunction
function Trig_R_kongjianxishou_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if(Trig_R_kongjianxishou_Func002C())then
else
set udg_All_unit_bez[5]=true
call TriggerRegisterUnitEvent(gg_trg_R_kongjianxishou2,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
endif
endfunction
function InitTrig_R_kongjianxishou takes nothing returns nothing
set gg_trg_R_kongjianxishou=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_kongjianxishou,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_R_kongjianxishou,Condition(function Trig_R_kongjianxishou_Conditions))
call TriggerAddAction(gg_trg_R_kongjianxishou,function Trig_R_kongjianxishou_Actions)
endfunction
function Trig_R_kongjianxishou2_Conditions takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00W')==true))then
return false
endif
if(not(GetRandomInt(1,5)==1))then
return false
endif
if(not(GetEventDamage()>(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)*0.10)))then
return false
endif
return true
endfunction
function Trig_R_kongjianxishou2_Actions takes nothing returns nothing
call CreateTextTagUnitBJ("==空间吸收==",GetTriggerUnit(),0,9.00,20.00,20.00,20.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),60.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call SetUnitLifeBJ(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+GetEventDamage()))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_R_kongjianxishou2 takes nothing returns nothing
set gg_trg_R_kongjianxishou2=CreateTrigger()
call TriggerAddCondition(gg_trg_R_kongjianxishou2,Condition(function Trig_R_kongjianxishou2_Conditions))
call TriggerAddAction(gg_trg_R_kongjianxishou2,function Trig_R_kongjianxishou2_Actions)
endfunction
function Trig_D_leiqieshantu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A007'))then
return false
endif
return true
endfunction
function Trig_D_leiqieshantu_Actions takes nothing returns nothing
set udg_Unit_KKS[1]=GetTriggerUnit()
set udg_Unit_KKS[2]=GetSpellTargetUnit()
call SetUnitTimeScalePercent(udg_Unit_KKS[1],200.00)
call TriggerSleepAction(0.05)
call UnitAddAbility(udg_Unit_KKS[1],'A00B')
call SetUnitAnimation(udg_Unit_KKS[1],"spell two")
call PauseUnitBJ(true,udg_Unit_KKS[1])
call SetUnitPathing(udg_Unit_KKS[1],false)
call SetUnitFacingToFaceUnitTimed(udg_Unit_KKS[1],udg_Unit_KKS[2],0.05)
call TriggerSleepAction(0.80)
call SetUnitAnimation(udg_Unit_KKS[1],"spell slam")
call CreateNUnitsAtLoc(1,'o003',GetOwningPlayer(udg_Unit_KKS[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),50.00,(GetUnitFacing(udg_Unit_KKS[1])-20.00)),GetUnitFacing(udg_Unit_KKS[1]))
set udg_Unit_KKS[5]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_D_leiqieshantu2)
endfunction
function InitTrig_D_leiqieshantu takes nothing returns nothing
set gg_trg_D_leiqieshantu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_leiqieshantu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_leiqieshantu,Condition(function Trig_D_leiqieshantu_Conditions))
call TriggerAddAction(gg_trg_D_leiqieshantu,function Trig_D_leiqieshantu_Actions)
endfunction
function Trig_D_leiqieshantu2_Func001Func001Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_leiqieshantu2_Func001Func001Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_D_leiqieshantu2_Func001Func001Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_D_leiqieshantu2_Func001Func001Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_KKS[1],true))*3.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_leiqieshantu2_Func001Func001C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_KKS[1],GetUnitsInRangeOfLocAll(140.00,GetUnitLoc(udg_Unit_KKS[2])))==true))then
return false
endif
return true
endfunction
function Trig_D_leiqieshantu2_Func001Func008C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_KKS[2])==true))then
return true
endif
if((R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2])))>1400))then
return true
endif
return false
endfunction
function Trig_D_leiqieshantu2_Func001C takes nothing returns boolean
if(not Trig_D_leiqieshantu2_Func001Func008C())then
return false
endif
return true
endfunction
function Trig_D_leiqieshantu2_Actions takes nothing returns nothing
if(Trig_D_leiqieshantu2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnitBJ(false,udg_Unit_KKS[1])
call SetUnitTimeScalePercent(udg_Unit_KKS[1],100.00)
call SetUnitPathing(udg_Unit_KKS[1],true)
call UnitRemoveAbility(udg_Unit_KKS[1],'A00B')
call KillUnit(udg_Unit_KKS[5])
else
if(Trig_D_leiqieshantu2_Func001Func001C())then
call DisableTrigger(GetTriggeringTrigger())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_KKS[2]),Condition(function Trig_D_leiqieshantu2_Func001Func001Func003001003)),function Trig_D_leiqieshantu2_Func001Func001Func003A)
set udg_All_unit_shu[40]=AngleBetweenPoints(GetUnitLoc(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]))
set udg_All_unit_shu[39]=0.00
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_KKS[2]),"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call EnableTrigger(gg_trg_D_leiqieshantu3)
else
call SetUnitPositionLocFacingLocBJ(udg_Unit_KKS[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]))),GetUnitLoc(udg_Unit_KKS[2]))
call SetUnitPositionLocFacingBJ(udg_Unit_KKS[5],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),50.00,(GetUnitFacing(udg_Unit_KKS[1])-20.00)),GetUnitFacing(udg_Unit_KKS[1]))
endif
endif
endfunction
function InitTrig_D_leiqieshantu2 takes nothing returns nothing
set gg_trg_D_leiqieshantu2=CreateTrigger()
call DisableTrigger(gg_trg_D_leiqieshantu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_leiqieshantu2,0.02)
call TriggerAddAction(gg_trg_D_leiqieshantu2,function Trig_D_leiqieshantu2_Actions)
endfunction
function Trig_D_leiqieshantu3_Func001Func001Func001Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_leiqieshantu3_Func001Func001Func001Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_D_leiqieshantu3_Func001Func001Func001Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_D_leiqieshantu3_Func001Func001Func001Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_KKS[1],true))*(2.00+(0.15*udg_All_unit_shu[39]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_leiqieshantu3_Func001Func001Func001C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_KKS[2],GetUnitsInRangeOfLocAll(150.00,GetDestructableLoc(GetEnumDestructable())))==true))then
return false
endif
return true
endfunction
function Trig_D_leiqieshantu3_Func001Func001A takes nothing returns nothing
if(Trig_D_leiqieshantu3_Func001Func001Func001C())then
call DisableTrigger(GetTriggeringTrigger())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_KKS[2]),Condition(function Trig_D_leiqieshantu3_Func001Func001Func001Func003001003)),function Trig_D_leiqieshantu3_Func001Func001Func001Func003A)
call CreateNUnitsAtLoc(1,'hsor',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]),GetRandomDirectionDeg())
call SetUnitScale(GetLastCreatedUnit(),3.00,3.00,3.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.50)
call KillUnit(GetLastCreatedUnit())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'o004',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]),(90.00*I2R(bj_forLoopAIndex)))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.60)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call CreateNUnitsAtLoc(1,'o004',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]),GetUnitFacing(udg_Unit_KKS[1]))
call SetUnitScale(GetLastCreatedUnit(),4.00,4.00,4.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call PauseUnitBJ(false,udg_Unit_KKS[1])
call SetUnitTimeScalePercent(udg_Unit_KKS[1],100.00)
call SetUnitPathing(udg_Unit_KKS[1],true)
call UnitRemoveAbility(udg_Unit_KKS[1],'A00B')
call KillUnit(udg_Unit_KKS[5])
return
else
endif
endfunction
function Trig_D_leiqieshantu3_Func001Func002Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_leiqieshantu3_Func001Func002Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true)
endfunction
function Trig_D_leiqieshantu3_Func001Func002Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_KKS[1]))==true))
endfunction
function Trig_D_leiqieshantu3_Func001Func002Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_KKS[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_KKS[1],true))*(2.00+(0.10*udg_All_unit_shu[39]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_leiqieshantu3_Func001Func002Func018C takes nothing returns boolean
if((udg_All_unit_shu[39]>=100.00))then
return true
endif
if((IsTerrainPathableBJ(GetUnitLoc(udg_Unit_KKS[1]),PATHING_TYPE_WALKABILITY)==true))then
return true
endif
if((IsTerrainPathableBJ(GetUnitLoc(udg_Unit_KKS[2]),PATHING_TYPE_WALKABILITY)==true))then
return true
endif
if((IsTerrainPathableBJ(GetUnitLoc(udg_Unit_KKS[5]),PATHING_TYPE_WALKABILITY)==true))then
return true
endif
return false
endfunction
function Trig_D_leiqieshantu3_Func001Func002C takes nothing returns boolean
if(not Trig_D_leiqieshantu3_Func001Func002Func018C())then
return false
endif
return true
endfunction
function Trig_D_leiqieshantu3_Func001Func009C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_KKS[2])==true))then
return true
endif
if((R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2])))>1400))then
return true
endif
return false
endfunction
function Trig_D_leiqieshantu3_Func001C takes nothing returns boolean
if(not Trig_D_leiqieshantu3_Func001Func009C())then
return false
endif
return true
endfunction
function Trig_D_leiqieshantu3_Actions takes nothing returns nothing
if(Trig_D_leiqieshantu3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnitBJ(false,udg_Unit_KKS[1])
call SetUnitTimeScalePercent(udg_Unit_KKS[1],100.00)
call SetUnitPathing(udg_Unit_KKS[1],true)
call UnitRemoveAbility(udg_Unit_KKS[1],'A00B')
call KillUnit(udg_Unit_KKS[5])
else
call EnumDestructablesInCircleBJ(200.00,GetUnitLoc(udg_Unit_KKS[2]),function Trig_D_leiqieshantu3_Func001Func001A)
if(Trig_D_leiqieshantu3_Func001Func002C())then
call DisableTrigger(GetTriggeringTrigger())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_KKS[2]),Condition(function Trig_D_leiqieshantu3_Func001Func002Func003001003)),function Trig_D_leiqieshantu3_Func001Func002Func003A)
call CreateNUnitsAtLoc(1,'hsor',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]),GetRandomDirectionDeg())
call SetUnitScale(GetLastCreatedUnit(),3.00,3.00,3.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.50)
call KillUnit(GetLastCreatedUnit())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'o004',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]),(90.00*I2R(bj_forLoopAIndex)))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.60)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call CreateNUnitsAtLoc(1,'o004',GetOwningPlayer(udg_Unit_KKS[1]),GetUnitLoc(udg_Unit_KKS[2]),GetUnitFacing(udg_Unit_KKS[1]))
call SetUnitScale(GetLastCreatedUnit(),4.00,4.00,4.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call TriggerSleepAction(0.10)
call PauseUnitBJ(false,udg_Unit_KKS[1])
call SetUnitTimeScalePercent(udg_Unit_KKS[1],100.00)
call SetUnitPathing(udg_Unit_KKS[1],true)
call UnitRemoveAbility(udg_Unit_KKS[1],'A00B')
call KillUnit(udg_Unit_KKS[5])
else
call SetUnitPositionLocFacingLocBJ(udg_Unit_KKS[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),24.00,udg_All_unit_shu[40]),GetUnitLoc(udg_Unit_KKS[2]))
call SetUnitPositionLoc(udg_Unit_KKS[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),90.00,udg_All_unit_shu[40]))
call SetUnitPositionLocFacingBJ(udg_Unit_KKS[5],PolarProjectionBJ(GetUnitLoc(udg_Unit_KKS[1]),160.00,(GetUnitFacing(udg_Unit_KKS[1])-6.50)),GetUnitFacing(udg_Unit_KKS[1]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_KKS[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[39]=(udg_All_unit_shu[39]+1)
endif
endif
endfunction
function InitTrig_D_leiqieshantu3 takes nothing returns nothing
set gg_trg_D_leiqieshantu3=CreateTrigger()
call DisableTrigger(gg_trg_D_leiqieshantu3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_leiqieshantu3,0.02)
call TriggerAddAction(gg_trg_D_leiqieshantu3,function Trig_D_leiqieshantu3_Actions)
endfunction
function Trig_E_chana_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Awfb'))then
return false
endif
return true
endfunction
function Trig_E_chana_Func011Func001C takes nothing returns boolean
if(not(IsUnitDeadBJ(udg_Unit_ZZ[2])==true))then
return false
endif
return true
endfunction
function Trig_E_chana_Actions takes nothing returns nothing
set udg_Unit_ZZ[1]=GetTriggerUnit()
set udg_Unit_ZZ[2]=GetSpellTargetUnit()
set udg_Dian_ZZ[1]=GetUnitLoc(GetTriggerUnit())
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_ZZ[1],"Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_ZZ[1],true)
call SetUnitTimeScale(udg_Unit_ZZ[1],3.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if(Trig_E_chana_Func011Func001C())then
call SetUnitTimeScale(udg_Unit_ZZ[1],1.00)
call PauseUnit(udg_Unit_ZZ[1],false)
return
else
call TriggerSleepAction(0.00)
call AddSpecialEffectTargetUnitBJ("right hand",udg_Unit_ZZ[1],"Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitPositionLocFacingLocBJ(udg_Unit_ZZ[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZ[2]),75.00,(I2R(bj_forLoopAIndex)*150.00)),GetUnitLoc(udg_Unit_ZZ[2]))
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[2]))
call AddSpecialEffectTargetUnitBJ("weapon",udg_Unit_ZZ[1],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitAnimation(udg_Unit_ZZ[1],"attack")
call SetUnitAnimation(udg_Unit_ZZ[2],"death")
call UnitDamageTarget(udg_Unit_ZZ[1],udg_Unit_ZZ[2],100.00,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(0.10)
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[1]))
set udg_Unit_ZZ[3]=GetLastCreatedUnit()
call SetUnitTimeScale(udg_Unit_ZZ[3],5.00)
call SetUnitVertexColor(udg_Unit_ZZ[3],255,255,255,100)
call TriggerSleepAction(0.20)
set udg_Dian_ZZ[4]=GetUnitLoc(udg_Unit_ZZ[2])
call SetUnitPositionLocFacingLocBJ(udg_Unit_ZZ[1],udg_Dian_ZZ[1],GetUnitLoc(udg_Unit_ZZ[2]))
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[2]))
call RemoveLocation(udg_Dian_ZZ[1])
call SetUnitAnimation(udg_Unit_ZZ[1],"spell two")
call PauseUnit(udg_Unit_ZZ[1],false)
call SetUnitTimeScale(udg_Unit_ZZ[1],1.00)
call KillUnit(udg_Unit_ZZ[3])
endfunction
function InitTrig_E_chana takes nothing returns nothing
set gg_trg_E_chana=CreateTrigger()
call DisableTrigger(gg_trg_E_chana)
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_chana,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_chana,Condition(function Trig_E_chana_Conditions))
call TriggerAddAction(gg_trg_E_chana,function Trig_E_chana_Actions)
endfunction
function Trig_E_chana2_Func001C takes nothing returns boolean
if(not(IsUnitDeadBJ(udg_Unit_ZZ[2])==true))then
return false
endif
return true
endfunction
function Trig_E_chana2_Actions takes nothing returns nothing
if(Trig_E_chana2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(udg_Unit_ZZ[1],false)
call SetUnitTimeScale(udg_Unit_ZZ[1],1.00)
call KillUnit(udg_Unit_ZZ[3])
call SetUnitPositionLocFacingLocBJ(udg_Unit_ZZ[1],GetUnitLoc(udg_Unit_ZZ[2]),GetUnitLoc(udg_Unit_ZZ[2]))
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[2]))
else
call AddSpecialEffectTargetUnitBJ("left",udg_Unit_ZZ[1],"Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitAnimation(udg_Unit_ZZ[2],"death")
call SetUnitPositionLocFacingLocBJ(udg_Unit_ZZ[1],udg_Dian_ZZ[2],GetUnitLoc(udg_Unit_ZZ[2]))
call SetUnitAnimation(udg_Unit_ZZ[1],"attack")
call RemoveLocation(udg_Dian_ZZ[2])
call SetUnitPositionLocFacingLocBJ(udg_Unit_ZZ[3],udg_Dian_ZZ[3],GetUnitLoc(udg_Unit_ZZ[2]))
call SetUnitAnimation(udg_Unit_ZZ[3],"attack")
call RemoveLocation(udg_Dian_ZZ[3])
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZZ[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[2]))
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[1]))
call UnitDamageTarget(udg_Unit_ZZ[1],udg_Unit_ZZ[2],I2R(GetHeroAgi(udg_Unit_ZZ[1],true)),true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endif
endfunction
function InitTrig_E_chana2 takes nothing returns nothing
set gg_trg_E_chana2=CreateTrigger()
call DisableTrigger(gg_trg_E_chana2)
call TriggerRegisterTimerEventPeriodic(gg_trg_E_chana2,0.04)
call TriggerAddAction(gg_trg_E_chana2,function Trig_E_chana2_Actions)
endfunction
function Trig_Q_xuanfengquan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Arsw'))then
return false
endif
return true
endfunction
function Trig_Q_xuanfengquan_Actions takes nothing returns nothing
set udg_Unit_AS[1]=GetTriggerUnit()
set udg_All_unit_shu[12]=0.00
call CreateNUnitsAtLocFacingLocBJ(1,'ogru',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
set udg_Unit_AS[3]=GetLastCreatedUnit()
call GroupClear(udg_All_unit_tm[5])
call EnableTrigger(gg_trg_Q_xuanfengquan2)
endfunction
function InitTrig_Q_xuanfengquan takes nothing returns nothing
set gg_trg_Q_xuanfengquan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_xuanfengquan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_xuanfengquan,Condition(function Trig_Q_xuanfengquan_Conditions))
call TriggerAddAction(gg_trg_Q_xuanfengquan,function Trig_Q_xuanfengquan_Actions)
endfunction
function Trig_Q_xuanfengquan2_Func001Func004C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_AS[3]),udg_All_unit_Dian[6])<=250.00))then
return false
endif
if(not(udg_All_unit_shu[12]==0.00))then
return false
endif
return true
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func003001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func003001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func003001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))))
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_AS[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(udg_Unit_AS[1],'Arsw'))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[5],GetEnumUnit())
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func005001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func005001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func005001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))))
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_AS[1],GetEnumUnit(),(70.00*I2R(GetUnitAbilityLevel(udg_Unit_AS[1],'Arsw'))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[5],GetEnumUnit())
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func001C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_AS[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func003001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func003001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func003001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))))
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_AS[1],GetEnumUnit(),(I2R(GetHeroStr(udg_Unit_AS[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_AS[1],'Arsw'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\BallsOfFireMissile\\BallsOfFireMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[5],GetEnumUnit())
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func006001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func006001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true)
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func006001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[5])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))))
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_AS[1],GetEnumUnit(),(I2R(GetHeroStr(udg_Unit_AS[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_AS[1],'Arsw'))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\BallsOfFireMissile\\BallsOfFireMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[5],GetEnumUnit())
endfunction
function Trig_Q_xuanfengquan2_Func001Func005Func002C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_AS[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_Q_xuanfengquan2_Func001Func005C takes nothing returns boolean
if(not(udg_All_unit_shu[12]==1.00))then
return false
endif
return true
endfunction
function Trig_Q_xuanfengquan2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_AS[3])==true))then
return false
endif
return true
endfunction
function Trig_Q_xuanfengquan2_Actions takes nothing returns nothing
if(Trig_Q_xuanfengquan2_Func001C())then
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_AS[3]),50.00,GetUnitFacing(udg_Unit_AS[3]))
call SetUnitPositionLocFacingBJ(udg_Unit_AS[3],udg_ALL_PointPX,GetUnitFacing(udg_Unit_AS[3]))
call RemoveLocation(udg_ALL_PointPX)
if(Trig_Q_xuanfengquan2_Func001Func004C())then
set udg_All_unit_shu[12]=1.00
call GroupClear(udg_All_unit_tm[5])
call EnableTrigger(gg_trg_Q_xuanfengquan3)
else
endif
if(Trig_Q_xuanfengquan2_Func001Func005C())then
if(Trig_Q_xuanfengquan2_Func001Func005Func002C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_AS[3]),Condition(function Trig_Q_xuanfengquan2_Func001Func005Func002Func003001003)),function Trig_Q_xuanfengquan2_Func001Func005Func002Func003A)
call RemoveLocation(GetUnitLoc(udg_Unit_AS[3]))
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_AS[3]),Condition(function Trig_Q_xuanfengquan2_Func001Func005Func002Func006001003)),function Trig_Q_xuanfengquan2_Func001Func005Func002Func006A)
call RemoveLocation(GetUnitLoc(udg_Unit_AS[3]))
endif
else
if(Trig_Q_xuanfengquan2_Func001Func005Func001C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_AS[3]),Condition(function Trig_Q_xuanfengquan2_Func001Func005Func001Func005001003)),function Trig_Q_xuanfengquan2_Func001Func005Func001Func005A)
call RemoveLocation(GetUnitLoc(udg_Unit_AS[3]))
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_AS[3]),Condition(function Trig_Q_xuanfengquan2_Func001Func005Func001Func003001003)),function Trig_Q_xuanfengquan2_Func001Func005Func001Func003A)
call RemoveLocation(GetUnitLoc(udg_Unit_AS[3]))
endif
endif
else
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(gg_trg_Q_xuanfengquan3)
endif
endfunction
function InitTrig_Q_xuanfengquan2 takes nothing returns nothing
set gg_trg_Q_xuanfengquan2=CreateTrigger()
call DisableTrigger(gg_trg_Q_xuanfengquan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_xuanfengquan2,0.04)
call TriggerAddAction(gg_trg_Q_xuanfengquan2,function Trig_Q_xuanfengquan2_Actions)
endfunction
function Trig_Q_xuanfengquan3_Actions takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_AS[3]),160.00,GetUnitFacing(udg_Unit_AS[3]))
call CreateNUnitsAtLoc(1,'orai',GetOwningPlayer(udg_Unit_AS[1]),udg_ALL_PointPX,(GetUnitFacing(udg_Unit_AS[3])+180.00))
call RemoveLocation(udg_ALL_PointPX)
call KillUnit(GetLastCreatedUnit())
endfunction
function InitTrig_Q_xuanfengquan3 takes nothing returns nothing
set gg_trg_Q_xuanfengquan3=CreateTrigger()
call DisableTrigger(gg_trg_Q_xuanfengquan3)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_xuanfengquan3,0.10)
call TriggerAddAction(gg_trg_Q_xuanfengquan3,function Trig_Q_xuanfengquan3_Actions)
endfunction
function Trig_W_langyazhuizhui_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AHtb'))then
return false
endif
return true
endfunction
function Trig_W_langyazhuizhui_Actions takes nothing returns nothing
set udg_Unit_AS[1]=GetTriggerUnit()
set udg_Unit_AS[2]=GetSpellTargetUnit()
set udg_All_unit_shu[13]=0.00
call UnitAddAbility(udg_Unit_AS[1],'A03R')
call SetUnitTimeScale(udg_Unit_AS[1],6.00)
call EnableTrigger(gg_trg_W_langyazhuizhui2)
endfunction
function InitTrig_W_langyazhuizhui takes nothing returns nothing
set gg_trg_W_langyazhuizhui=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_langyazhuizhui,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_langyazhuizhui,Condition(function Trig_W_langyazhuizhui_Conditions))
call TriggerAddAction(gg_trg_W_langyazhuizhui,function Trig_W_langyazhuizhui_Actions)
endfunction
function Trig_W_langyazhuizhui2_Func001Func001C takes nothing returns boolean
if((udg_All_unit_shu[13]>=I2R(GetUnitAbilityLevel(udg_Unit_AS[1],'AHtb'))))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_AS[2])==true))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_AS[1])==true))then
return true
endif
return false
endfunction
function Trig_W_langyazhuizhui2_Func001Func013Func001Func007Func001C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_AS[1],'oven'))==true))then
return false
endif
if(not(udg_All_unit_shu[14]>=10.00))then
return false
endif
return true
endfunction
function Trig_W_langyazhuizhui2_Func001Func013Func001Func007Func002C takes nothing returns boolean
if(not(udg_All_unit_shu[14]>=15.00))then
return false
endif
return true
endfunction
function Trig_W_langyazhuizhui2_Func001Func013Func001Func007C takes nothing returns boolean
if(Trig_W_langyazhuizhui2_Func001Func013Func001Func007Func001C())then
return true
endif
if(Trig_W_langyazhuizhui2_Func001Func013Func001Func007Func002C())then
return true
endif
return false
endfunction
function Trig_W_langyazhuizhui2_Func001Func013Func001C takes nothing returns boolean
if(not Trig_W_langyazhuizhui2_Func001Func013Func001Func007C())then
return false
endif
return true
endfunction
function Trig_W_langyazhuizhui2_Func001Func013C takes nothing returns boolean
if(not(GetRandomInt(1,100)<=15))then
return false
endif
return true
endfunction
function Trig_W_langyazhuizhui2_Func001C takes nothing returns boolean
if(not Trig_W_langyazhuizhui2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_W_langyazhuizhui2_Actions takes nothing returns nothing
if(Trig_W_langyazhuizhui2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitPositionLocFacingBJ(udg_Unit_AS[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_AS[2]),100.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_AS[1]),GetUnitLoc(udg_Unit_AS[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_AS[1]),GetUnitLoc(udg_Unit_AS[2])))
call UnitRemoveAbility(udg_Unit_AS[1],'A03R')
call SetUnitTimeScale(udg_Unit_AS[1],1)
else
call SetUnitPositionLocFacingBJ(udg_Unit_AS[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_AS[2]),160.00,(AngleBetweenPoints(GetUnitLoc(udg_Unit_AS[1]),GetUnitLoc(udg_Unit_AS[2]))+GetRandomReal(20.00,60.00))),AngleBetweenPoints(GetUnitLoc(udg_Unit_AS[1]),GetUnitLoc(udg_Unit_AS[2])))
call SetUnitPositionLocFacingBJ(udg_Unit_AS[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_AS[2]),25.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_AS[1]),GetUnitLoc(udg_Unit_AS[2]))),GetUnitFacing(udg_Unit_AS[2]))
call SetUnitAnimation(udg_Unit_AS[1],"attack")
call UnitDamageTargetBJ(udg_Unit_AS[1],udg_Unit_AS[2],80.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_AS[1]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[13]=(udg_All_unit_shu[13]+1)
if(Trig_W_langyazhuizhui2_Func001Func013C())then
if(Trig_W_langyazhuizhui2_Func001Func013Func001C())then
set udg_All_unit_shu[14]=0.00
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_AS[1]),GetUnitLoc(udg_Unit_AS[1]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ablo',GetUnitAbilityLevel(udg_Unit_AS[1],'AHad'))
call IssueTargetOrderById(GetLastCreatedUnit(),852101,udg_Unit_AS[1])
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_AS[1]),"Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("哇喔喔!!(疾拳之态)",udg_Unit_AS[1],0,10.50,100,100,50.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.20)
else
set udg_All_unit_shu[14]=(udg_All_unit_shu[14]+1)
call CreateTextTagUnitBJ((I2S(R2I(udg_All_unit_shu[14]))+"hit"),udg_Unit_AS[1],0,10.00,100,100,80.00,0)
call ShowTextTagForceBJ(true,GetLastCreatedTextTag(),GetPlayersByMapControl(GetPlayerController(GetOwningPlayer(udg_Unit_AS[1]))))
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),50.00,180.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.20)
endif
else
endif
endif
endfunction
function InitTrig_W_langyazhuizhui2 takes nothing returns nothing
set gg_trg_W_langyazhuizhui2=CreateTrigger()
call DisableTrigger(gg_trg_W_langyazhuizhui2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_langyazhuizhui2,0.10)
call TriggerAddAction(gg_trg_W_langyazhuizhui2,function Trig_W_langyazhuizhui2_Actions)
endfunction
function Trig_E_fengbaosui_Conditions takes nothing returns boolean
if(not(GetLearnedSkill()=='AHad'))then
return false
endif
return true
endfunction
function Trig_E_fengbaosui_Actions takes nothing returns nothing
call EnableTrigger(gg_trg_E_fengbaosui2)
call DisableTrigger(GetTriggeringTrigger())
endfunction
function InitTrig_E_fengbaosui takes nothing returns nothing
set gg_trg_E_fengbaosui=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_fengbaosui,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_E_fengbaosui,Condition(function Trig_E_fengbaosui_Conditions))
call TriggerAddAction(gg_trg_E_fengbaosui,function Trig_E_fengbaosui_Actions)
endfunction
function Trig_E_fengbaosui2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Udre'))then
return false
endif
if(not(GetSpellAbilityId()!='A01W'))then
return false
endif
if(not(GetSpellAbilityId()!='A00E'))then
return false
endif
if(not(GetSpellAbilityId()!='A01V'))then
return false
endif
if(not(GetSpellAbilityId()!='A01Y'))then
return false
endif
return true
endfunction
function Trig_E_fengbaosui2_Func001Func001Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[14]>=15.00))then
return false
endif
return true
endfunction
function Trig_E_fengbaosui2_Func001Func001Func002C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'oven'))==true))then
return false
endif
if(not(udg_All_unit_shu[14]>=10.00))then
return false
endif
return true
endfunction
function Trig_E_fengbaosui2_Func001Func001C takes nothing returns boolean
if(Trig_E_fengbaosui2_Func001Func001Func001C())then
return true
endif
if(Trig_E_fengbaosui2_Func001Func001Func002C())then
return true
endif
return false
endfunction
function Trig_E_fengbaosui2_Func001C takes nothing returns boolean
if(not Trig_E_fengbaosui2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_E_fengbaosui2_Actions takes nothing returns nothing
if(Trig_E_fengbaosui2_Func001C())then
set udg_All_unit_shu[14]=0.00
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetTriggerUnit()),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Ablo',GetUnitAbilityLevel(GetTriggerUnit(),'AHad'))
call IssueTargetOrderById(GetLastCreatedUnit(),852101,GetTriggerUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("哇喔喔!!(疾拳之态)",GetTriggerUnit(),0,10.50,100,100,50.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.20)
set udg_Unit_AS[1]=GetTriggerUnit()
else
set udg_All_unit_shu[14]=(udg_All_unit_shu[14]+1)
call CreateTextTagUnitBJ((I2S(R2I(udg_All_unit_shu[14]))+"hit"),GetTriggerUnit(),0,10.00,100,100,80.00,0)
call ShowTextTagForceBJ(true,GetLastCreatedTextTag(),GetPlayersByMapControl(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))))
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),50.00,180.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.20)
endif
endfunction
function InitTrig_E_fengbaosui2 takes nothing returns nothing
set gg_trg_E_fengbaosui2=CreateTrigger()
call DisableTrigger(gg_trg_E_fengbaosui2)
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_fengbaosui2,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_fengbaosui2,Condition(function Trig_E_fengbaosui2_Conditions))
call TriggerAddAction(gg_trg_E_fengbaosui2,function Trig_E_fengbaosui2_Actions)
endfunction
function Trig_R_dahuoji_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANcs'))then
return false
endif
return true
endfunction
function Trig_R_dahuoji_Actions takes nothing returns nothing
set udg_Unit_AS[1]=GetTriggerUnit()
set udg_All_unit_Dian[6]=GetSpellTargetLoc()
set udg_All_unit_shu[11]=AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),udg_All_unit_Dian[6])
call TriggerSleepAction(0.40)
call CreateNUnitsAtLoc(1,'nhew',GetOwningPlayer(udg_Unit_AS[1]),udg_All_unit_Dian[6],udg_All_unit_shu[11])
call SetUnitAbilityLevel(GetLastRestoredUnitBJ(),'ANpi',2)
call UnitApplyTimedLifeBJ(8.00,'BHwe',GetLastCreatedUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nhew',GetOwningPlayer(udg_Unit_AS[1]),PolarProjectionBJ(udg_All_unit_Dian[6],(I2R(bj_forLoopAIndex)*120.00),(udg_All_unit_shu[11]+90.00)),udg_All_unit_shu[11])
call SetUnitAbilityLevel(GetLastRestoredUnitBJ(),'ANpi',2)
call UnitApplyTimedLifeBJ(8.00,'BHwe',GetLastCreatedUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nhew',GetOwningPlayer(udg_Unit_AS[1]),PolarProjectionBJ(udg_All_unit_Dian[6],(I2R(bj_forLoopAIndex)*120.00),(udg_All_unit_shu[11]-90.00)),udg_All_unit_shu[11])
call SetUnitAbilityLevel(GetLastRestoredUnitBJ(),'ANpi',2)
call UnitApplyTimedLifeBJ(8.00,'BHwe',GetLastCreatedUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(8.00)
call MoveLocation(udg_All_unit_Dian[6],5000.00,4000.00)
endfunction
function InitTrig_R_dahuoji takes nothing returns nothing
set gg_trg_R_dahuoji=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_dahuoji,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_dahuoji,Condition(function Trig_R_dahuoji_Conditions))
call TriggerAddAction(gg_trg_R_dahuoji,function Trig_R_dahuoji_Actions)
endfunction
function Trig_R_dahuoji2_Actions takes nothing returns nothing
endfunction
function InitTrig_R_dahuoji2 takes nothing returns nothing
set gg_trg_R_dahuoji2=CreateTrigger()
call TriggerAddAction(gg_trg_R_dahuoji2,function Trig_R_dahuoji2_Actions)
endfunction
function Trig_D_feiyan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACcl'))then
return false
endif
return true
endfunction
function Trig_D_feiyan_Actions takes nothing returns nothing
set udg_Unit_AS[1]=GetTriggerUnit()
set udg_Unit_AS[2]=GetSpellTargetUnit()
call SetUnitAnimation(udg_Unit_AS[1],"spell channel")
call UnitAddAbility(udg_Unit_AS[1],'A00F')
call UnitAddAbility(udg_Unit_AS[1],'A016')
call TriggerSleepAction(0.10)
call PauseUnitBJ(true,udg_Unit_AS[1])
call SetUnitPathing(udg_Unit_AS[1],false)
call SetUnitTimeScalePercent(udg_Unit_AS[1],300.00)
call SetUnitAnimationByIndex(udg_Unit_AS[1],8)
call EnableTrigger(gg_trg_D_feiyan2)
endfunction
function InitTrig_D_feiyan takes nothing returns nothing
set gg_trg_D_feiyan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_feiyan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_feiyan,Condition(function Trig_D_feiyan_Conditions))
call TriggerAddAction(gg_trg_D_feiyan,function Trig_D_feiyan_Actions)
endfunction
function Trig_D_feiyan2_Func001Func001C takes nothing returns boolean
if((IsUnitInGroup(udg_Unit_AS[1],GetUnitsInRangeOfLocAll(100.00,GetUnitLoc(udg_Unit_AS[2])))==true))then
return true
endif
return false
endfunction
function Trig_D_feiyan2_Func001Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_feiyan2_Func001Func006001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true)
endfunction
function Trig_D_feiyan2_Func001Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_AS[1]))==true))
endfunction
function Trig_D_feiyan2_Func001Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_AS[1],GetEnumUnit(),2000.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call CreateNUnitsAtLoc(1,'otau',GetOwningPlayer(udg_Unit_AS[1]),GetUnitLoc(GetEnumUnit()),0.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.80)
endfunction
function Trig_D_feiyan2_Func001Func013C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_AS[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_D_feiyan2_Func001C takes nothing returns boolean
if(not Trig_D_feiyan2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_D_feiyan2_Actions takes nothing returns nothing
if(Trig_D_feiyan2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_AS[2]),"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(180.00,GetUnitLoc(udg_Unit_AS[2]),Condition(function Trig_D_feiyan2_Func001Func006001003)),function Trig_D_feiyan2_Func001Func006A)
call TerrainDeformationRippleBJ(0.20,false,GetUnitLoc(udg_Unit_AS[2]),200.00,200.00,120.00,0.10,40.00)
call TriggerSleepAction(0.10)
call SetUnitTimeScalePercent(udg_Unit_AS[1],100.00)
call SetUnitPathing(udg_Unit_AS[1],true)
call PauseUnitBJ(false,udg_Unit_AS[1])
call UnitRemoveAbility(udg_Unit_AS[1],'A016')
if(Trig_D_feiyan2_Func001Func013C())then
call TriggerSleepAction(25.00)
call UnitRemoveAbility(udg_Unit_AS[1],'A00F')
else
call TriggerSleepAction(10.00)
call UnitRemoveAbility(udg_Unit_AS[1],'A00F')
endif
else
call SetUnitPositionLocFacingLocBJ(udg_Unit_AS[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_AS[1]),60.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_AS[1]),GetUnitLoc(udg_Unit_AS[2]))),GetUnitLoc(udg_Unit_AS[2]))
endif
endfunction
function InitTrig_D_feiyan2 takes nothing returns nothing
set gg_trg_D_feiyan2=CreateTrigger()
call DisableTrigger(gg_trg_D_feiyan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_feiyan2,0.02)
call TriggerAddAction(gg_trg_D_feiyan2,function Trig_D_feiyan2_Actions)
endfunction
function Trig_D_feiyan3_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Udre'))then
return false
endif
return true
endfunction
function Trig_D_feiyan3_Actions takes nothing returns nothing
call UnitRemoveAbility(GetTriggerUnit(),'A00F')
endfunction
function InitTrig_D_feiyan3 takes nothing returns nothing
set gg_trg_D_feiyan3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_feiyan3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_D_feiyan3,Condition(function Trig_D_feiyan3_Conditions))
call TriggerAddAction(gg_trg_D_feiyan3,function Trig_D_feiyan3_Actions)
endfunction
function Trig_Q_huolongyandan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANbf'))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandan_Func003C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'ofir'))==true))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandan_Actions takes nothing returns nothing
set udg_Unit_ZLY[1]=GetTriggerUnit()
set udg_All_unit_shu[4]=0.20
if(Trig_Q_huolongyandan_Func003C())then
call EnableTrigger(gg_trg_Q_huolongyandan2)
else
call EnableTrigger(gg_trg_Q_huolongyandan3)
endif
call CreateNUnitsAtLoc(1,'uswb',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),100.00,AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())),GetUnitFacing(GetTriggerUnit()))
call UnitApplyTimedLifeBJ(0.20,'BHwe',GetLastCreatedUnit())
call TriggerSleepAction(1.00)
call DisableTrigger(gg_trg_Q_huolongyandan2)
call DisableTrigger(gg_trg_Q_huolongyandan3)
endfunction
function InitTrig_Q_huolongyandan takes nothing returns nothing
set gg_trg_Q_huolongyandan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_huolongyandan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_huolongyandan,Condition(function Trig_Q_huolongyandan_Conditions))
call TriggerAddAction(gg_trg_Q_huolongyandan,function Trig_Q_huolongyandan_Actions)
endfunction
function Trig_Q_huolongyandan2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='uswb'))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandan2_Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_huolongyandan2_Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true)
endfunction
function Trig_Q_huolongyandan2_Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true))
endfunction
function Trig_Q_huolongyandan2_Func005A takes nothing returns nothing
call UnitDamageTargetBJ(GetLastCreatedUnit(),GetEnumUnit(),(150.00*udg_All_unit_shu[4]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_huolongyandan2_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'uswb',GetOwningPlayer(GetDyingUnit()),PolarProjectionBJ(GetUnitLoc(GetDyingUnit()),150.00,GetUnitFacing(GetDyingUnit())),GetUnitFacing(GetDyingUnit()))
call SetUnitScale(GetLastCreatedUnit(),(1+udg_All_unit_shu[4]),(1+udg_All_unit_shu[4]),(1+udg_All_unit_shu[4]))
call UnitApplyTimedLifeBJ(0.20,'BHwe',GetLastCreatedUnit())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_Q_huolongyandan2_Func005001003)),function Trig_Q_huolongyandan2_Func005A)
set udg_All_unit_shu[4]=(udg_All_unit_shu[4]+0.20)
endfunction
function InitTrig_Q_huolongyandan2 takes nothing returns nothing
set gg_trg_Q_huolongyandan2=CreateTrigger()
call DisableTrigger(gg_trg_Q_huolongyandan2)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_huolongyandan2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Q_huolongyandan2,Condition(function Trig_Q_huolongyandan2_Conditions))
call TriggerAddAction(gg_trg_Q_huolongyandan2,function Trig_Q_huolongyandan2_Actions)
endfunction
function Trig_Q_huolongyandan3_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='uswb'))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandan3_Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_huolongyandan3_Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true)
endfunction
function Trig_Q_huolongyandan3_Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true))
endfunction
function Trig_Q_huolongyandan3_Func005A takes nothing returns nothing
call UnitDamageTargetBJ(GetLastCreatedUnit(),GetEnumUnit(),35.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_huolongyandan3_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'uswb',GetOwningPlayer(GetDyingUnit()),PolarProjectionBJ(GetUnitLoc(GetDyingUnit()),100.00,GetUnitFacing(GetDyingUnit())),GetUnitFacing(GetDyingUnit()))
call SetUnitScale(GetLastCreatedUnit(),1.00,1.00,1.00)
call UnitApplyTimedLifeBJ(0.20,'BHwe',GetLastCreatedUnit())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_Q_huolongyandan3_Func005001003)),function Trig_Q_huolongyandan3_Func005A)
endfunction
function InitTrig_Q_huolongyandan3 takes nothing returns nothing
set gg_trg_Q_huolongyandan3=CreateTrigger()
call DisableTrigger(gg_trg_Q_huolongyandan3)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_huolongyandan3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Q_huolongyandan3,Condition(function Trig_Q_huolongyandan3_Conditions))
call TriggerAddAction(gg_trg_Q_huolongyandan3,function Trig_Q_huolongyandan3_Actions)
endfunction
function Trig_W_haoluoxuanwan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A02J'))then
return false
endif
return true
endfunction
function Trig_W_haoluoxuanwan_Func006C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_ZLY[1],'ofir'))==true))then
return false
endif
return true
endfunction
function Trig_W_haoluoxuanwan_Func010Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_haoluoxuanwan_Func010Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZLY[1]))==true)
endfunction
function Trig_W_haoluoxuanwan_Func010Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZLY[1]))==true))
endfunction
function Trig_W_haoluoxuanwan_Func010Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZLY[1],GetEnumUnit(),400.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_haoluoxuanwan_Func010C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_ZLY[1],'ofir'))==true))then
return false
endif
if(not(UnitHasBuffBJ(udg_Unit_ZLY[2],'BNdh')==true))then
return false
endif
return true
endfunction
function Trig_W_haoluoxuanwan_Actions takes nothing returns nothing
set udg_Unit_ZLY[1]=GetTriggerUnit()
set udg_Unit_ZLY[2]=GetSpellTargetUnit()
call CreateNUnitsAtLoc(1,'nbee',GetOwningPlayer(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
set udg_Unit_ZLY[3]=GetLastCreatedUnit()
if(Trig_W_haoluoxuanwan_Func006C())then
call SetUnitVertexColor(udg_Unit_ZLY[3],255,10,10,255)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[2]),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitTimeScale(udg_Unit_ZLY[3],1.50)
call UnitDamageTargetBJ(udg_Unit_ZLY[1],udg_Unit_ZLY[2],((1.00*I2R(GetHeroStr(udg_Unit_ZLY[1],true)))*I2R(GetUnitAbilityLevelSwapped('A02J',udg_Unit_ZLY[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitTimeScale(udg_Unit_ZLY[3],1.50)
call UnitDamageTargetBJ(udg_Unit_ZLY[1],udg_Unit_ZLY[2],((1.00*I2R(GetHeroStr(udg_Unit_ZLY[1],true)))*I2R(GetUnitAbilityLevelSwapped('A02J',udg_Unit_ZLY[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endif
call EnableTrigger(gg_trg_W_haoluoxuanwan2)
call TriggerSleepAction(0.40)
call DisableTrigger(gg_trg_W_haoluoxuanwan2)
if(Trig_W_haoluoxuanwan_Func010C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_ZLY[2]),Condition(function Trig_W_haoluoxuanwan_Func010Func002001003)),function Trig_W_haoluoxuanwan_Func010Func002A)
else
endif
endfunction
function InitTrig_W_haoluoxuanwan takes nothing returns nothing
set gg_trg_W_haoluoxuanwan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_haoluoxuanwan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_haoluoxuanwan,Condition(function Trig_W_haoluoxuanwan_Conditions))
call TriggerAddAction(gg_trg_W_haoluoxuanwan,function Trig_W_haoluoxuanwan_Actions)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func001C takes nothing returns boolean
if(not(IsUnitDeadBJ(udg_Unit_ZLY[3])==true))then
return false
endif
return true
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func008001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func008001003001002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func008001003001002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_ZLY[2])
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func008001003001002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func008001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))))
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func008001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func008001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func008A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),40.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[2]),GetUnitLoc(GetEnumUnit()))),GetUnitFacing(GetEnumUnit()))
call UnitDamageTargetBJ(udg_Unit_ZLY[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_ZLY[1],'A02J'))*15.00),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Environment\\LargeBuildingFire\\LargeBuildingFire0.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func009001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func009001003001002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func009001003001002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_ZLY[2])
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func009001003001002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func009001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))))
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func009001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func009001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004Func009A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),40.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[2]),GetUnitLoc(GetEnumUnit()))),GetUnitFacing(GetEnumUnit()))
call UnitDamageTargetBJ(udg_Unit_ZLY[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_ZLY[1],'A02J'))*10.00),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_haoluoxuanwan2_Func001Func004C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_ZLY[1],'ofir'))==true))then
return false
endif
return true
endfunction
function Trig_W_haoluoxuanwan2_Func001Func007C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_ZLY[1],'ofir'))==true))then
return false
endif
return true
endfunction
function Trig_W_haoluoxuanwan2_Func001Func008001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func008001001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZLY[1]))==true)
endfunction
function Trig_W_haoluoxuanwan2_Func001Func008001001003002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_ZLY[2])
endfunction
function Trig_W_haoluoxuanwan2_Func001Func008001001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))
endfunction
function Trig_W_haoluoxuanwan2_Func001Func008001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))))
endfunction
function Trig_W_haoluoxuanwan2_Func001C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(udg_Unit_ZLY[2]),Condition(function Trig_W_haoluoxuanwan2_Func001Func008001001003)))==true))then
return false
endif
if(not(IsTerrainPathableBJ(GetUnitLoc(udg_Unit_ZLY[2]),PATHING_TYPE_WALKABILITY)!=true))then
return false
endif
return true
endfunction
function Trig_W_haoluoxuanwan2_Actions takes nothing returns nothing
if(Trig_W_haoluoxuanwan2_Func001C())then
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_ZLY[2]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2]))),GetUnitFacing(udg_Unit_ZLY[2]))
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[3],GetUnitLoc(udg_Unit_ZLY[2]),GetUnitFacing(udg_Unit_ZLY[3]))
if(Trig_W_haoluoxuanwan2_Func001Func007C())then
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[2]),"abilities\\weapons\\catapult\\catapultmissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
else
if(Trig_W_haoluoxuanwan2_Func001Func001C())then
else
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[3]),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[3]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(udg_Unit_ZLY[3])
endif
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_ZLY[2]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2]))),GetUnitFacing(udg_Unit_ZLY[2]))
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[3],GetUnitLoc(udg_Unit_ZLY[2]),GetUnitFacing(udg_Unit_ZLY[3]))
if(Trig_W_haoluoxuanwan2_Func001Func004C())then
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[2]),"abilities\\weapons\\catapult\\catapultmissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_ZLY[2]),Condition(function Trig_W_haoluoxuanwan2_Func001Func004Func008001003)),function Trig_W_haoluoxuanwan2_Func001Func004Func008A)
else
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_ZLY[2]),Condition(function Trig_W_haoluoxuanwan2_Func001Func004Func009001003)),function Trig_W_haoluoxuanwan2_Func001Func004Func009A)
endif
endif
endfunction
function InitTrig_W_haoluoxuanwan2 takes nothing returns nothing
set gg_trg_W_haoluoxuanwan2=CreateTrigger()
call DisableTrigger(gg_trg_W_haoluoxuanwan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_haoluoxuanwan2,0.04)
call TriggerAddAction(gg_trg_W_haoluoxuanwan2,function Trig_W_haoluoxuanwan2_Actions)
endfunction
function Trig_R_wentai_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AOsf'))then
return false
endif
return true
endfunction
function Trig_R_wentai_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'Oshd',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),200.00,GetUnitFacing(GetTriggerUnit())),GetUnitFacing(GetTriggerUnit()))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',(40.00+(15.00*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'AOsf')))))
call SuspendHeroXPBJ(false,GetLastCreatedUnit())
call SetHeroStr(GetLastCreatedUnit(),(GetHeroStr(GetTriggerUnit(),true)*2),true)
call SetHeroAgi(GetLastCreatedUnit(),(GetHeroAgi(GetTriggerUnit(),true)*2),true)
call SetHeroInt(GetLastCreatedUnit(),(GetHeroInt(GetTriggerUnit(),true)*2),true)
endfunction
function InitTrig_R_wentai takes nothing returns nothing
set gg_trg_R_wentai=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_wentai,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_wentai,Condition(function Trig_R_wentai_Conditions))
call TriggerAddAction(gg_trg_R_wentai,function Trig_R_wentai_Actions)
endfunction
function Trig_R_wentai2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Oshd'))then
return false
endif
return true
endfunction
function Trig_R_wentai2_Actions takes nothing returns nothing
set udg_Unit_ZLY[0]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call RemoveUnit(udg_Unit_ZLY[0])
set udg_Unit_ZLY[0]=null
endfunction
function InitTrig_R_wentai2 takes nothing returns nothing
set gg_trg_R_wentai2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_wentai2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_R_wentai2,Condition(function Trig_R_wentai2_Conditions))
call TriggerAddAction(gg_trg_R_wentai2,function Trig_R_wentai2_Actions)
endfunction
function Trig_D_shuangxun_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A000'))then
return false
endif
return true
endfunction
function Trig_D_shuangxun_Actions takes nothing returns nothing
set udg_Unit_ZLY[1]=GetTriggerUnit()
set udg_Unit_ZLY[2]=GetSpellTargetUnit()
call TriggerSleepAction(0.10)
call SetUnitTimeScalePercent(udg_Unit_ZLY[1],150.00)
call PauseUnit(udg_Unit_ZLY[1],true)
call SetUnitPathing(udg_Unit_ZLY[1],false)
call UnitAddAbility(udg_Unit_ZLY[1],'A01H')
call SetUnitAnimation(udg_Unit_ZLY[1],"spell death")
call EnableTrigger(gg_trg_D_shuangxun2)
endfunction
function InitTrig_D_shuangxun takes nothing returns nothing
set gg_trg_D_shuangxun=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_shuangxun,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_shuangxun,Condition(function Trig_D_shuangxun_Conditions))
call TriggerAddAction(gg_trg_D_shuangxun,function Trig_D_shuangxun_Actions)
endfunction
function Trig_D_shuangxun2_Func001Func001C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_ZLY[1])==true))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_ZLY[2])==true))then
return true
endif
if((IsUnitInGroup(udg_Unit_ZLY[1],GetUnitsInRangeOfLocAll(150.00,GetUnitLoc(udg_Unit_ZLY[2])))==true))then
return true
endif
return false
endfunction
function Trig_D_shuangxun2_Func001Func013Func024C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_ZLY[1])==true))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_ZLY[2])==true))then
return true
endif
return false
endfunction
function Trig_D_shuangxun2_Func001Func013C takes nothing returns boolean
if(not Trig_D_shuangxun2_Func001Func013Func024C())then
return false
endif
return true
endfunction
function Trig_D_shuangxun2_Func001C takes nothing returns boolean
if(not Trig_D_shuangxun2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_D_shuangxun2_Actions takes nothing returns nothing
if(Trig_D_shuangxun2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitAnimationByIndex(udg_Unit_ZLY[1],3)
call TriggerSleepAction(0.20)
call CreateNUnitsAtLoc(1,'nbee',GetOwningPlayer(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.50)
set udg_Unit_ZLY[3]=GetLastCreatedUnit()
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[2],GetUnitLoc(udg_Unit_ZLY[3]),GetUnitFacing(udg_Unit_ZLY[2]))
call UnitDamageTargetBJ(udg_Unit_ZLY[1],udg_Unit_ZLY[2],((4.00*I2R(GetHeroStr(udg_Unit_ZLY[1],true)))*I2R(1)),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_ZLY[2],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitRemoveAbility(udg_Unit_ZLY[1],'A01H')
if(Trig_D_shuangxun2_Func001Func013C())then
call PauseUnit(udg_Unit_ZLY[1],false)
call SetUnitPathing(udg_Unit_ZLY[1],true)
call SetUnitTimeScalePercent(udg_Unit_ZLY[1],100.00)
call EnableTrigger(gg_trg_D_shuangxun3)
call TriggerSleepAction(0.40)
call DisableTrigger(gg_trg_D_shuangxun3)
else
call UnitAddAbility(udg_Unit_ZLY[1],'A005')
call SetUnitAnimationByIndex(udg_Unit_ZLY[1],2)
call TriggerSleepAction(0.20)
call UnitDamageTargetBJ(udg_Unit_ZLY[1],udg_Unit_ZLY[2],((8.00*I2R(GetHeroStr(udg_Unit_ZLY[1],true)))*I2R(1)),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call CreateNUnitsAtLoc(1,'nbee',GetOwningPlayer(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call SetUnitScale(GetLastCreatedUnit(),3.00,3.00,3.00)
call SetUnitFlyHeight(GetLastCreatedUnit(),180.00,999999.00)
set udg_Unit_ZLY[4]=GetLastCreatedUnit()
call UnitRemoveAbility(udg_Unit_ZLY[1],'A005')
call PauseUnit(udg_Unit_ZLY[1],false)
call SetUnitPathing(udg_Unit_ZLY[1],true)
call SetUnitTimeScalePercent(udg_Unit_ZLY[1],100.00)
call EnableTrigger(gg_trg_D_shuangxun3)
call TriggerSleepAction(0.40)
call DisableTrigger(gg_trg_D_shuangxun3)
set udg_Unit_ZLY[4]=null
endif
else
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_ZLY[1]),25.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2])))
endif
endfunction
function InitTrig_D_shuangxun2 takes nothing returns nothing
set gg_trg_D_shuangxun2=CreateTrigger()
call DisableTrigger(gg_trg_D_shuangxun2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_shuangxun2,0.04)
call TriggerAddAction(gg_trg_D_shuangxun2,function Trig_D_shuangxun2_Actions)
endfunction
function Trig_D_shuangxun3_Func001Func001C takes nothing returns boolean
if(not(IsUnitDeadBJ(udg_Unit_ZLY[3])==true))then
return false
endif
return true
endfunction
function Trig_D_shuangxun3_Func001Func008001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true)
endfunction
function Trig_D_shuangxun3_Func001Func008001003001002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_shuangxun3_Func001Func008001003001002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_ZLY[2])
endfunction
function Trig_D_shuangxun3_Func001Func008001003001002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))
endfunction
function Trig_D_shuangxun3_Func001Func008001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))))
endfunction
function Trig_D_shuangxun3_Func001Func008001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_shuangxun3_Func001Func008001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_D_shuangxun3_Func001Func008A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),40.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[2]),GetUnitLoc(GetEnumUnit()))),GetUnitFacing(GetEnumUnit()))
call UnitDamageTargetBJ(udg_Unit_ZLY[1],GetEnumUnit(),150.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_shuangxun3_Func001Func014001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_shuangxun3_Func001Func014001001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZLY[1]))==true)
endfunction
function Trig_D_shuangxun3_Func001Func014001001003002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_ZLY[2])
endfunction
function Trig_D_shuangxun3_Func001Func014001001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))
endfunction
function Trig_D_shuangxun3_Func001Func014001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZLY[1]))==true),(GetFilterUnit()!=udg_Unit_ZLY[2]))))
endfunction
function Trig_D_shuangxun3_Func001C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(udg_Unit_ZLY[2]),Condition(function Trig_D_shuangxun3_Func001Func014001001003)))==true))then
return false
endif
if(not(IsTerrainPathableBJ(GetUnitLoc(udg_Unit_ZLY[2]),PATHING_TYPE_WALKABILITY)!=true))then
return false
endif
return true
endfunction
function Trig_D_shuangxun3_Actions takes nothing returns nothing
if(Trig_D_shuangxun3_Func001C())then
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_ZLY[2]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2]))),GetUnitFacing(udg_Unit_ZLY[2]))
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[3],GetUnitLoc(udg_Unit_ZLY[2]),GetUnitFacing(udg_Unit_ZLY[3]))
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[4],GetUnitLoc(udg_Unit_ZLY[2]),GetUnitFacing(udg_Unit_ZLY[3]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[2]),"Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
if(Trig_D_shuangxun3_Func001Func001C())then
else
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[3]),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[3]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(udg_Unit_ZLY[3])
endif
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_ZLY[2]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZLY[1]),GetUnitLoc(udg_Unit_ZLY[2]))),GetUnitFacing(udg_Unit_ZLY[2]))
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[3],GetUnitLoc(udg_Unit_ZLY[2]),GetUnitFacing(udg_Unit_ZLY[3]))
call SetUnitPositionLocFacingBJ(udg_Unit_ZLY[4],GetUnitLoc(udg_Unit_ZLY[2]),GetUnitFacing(udg_Unit_ZLY[3]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZLY[2]),"Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_ZLY[2]),Condition(function Trig_D_shuangxun3_Func001Func008001003)),function Trig_D_shuangxun3_Func001Func008A)
endif
endfunction
function InitTrig_D_shuangxun3 takes nothing returns nothing
set gg_trg_D_shuangxun3=CreateTrigger()
call DisableTrigger(gg_trg_D_shuangxun3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_shuangxun3,0.04)
call TriggerAddAction(gg_trg_D_shuangxun3,function Trig_D_shuangxun3_Actions)
endfunction
function Trig_Q_luosenwanxiang_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEer'))then
return false
endif
return true
endfunction
function Trig_Q_luosenwanxiang_Func007001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luosenwanxiang_Func007001003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luosenwanxiang_Func007001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luosenwanxiang_Func007001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_Q_luosenwanxiang_Func007001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_Q_luosenwanxiang_Func007A takes nothing returns nothing
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'AEer'))),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luosenwanxiang_Func008Func009001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_luosenwanxiang_Func008Func009001003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_luosenwanxiang_Func008Func009001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_Q_luosenwanxiang_Func008Func009001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_1D[1]))==true)
endfunction
function Trig_Q_luosenwanxiang_Func008Func009001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_1D[1]))==true))
endfunction
function Trig_Q_luosenwanxiang_Func008Func009A takes nothing returns nothing
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'AEer'))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_luosenwanxiang_Func008C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'ofro'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'srbd'))==true))then
return false
endif
return true
endfunction
function Trig_Q_luosenwanxiang_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'nchp',GetTriggerPlayer(),GetUnitLoc(GetSpellTargetUnit()),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.80)
call SetUnitAnimation(GetLastCreatedUnit(),"birth large")
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(GetSpellTargetUnit()),Condition(function Trig_Q_luosenwanxiang_Func007001003)),function Trig_Q_luosenwanxiang_Func007A)
if(Trig_Q_luosenwanxiang_Func008C())then
set udg_Unit_1D[1]=GetTriggerUnit()
set udg_Unit_1D[2]=GetSpellTargetUnit()
call TriggerSleepAction(0.10)
call SetUnitAnimation(udg_Unit_1D[1],"Spell Slam")
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),GetUnitLoc(udg_Unit_1D[2]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AOws',2)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,GetUnitLoc(udg_Unit_1D[2]),Condition(function Trig_Q_luosenwanxiang_Func008Func009001003)),function Trig_Q_luosenwanxiang_Func008Func009A)
else
endif
endfunction
function InitTrig_Q_luosenwanxiang takes nothing returns nothing
set gg_trg_Q_luosenwanxiang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_luosenwanxiang,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_luosenwanxiang,Condition(function Trig_Q_luosenwanxiang_Conditions))
call TriggerAddAction(gg_trg_Q_luosenwanxiang,function Trig_Q_luosenwanxiang_Actions)
endfunction
function Trig_W_jingangzhaomu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A01M'))then
return false
endif
return true
endfunction
function Trig_W_jingangzhaomu_Func003Func003001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_jingangzhaomu_Func003Func003001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_W_jingangzhaomu_Func003Func003001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_W_jingangzhaomu_Func003Func003001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_jingangzhaomu_Func003Func003001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_jingangzhaomu_Func003Func003A takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_INT,GetTriggerUnit(),true))*I2R(GetUnitAbilityLevelSwapped('A01M',GetTriggerUnit()))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_jingangzhaomu_Func003Func004001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_jingangzhaomu_Func003Func004001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_W_jingangzhaomu_Func003Func004001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_W_jingangzhaomu_Func003Func004001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_jingangzhaomu_Func003Func004001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_jingangzhaomu_Func003Func004A takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_INT,GetTriggerUnit(),true))*I2R(GetUnitAbilityLevelSwapped('A01M',GetTriggerUnit()))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_jingangzhaomu_Func003C takes nothing returns boolean
if(not(udg_All_unit_shu[5]==1.00))then
return false
endif
return true
endfunction
function Trig_W_jingangzhaomu_Actions takes nothing returns nothing
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
if(Trig_W_jingangzhaomu_Func003C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(400.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_W_jingangzhaomu_Func003Func003001003)),function Trig_W_jingangzhaomu_Func003Func003A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_W_jingangzhaomu_Func003Func004001003)),function Trig_W_jingangzhaomu_Func003Func004A)
endif
endfunction
function InitTrig_W_jingangzhaomu takes nothing returns nothing
set gg_trg_W_jingangzhaomu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_jingangzhaomu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_jingangzhaomu,Condition(function Trig_W_jingangzhaomu_Conditions))
call TriggerAddAction(gg_trg_W_jingangzhaomu,function Trig_W_jingangzhaomu_Actions)
endfunction
function Trig_E_gangli_Conditions takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetAttackedUnitBJ(),'ofro'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetAttackedUnitBJ(),'srbd'))==true))then
return false
endif
if(not(GetRandomInt(1,10)==1))then
return false
endif
if(not(GetUnitTypeId(GetAttackedUnitBJ())=='Hlgr'))then
return false
endif
if(not(IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE)==false))then
return false
endif
return true
endfunction
function Trig_E_gangli_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetAttackedUnitBJ()),GetUnitLoc(GetAttacker()),bj_UNIT_FACING)
call IssueTargetOrderById(GetLastCreatedUnit(),852171,GetAttacker())
endfunction
function InitTrig_E_gangli takes nothing returns nothing
set gg_trg_E_gangli=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_gangli,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_E_gangli,Condition(function Trig_E_gangli_Conditions))
call TriggerAddAction(gg_trg_E_gangli,function Trig_E_gangli_Actions)
endfunction
function Trig_R_jingangli_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Awfb'))then
return false
endif
return true
endfunction
function Trig_R_jingangli_Func015001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_jingangli_Func015001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_R_jingangli_Func015001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_R_jingangli_Func015A takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_INT,GetTriggerUnit(),true))*8.00),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_R_jingangli_Actions takes nothing returns nothing
set udg_Unit_1D[1]=GetTriggerUnit()
set udg_Unit_1D[2]=GetSpellTargetUnit()
set udg_All_unit_Dian[3]=GetUnitLoc(GetTriggerUnit())
call TriggerSleepAction(0.01)
call PauseUnitBJ(true,udg_Unit_1D[1])
call UnitAddAbilityBJ('A03B',GetTriggerUnit())
call EnableTrigger(gg_trg_R_jingangli2)
call TriggerSleepAction(0.50)
set udg_All_unit_shu[5]=1.00
call DisableTrigger(gg_trg_R_jingangli2)
call SetUnitPositionLoc(udg_Unit_1D[1],GetUnitLoc(udg_Unit_1D[2]))
call SetUnitAnimation(udg_Unit_1D[1],"attack")
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_1D[1]),17.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_1D[2]),Condition(function Trig_R_jingangli_Func015001003)),function Trig_R_jingangli_Func015A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call AddSpecialEffectLocBJ(GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(udg_Unit_1D[2]),300.00,200.00)),"Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TerrainDeformationRippleBJ(2.00,false,GetUnitLoc(udg_Unit_1D[2]),300.00,1024,64,0.50,512)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=25
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'e002',GetOwningPlayer(udg_Unit_1D[1]),GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(udg_Unit_1D[2]),600.00,500.00)),GetRandomDirectionDeg())
call UnitAddTypeBJ(UNIT_TYPE_UNDEAD,GetLastCreatedUnit())
call SetUnitTimeScalePercent(GetLastCreatedUnit(),3000.00)
call SetUnitAnimation(GetLastCreatedUnit(),"birth")
call UnitApplyTimedLifeBJ(3.00,'BTLF',GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call PauseUnitBJ(false,udg_Unit_1D[1])
call TriggerSleepAction(1.00)
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_1D[1]))
call SetUnitPositionLoc(udg_Unit_1D[1],udg_All_unit_Dian[3])
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_1D[1]),"Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitRemoveAbilityBJ('A03B',GetTriggerUnit())
set udg_All_unit_shu[5]=0.00
endfunction
function InitTrig_R_jingangli takes nothing returns nothing
set gg_trg_R_jingangli=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_jingangli,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_jingangli,Condition(function Trig_R_jingangli_Conditions))
call TriggerAddAction(gg_trg_R_jingangli,function Trig_R_jingangli_Actions)
endfunction
function Trig_R_jingangli2_Actions takes nothing returns nothing
call SetUnitPositionLoc(udg_Unit_1D[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_1D[2]),25.00,GetUnitFacing(udg_Unit_1D[1])))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_1D[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_1D[2]),"Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function InitTrig_R_jingangli2 takes nothing returns nothing
set gg_trg_R_jingangli2=CreateTrigger()
call DisableTrigger(gg_trg_R_jingangli2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_jingangli2,0.03)
call TriggerAddAction(gg_trg_R_jingangli2,function Trig_R_jingangli2_Actions)
endfunction
function Trig_D_shujie_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANrf'))then
return false
endif
return true
endfunction
function Trig_D_shujie_Func007C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'ofro'))==true))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'srbd'))==true))then
return false
endif
return true
endfunction
function Trig_D_shujie_Func009001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_shujie_Func009001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_1D[1]))==true)
endfunction
function Trig_D_shujie_Func009001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_1D[1]))==true))
endfunction
function Trig_D_shujie_Func009A takes nothing returns nothing
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_shujie_Func017001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_shujie_Func017001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_1D[1]))==true)
endfunction
function Trig_D_shujie_Func017001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_1D[1]))==true))
endfunction
function Trig_D_shujie_Func017A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_1D[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_INT,udg_Unit_1D[1],true))*10.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_shujie_Func018Func001C takes nothing returns boolean
if(not(GetDestructableTypeId(GetEnumDestructable())=='B000'))then
return false
endif
return true
endfunction
function Trig_D_shujie_Func018A takes nothing returns nothing
if(Trig_D_shujie_Func018Func001C())then
call KillDestructable(GetEnumDestructable())
call RemoveDestructable(GetEnumDestructable())
else
endif
endfunction
function Trig_D_shujie_Actions takes nothing returns nothing
set udg_Unit_1D[1]=GetTriggerUnit()
set udg_Unit_1D[2]=GetSpellTargetUnit()
set udg_All_unit_Dian[4]=GetSpellTargetLoc()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateDestructableLoc('B000',PolarProjectionBJ(udg_All_unit_Dian[4],GetRandomReal(150.00,200.00),(I2R(bj_forLoopAIndex)*30.00)),GetRandomDirectionDeg(),GetRandomReal(2.30,2.70),GetRandomInt(1,10))
call SetDestructableAnimation(GetLastCreatedDestructable(),"birth")
call SetDestructableAnimationSpeed(GetLastCreatedDestructable(),45.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call PauseUnitBJ(true,udg_Unit_1D[1])
call SetUnitAnimation(udg_Unit_1D[1],"Spell Slam")
if(Trig_D_shujie_Func007C())then
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),udg_All_unit_Dian[4],bj_UNIT_FACING)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
else
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),udg_All_unit_Dian[4],bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AOws',3)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
endif
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,udg_All_unit_Dian[4],Condition(function Trig_D_shujie_Func009001003)),function Trig_D_shujie_Func009A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateDestructableLoc('B000',PolarProjectionBJ(udg_All_unit_Dian[4],GetRandomReal(20.00,120.00),(I2R(bj_forLoopAIndex)*60.00)),GetRandomDirectionDeg(),GetRandomReal(2.50,3.00),GetRandomInt(1,10))
call SetDestructableAnimation(GetLastCreatedDestructable(),"birth")
call SetDestructableAnimationSpeed(GetLastCreatedDestructable(),50.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(1.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nhea',GetTriggerPlayer(),PolarProjectionBJ(udg_All_unit_Dian[4],50.00,(I2R(bj_forLoopAIndex)*90.00)),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.50)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(1.60)
call SetUnitAnimation(udg_Unit_1D[1],"Spell Throw")
call PauseUnitBJ(false,udg_Unit_1D[1])
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,udg_All_unit_Dian[4],Condition(function Trig_D_shujie_Func017001003)),function Trig_D_shujie_Func017A)
call EnumDestructablesInCircleBJ(500.00,udg_All_unit_Dian[4],function Trig_D_shujie_Func018A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'hbsh',GetTriggerPlayer(),PolarProjectionBJ(udg_All_unit_Dian[4],150.00,(I2R(bj_forLoopAIndex)*60.00)),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TerrainDeformationRippleBJ(0.20,false,udg_All_unit_Dian[4],300.00,400.00,64,0.10,512)
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_1D[1]),20.00)
call TriggerSleepAction(0.20)
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_1D[1]))
endfunction
function InitTrig_D_shujie takes nothing returns nothing
set gg_trg_D_shujie=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_shujie,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_shujie,Condition(function Trig_D_shujie_Conditions))
call TriggerAddAction(gg_trg_D_shujie,function Trig_D_shujie_Actions)
endfunction
function Trig_Q_heianxing_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANin'))then
return false
endif
return true
endfunction
function Trig_Q_heianxing_Actions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLocFacingLocBJ(1,'hdhw',GetOwningPlayer(GetSpellAbilityUnit()),PolarProjectionBJ(GetSpellTargetLoc(),300.00,(15.00*I2R(GetForLoopIndexA()))),GetSpellTargetLoc())
set udg_Unit_2D_h1[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(2.00,'BTLF',GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLocFacingLocBJ(1,'hdhw',GetOwningPlayer(GetSpellAbilityUnit()),PolarProjectionBJ(GetSpellTargetLoc(),300.00,(180.00+(15.00*I2R(GetForLoopIndexA())))),GetSpellTargetLoc())
set udg_Unit_2D_h2[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(2.00,'BTLF',GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call IssuePointOrderLoc(udg_Unit_2D_h1[GetForLoopIndexA()],"clusterrockets",GetUnitLoc(udg_Unit_2D_h2[GetForLoopIndexA()]))
call IssuePointOrderLoc(udg_Unit_2D_h2[GetForLoopIndexA()],"clusterrockets",GetUnitLoc(udg_Unit_2D_h1[GetForLoopIndexA()]))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_Q_heianxing takes nothing returns nothing
set gg_trg_Q_heianxing=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_heianxing,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_heianxing,Condition(function Trig_Q_heianxing_Conditions))
call TriggerAddAction(gg_trg_Q_heianxing,function Trig_Q_heianxing_Actions)
endfunction
function Trig_W_shuizhenbi_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANbr'))then
return false
endif
return true
endfunction
function Trig_W_shuizhenbi_Func003Func003001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shuizhenbi_Func003Func003001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_W_shuizhenbi_Func003Func003001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_W_shuizhenbi_Func003Func003001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_shuizhenbi_Func003Func003001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_shuizhenbi_Func003Func003A takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,GetTriggerUnit(),true))*I2R(GetUnitAbilityLevelSwapped('ANbr',GetTriggerUnit()))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_shuizhenbi_Func003Func006001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shuizhenbi_Func003Func006001003001002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_W_shuizhenbi_Func003Func006001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_W_shuizhenbi_Func003Func006001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_shuizhenbi_Func003Func006001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_shuizhenbi_Func003Func006A takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,GetTriggerUnit(),true))*I2R(GetUnitAbilityLevelSwapped('ANbr',GetTriggerUnit()))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_shuizhenbi_Func003C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'ofro'))==true))then
return false
endif
return true
endfunction
function Trig_W_shuizhenbi_Actions takes nothing returns nothing
set udg_Unit_2D[1]=GetTriggerUnit()
call GroupAddUnit(udg_RS_shuidun,udg_Unit_2D[1])
if(Trig_W_shuizhenbi_Func003C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=20
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'hhdl',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),200.00,(18.00*I2R(GetForLoopIndexA()))),(18.00*I2R(GetForLoopIndexA())))
call SetUnitTimeScalePercent(GetLastCreatedUnit(),600.00)
call SetUnitScale(GetLastCreatedUnit(),1.20,1.20,1.20)
call UnitApplyTimedLifeBJ(2.00,'BTLF',GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(400.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_W_shuizhenbi_Func003Func003001003)),function Trig_W_shuizhenbi_Func003Func003A)
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=20
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'hhdl',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),200.00,(18.00*I2R(GetForLoopIndexA()))),(18.00*I2R(GetForLoopIndexA())))
call SetUnitTimeScalePercent(GetLastCreatedUnit(),600.00)
call UnitApplyTimedLifeBJ(2.00,'BTLF',GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(GetTriggerUnit()),Condition(function Trig_W_shuizhenbi_Func003Func006001003)),function Trig_W_shuizhenbi_Func003Func006A)
endif
endfunction
function InitTrig_W_shuizhenbi takes nothing returns nothing
set gg_trg_W_shuizhenbi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_shuizhenbi,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_shuizhenbi,Condition(function Trig_W_shuizhenbi_Conditions))
call TriggerAddAction(gg_trg_W_shuizhenbi,function Trig_W_shuizhenbi_Actions)
endfunction
function Trig_W_shuizhenbi2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='hhdl'))then
return false
endif
return true
endfunction
function Trig_W_shuizhenbi2_Actions takes nothing returns nothing
call GroupRemoveUnit(udg_RS_shuidun,udg_Unit_2D[1])
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function InitTrig_W_shuizhenbi2 takes nothing returns nothing
set gg_trg_W_shuizhenbi2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_shuizhenbi2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_W_shuizhenbi2,Condition(function Trig_W_shuizhenbi2_Conditions))
call TriggerAddAction(gg_trg_W_shuizhenbi2,function Trig_W_shuizhenbi2_Actions)
endfunction
function Trig_E_shuisheji_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACfa'))then
return false
endif
return true
endfunction
function Trig_E_shuisheji_Actions takes nothing returns nothing
set udg_Unit_2D[1]=GetTriggerUnit()
set udg_Unit_2D[2]=GetSpellTargetUnit()
set udg_All_unit_shu[2]=0.00
call TriggerSleepAction(0.10)
call ResetUnitAnimation(udg_Unit_2D[1])
call PauseUnitBJ(true,udg_Unit_2D[1])
call SetUnitPathing(udg_Unit_2D[1],false)
call SetUnitAnimationByIndex(udg_Unit_2D[1],9)
call EnableTrigger(gg_trg_E_shuisheji2)
endfunction
function InitTrig_E_shuisheji takes nothing returns nothing
set gg_trg_E_shuisheji=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_shuisheji,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_shuisheji,Condition(function Trig_E_shuisheji_Conditions))
call TriggerAddAction(gg_trg_E_shuisheji,function Trig_E_shuisheji_Actions)
endfunction
function Trig_E_shuisheji2_Func001Func001C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_2D[1],'ofro'))==true))then
return false
endif
return true
endfunction
function Trig_E_shuisheji2_Func001Func005C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_2D[2])==true))then
return true
endif
if((IsUnitInGroup(udg_Unit_2D[1],GetUnitsInRangeOfLocAll(100.00,GetUnitLoc(udg_Unit_2D[2])))==true))then
return true
endif
if((R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_2D[1]),GetUnitLoc(udg_Unit_2D[2])))>1400))then
return true
endif
if((udg_All_unit_shu[2]>=(6.00+(2.00*I2R(GetUnitAbilityLevel(udg_Unit_2D[1],'ACfa'))))))then
return true
endif
return false
endfunction
function Trig_E_shuisheji2_Func001Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[2]>=I2R(GetUnitAbilityLevel(udg_Unit_2D[1],'ACfa'))))then
return false
endif
if(not(IsUnitEnemy(udg_Unit_2D[2],GetOwningPlayer(udg_Unit_2D[1]))==true))then
return false
endif
return true
endfunction
function Trig_E_shuisheji2_Func001C takes nothing returns boolean
if(not Trig_E_shuisheji2_Func001Func005C())then
return false
endif
return true
endfunction
function Trig_E_shuisheji2_Actions takes nothing returns nothing
if(Trig_E_shuisheji2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnitBJ(false,udg_Unit_2D[1])
call SetUnitPathing(udg_Unit_2D[1],true)
else
if(Trig_E_shuisheji2_Func001Func001C())then
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_2D[1]),50.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_2D[1]),GetUnitLoc(udg_Unit_2D[2])))
call SetUnitPositionLocFacingLocBJ(udg_Unit_2D[1],udg_ALL_PointPX,GetUnitLoc(udg_Unit_2D[2]))
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_2D[1]),"Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_2D[1]))
call DestroyEffect(GetLastCreatedEffectBJ())
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_2D[1]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_2D[1]),GetUnitLoc(udg_Unit_2D[2])))
call SetUnitPositionLocFacingLocBJ(udg_Unit_2D[1],udg_ALL_PointPX,GetUnitLoc(udg_Unit_2D[2]))
call RemoveLocation(udg_ALL_PointPX)
endif
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_2D[1]),"Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_2D[1]))
call DestroyEffect(GetLastCreatedEffectBJ())
if(Trig_E_shuisheji2_Func001Func006C())then
else
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_2D[1]),GetRandomLocInRect(RectFromCenterSizeBJ(GetUnitLoc(udg_Unit_2D[1]),800.00,800.00)),GetUnitFacing(udg_Unit_2D[1]))
call IssueTargetOrder(GetLastCreatedUnit(),"thunderbolt",udg_Unit_2D[2])
endif
set udg_All_unit_shu[2]=(udg_All_unit_shu[2]+1)
endif
endfunction
function InitTrig_E_shuisheji2 takes nothing returns nothing
set gg_trg_E_shuisheji2=CreateTrigger()
call DisableTrigger(gg_trg_E_shuisheji2)
call TriggerRegisterTimerEventPeriodic(gg_trg_E_shuisheji2,0.04)
call TriggerAddAction(gg_trg_E_shuisheji2,function Trig_E_shuisheji2_Actions)
endfunction
function Trig_D_yingwoshuiren_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A00D'))then
return false
endif
return true
endfunction
function Trig_D_yingwoshuiren_Func004Func012001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_yingwoshuiren_Func004Func012001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_D_yingwoshuiren_Func004Func012001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_D_yingwoshuiren_Func004Func012A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_2D[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,GetTriggerUnit(),true))*12.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_yingwoshuiren_Func004C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_2D[1]),GetUnitLoc(udg_Unit_2D[2]))>=700.00))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_2D[1],'ofro'))==true))then
return false
endif
return true
endfunction
function Trig_D_yingwoshuiren_Actions takes nothing returns nothing
set udg_Unit_2D[1]=GetTriggerUnit()
set udg_Unit_2D[2]=GetSpellTargetUnit()
if(Trig_D_yingwoshuiren_Func004C())then
set udg_All_unit_shu[49]=0.00
call TriggerSleepAction(0.10)
call SetUnitTimeScalePercent(udg_Unit_2D[1],130.00)
call PauseUnitBJ(true,udg_Unit_2D[1])
call SetUnitPathing(udg_Unit_2D[1],false)
call SetUnitAnimation(udg_Unit_2D[1],"spell slam")
call EnableTrigger(gg_trg_D_yingwoshuiren2)
else
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_2D[1]),30.00)
call CreateNUnitsAtLoc(1,'nbel',GetTriggerPlayer(),GetUnitLoc(udg_Unit_2D[2]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(240.00,GetUnitLoc(udg_Unit_2D[2]),Condition(function Trig_D_yingwoshuiren_Func004Func012001003)),function Trig_D_yingwoshuiren_Func004Func012A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nnmg',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_2D[2]),20.00,(90.00*I2R(bj_forLoopAIndex))),(90.00*I2R(bj_forLoopAIndex)))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(1.00)
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_2D[1]))
endif
endfunction
function InitTrig_D_yingwoshuiren takes nothing returns nothing
set gg_trg_D_yingwoshuiren=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_yingwoshuiren,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_yingwoshuiren,Condition(function Trig_D_yingwoshuiren_Conditions))
call TriggerAddAction(gg_trg_D_yingwoshuiren,function Trig_D_yingwoshuiren_Actions)
endfunction
function Trig_D_yingwoshuiren2_Func001Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_yingwoshuiren2_Func001Func006001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_2D[1]))==true)
endfunction
function Trig_D_yingwoshuiren2_Func001Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_2D[1]))==true))
endfunction
function Trig_D_yingwoshuiren2_Func001Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_2D[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_2D[1],true))*16.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_yingwoshuiren2_Func001Func015C takes nothing returns boolean
if(not(udg_All_unit_shu[49]<=14.00))then
return false
endif
return true
endfunction
function Trig_D_yingwoshuiren2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[49]>=28.00))then
return false
endif
return true
endfunction
function Trig_D_yingwoshuiren2_Actions takes nothing returns nothing
if(Trig_D_yingwoshuiren2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_2D[1]),30.00)
call CreateNUnitsAtLoc(1,'nbel',GetOwningPlayer(udg_Unit_2D[1]),GetUnitLoc(udg_Unit_2D[2]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(360.00,GetUnitLoc(udg_Unit_2D[2]),Condition(function Trig_D_yingwoshuiren2_Func001Func006001003)),function Trig_D_yingwoshuiren2_Func001Func006A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nnmg',GetOwningPlayer(udg_Unit_2D[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_2D[2]),20.00,(90.00*I2R(bj_forLoopAIndex))),(90.00*I2R(bj_forLoopAIndex)))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(0.20)
call SetUnitTimeScalePercent(udg_Unit_2D[1],100.00)
call PauseUnitBJ(false,udg_Unit_2D[1])
call SetUnitPathing(udg_Unit_2D[1],true)
call TriggerSleepAction(0.50)
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_2D[1]))
else
if(Trig_D_yingwoshuiren2_Func001Func015C())then
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_2D[1]),"Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_2D[1]))
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_2D[1]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_2D[1]),GetUnitLoc(udg_Unit_2D[2])))
call SetUnitPositionLocFacingLocBJ(udg_Unit_2D[1],udg_ALL_PointPX,GetUnitLoc(udg_Unit_2D[2]))
call RemoveLocation(udg_ALL_PointPX)
set udg_All_unit_shu[49]=(udg_All_unit_shu[49]+1)
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_2D[1]),14.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_2D[1]),GetUnitLoc(udg_Unit_2D[2])))
call SetUnitPositionLocFacingLocBJ(udg_Unit_2D[1],udg_ALL_PointPX,GetUnitLoc(udg_Unit_2D[2]))
call RemoveLocation(udg_ALL_PointPX)
set udg_All_unit_shu[49]=(udg_All_unit_shu[49]+1)
endif
endif
endfunction
function InitTrig_D_yingwoshuiren2 takes nothing returns nothing
set gg_trg_D_yingwoshuiren2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_D_yingwoshuiren2,0.04)
call TriggerAddAction(gg_trg_D_yingwoshuiren2,function Trig_D_yingwoshuiren2_Actions)
endfunction
function Trig_Q_huolongyandanS_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AOsh'))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandanS_Func007C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'ofir'))==true))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandanS_Func008Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_huolongyandanS_Func008Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true)
endfunction
function Trig_Q_huolongyandanS_Func008Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true))
endfunction
function Trig_Q_huolongyandanS_Func008Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_3D[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_3D[1],'AOsh'))*I2R(GetHeroInt(udg_Unit_3D[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_huolongyandanS_Func008C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(GetLastCreatedUnit()),udg_All_unit_Dian[5])<=100.00))then
return false
endif
if(not(udg_All_unit_shu[9]==0.00))then
return false
endif
if(not(udg_All_unit_shu[10]==1.00))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandanS_Actions takes nothing returns nothing
set udg_Unit_3D[1]=GetTriggerUnit()
set udg_All_unit_shu[8]=0.20
set udg_All_unit_shu[9]=0.00
call EnableTrigger(gg_trg_Q_huolongyandanS2)
call CreateNUnitsAtLoc(1,'hbot',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),100.00,AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())),AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc()))
call UnitApplyTimedLifeBJ(0.20,'BHwe',GetLastCreatedUnit())
if(Trig_Q_huolongyandanS_Func007C())then
call CreateNUnitsAtLoc(1,'nhew',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),100.00,AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())),GetUnitFacing(GetTriggerUnit()))
call UnitApplyTimedLifeBJ(5.00,'BHwe',GetLastCreatedUnit())
else
endif
if(Trig_Q_huolongyandanS_Func008C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(350.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_Q_huolongyandanS_Func008Func002001003)),function Trig_Q_huolongyandanS_Func008Func002A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'opeo',GetOwningPlayer(udg_Unit_3D[1]),udg_All_unit_Dian[5],GetUnitFacing(udg_Unit_3D[1]))
call UnitApplyTimedLifeBJ(2.00,'BHwe',GetLastCreatedUnit())
call SetUnitTimeScale(GetLastCreatedUnit(),0.60)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set udg_All_unit_shu[9]=1.00
else
endif
endfunction
function InitTrig_Q_huolongyandanS takes nothing returns nothing
set gg_trg_Q_huolongyandanS=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_huolongyandanS,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_huolongyandanS,Condition(function Trig_Q_huolongyandanS_Conditions))
call TriggerAddAction(gg_trg_Q_huolongyandanS,function Trig_Q_huolongyandanS_Actions)
endfunction
function Trig_Q_huolongyandanS2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='hbot'))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandanS2_Func001Func007001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_huolongyandanS2_Func001Func007001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true)
endfunction
function Trig_Q_huolongyandanS2_Func001Func007001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true))
endfunction
function Trig_Q_huolongyandanS2_Func001Func007A takes nothing returns nothing
call UnitDamageTargetBJ(GetLastCreatedUnit(),GetEnumUnit(),50.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_huolongyandanS2_Func001Func008C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_3D[1],'ofir'))==true))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandanS2_Func001Func009Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_huolongyandanS2_Func001Func009Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true)
endfunction
function Trig_Q_huolongyandanS2_Func001Func009Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetLastCreatedUnit()))==true))
endfunction
function Trig_Q_huolongyandanS2_Func001Func009Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_3D[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_3D[1],'AOsh'))*I2R(GetHeroInt(udg_Unit_3D[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_huolongyandanS2_Func001Func009C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(GetLastCreatedUnit()),udg_All_unit_Dian[5])<=100.00))then
return false
endif
if(not(udg_All_unit_shu[9]==0.00))then
return false
endif
if(not(udg_All_unit_shu[10]==1.00))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandanS2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[8]>=1.60))then
return false
endif
return true
endfunction
function Trig_Q_huolongyandanS2_Actions takes nothing returns nothing
if(Trig_Q_huolongyandanS2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
call CreateNUnitsAtLoc(1,'hbot',GetOwningPlayer(GetDyingUnit()),PolarProjectionBJ(GetUnitLoc(GetDyingUnit()),150.00,GetUnitFacing(GetDyingUnit())),GetUnitFacing(GetDyingUnit()))
call SetUnitScale(GetLastCreatedUnit(),(0.50+udg_All_unit_shu[8]),(0.50+udg_All_unit_shu[8]),(0.50+udg_All_unit_shu[8]))
call UnitApplyTimedLifeBJ(0.20,'BHwe',GetLastCreatedUnit())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_Q_huolongyandanS2_Func001Func007001003)),function Trig_Q_huolongyandanS2_Func001Func007A)
if(Trig_Q_huolongyandanS2_Func001Func008C())then
call CreateNUnitsAtLoc(1,'nhew',GetOwningPlayer(GetDyingUnit()),PolarProjectionBJ(GetUnitLoc(GetDyingUnit()),150.00,GetUnitFacing(GetDyingUnit())),GetUnitFacing(GetDyingUnit()))
call SetUnitScale(GetLastCreatedUnit(),(1.00+udg_All_unit_shu[8]),(1.00+udg_All_unit_shu[8]),(1.00+udg_All_unit_shu[8]))
call UnitApplyTimedLifeBJ(5.00,'BHwe',GetLastCreatedUnit())
else
endif
if(Trig_Q_huolongyandanS2_Func001Func009C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(350.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_Q_huolongyandanS2_Func001Func009Func002001003)),function Trig_Q_huolongyandanS2_Func001Func009Func002A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'opeo',GetOwningPlayer(udg_Unit_3D[1]),udg_All_unit_Dian[5],GetUnitFacing(udg_Unit_3D[1]))
call UnitApplyTimedLifeBJ(2.00,'BHwe',GetLastCreatedUnit())
call SetUnitTimeScale(GetLastCreatedUnit(),0.60)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set udg_All_unit_shu[9]=1.00
else
endif
set udg_All_unit_shu[8]=(udg_All_unit_shu[8]+0.40)
endif
endfunction
function InitTrig_Q_huolongyandanS2 takes nothing returns nothing
set gg_trg_Q_huolongyandanS2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_huolongyandanS2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Q_huolongyandanS2,Condition(function Trig_Q_huolongyandanS2_Conditions))
call TriggerAddAction(gg_trg_Q_huolongyandanS2,function Trig_Q_huolongyandanS2_Actions)
endfunction
function Trig_W_tulongjue_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANmo'))then
return false
endif
return true
endfunction
function Trig_W_tulongjue_Func003Func004001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_tulongjue_Func003Func004001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_W_tulongjue_Func003Func004001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_W_tulongjue_Func003Func004A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_3D[1],GetEnumUnit(),(100.00*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'ANmo'))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_tulongjue_Func003Func008001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_tulongjue_Func003Func008001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_W_tulongjue_Func003Func008001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_W_tulongjue_Func003Func008A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_3D[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'ANmo'))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_tulongjue_Func003C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_3D[1],'srbd'))==true))then
return false
endif
return true
endfunction
function Trig_W_tulongjue_Actions takes nothing returns nothing
set udg_Unit_3D[1]=GetTriggerUnit()
set udg_All_unit_Dian[5]=GetSpellTargetLoc()
if(Trig_W_tulongjue_Func003C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLocFacingLocBJ(1,'nws1',GetTriggerPlayer(),PolarProjectionBJ(GetSpellTargetLoc(),200.00,(I2R(bj_forLoopAIndex)*30.00)),GetSpellTargetLoc())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',(1.00*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'ANmo'))))
call SetUnitTimeScale(GetLastCreatedUnit(),3.00)
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(360.00,GetSpellTargetLoc(),Condition(function Trig_W_tulongjue_Func003Func004001003)),function Trig_W_tulongjue_Func003Func004A)
call TriggerSleepAction((1.00*I2R(GetUnitAbilityLevel(udg_Unit_3D[1],'ANmo'))))
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLocFacingLocBJ(1,'nws1',GetTriggerPlayer(),PolarProjectionBJ(GetSpellTargetLoc(),120.00,(I2R(bj_forLoopAIndex)*30.00)),GetSpellTargetLoc())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',(0.50*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'ANmo'))))
call SetUnitTimeScale(GetLastCreatedUnit(),3.00)
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetSpellTargetLoc(),Condition(function Trig_W_tulongjue_Func003Func008001003)),function Trig_W_tulongjue_Func003Func008A)
call TriggerSleepAction((0.50*I2R(GetUnitAbilityLevel(udg_Unit_3D[1],'ANmo'))))
endif
call RemoveLocation(udg_All_unit_Dian[5])
endfunction
function InitTrig_W_tulongjue takes nothing returns nothing
set gg_trg_W_tulongjue=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_tulongjue,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_tulongjue,Condition(function Trig_W_tulongjue_Conditions))
call TriggerAddAction(gg_trg_W_tulongjue,function Trig_W_tulongjue_Actions)
endfunction
function Trig_W_tulongjue2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='nws1'))then
return false
endif
return true
endfunction
function Trig_W_tulongjue2_Actions takes nothing returns nothing
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function InitTrig_W_tulongjue2 takes nothing returns nothing
set gg_trg_W_tulongjue2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_tulongjue2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_W_tulongjue2,Condition(function Trig_W_tulongjue2_Conditions))
call TriggerAddAction(gg_trg_W_tulongjue2,function Trig_W_tulongjue2_Actions)
endfunction
function Trig_E_yuanwang_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACtb'))then
return false
endif
return true
endfunction
function Trig_E_yuanwang_Actions takes nothing returns nothing
set udg_Unit_3D[1]=GetTriggerUnit()
set udg_Unit_3D[2]=GetSpellTargetUnit()
call UnitDamageTargetBJ(udg_Unit_3D[1],udg_Unit_3D[2],(I2R(GetUnitAbilityLevel(udg_Unit_3D[1],'ACtb'))*I2R(GetHeroInt(udg_Unit_3D[1],true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call EnableTrigger(gg_trg_E_yuanwang2)
call TriggerSleepAction(0.40)
call DisableTrigger(gg_trg_E_yuanwang2)
endfunction
function InitTrig_E_yuanwang takes nothing returns nothing
set gg_trg_E_yuanwang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_yuanwang,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_yuanwang,Condition(function Trig_E_yuanwang_Conditions))
call TriggerAddAction(gg_trg_E_yuanwang,function Trig_E_yuanwang_Actions)
endfunction
function Trig_E_yuanwang2_Func001Func001Func010001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_3D[1]))==true)
endfunction
function Trig_E_yuanwang2_Func001Func001Func010001003001002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_E_yuanwang2_Func001Func001Func010001003001002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_3D[2])
endfunction
function Trig_E_yuanwang2_Func001Func001Func010001003001002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_3D[2]))
endfunction
function Trig_E_yuanwang2_Func001Func001Func010001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_3D[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_3D[2]))))
endfunction
function Trig_E_yuanwang2_Func001Func001Func010001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_E_yuanwang2_Func001Func001Func010001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_3D[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_3D[2]))))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_E_yuanwang2_Func001Func001Func010A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),40.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_3D[2]),GetUnitLoc(GetEnumUnit()))),GetUnitFacing(GetEnumUnit()))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_E_yuanwang2_Func001Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_3D[2]),udg_All_unit_Dian[5])<=200.00))then
return false
endif
if(not(udg_All_unit_shu[10]==1.00))then
return false
endif
return true
endfunction
function Trig_E_yuanwang2_Func001Func002C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_3D[2]),udg_All_unit_Dian[5])<=200.00))then
return false
endif
if(not(udg_All_unit_shu[10]==1.00))then
return false
endif
return true
endfunction
function Trig_E_yuanwang2_Func001Func003001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_E_yuanwang2_Func001Func003001001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_3D[1]))==true)
endfunction
function Trig_E_yuanwang2_Func001Func003001001003002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_3D[2])
endfunction
function Trig_E_yuanwang2_Func001Func003001001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_3D[1]))==true),(GetFilterUnit()!=udg_Unit_3D[2]))
endfunction
function Trig_E_yuanwang2_Func001Func003001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_3D[1]))==true),(GetFilterUnit()!=udg_Unit_3D[2]))))
endfunction
function Trig_E_yuanwang2_Func001C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(udg_Unit_3D[2]),Condition(function Trig_E_yuanwang2_Func001Func003001001003)))==true))then
return false
endif
if(not(IsTerrainPathableBJ(GetUnitLoc(udg_Unit_3D[2]),PATHING_TYPE_WALKABILITY)!=true))then
return false
endif
return true
endfunction
function Trig_E_yuanwang2_Actions takes nothing returns nothing
if(Trig_E_yuanwang2_Func001C())then
if(Trig_E_yuanwang2_Func001Func002C())then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'n001',GetOwningPlayer(udg_Unit_3D[1]),udg_All_unit_Dian[5],bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',5.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call UnitDamageTargetBJ(udg_Unit_3D[1],udg_Unit_3D[2],(I2R(GetUnitAbilityLevel(udg_Unit_3D[1],'ACtb'))*I2R(GetHeroInt(udg_Unit_3D[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)
else
call SetUnitPositionLocFacingBJ(udg_Unit_3D[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_3D[2]),25.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_3D[1]),GetUnitLoc(udg_Unit_3D[2]))),GetUnitFacing(udg_Unit_3D[2]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_3D[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
else
if(Trig_E_yuanwang2_Func001Func001C())then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'n001',GetOwningPlayer(udg_Unit_3D[1]),udg_All_unit_Dian[5],bj_UNIT_FACING)
call SetUnitVertexColor(GetLastCreatedUnit(),0,0,0,255)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',5.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call UnitDamageTargetBJ(udg_Unit_3D[1],udg_Unit_3D[2],(I2R(GetUnitAbilityLevel(udg_Unit_3D[1],'ACtb'))*I2R(GetHeroInt(udg_Unit_3D[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)
else
call SetUnitPositionLocFacingBJ(udg_Unit_3D[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_3D[2]),25.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_3D[1]),GetUnitLoc(udg_Unit_3D[2]))),GetUnitFacing(udg_Unit_3D[2]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_3D[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_3D[2]),Condition(function Trig_E_yuanwang2_Func001Func001Func010001003)),function Trig_E_yuanwang2_Func001Func001Func010A)
endif
endif
endfunction
function InitTrig_E_yuanwang2 takes nothing returns nothing
set gg_trg_E_yuanwang2=CreateTrigger()
call DisableTrigger(gg_trg_E_yuanwang2)
call TriggerRegisterTimerEventPeriodic(gg_trg_E_yuanwang2,0.04)
call TriggerAddAction(gg_trg_E_yuanwang2,function Trig_E_yuanwang2_Actions)
endfunction
function Trig_R_shiguifengjin_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AHbn'))then
return false
endif
return true
endfunction
function Trig_R_shiguifengjin_Actions takes nothing returns nothing
set udg_Unit_3D[1]=GetTriggerUnit()
call AddSpecialEffectLocBJ(GetUnitLoc(GetSpellTargetUnit()),"Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),(GetUnitStateSwap(UNIT_STATE_MANA,GetTriggerUnit())*1.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),-150.00,GetUnitFacing(GetTriggerUnit())),"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLocFacingLocBJ(1,'u000',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),-150.00,GetUnitFacing(GetTriggerUnit())),GetUnitLoc(GetTriggerUnit()))
call UnitApplyTimedLifeBJ(2.00,'BTLF',GetLastCreatedUnit())
call TriggerSleepAction(2.00)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_3D[1]),"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(udg_Unit_3D[1])
endfunction
function InitTrig_R_shiguifengjin takes nothing returns nothing
set gg_trg_R_shiguifengjin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_shiguifengjin,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_shiguifengjin,Condition(function Trig_R_shiguifengjin_Conditions))
call TriggerAddAction(gg_trg_R_shiguifengjin,function Trig_R_shiguifengjin_Actions)
endfunction
function Trig_D_renshuaoyi_Conditions takes nothing returns boolean
if(not(GetLearnedSkill()=='Aamk'))then
return false
endif
return true
endfunction
function Trig_D_renshuaoyi_Actions takes nothing returns nothing
set udg_All_unit_shu[10]=1.00
endfunction
function InitTrig_D_renshuaoyi takes nothing returns nothing
set gg_trg_D_renshuaoyi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_renshuaoyi,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_D_renshuaoyi,Condition(function Trig_D_renshuaoyi_Conditions))
call TriggerAddAction(gg_trg_D_renshuaoyi,function Trig_D_renshuaoyi_Actions)
endfunction
function Trig_Q_jiguangdan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A00J'))then
return false
endif
return true
endfunction
function Trig_Q_jiguangdan_Func008Func012001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_jiguangdan_Func008Func012001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_jiguangdan_Func008Func012001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_jiguangdan_Func008Func012001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true)
endfunction
function Trig_Q_jiguangdan_Func008Func012001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true))
endfunction
function Trig_Q_jiguangdan_Func008Func012A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_4D[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(udg_Unit_4D[1],'A00J'))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"abilities\\weapons\\catapult\\catapultmissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_jiguangdan_Func008Func013Func005001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_jiguangdan_Func008Func013Func005001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_jiguangdan_Func008Func013Func005001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_jiguangdan_Func008Func013Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true)
endfunction
function Trig_Q_jiguangdan_Func008Func013Func005001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true))
endfunction
function Trig_Q_jiguangdan_Func008Func013Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_4D[1],GetEnumUnit(),400.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_jiguangdan_Func008Func013C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_4D[1],'oslo'))==true))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_4D[1])==true))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_4D[2])==true))then
return false
endif
return true
endfunction
function Trig_Q_jiguangdan_Func008C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_4D[2])==true))then
return false
endif
return true
endfunction
function Trig_Q_jiguangdan_Actions takes nothing returns nothing
set udg_Unit_4D[1]=GetTriggerUnit()
set udg_Unit_4D[2]=GetSpellTargetUnit()
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"war3mapImported\\T_shanguangjin.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitTimeScalePercent(udg_Unit_4D[1],200.00)
call UnitAddAbility(udg_Unit_4D[1],'A02Z')
call TriggerSleepAction(0.10)
if(Trig_Q_jiguangdan_Func008C())then
call SetUnitPositionLoc(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[2]),80.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[2]),GetUnitLoc(udg_Unit_4D[1]))))
call SetUnitTimeScalePercent(udg_Unit_4D[1],100.00)
call SetUnitAnimation(udg_Unit_4D[1],"attack")
call TerrainDeformationRippleBJ(0.50,false,GetUnitLoc(udg_Unit_4D[1]),200.00,200.00,90.00,0.10,40.00)
call CreateNUnitsAtLoc(1,'hbew',GetTriggerPlayer(),GetUnitLoc(udg_Unit_4D[1]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_4D[1]),Condition(function Trig_Q_jiguangdan_Func008Func012001003)),function Trig_Q_jiguangdan_Func008Func012A)
if(Trig_Q_jiguangdan_Func008Func013C())then
call TriggerSleepAction(0.05)
call SetUnitPositionLoc(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[2]),80.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))))
call IssueImmediateOrderById(GetLastCreatedUnit(),852096)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(210.00,GetUnitLoc(udg_Unit_4D[1]),Condition(function Trig_Q_jiguangdan_Func008Func013Func005001003)),function Trig_Q_jiguangdan_Func008Func013Func005A)
else
endif
call TriggerSleepAction(0.10)
call UnitRemoveAbility(udg_Unit_4D[1],'A02Z')
else
call SetUnitTimeScalePercent(udg_Unit_4D[1],100.00)
call UnitRemoveAbility(udg_Unit_4D[1],'A02Z')
endif
endfunction
function InitTrig_Q_jiguangdan takes nothing returns nothing
set gg_trg_Q_jiguangdan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_jiguangdan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_jiguangdan,Condition(function Trig_Q_jiguangdan_Conditions))
call TriggerAddAction(gg_trg_Q_jiguangdan,function Trig_Q_jiguangdan_Actions)
endfunction
function Trig_W_luoxuanwan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A00Q'))then
return false
endif
return true
endfunction
function Trig_W_luoxuanwan_Func007C takes nothing returns boolean
if(not(UnitHasBuffBJ(udg_Unit_4D[2],'Bfae')==true))then
return false
endif
return true
endfunction
function Trig_W_luoxuanwan_Actions takes nothing returns nothing
set udg_Unit_4D[1]=GetTriggerUnit()
set udg_Unit_4D[2]=GetSpellTargetUnit()
set udg_All_unit_shu[54]=0.00
call UnitAddAbility(udg_Unit_4D[1],'A01H')
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_4D[1],true)
if(Trig_W_luoxuanwan_Func007C())then
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"war3mapImported\\T_shanguangjin.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call ShowUnit(udg_Unit_4D[1],false)
call SetUnitPositionLocFacingBJ(udg_Unit_4D[1],GetUnitLoc(udg_Unit_4D[1]),(AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))+180.00))
call TriggerSleepAction(0.30)
call SetUnitPositionLocFacingLocBJ(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[2]),120.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))),GetUnitLoc(udg_Unit_4D[2]))
call ShowUnit(udg_Unit_4D[1],true)
call SetUnitPathing(udg_Unit_4D[1],false)
call TerrainDeformationRippleBJ(0.40,false,GetUnitLoc(udg_Unit_4D[1]),300.00,300.00,80.00,0.20,100.00)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"war3mapImported\\T_shanguangjin.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call SelectUnitForPlayerSingle(udg_Unit_4D[1],GetOwningPlayer(udg_Unit_4D[1]))
call SetUnitAnimation(udg_Unit_4D[1],"spell two")
call EnableTrigger(gg_trg_W_luoxuanwan2)
else
call SetUnitPathing(udg_Unit_4D[1],false)
call SetUnitAnimation(udg_Unit_4D[1],"spell two")
call EnableTrigger(gg_trg_W_luoxuanwan2)
endif
endfunction
function InitTrig_W_luoxuanwan takes nothing returns nothing
set gg_trg_W_luoxuanwan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_luoxuanwan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_luoxuanwan,Condition(function Trig_W_luoxuanwan_Conditions))
call TriggerAddAction(gg_trg_W_luoxuanwan,function Trig_W_luoxuanwan_Actions)
endfunction
function Trig_W_luoxuanwan2_Func001Func008C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_4D[2])==true))then
return true
endif
if((IsUnitInGroup(udg_Unit_4D[1],GetUnitsInRangeOfLocAll(150.00,GetUnitLoc(udg_Unit_4D[2])))==true))then
return true
endif
return false
endfunction
function Trig_W_luoxuanwan2_Func001C takes nothing returns boolean
if(not Trig_W_luoxuanwan2_Func001Func008C())then
return false
endif
return true
endfunction
function Trig_W_luoxuanwan2_Actions takes nothing returns nothing
if(Trig_W_luoxuanwan2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(gg_trg_W_luoxuanwan4)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLoc(1,'nbee',GetOwningPlayer(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set udg_Unit_4D[4]=GetLastCreatedUnit()
else
call SetUnitPositionLocFacingBJ(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[1]),23.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2])))
endif
endfunction
function InitTrig_W_luoxuanwan2 takes nothing returns nothing
set gg_trg_W_luoxuanwan2=CreateTrigger()
call DisableTrigger(gg_trg_W_luoxuanwan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_luoxuanwan2,0.02)
call TriggerAddAction(gg_trg_W_luoxuanwan2,function Trig_W_luoxuanwan2_Actions)
endfunction
function Trig_W_luoxuanwan3_Func001Func001C takes nothing returns boolean
if(not(IsUnitDeadBJ(udg_Unit_4D[4])==true))then
return false
endif
return true
endfunction
function Trig_W_luoxuanwan3_Func001Func005001003001001 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true)
endfunction
function Trig_W_luoxuanwan3_Func001Func005001003001002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_luoxuanwan3_Func001Func005001003001002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_4D[2])
endfunction
function Trig_W_luoxuanwan3_Func001Func005001003001002 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_4D[2]))
endfunction
function Trig_W_luoxuanwan3_Func001Func005001003001 takes nothing returns boolean
return GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_4D[2]))))
endfunction
function Trig_W_luoxuanwan3_Func001Func005001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_luoxuanwan3_Func001Func005001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true),(GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetFilterUnit()!=udg_Unit_4D[2]))))),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_W_luoxuanwan3_Func001Func005A takes nothing returns nothing
call SetUnitPositionLocFacingBJ(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),40.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[2]),GetUnitLoc(GetEnumUnit()))),GetUnitFacing(GetEnumUnit()))
call UnitDamageTargetBJ(udg_Unit_4D[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_4D[1],'A00Q'))*10.00),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_luoxuanwan3_Func001Func010001001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_luoxuanwan3_Func001Func010001001003002001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true)
endfunction
function Trig_W_luoxuanwan3_Func001Func010001001003002002 takes nothing returns boolean
return(GetFilterUnit()!=udg_Unit_4D[2])
endfunction
function Trig_W_luoxuanwan3_Func001Func010001001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true),(GetFilterUnit()!=udg_Unit_4D[2]))
endfunction
function Trig_W_luoxuanwan3_Func001Func010001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true),(GetFilterUnit()!=udg_Unit_4D[2]))))
endfunction
function Trig_W_luoxuanwan3_Func001C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(udg_Unit_4D[2]),Condition(function Trig_W_luoxuanwan3_Func001Func010001001003)))==true))then
return false
endif
if(not(IsTerrainPathableBJ(GetUnitLoc(udg_Unit_4D[2]),PATHING_TYPE_WALKABILITY)!=true))then
return false
endif
return true
endfunction
function Trig_W_luoxuanwan3_Actions takes nothing returns nothing
if(Trig_W_luoxuanwan3_Func001C())then
call SetUnitPositionLocFacingBJ(udg_Unit_4D[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[2]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))),(GetUnitFacing(udg_Unit_4D[2])+20.00))
call SetUnitPositionLocFacingBJ(udg_Unit_4D[4],GetUnitLoc(udg_Unit_4D[2]),GetUnitFacing(udg_Unit_4D[4]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[2]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
if(Trig_W_luoxuanwan3_Func001Func001C())then
else
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[4]),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[4]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(udg_Unit_4D[4])
endif
call SetUnitPositionLocFacingBJ(udg_Unit_4D[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[2]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))),(GetUnitFacing(udg_Unit_4D[2])+20.00))
call SetUnitPositionLocFacingBJ(udg_Unit_4D[4],GetUnitLoc(udg_Unit_4D[2]),GetUnitFacing(udg_Unit_4D[4]))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_4D[2]),Condition(function Trig_W_luoxuanwan3_Func001Func005001003)),function Trig_W_luoxuanwan3_Func001Func005A)
endif
endfunction
function InitTrig_W_luoxuanwan3 takes nothing returns nothing
set gg_trg_W_luoxuanwan3=CreateTrigger()
call DisableTrigger(gg_trg_W_luoxuanwan3)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_luoxuanwan3,0.04)
call TriggerAddAction(gg_trg_W_luoxuanwan3,function Trig_W_luoxuanwan3_Actions)
endfunction
function Trig_W_luoxuanwan4_Func001Func001C takes nothing returns boolean
if((udg_All_unit_shu[54]>=5.00))then
return true
endif
if((IsUnitDeadBJ(udg_Unit_4D[2])==true))then
return true
endif
return false
endfunction
function Trig_W_luoxuanwan4_Func001Func013C takes nothing returns boolean
if(not(UnitHasBuffBJ(udg_Unit_4D[2],'Bfae')==true))then
return false
endif
return true
endfunction
function Trig_W_luoxuanwan4_Func001C takes nothing returns boolean
if(not Trig_W_luoxuanwan4_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_W_luoxuanwan4_Actions takes nothing returns nothing
if(Trig_W_luoxuanwan4_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitPositionLocFacingBJ(udg_Unit_4D[4],GetUnitLoc(udg_Unit_4D[4]),GetUnitFacing(udg_Unit_4D[1]))
call SetUnitPathing(udg_Unit_4D[1],true)
call PauseUnit(udg_Unit_4D[1],false)
call UnitRemoveAbility(udg_Unit_4D[1],'A01H')
call EnableTrigger(gg_trg_W_luoxuanwan3)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[2]),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(0.40)
call DisableTrigger(gg_trg_W_luoxuanwan3)
else
set udg_All_unit_shu[54]=(udg_All_unit_shu[54]+1)
if(Trig_W_luoxuanwan4_Func001Func013C())then
call SetUnitPositionLocFacingBJ(udg_Unit_4D[2],GetUnitLoc(udg_Unit_4D[4]),GetUnitFacing(udg_Unit_4D[4]))
call UnitDamageTargetBJ(udg_Unit_4D[1],udg_Unit_4D[2],((0.20*I2R(GetHeroAgi(udg_Unit_4D[1],true)))*I2R(GetUnitAbilityLevelSwapped('A00Q',udg_Unit_4D[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_4D[2],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call SetUnitPositionLocFacingBJ(udg_Unit_4D[2],GetUnitLoc(udg_Unit_4D[4]),GetUnitFacing(udg_Unit_4D[4]))
call UnitDamageTargetBJ(udg_Unit_4D[1],udg_Unit_4D[2],((0.20*I2R(GetHeroAgi(udg_Unit_4D[1],true)))*I2R(GetUnitAbilityLevelSwapped('A00Q',udg_Unit_4D[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_4D[2],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endif
endfunction
function InitTrig_W_luoxuanwan4 takes nothing returns nothing
set gg_trg_W_luoxuanwan4=CreateTrigger()
call DisableTrigger(gg_trg_W_luoxuanwan4)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_luoxuanwan4,0.20)
call TriggerAddAction(gg_trg_W_luoxuanwan4,function Trig_W_luoxuanwan4_Actions)
endfunction
function Trig_E_shanguangzhitai_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Aroa'))then
return false
endif
return true
endfunction
function Trig_E_shanguangzhitai_Func002C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'oslo'))==true))then
return false
endif
return true
endfunction
function Trig_E_shanguangzhitai_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
if(Trig_E_shanguangzhitai_Func002C())then
call UnitAddAbility(GetLastCreatedUnit(),'A01N')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A01N',GetUnitAbilityLevel(GetTriggerUnit(),'Aroa'))
else
call UnitAddAbility(GetLastCreatedUnit(),'Auhf')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Auhf',GetUnitAbilityLevel(GetTriggerUnit(),'Aroa'))
endif
call IssueTargetOrderById(GetLastCreatedUnit(),852209,GetTriggerUnit())
endfunction
function InitTrig_E_shanguangzhitai takes nothing returns nothing
set gg_trg_E_shanguangzhitai=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_shanguangzhitai,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_shanguangzhitai,Condition(function Trig_E_shanguangzhitai_Conditions))
call TriggerAddAction(gg_trg_E_shanguangzhitai,function Trig_E_shanguangzhitai_Actions)
endfunction
function Trig_R_shunguang_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A003'))then
return false
endif
return true
endfunction
function Trig_R_shunguang_Actions takes nothing returns nothing
set udg_Unit_4D[1]=GetTriggerUnit()
set udg_Unit_4D[2]=GetSpellTargetUnit()
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"war3mapImported\\T_shanguangjin.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitAddAbility(udg_Unit_4D[1],'A046')
call TriggerSleepAction(0.10)
call SetUnitPositionLoc(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[2]),120.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[2]),GetUnitLoc(udg_Unit_4D[1]))))
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),GetUnitLoc(udg_Unit_4D[1]),bj_UNIT_FACING)
call IssueTargetOrderById(GetLastCreatedUnit(),852149,udg_Unit_4D[2])
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitAnimation(udg_Unit_4D[1],"attack")
call TerrainDeformationRippleBJ(0.30,false,GetUnitLoc(udg_Unit_4D[1]),200.00,200.00,90.00,0.10,40.00)
call TriggerSleepAction(0.10)
call UnitRemoveAbility(udg_Unit_4D[1],'A046')
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),GetUnitLoc(udg_Unit_4D[1]),bj_UNIT_FACING)
call IssueTargetOrderById(GetLastCreatedUnit(),852149,udg_Unit_4D[2])
endfunction
function InitTrig_R_shunguang takes nothing returns nothing
set gg_trg_R_shunguang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_shunguang,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_shunguang,Condition(function Trig_R_shunguang_Conditions))
call TriggerAddAction(gg_trg_R_shunguang,function Trig_R_shunguang_Actions)
endfunction
function Trig_D_feileishen_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AUfn'))then
return false
endif
return true
endfunction
function Trig_D_feileishen_Func004C takes nothing returns boolean
if(not(UnitHasBuffBJ(udg_Unit_4D[2],'Bfae')==true))then
return false
endif
return true
endfunction
function Trig_D_feileishen_Actions takes nothing returns nothing
set udg_Unit_4D[1]=GetTriggerUnit()
set udg_Unit_4D[2]=GetSpellTargetUnit()
call TriggerSleepAction(0.10)
if(Trig_D_feileishen_Func004C())then
set udg_All_unit_shu[3]=0.00
call UnitAddAbility(udg_Unit_4D[1],'A046')
call PauseUnit(udg_Unit_4D[1],true)
call SetUnitPathing(udg_Unit_4D[1],false)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"war3mapImported\\T_shanguangjin.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call ShowUnit(udg_Unit_4D[1],false)
call SetUnitPositionLocFacingLocBJ(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[2]),200.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))),GetUnitLoc(udg_Unit_4D[2]))
call TriggerSleepAction(0.30)
call ShowUnit(udg_Unit_4D[1],true)
call SetUnitPathing(udg_Unit_4D[1],false)
call SetUnitAnimation(udg_Unit_4D[1],"spell three")
call TerrainDeformationRippleBJ(0.40,false,GetUnitLoc(udg_Unit_4D[1]),300.00,300.00,120.00,0.20,100.00)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"war3mapImported\\T_shanguangjin.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.00)
call SetUnitPositionLocFacingLocBJ(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[1]),0.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))),GetUnitLoc(udg_Unit_4D[2]))
call SetUnitTimeScalePercent(udg_Unit_4D[1],400.00)
call SetUnitAnimation(udg_Unit_4D[1],"spell two")
call EnableTrigger(gg_trg_D_feileishen2)
else
set udg_All_unit_Dian[1]=GetUnitLoc(udg_Unit_4D[2])
set udg_All_unit_shu[3]=0.00
call PauseUnit(udg_Unit_4D[1],true)
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[1]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Aprg',2)
call IssueTargetOrderById(GetLastCreatedUnit(),852111,udg_Unit_4D[2])
call SetUnitAnimation(udg_Unit_4D[1],"spell three")
call UnitAddAbility(udg_Unit_4D[1],'A02Z')
call TriggerSleepAction(0.50)
call SetUnitTimeScalePercent(udg_Unit_4D[1],600.00)
call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUTIN,1.00,"ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp",100.00,100.00,100.00,0)
call EnableTrigger(gg_trg_D_feileishen3)
endif
endfunction
function InitTrig_D_feileishen takes nothing returns nothing
set gg_trg_D_feileishen=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_feileishen,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_feileishen,Condition(function Trig_D_feileishen_Conditions))
call TriggerAddAction(gg_trg_D_feileishen,function Trig_D_feileishen_Actions)
endfunction
function Trig_D_feileishen2_Func001Func001C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_4D[2])==true))then
return true
endif
if((IsUnitInGroup(udg_Unit_4D[2],GetUnitsInRangeOfLocAll(150.00,GetUnitLoc(udg_Unit_4D[1])))==true))then
return true
endif
if((udg_Unit_4D[2]==null))then
return true
endif
return false
endfunction
function Trig_D_feileishen2_Func001Func010001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_feileishen2_Func001Func010001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_feileishen2_Func001Func010001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_D_feileishen2_Func001Func010001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true)
endfunction
function Trig_D_feileishen2_Func001Func010001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_4D[1]))==true))
endfunction
function Trig_D_feileishen2_Func001Func010A takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(udg_Unit_4D[1],GetEnumUnit(),500.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
endfunction
function Trig_D_feileishen2_Func001C takes nothing returns boolean
if(not Trig_D_feileishen2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_D_feileishen2_Actions takes nothing returns nothing
if(Trig_D_feileishen2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(gg_trg_Z_huiguangren)
call UnitDamageTarget(udg_Unit_4D[1],udg_Unit_4D[2],(12.00*I2R(GetHeroAgi(udg_Unit_4D[1],true))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitAnimationByIndex(udg_Unit_4D[1],3)
call TerrainDeformationRippleBJ(0.50,false,GetUnitLoc(udg_Unit_4D[1]),250.00,250.00,35.00,0.10,50.00)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[2]),"war3mapImported\\T_shanguangbao.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_4D[1]),Condition(function Trig_D_feileishen2_Func001Func010001003)),function Trig_D_feileishen2_Func001Func010A)
call SetUnitTimeScalePercent(udg_Unit_4D[1],100.00)
call SetUnitPathing(udg_Unit_4D[1],true)
call PauseUnitBJ(false,udg_Unit_4D[1])
call UnitRemoveAbility(udg_Unit_4D[1],'A046')
else
call SetUnitPositionLoc(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[1]),30.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[2]))))
endif
endfunction
function InitTrig_D_feileishen2 takes nothing returns nothing
set gg_trg_D_feileishen2=CreateTrigger()
call DisableTrigger(gg_trg_D_feileishen2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_feileishen2,0.02)
call TriggerAddAction(gg_trg_D_feileishen2,function Trig_D_feileishen2_Actions)
endfunction
function Trig_D_feileishen3_Func001Func001Func001001001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_feileishen3_Func001Func001Func001001001003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_feileishen3_Func001Func001Func001001001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_D_feileishen3_Func001Func001Func001001001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true)
endfunction
function Trig_D_feileishen3_Func001Func001Func001001001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true))
endfunction
function Trig_D_feileishen3_Func001Func001C takes nothing returns boolean
if((CountUnitsInGroup(GetUnitsInRangeOfLocMatching(400.00,udg_All_unit_Dian[1],Condition(function Trig_D_feileishen3_Func001Func001Func001001001003)))==0))then
return true
endif
if((R2I(udg_All_unit_shu[3])==5))then
return true
endif
return false
endfunction
function Trig_D_feileishen3_Func001Func005001002003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_feileishen3_Func001Func005001002003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_feileishen3_Func001Func005001002003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_D_feileishen3_Func001Func005001002003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true)
endfunction
function Trig_D_feileishen3_Func001Func005001002003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true))
endfunction
function Trig_D_feileishen3_Func001Func005A takes nothing returns nothing
call SetUnitPositionLocFacingLocBJ(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),100.00,(GetRandomReal(100.00,140.00)*udg_All_unit_shu[3])),GetUnitLoc(GetEnumUnit()))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitAnimation(udg_Unit_4D[1],"attack")
call UnitDamageTargetBJ(udg_Unit_4D[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_4D[1],true))*10.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'hmtt',GetOwningPlayer(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[1]),GetUnitFacing(udg_Unit_4D[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.10)
call SetUnitScale(GetLastCreatedUnit(),1.50,1.50,1.50)
call SetUnitVertexColor(GetLastCreatedUnit(),200,200,0,255)
call CreateNUnitsAtLoc(1,'hsor',GetOwningPlayer(udg_Unit_4D[1]),GetUnitLoc(udg_Unit_4D[1]),GetUnitFacing(udg_Unit_4D[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.10)
call SetUnitScale(GetLastCreatedUnit(),2.00,2.00,2.00)
call SetUnitVertexColor(GetLastCreatedUnit(),200,200,0,255)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function Trig_D_feileishen3_Func001Func010001002003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_feileishen3_Func001Func010001002003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_feileishen3_Func001Func010001002003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_D_feileishen3_Func001Func010001002003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true)
endfunction
function Trig_D_feileishen3_Func001Func010001002003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_4D[1]))==true))
endfunction
function Trig_D_feileishen3_Func001Func010A takes nothing returns nothing
call SetUnitPositionLocFacingLocBJ(udg_Unit_4D[1],PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),200.00,(GetRandomReal(100.00,140.00)*udg_All_unit_shu[3])),GetUnitLoc(GetEnumUnit()))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_4D[1]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitAnimation(udg_Unit_4D[1],"attack")
call UnitDamageTargetBJ(udg_Unit_4D[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_4D[1],true))*2.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_feileishen3_Func001C takes nothing returns boolean
if(not Trig_D_feileishen3_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_D_feileishen3_Actions takes nothing returns nothing
if(Trig_D_feileishen3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitTimeScalePercent(udg_Unit_4D[1],100.00)
call PauseUnit(udg_Unit_4D[1],false)
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRangeOfLocMatching(400.00,udg_All_unit_Dian[1],Condition(function Trig_D_feileishen3_Func001Func005001002003))),function Trig_D_feileishen3_Func001Func005A)
call DestroyGroup(GetLastCreatedGroup())
call RemoveLocation(udg_All_unit_Dian[1])
call TriggerSleepAction(0.30)
call UnitRemoveAbility(udg_Unit_4D[1],'A02Z')
else
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRangeOfLocMatching(400.00,udg_All_unit_Dian[1],Condition(function Trig_D_feileishen3_Func001Func010001002003))),function Trig_D_feileishen3_Func001Func010A)
call DestroyGroup(GetLastCreatedGroup())
call TerrainDeformationRippleBJ(0.20,false,GetUnitLoc(udg_Unit_4D[1]),200.00,200.00,120.00,0.10,40.00)
set udg_All_unit_shu[3]=(udg_All_unit_shu[3]+1)
endif
endfunction
function InitTrig_D_feileishen3 takes nothing returns nothing
set gg_trg_D_feileishen3=CreateTrigger()
call DisableTrigger(gg_trg_D_feileishen3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_feileishen3,0.20)
call TriggerAddAction(gg_trg_D_feileishen3,function Trig_D_feileishen3_Actions)
endfunction
function Trig_Z_huiguangren_Func001Func007C takes nothing returns boolean
if(not(R2I(udg_All_unit_shu[3])==0))then
return false
endif
return true
endfunction
function Trig_Z_huiguangren_Func001Func010C takes nothing returns boolean
if(not(R2I(udg_All_unit_shu[3])<10))then
return false
endif
return true
endfunction
function Trig_Z_huiguangren_Func001C takes nothing returns boolean
if(not(R2I(udg_All_unit_shu[3])==13))then
return false
endif
return true
endfunction
function Trig_Z_huiguangren_Actions takes nothing returns nothing
if(Trig_Z_huiguangren_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(udg_Unit_4D[1],false)
else
call CreateNUnitsAtLoc(1,'hrdh',GetOwningPlayer(udg_Unit_4D[1]),PolarProjectionBJ(PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[1]),50.00,(GetUnitFacing(udg_Unit_4D[1])-50.00)),(30.00+(udg_All_unit_shu[3]*15.00)),(GetUnitFacing(udg_Unit_4D[1])+((udg_All_unit_shu[3]*20.00)-100.00))),(AngleBetweenPoints(GetUnitLoc(udg_Unit_4D[1]),GetUnitLoc(GetLastCreatedUnit()))+180.00))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.20)
call SetUnitTimeScale(GetLastCreatedUnit(),0.50)
call SetUnitVertexColor(GetLastCreatedUnit(),255,255,255,200)
if(Trig_Z_huiguangren_Func001Func007C())then
call CreateNUnitsAtLoc(1,'ehip',GetOwningPlayer(udg_Unit_4D[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_4D[1]),18.00,(GetUnitFacing(udg_Unit_4D[1])+90.00)),(GetUnitFacing(udg_Unit_4D[1])+0.00))
call SetUnitTimeScale(GetLastCreatedUnit(),0.50)
call KillUnit(GetLastCreatedUnit())
set udg_Unit_4D[0]=GetLastCreatedUnit()
else
endif
call SetUnitFacing(udg_Unit_4D[0],(GetUnitFacing(udg_Unit_4D[0])+3.00))
set udg_All_unit_shu[3]=(udg_All_unit_shu[3]+1)
if(Trig_Z_huiguangren_Func001Func010C())then
call SetUnitVertexColor(udg_Unit_4D[0],255,255,255,(20*R2I(udg_All_unit_shu[3])))
else
endif
endif
endfunction
function InitTrig_Z_huiguangren takes nothing returns nothing
set gg_trg_Z_huiguangren=CreateTrigger()
call DisableTrigger(gg_trg_Z_huiguangren)
call TriggerRegisterTimerEventPeriodic(gg_trg_Z_huiguangren,0.02)
call TriggerAddAction(gg_trg_Z_huiguangren,function Trig_Z_huiguangren_Actions)
endfunction
function Trig_Q_yiliaorenshu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANhw'))then
return false
endif
return true
endfunction
function Trig_Q_yiliaorenshu_Func001Func007001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_yiliaorenshu_Func001Func007001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_yiliaorenshu_Func001Func007001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_yiliaorenshu_Func001Func007001003002 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetTriggerPlayer())==true)
endfunction
function Trig_Q_yiliaorenshu_Func001Func007001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitAlly(GetFilterUnit(),GetTriggerPlayer())==true))
endfunction
function Trig_Q_yiliaorenshu_Func001Func007A takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+(I2R(GetHeroInt(udg_Unit_GS[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_GS[1],'ANhw')))))
endfunction
function Trig_Q_yiliaorenshu_Func001C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00A')==true))then
return false
endif
return true
endfunction
function Trig_Q_yiliaorenshu_Actions takes nothing returns nothing
if(Trig_Q_yiliaorenshu_Func001C())then
call AddSpecialEffectTargetUnitBJ("origin",GetSpellTargetUnit(),"war3mapImported\\T_ancientexplode.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(GetSpellTargetUnit()),Condition(function Trig_Q_yiliaorenshu_Func001Func007001003)),function Trig_Q_yiliaorenshu_Func001Func007A)
else
call SetUnitLifeBJ(GetSpellTargetUnit(),(GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)+(I2R(GetHeroInt(udg_Unit_GS[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_GS[1],'ANhw')))))
call AddSpecialEffectTargetUnitBJ("chest",GetSpellTargetUnit(),"war3mapImported\\T_ancientswrath.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function InitTrig_Q_yiliaorenshu takes nothing returns nothing
set gg_trg_Q_yiliaorenshu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_yiliaorenshu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_yiliaorenshu,Condition(function Trig_Q_yiliaorenshu_Conditions))
call TriggerAddAction(gg_trg_Q_yiliaorenshu,function Trig_Q_yiliaorenshu_Actions)
endfunction
function Trig_W_bengji_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A001'))then
return false
endif
return true
endfunction
function Trig_W_bengji_Func005C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_GS[1],'oslo'))==true))then
return false
endif
return true
endfunction
function Trig_W_bengji_Actions takes nothing returns nothing
set udg_Unit_GS[1]=GetTriggerUnit()
set udg_All_unit_shu[61]=0.00
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_GS[1]),GetUnitLoc(udg_Unit_GS[1]),GetUnitFacing(udg_Unit_GS[1]))
set udg_Unit_GS[3]=GetLastCreatedUnit()
if(Trig_W_bengji_Func005C())then
call EnableTrigger(gg_trg_W_bengji3)
else
call EnableTrigger(gg_trg_W_bengji2)
endif
endfunction
function InitTrig_W_bengji takes nothing returns nothing
set gg_trg_W_bengji=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_bengji,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_bengji,Condition(function Trig_W_bengji_Conditions))
call TriggerAddAction(gg_trg_W_bengji,function Trig_W_bengji_Actions)
endfunction
function Trig_W_bengji2_Func001Func008001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_bengji2_Func001Func008001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_GS[1]))==true)
endfunction
function Trig_W_bengji2_Func001Func008001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_GS[1]))==true))
endfunction
function Trig_W_bengji2_Func001Func008A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_GS[1],GetEnumUnit(),(20.00*I2R(GetUnitAbilityLevel(udg_Unit_GS[1],'A001'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_bengji2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[61]>=3.00))then
return false
endif
return true
endfunction
function Trig_W_bengji2_Actions takes nothing returns nothing
if(Trig_W_bengji2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
call SetUnitPositionLoc(udg_Unit_GS[3],PolarProjectionBJ(GetUnitLoc(udg_Unit_GS[3]),100.00,GetUnitFacing(udg_Unit_GS[3])))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_GS[3]),"war3mapImported\\T_earthsmash.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_GS[3]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_W_bengji2_Func001Func008001003)),function Trig_W_bengji2_Func001Func008A)
set udg_All_unit_shu[61]=(udg_All_unit_shu[61]+1)
endif
endfunction
function InitTrig_W_bengji2 takes nothing returns nothing
set gg_trg_W_bengji2=CreateTrigger()
call DisableTrigger(gg_trg_W_bengji2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_bengji2,0.20)
call TriggerAddAction(gg_trg_W_bengji2,function Trig_W_bengji2_Actions)
endfunction
function Trig_W_bengji3_Func001Func008001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_bengji3_Func001Func008001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_GS[1]))==true)
endfunction
function Trig_W_bengji3_Func001Func008001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_GS[1]))==true))
endfunction
function Trig_W_bengji3_Func001Func008A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_GS[1],GetEnumUnit(),(20.00*I2R(GetUnitAbilityLevel(udg_Unit_GS[1],'A001'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_bengji3_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[61]>=5.00))then
return false
endif
return true
endfunction
function Trig_W_bengji3_Actions takes nothing returns nothing
if(Trig_W_bengji3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
call SetUnitPositionLoc(udg_Unit_GS[3],PolarProjectionBJ(GetUnitLoc(udg_Unit_GS[3]),100.00,GetUnitFacing(udg_Unit_GS[3])))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_GS[3]),"war3mapImported\\T_earthsmash.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_GS[3]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_W_bengji3_Func001Func008001003)),function Trig_W_bengji3_Func001Func008A)
set udg_All_unit_shu[61]=(udg_All_unit_shu[61]+1)
endif
endfunction
function InitTrig_W_bengji3 takes nothing returns nothing
set gg_trg_W_bengji3=CreateTrigger()
call DisableTrigger(gg_trg_W_bengji3)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_bengji3,0.20)
call TriggerAddAction(gg_trg_W_bengji3,function Trig_W_bengji3_Actions)
endfunction
function Trig_E_guaili_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Acri'))then
return false
endif
return true
endfunction
function Trig_E_guaili_Func003C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_GS[1],'oslo'))==true))then
return false
endif
return true
endfunction
function Trig_E_guaili_Actions takes nothing returns nothing
set udg_Unit_GS[1]=GetTriggerUnit()
set udg_Unit_GS[2]=GetSpellTargetUnit()
if(Trig_E_guaili_Func003C())then
call UnitDamageTargetBJ(udg_Unit_GS[1],udg_Unit_GS[2],(120.00*I2R(GetUnitAbilityLevelSwapped('Acri',udg_Unit_GS[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
else
call UnitDamageTargetBJ(udg_Unit_GS[1],udg_Unit_GS[2],(80.00*I2R(GetUnitAbilityLevelSwapped('Acri',udg_Unit_GS[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endif
call EnableTrigger(gg_trg_E_guaili2)
call TriggerSleepAction(0.40)
call DisableTrigger(gg_trg_E_guaili2)
call CreateTextTagUnitBJ((I2S(R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_GS[1]),GetUnitLoc(udg_Unit_GS[2]))))+"码!"),udg_Unit_GS[1],0,9.50,100,100,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
endfunction
function InitTrig_E_guaili takes nothing returns nothing
set gg_trg_E_guaili=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_guaili,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_guaili,Condition(function Trig_E_guaili_Conditions))
call TriggerAddAction(gg_trg_E_guaili,function Trig_E_guaili_Actions)
endfunction
function Trig_E_guaili2_Actions takes nothing returns nothing
call SetUnitPositionLocFacingBJ(udg_Unit_GS[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_GS[2]),(I2R(GetHeroStr(udg_Unit_GS[1],true))/5.00),AngleBetweenPoints(GetUnitLoc(udg_Unit_GS[1]),GetUnitLoc(udg_Unit_GS[2]))),GetUnitFacing(udg_Unit_GS[2]))
endfunction
function InitTrig_E_guaili2 takes nothing returns nothing
set gg_trg_E_guaili2=CreateTrigger()
call DisableTrigger(gg_trg_E_guaili2)
call TriggerRegisterTimerEventPeriodic(gg_trg_E_guaili2,0.02)
call TriggerAddAction(gg_trg_E_guaili2,function Trig_E_guaili2_Actions)
endfunction
function Trig_R_tongtianjiao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AHbz'))then
return false
endif
return true
endfunction
function Trig_R_tongtianjiao_Func018C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_GS[1],'oslo'))==true))then
return false
endif
return true
endfunction
function Trig_R_tongtianjiao_Func020001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_tongtianjiao_Func020001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_GS[1]))==true)
endfunction
function Trig_R_tongtianjiao_Func020001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_GS[1]))==true))
endfunction
function Trig_R_tongtianjiao_Func020A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_GS[1],GetEnumUnit(),(12.00*I2R(GetHeroStr(udg_Unit_GS[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_R_tongtianjiao_Actions takes nothing returns nothing
set udg_Unit_GS[1]=GetTriggerUnit()
set udg_All_unit_Dian[2]=GetSpellTargetLoc()
call TriggerSleepAction(0.10)
call EnableTrigger(gg_trg_R_tongtianjiao2)
call PauseUnit(udg_Unit_GS[1],true)
call SetUnitAnimation(udg_Unit_GS[1],"spell channel")
call UnitAddAbility(udg_Unit_GS[1],'Amrf')
call UnitAddAbility(udg_Unit_GS[1],'A02Z')
call SetUnitFlyHeight(udg_Unit_GS[1],DistanceBetweenPoints(GetUnitLoc(udg_Unit_GS[1]),udg_All_unit_Dian[2]),1500.00)
call TriggerSleepAction(0.15)
call SetUnitFlyHeight(udg_Unit_GS[1],0.00,2000.00)
call TriggerSleepAction(0.10)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_GS[1]),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call TerrainDeformationRippleBJ(0.50,false,GetUnitLoc(udg_Unit_GS[1]),400.00,400.00,90.00,0.10,60.00)
call CreateNUnitsAtLoc(1,'njks',GetTriggerPlayer(),GetUnitLoc(udg_Unit_GS[1]),GetUnitFacing(udg_Unit_GS[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.50)
if(Trig_R_tongtianjiao_Func018C())then
call CreateNUnitsAtLoc(1,'o002',GetTriggerPlayer(),GetUnitLoc(udg_Unit_GS[1]),GetUnitFacing(udg_Unit_GS[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call SetUnitScale(GetLastCreatedUnit(),2.00,2.00,2.00)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
else
endif
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_GS[1]),Condition(function Trig_R_tongtianjiao_Func020001003)),function Trig_R_tongtianjiao_Func020A)
call DisableTrigger(gg_trg_R_tongtianjiao2)
call UnitRemoveAbility(udg_Unit_GS[1],'Amrf')
call RemoveLocation(udg_All_unit_Dian[2])
call TriggerSleepAction(0.20)
call PauseUnit(udg_Unit_GS[1],false)
call UnitRemoveAbility(udg_Unit_GS[1],'A02Z')
endfunction
function InitTrig_R_tongtianjiao takes nothing returns nothing
set gg_trg_R_tongtianjiao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_tongtianjiao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_tongtianjiao,Condition(function Trig_R_tongtianjiao_Conditions))
call TriggerAddAction(gg_trg_R_tongtianjiao,function Trig_R_tongtianjiao_Actions)
endfunction
function Trig_R_tongtianjiao2_Func001C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_GS[1],GetUnitsInRangeOfLocAll(50.00,udg_All_unit_Dian[2]))==true))then
return false
endif
return true
endfunction
function Trig_R_tongtianjiao2_Actions takes nothing returns nothing
if(Trig_R_tongtianjiao2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
call SetUnitPositionLocFacingBJ(udg_Unit_GS[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_GS[1]),20.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_GS[1]),udg_All_unit_Dian[2])),AngleBetweenPoints(GetUnitLoc(udg_Unit_GS[1]),udg_All_unit_Dian[2]))
endif
endfunction
function InitTrig_R_tongtianjiao2 takes nothing returns nothing
set gg_trg_R_tongtianjiao2=CreateTrigger()
call DisableTrigger(gg_trg_R_tongtianjiao2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_tongtianjiao2,0.02)
call TriggerAddAction(gg_trg_R_tongtianjiao2,function Trig_R_tongtianjiao2_Actions)
endfunction
function Trig_D_yinfengyin_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03F'))then
return false
endif
return true
endfunction
function Trig_D_yinfengyin_Actions takes nothing returns nothing
set udg_Unit_GS[1]=GetTriggerUnit()
call TriggerSleepAction(10.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'e000',Player(PLAYER_NEUTRAL_AGGRESSIVE),GetUnitLoc(udg_Unit_GS[1]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Aprg',3)
call IssueTargetOrderById(GetLastCreatedUnit(),852111,udg_Unit_GS[1])
call TriggerSleepAction(0.50)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call CreateNUnitsAtLoc(1,'e000',Player(PLAYER_NEUTRAL_AGGRESSIVE),GetUnitLoc(udg_Unit_GS[1]),bj_UNIT_FACING)
call IssueTargetOrderById(GetLastCreatedUnit(),852189,udg_Unit_GS[1])
endfunction
function InitTrig_D_yinfengyin takes nothing returns nothing
set gg_trg_D_yinfengyin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_yinfengyin,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_yinfengyin,Condition(function Trig_D_yinfengyin_Conditions))
call TriggerAddAction(gg_trg_D_yinfengyin,function Trig_D_yinfengyin_Actions)
endfunction
function Trig_Q_xuanf_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACr1'))then
return false
endif
return true
endfunction
function Trig_Q_xuanf_Func003C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Hpb2'))then
return false
endif
return true
endfunction
function Trig_Q_xuanf_Actions takes nothing returns nothing
set udg_Unit_B[1]=GetTriggerUnit()
set udg_All_unit_shu[47]=0.00
if(Trig_Q_xuanf_Func003C())then
call EnableTrigger(gg_trg_Q_xuanf2)
else
call EnableTrigger(gg_trg_Q_xuanf3)
endif
endfunction
function InitTrig_Q_xuanf takes nothing returns nothing
set gg_trg_Q_xuanf=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_xuanf,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_xuanf,Condition(function Trig_Q_xuanf_Conditions))
call TriggerAddAction(gg_trg_Q_xuanf,function Trig_Q_xuanf_Actions)
endfunction
function Trig_Q_xuanf2_Func001Func008001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_xuanf2_Func001Func008001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_xuanf2_Func001Func008001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_xuanf2_Func001Func008001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true)
endfunction
function Trig_Q_xuanf2_Func001Func008001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true))
endfunction
function Trig_Q_xuanf2_Func001Func008A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_B[1],GetEnumUnit(),20.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_xuanf2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[47]>=(I2R(GetUnitAbilityLevel(udg_Unit_B[1],'ACr1'))*5.00)))then
return false
endif
return true
endfunction
function Trig_Q_xuanf2_Actions takes nothing returns nothing
if(Trig_Q_xuanf2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),GetRandomReal(0,100.00),GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,'nef4',GetOwningPlayer(udg_Unit_B[1]),udg_ALL_PointPX,GetRandomDirectionDeg())
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.50)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(udg_Unit_B[1]),Condition(function Trig_Q_xuanf2_Func001Func008001003)),function Trig_Q_xuanf2_Func001Func008A)
set udg_All_unit_shu[47]=(udg_All_unit_shu[47]+1)
endif
endfunction
function InitTrig_Q_xuanf2 takes nothing returns nothing
set gg_trg_Q_xuanf2=CreateTrigger()
call DisableTrigger(gg_trg_Q_xuanf2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_xuanf2,0.07)
call TriggerAddAction(gg_trg_Q_xuanf2,function Trig_Q_xuanf2_Actions)
endfunction
function Trig_Q_xuanf3_Func001Func009001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_xuanf3_Func001Func009001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_xuanf3_Func001Func009001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_xuanf3_Func001Func009001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true)
endfunction
function Trig_Q_xuanf3_Func001Func009001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true))
endfunction
function Trig_Q_xuanf3_Func001Func009A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_B[1],GetEnumUnit(),20.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_Q_xuanf3_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[47]>=(I2R(GetUnitAbilityLevel(udg_Unit_B[1],'ACr1'))*5.00)))then
return false
endif
return true
endfunction
function Trig_Q_xuanf3_Actions takes nothing returns nothing
if(Trig_Q_xuanf3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),GetRandomReal(40.00,110.00),GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,'nef4',GetOwningPlayer(udg_Unit_B[1]),udg_ALL_PointPX,GetRandomDirectionDeg())
call SetUnitScale(GetLastCreatedUnit(),1.80,1.80,1.80)
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.50)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_B[1]),Condition(function Trig_Q_xuanf3_Func001Func009001003)),function Trig_Q_xuanf3_Func001Func009A)
set udg_All_unit_shu[47]=(udg_All_unit_shu[47]+1)
endif
endfunction
function InitTrig_Q_xuanf3 takes nothing returns nothing
set gg_trg_Q_xuanf3=CreateTrigger()
call DisableTrigger(gg_trg_Q_xuanf3)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_xuanf3,0.07)
call TriggerAddAction(gg_trg_Q_xuanf3,function Trig_Q_xuanf3_Actions)
endfunction
function Trig_W_leiliredao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A035'))then
return false
endif
return true
endfunction
function Trig_W_leiliredao_Actions takes nothing returns nothing
set udg_Unit_B[1]=GetTriggerUnit()
set udg_Unit_B[2]=GetSpellTargetUnit()
call UnitAddAbility(udg_Unit_B[1],'A02Q')
call SetUnitAbilityLevel(udg_Unit_B[1],'A02Q',GetUnitAbilityLevel(udg_Unit_B[1],'A036'))
call TriggerSleepAction(0.10)
call PauseUnitBJ(true,udg_Unit_B[1])
call SetUnitPathing(udg_Unit_B[1],false)
call SetUnitTimeScalePercent(udg_Unit_B[1],230.00)
call SetUnitAnimation(udg_Unit_B[1],"attack")
call EnableTrigger(gg_trg_W_leiliredao2)
call TriggerSleepAction(0.05)
call SetUnitTimeScalePercent(udg_Unit_B[1],10.00)
endfunction
function InitTrig_W_leiliredao takes nothing returns nothing
set gg_trg_W_leiliredao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_leiliredao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_leiliredao,Condition(function Trig_W_leiliredao_Conditions))
call TriggerAddAction(gg_trg_W_leiliredao,function Trig_W_leiliredao_Actions)
endfunction
function Trig_W_leiliredao2_Func001Func002C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_B[2])==true))then
return true
endif
if((IsUnitInGroup(udg_Unit_B[1],GetUnitsInRangeOfLocAll(100.00,GetUnitLoc(udg_Unit_B[2])))==true))then
return true
endif
if((R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_B[1]),GetUnitLoc(udg_Unit_B[2])))>1400))then
return true
endif
return false
endfunction
function Trig_W_leiliredao2_Func001Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_leiliredao2_Func001Func006001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true)
endfunction
function Trig_W_leiliredao2_Func001Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true))
endfunction
function Trig_W_leiliredao2_Func001Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_B[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_STR,udg_Unit_B[1],true))*I2R(GetUnitAbilityLevelSwapped('A035',udg_Unit_B[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_leiliredao2_Func001C takes nothing returns boolean
if(not Trig_W_leiliredao2_Func001Func002C())then
return false
endif
return true
endfunction
function Trig_W_leiliredao2_Actions takes nothing returns nothing
if(Trig_W_leiliredao2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'o002',GetOwningPlayer(udg_Unit_B[1]),GetUnitLoc(udg_Unit_B[2]),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_B[2]),Condition(function Trig_W_leiliredao2_Func001Func006001003)),function Trig_W_leiliredao2_Func001Func006A)
call TriggerSleepAction(0.10)
call SetUnitTimeScalePercent(udg_Unit_B[1],100.00)
call SetUnitPathing(udg_Unit_B[1],true)
call PauseUnitBJ(false,udg_Unit_B[1])
call TriggerSleepAction(3.00)
call UnitRemoveAbility(udg_Unit_B[1],'A02Q')
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),27.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_B[1]),GetUnitLoc(udg_Unit_B[2])))
call SetUnitPositionLocFacingLocBJ(udg_Unit_B[1],udg_ALL_PointPX,GetUnitLoc(udg_Unit_B[2]))
call RemoveLocation(udg_ALL_PointPX)
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),50.00,(GetUnitFacing(udg_Unit_B[1])-90.00))
call AddSpecialEffectLocBJ(udg_ALL_PointPX,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call RemoveLocation(udg_ALL_PointPX)
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function InitTrig_W_leiliredao2 takes nothing returns nothing
set gg_trg_W_leiliredao2=CreateTrigger()
call DisableTrigger(gg_trg_W_leiliredao2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_leiliredao2,0.02)
call TriggerAddAction(gg_trg_W_leiliredao2,function Trig_W_leiliredao2_Actions)
endfunction
function Trig_W_leiliredao3_Conditions takes nothing returns boolean
if(not(GetLearnedSkillBJ()=='A036'))then
return false
endif
return true
endfunction
function Trig_W_leiliredao3_Actions takes nothing returns nothing
call SetPlayerAbilityAvailable(GetTriggerPlayer(),'A035',true)
call EnableTrigger(gg_trg_R_weishouhua)
call DisableTrigger(GetTriggeringTrigger())
endfunction
function InitTrig_W_leiliredao3 takes nothing returns nothing
set gg_trg_W_leiliredao3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_leiliredao3,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_W_leiliredao3,Condition(function Trig_W_leiliredao3_Conditions))
call TriggerAddAction(gg_trg_W_leiliredao3,function Trig_W_leiliredao3_Actions)
endfunction
function Trig_R_weishouhua_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEvi'))then
return false
endif
return true
endfunction
function Trig_R_weishouhua_Func004C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Ocb2'))then
return false
endif
return true
endfunction
function Trig_R_weishouhua_Actions takes nothing returns nothing
set udg_Unit_B[1]=GetTriggerUnit()
call SetUnitInvulnerable(udg_Unit_B[1],true)
if(Trig_R_weishouhua_Func004C())then
call SetUnitAbilityLevel(GetTriggerUnit(),'A035',GetUnitAbilityLevel(GetTriggerUnit(),'A036'))
else
endif
call TriggerSleepAction(0.10)
call SetUnitInvulnerable(udg_Unit_B[1],false)
endfunction
function InitTrig_R_weishouhua takes nothing returns nothing
set gg_trg_R_weishouhua=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_weishouhua,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(gg_trg_R_weishouhua,Condition(function Trig_R_weishouhua_Conditions))
call TriggerAddAction(gg_trg_R_weishouhua,function Trig_R_weishouhua_Actions)
endfunction
function Trig_D_xugoupao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANfs'))then
return false
endif
return true
endfunction
function Trig_D_xugoupao_Actions takes nothing returns nothing
set udg_Unit_B[1]=GetTriggerUnit()
set udg_All_unit_shu[45]=2.00
set udg_All_unit_shu[46]=0.00
set udg_All_unit_shu[48]=255.00
call EnableTrigger(gg_trg_D_xugoupao3)
call CreateNUnitsAtLocFacingLocBJ(1,'nefm',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),50.00,GetUnitFacing(udg_Unit_B[1])),GetSpellTargetLoc())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.30)
call SetUnitTimeScale(GetLastCreatedUnit(),0.40)
call CreateNUnitsAtLocFacingLocBJ(1,'nef0',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),50.00,GetUnitFacing(udg_Unit_B[1])),GetSpellTargetLoc())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.30)
call CreateNUnitsAtLocFacingLocBJ(1,'nhea',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),50.00,GetUnitFacing(udg_Unit_B[1])),GetSpellTargetLoc())
call SetUnitTimeScale(GetLastCreatedUnit(),0.75)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.40)
call PauseUnit(udg_Unit_B[1],true)
call SetUnitAnimation(udg_Unit_B[1],"stand ready")
call TriggerSleepAction(1.35)
call SetUnitTimeScale(udg_Unit_B[1],3.00)
call SetUnitAnimation(udg_Unit_B[1],"attack")
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_B[1]),35.00)
call CreateNUnitsAtLoc(1,'nef2',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),70.00,(GetUnitFacing(udg_Unit_B[1])+180.00)),GetUnitFacing(udg_Unit_B[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.80)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nef3',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),70.00,(GetUnitFacing(udg_Unit_B[1])+180.00)),GetUnitFacing(udg_Unit_B[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call GroupAddUnit(udg_All_unit_tm[33],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nef1',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),200.00,(GetUnitFacing(udg_Unit_B[1])+180.00)),GetUnitFacing(udg_Unit_B[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.50)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=13
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_All_unit_shu[45]=(0.25+udg_All_unit_shu[45])
call CreateNUnitsAtLoc(1,'emtg',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),(150.00*I2R(GetForLoopIndexA())),GetUnitFacing(udg_Unit_B[1])),GetUnitFacing(udg_Unit_B[1]))
call SetUnitTimeScale(GetLastCreatedUnit(),0.80)
call SetUnitScale(GetLastCreatedUnit(),udg_All_unit_shu[45],udg_All_unit_shu[45],udg_All_unit_shu[45])
call SetUnitVertexColorBJ(GetLastCreatedUnit(),100,0.00,0.00,0)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.50)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_D_xugoupao2)
call TriggerSleepAction(0.20)
call SetUnitVertexColor(udg_Unit_B[1],255,255,255,255)
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_B[1]))
endfunction
function InitTrig_D_xugoupao takes nothing returns nothing
set gg_trg_D_xugoupao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_xugoupao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_xugoupao,Condition(function Trig_D_xugoupao_Conditions))
call TriggerAddAction(gg_trg_D_xugoupao,function Trig_D_xugoupao_Actions)
endfunction
function Trig_D_xugoupao2_Func001Func006Func005A takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),60.00,GetUnitFacing(GetEnumUnit()))
call SetUnitPositionLocFacingBJ(GetEnumUnit(),udg_ALL_PointPX,GetUnitFacing(GetEnumUnit()))
call RemoveLocation(udg_ALL_PointPX)
endfunction
function Trig_D_xugoupao2_Func001Func006Func007001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_xugoupao2_Func001Func006Func007001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[32])!=true)
endfunction
function Trig_D_xugoupao2_Func001Func006Func007001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true)
endfunction
function Trig_D_xugoupao2_Func001Func006Func007001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[32])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true))
endfunction
function Trig_D_xugoupao2_Func001Func006Func007001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[32])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_B[1]))==true))))
endfunction
function Trig_D_xugoupao2_Func001Func006Func007A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_B[1],GetEnumUnit(),(16.00*I2R(GetHeroStr(udg_Unit_B[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call GroupAddUnit(udg_All_unit_tm[32],GetEnumUnit())
endfunction
function Trig_D_xugoupao2_Func001Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[46]>=16.00))then
return false
endif
return true
endfunction
function Trig_D_xugoupao2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_B[1])==true))then
return false
endif
return true
endfunction
function Trig_D_xugoupao2_Actions takes nothing returns nothing
if(Trig_D_xugoupao2_Func001C())then
if(Trig_D_xugoupao2_Func001Func006C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitTimeScale(udg_Unit_B[1],1.00)
call PauseUnit(udg_Unit_B[1],false)
call GroupClear(udg_All_unit_tm[32])
call GroupClear(udg_All_unit_tm[33])
else
set udg_All_unit_shu[46]=(udg_All_unit_shu[46]+1)
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_B[1]),10.00,(GetUnitFacing(udg_Unit_B[1])+180.00))
call SetUnitPositionLoc(udg_Unit_B[1],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call ForGroupBJ(udg_All_unit_tm[33],function Trig_D_xugoupao2_Func001Func006Func005A)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(FirstOfGroup(udg_All_unit_tm[33])),Condition(function Trig_D_xugoupao2_Func001Func006Func007001003)),function Trig_D_xugoupao2_Func001Func006Func007A)
call RemoveLocation(GetUnitLoc(udg_Unit_B[3]))
endif
else
call DisableTrigger(GetTriggeringTrigger())
call SetUnitTimeScale(udg_Unit_B[1],1.00)
call PauseUnit(udg_Unit_B[1],false)
call GroupClear(udg_All_unit_tm[32])
call GroupClear(udg_All_unit_tm[33])
endif
endfunction
function InitTrig_D_xugoupao2 takes nothing returns nothing
set gg_trg_D_xugoupao2=CreateTrigger()
call DisableTrigger(gg_trg_D_xugoupao2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_xugoupao2,0.04)
call TriggerAddAction(gg_trg_D_xugoupao2,function Trig_D_xugoupao2_Actions)
endfunction
function Trig_D_xugoupao3_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[48]<=20.00))then
return false
endif
return true
endfunction
function Trig_D_xugoupao3_Actions takes nothing returns nothing
if(Trig_D_xugoupao3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
else
call SetUnitVertexColor(udg_Unit_B[1],255,R2I(udg_All_unit_shu[48]),R2I(udg_All_unit_shu[48]),255)
set udg_All_unit_shu[48]=(udg_All_unit_shu[48]-20.00)
endif
endfunction
function InitTrig_D_xugoupao3 takes nothing returns nothing
set gg_trg_D_xugoupao3=CreateTrigger()
call DisableTrigger(gg_trg_D_xugoupao3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_xugoupao3,0.10)
call TriggerAddAction(gg_trg_D_xugoupao3,function Trig_D_xugoupao3_Actions)
endfunction
function Trig_D_xugoupao4_Conditions takes nothing returns boolean
if(not(GetLearnedSkillBJ()=='A038'))then
return false
endif
return true
endfunction
function Trig_D_xugoupao4_Actions takes nothing returns nothing
call SetPlayerAbilityAvailable(GetTriggerPlayer(),'ANfs',true)
call DisableTrigger(GetTriggeringTrigger())
endfunction
function InitTrig_D_xugoupao4 takes nothing returns nothing
set gg_trg_D_xugoupao4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_xugoupao4,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_D_xugoupao4,Condition(function Trig_D_xugoupao4_Conditions))
call TriggerAddAction(gg_trg_D_xugoupao4,function Trig_D_xugoupao4_Actions)
endfunction
function Trig_Q_zhanzhanwu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACbz'))then
return false
endif
return true
endfunction
function Trig_Q_zhanzhanwu_Actions takes nothing returns nothing
set udg_Unit_SJ[1]=GetTriggerUnit()
set udg_All_unit_Dian[8]=GetSpellTargetLoc()
set udg_All_unit_shu[17]=0.00
call CreateNUnitsAtLoc(1,'o000',GetTriggerPlayer(),udg_All_unit_Dian[8],bj_UNIT_FACING)
call SetUnitScale(GetLastCreatedUnit(),1.50,1.50,1.50)
call SetUnitVertexColor(GetLastCreatedUnit(),255,255,255,150)
set udg_Unit_SJ[2]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_Q_zhanzhanwu2)
endfunction
function InitTrig_Q_zhanzhanwu takes nothing returns nothing
set gg_trg_Q_zhanzhanwu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_zhanzhanwu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_zhanzhanwu,Condition(function Trig_Q_zhanzhanwu_Conditions))
call TriggerAddAction(gg_trg_Q_zhanzhanwu,function Trig_Q_zhanzhanwu_Actions)
endfunction
function Trig_Q_zhanzhanwu2_Func001Func003001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_Q_zhanzhanwu2_Func001Func003001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_zhanzhanwu2_Func001Func003001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_zhanzhanwu2_Func001Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true)
endfunction
function Trig_Q_zhanzhanwu2_Func001Func003001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))
endfunction
function Trig_Q_zhanzhanwu2_Func001Func003A takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),8.00,AngleBetweenPoints(GetUnitLoc(GetEnumUnit()),udg_All_unit_Dian[8]))
call UnitDamageTargetBJ(udg_Unit_SJ[1],GetEnumUnit(),I2R(GetHeroAgi(udg_Unit_SJ[1],true)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endfunction
function Trig_Q_zhanzhanwu2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[17]>=I2R(GetUnitAbilityLevel(udg_Unit_SJ[1],'ACbz'))))then
return false
endif
return true
endfunction
function Trig_Q_zhanzhanwu2_Actions takes nothing returns nothing
if(Trig_Q_zhanzhanwu2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call UnitApplyTimedLife(udg_Unit_SJ[2],'BHwe',0.10)
call RemoveLocation(udg_All_unit_Dian[8])
else
call SetUnitScale(udg_Unit_SJ[2],(1.50+(0.30*udg_All_unit_shu[17])),(1.50+(0.30*udg_All_unit_shu[17])),(1.50+(0.30*udg_All_unit_shu[17])))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(160.00,GetUnitLoc(udg_Unit_SJ[2]),Condition(function Trig_Q_zhanzhanwu2_Func001Func003001003)),function Trig_Q_zhanzhanwu2_Func001Func003A)
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[2]))
set udg_All_unit_shu[17]=(udg_All_unit_shu[17]+1)
endif
endfunction
function InitTrig_Q_zhanzhanwu2 takes nothing returns nothing
set gg_trg_Q_zhanzhanwu2=CreateTrigger()
call DisableTrigger(gg_trg_Q_zhanzhanwu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_zhanzhanwu2,0.04)
call TriggerAddAction(gg_trg_Q_zhanzhanwu2,function Trig_Q_zhanzhanwu2_Actions)
endfunction
function Trig_W_lianyouzhishu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACsh'))then
return false
endif
return true
endfunction
function Trig_W_lianyouzhishu_Actions takes nothing returns nothing
set udg_Unit_SJ[1]=GetTriggerUnit()
call CreateNUnitsAtLocFacingLocBJ(1,'odoc',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.80)
set udg_Unit_SJ[3]=GetLastCreatedUnit()
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call EnableTrigger(gg_trg_W_lianyouzhishu2)
endfunction
function InitTrig_W_lianyouzhishu takes nothing returns nothing
set gg_trg_W_lianyouzhishu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_lianyouzhishu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_lianyouzhishu,Condition(function Trig_W_lianyouzhishu_Conditions))
call TriggerAddAction(gg_trg_W_lianyouzhishu,function Trig_W_lianyouzhishu_Actions)
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func003001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[9])!=true)
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func003001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true)
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func003001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[9])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[9])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))))
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_SJ[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(udg_Unit_SJ[1],'ACsh'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call GroupAddUnit(udg_All_unit_tm[9],GetEnumUnit())
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func006001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[9])!=true)
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func006001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true)
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func006001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[9])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[9])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))))
endfunction
function Trig_W_lianyouzhishu2_Func001Func004Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_SJ[1],GetEnumUnit(),(75.00*I2R(GetUnitAbilityLevel(udg_Unit_SJ[1],'ACsh'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call GroupAddUnit(udg_All_unit_tm[9],GetEnumUnit())
endfunction
function Trig_W_lianyouzhishu2_Func001Func004C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_SJ[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_W_lianyouzhishu2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_SJ[3])==true))then
return false
endif
return true
endfunction
function Trig_W_lianyouzhishu2_Actions takes nothing returns nothing
if(Trig_W_lianyouzhishu2_Func001C())then
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_SJ[3]),55.00,GetUnitFacing(udg_Unit_SJ[3]))
call SetUnitPositionLocFacingBJ(udg_Unit_SJ[3],udg_ALL_PointPX,GetUnitFacing(udg_Unit_SJ[3]))
call RemoveLocation(udg_ALL_PointPX)
if(Trig_W_lianyouzhishu2_Func001Func004C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(udg_Unit_SJ[3]),Condition(function Trig_W_lianyouzhishu2_Func001Func004Func006001003)),function Trig_W_lianyouzhishu2_Func001Func004Func006A)
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[3]))
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(udg_Unit_SJ[3]),Condition(function Trig_W_lianyouzhishu2_Func001Func004Func003001003)),function Trig_W_lianyouzhishu2_Func001Func004Func003A)
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[3]))
endif
else
call DisableTrigger(GetTriggeringTrigger())
call GroupClear(udg_All_unit_tm[9])
endif
endfunction
function InitTrig_W_lianyouzhishu2 takes nothing returns nothing
set gg_trg_W_lianyouzhishu2=CreateTrigger()
call DisableTrigger(gg_trg_W_lianyouzhishu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_lianyouzhishu2,0.04)
call TriggerAddAction(gg_trg_W_lianyouzhishu2,function Trig_W_lianyouzhishu2_Actions)
endfunction
function Trig_E_jufengzhen_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANsg'))then
return false
endif
return true
endfunction
function Trig_E_jufengzhen_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'ntor',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'Atsp',GetUnitAbilityLevel(GetTriggerUnit(),'ANsg'))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
endfunction
function InitTrig_E_jufengzhen takes nothing returns nothing
set gg_trg_E_jufengzhen=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_jufengzhen,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_jufengzhen,Condition(function Trig_E_jufengzhen_Conditions))
call TriggerAddAction(gg_trg_E_jufengzhen,function Trig_E_jufengzhen_Actions)
endfunction
function Trig_R_haofengbaobi_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACca'))then
return false
endif
return true
endfunction
function Trig_R_haofengbaobi_Func009Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_haofengbaobi_Func009Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true)
endfunction
function Trig_R_haofengbaobi_Func009Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))
endfunction
function Trig_R_haofengbaobi_Func009Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_SJ[1],GetEnumUnit(),1500.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_R_haofengbaobi_Func009C takes nothing returns boolean
if(not(GetRandomInt(1,2)==1))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_SJ[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_R_haofengbaobi_Actions takes nothing returns nothing
set udg_Unit_SJ[1]=GetTriggerUnit()
call CreateNUnitsAtLoc(1,'odoc',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),100.00,AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())),AngleBetweenPoints(GetUnitLoc(udg_Unit_SJ[1]),GetSpellTargetLoc()))
call SetUnitVertexColorBJ(GetLastCreatedUnit(),0.00,0.00,0.00,0)
call SetUnitScale(GetLastCreatedUnit(),2.30,2.30,2.30)
set udg_Unit_SJ[5]=GetLastCreatedUnit()
call RemoveLocation(PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),100.00,AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())))
call EnableTrigger(gg_trg_R_haofengbaobi2)
call TriggerSleepAction(3.00)
if(Trig_R_haofengbaobi_Func009C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_All_unit_Dian[0]=GetUnitLoc(udg_Unit_SJ[5])
call CreateNUnitsAtLoc(1,'hsor',GetTriggerPlayer(),udg_All_unit_Dian[0],GetUnitFacing(udg_Unit_SJ[1]))
call SetUnitScale(GetLastCreatedUnit(),3.00,3.00,3.00)
call KillUnit(GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'hmtt',GetTriggerPlayer(),udg_All_unit_Dian[0],GetUnitFacing(udg_Unit_SJ[1]))
call SetUnitScale(GetLastCreatedUnit(),2.00,2.00,2.00)
call KillUnit(GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'o007',GetTriggerPlayer(),udg_All_unit_Dian[0],GetUnitFacing(udg_Unit_SJ[1]))
call SetUnitTimeScale(GetLastCreatedUnit(),1.50)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call RemoveLocation(udg_All_unit_Dian[0])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_SJ[5]),Condition(function Trig_R_haofengbaobi_Func009Func003001003)),function Trig_R_haofengbaobi_Func009Func003A)
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[5]))
else
endif
call KillUnit(udg_Unit_SJ[5])
call DisableTrigger(gg_trg_R_haofengbaobi2)
endfunction
function InitTrig_R_haofengbaobi takes nothing returns nothing
set gg_trg_R_haofengbaobi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_haofengbaobi,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_haofengbaobi,Condition(function Trig_R_haofengbaobi_Conditions))
call TriggerAddAction(gg_trg_R_haofengbaobi,function Trig_R_haofengbaobi_Actions)
endfunction
function Trig_R_haofengbaobi2_Func007Func003001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_R_haofengbaobi2_Func007Func003001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_haofengbaobi2_Func007Func003001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_R_haofengbaobi2_Func007Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true)
endfunction
function Trig_R_haofengbaobi2_Func007Func003001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))
endfunction
function Trig_R_haofengbaobi2_Func007Func003A takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),3.00,AngleBetweenPoints(GetUnitLoc(GetEnumUnit()),GetUnitLoc(udg_Unit_SJ[5])))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call UnitDamageTargetBJ(udg_Unit_SJ[1],GetEnumUnit(),40.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endfunction
function Trig_R_haofengbaobi2_Func007Func004001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_R_haofengbaobi2_Func007Func004001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_haofengbaobi2_Func007Func004001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_R_haofengbaobi2_Func007Func004001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true)
endfunction
function Trig_R_haofengbaobi2_Func007Func004001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))
endfunction
function Trig_R_haofengbaobi2_Func007Func004A takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),9.00,AngleBetweenPoints(GetUnitLoc(GetEnumUnit()),GetUnitLoc(udg_Unit_SJ[5])))
call UnitDamageTargetBJ(udg_Unit_SJ[1],GetEnumUnit(),40.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endfunction
function Trig_R_haofengbaobi2_Func007C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_SJ[1],'oven'))==true))then
return false
endif
return true
endfunction
function Trig_R_haofengbaobi2_Actions takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_SJ[5]),9.00,GetUnitFacing(udg_Unit_SJ[5]))
call SetUnitPositionLoc(udg_Unit_SJ[5],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_SJ[5]),"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[5]))
if(Trig_R_haofengbaobi2_Func007C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(udg_Unit_SJ[5]),Condition(function Trig_R_haofengbaobi2_Func007Func004001003)),function Trig_R_haofengbaobi2_Func007Func004A)
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[5]))
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(180.00,GetUnitLoc(udg_Unit_SJ[5]),Condition(function Trig_R_haofengbaobi2_Func007Func003001003)),function Trig_R_haofengbaobi2_Func007Func003A)
endif
endfunction
function InitTrig_R_haofengbaobi2 takes nothing returns nothing
set gg_trg_R_haofengbaobi2=CreateTrigger()
call DisableTrigger(gg_trg_R_haofengbaobi2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_haofengbaobi2,0.04)
call TriggerAddAction(gg_trg_R_haofengbaobi2,function Trig_R_haofengbaobi2_Actions)
endfunction
function Trig_D_shanwu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACs9'))then
return false
endif
return true
endfunction
function Trig_D_shanwu_Actions takes nothing returns nothing
set udg_Unit_SJ[1]=GetTriggerUnit()
set udg_All_unit_shu[18]=0.00
call TriggerSleepAction(0.10)
call PauseUnitBJ(true,udg_Unit_SJ[1])
call SetUnitAnimation(udg_Unit_SJ[1],"spell dissipate")
call AddSpecialEffectTargetUnitBJ("right hand",udg_Unit_SJ[1],"war3mapImported\\T_xuli.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(0.50)
call CreateNUnitsAtLoc(1,'nanc',GetTriggerPlayer(),GetUnitLoc(udg_Unit_SJ[1]),GetUnitFacing(udg_Unit_SJ[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[1]))
call CreateNUnitsAtLoc(1,'ospw',GetTriggerPlayer(),GetUnitLoc(udg_Unit_SJ[1]),GetUnitFacing(udg_Unit_SJ[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
set udg_Unit_SJ[6]=GetLastCreatedUnit()
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[1]))
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),GetUnitLoc(udg_Unit_SJ[1]),GetUnitFacing(udg_Unit_SJ[1]))
set udg_Unit_SJ[7]=GetLastCreatedUnit()
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[1]))
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_SJ[1]),40.00)
call EnableTrigger(gg_trg_D_shanwu2)
endfunction
function InitTrig_D_shanwu takes nothing returns nothing
set gg_trg_D_shanwu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_shanwu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_shanwu,Condition(function Trig_D_shanwu_Conditions))
call TriggerAddAction(gg_trg_D_shanwu,function Trig_D_shanwu_Actions)
endfunction
function Trig_D_shanwu2_Func001Func010001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_shanwu2_Func001Func010001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[10])!=true)
endfunction
function Trig_D_shanwu2_Func001Func010001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true)
endfunction
function Trig_D_shanwu2_Func001Func010001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[10])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))
endfunction
function Trig_D_shanwu2_Func001Func010001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[10])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SJ[1]))==true))))
endfunction
function Trig_D_shanwu2_Func001Func010A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_SJ[1],GetEnumUnit(),(12.00*I2R(GetHeroAgi(udg_Unit_SJ[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call GroupAddUnit(udg_All_unit_tm[10],GetEnumUnit())
endfunction
function Trig_D_shanwu2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[18]>=13.00))then
return false
endif
return true
endfunction
function Trig_D_shanwu2_Actions takes nothing returns nothing
if(Trig_D_shanwu2_Func001C())then
call DisableTrigger(gg_trg_D_shanwu2)
call PauseUnitBJ(false,udg_Unit_SJ[1])
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_SJ[1]))
call GroupClear(udg_All_unit_tm[10])
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_SJ[1]),18.00,(GetUnitFacing(udg_Unit_SJ[1])+180.00))
call SetUnitPositionLoc(udg_Unit_SJ[1],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call SetUnitScale(udg_Unit_SJ[6],(1+(0.55*udg_All_unit_shu[18])),(1+(0.55*udg_All_unit_shu[18])),(1+(0.50*udg_All_unit_shu[18])))
set udg_All_unit_shu[18]=(udg_All_unit_shu[18]+1)
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_SJ[7]),55.00,GetUnitFacing(udg_Unit_SJ[7]))
call SetUnitPositionLocFacingBJ(udg_Unit_SJ[7],udg_ALL_PointPX,GetUnitFacing(udg_Unit_SJ[7]))
call RemoveLocation(udg_ALL_PointPX)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(udg_Unit_SJ[7]),Condition(function Trig_D_shanwu2_Func001Func010001003)),function Trig_D_shanwu2_Func001Func010A)
call RemoveLocation(GetUnitLoc(udg_Unit_SJ[7]))
endif
endfunction
function InitTrig_D_shanwu2 takes nothing returns nothing
set gg_trg_D_shanwu2=CreateTrigger()
call DisableTrigger(gg_trg_D_shanwu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_shanwu2,0.04)
call TriggerAddAction(gg_trg_D_shanwu2,function Trig_D_shanwu2_Actions)
endfunction
function Trig_Q_shashiyu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACs8'))then
return false
endif
return true
endfunction
function Trig_Q_shashiyu_Func001C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00R')==true))then
return false
endif
return true
endfunction
function Trig_Q_shashiyu_Actions takes nothing returns nothing
if(Trig_Q_shashiyu_Func001C())then
call CreateTextTagUnitBJ("没有足够的沙",GetTriggerUnit(),0,9.00,100,10.00,10.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),60.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
else
set udg_Unit_WA[1]=GetTriggerUnit()
set udg_All_unit_Dian[16]=PolarProjectionBJ(GetUnitLoc(udg_Unit_WA[1]),256,GetUnitFacing(udg_Unit_WA[1]))
set udg_All_unit_shu[35]=0.00
call EnableTrigger(gg_trg_Q_shashiyu2)
endif
endfunction
function InitTrig_Q_shashiyu takes nothing returns nothing
set gg_trg_Q_shashiyu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_shashiyu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_shashiyu,Condition(function Trig_Q_shashiyu_Conditions))
call TriggerAddAction(gg_trg_Q_shashiyu,function Trig_Q_shashiyu_Actions)
endfunction
function Trig_Q_shashiyu2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[35]>=6.00))then
return false
endif
return true
endfunction
function Trig_Q_shashiyu2_Actions takes nothing returns nothing
if(Trig_Q_shashiyu2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(udg_All_unit_Dian[16])
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_WA[1]),GetRandomReal(100.00,300.00),(GetUnitFacing(udg_Unit_WA[1])+GetRandomReal(140.00,220.00)))
call CreateNUnitsAtLocFacingLocBJ(1,'e004',GetOwningPlayer(udg_Unit_WA[1]),udg_ALL_PointPX,GetUnitLoc(udg_Unit_WA[1]))
call SetUnitAbilityLevel(GetLastCreatedUnit(),'ANc1',GetUnitAbilityLevel(udg_Unit_WA[1],'ACs8'))
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852652,udg_All_unit_Dian[16])
call RemoveLocation(udg_ALL_PointPX)
set udg_All_unit_shu[35]=(udg_All_unit_shu[35]+1)
endif
endfunction
function InitTrig_Q_shashiyu2 takes nothing returns nothing
set gg_trg_Q_shashiyu2=CreateTrigger()
call DisableTrigger(gg_trg_Q_shashiyu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_shashiyu2,0.12)
call TriggerAddAction(gg_trg_Q_shashiyu2,function Trig_Q_shashiyu2_Actions)
endfunction
function Trig_W_shabaosongzang_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A02Y'))then
return false
endif
return true
endfunction
function Trig_W_shabaosongzang_Func001Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shabaosongzang_Func001Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true)
endfunction
function Trig_W_shabaosongzang_Func001Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true))
endfunction
function Trig_W_shabaosongzang_Func001Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_WA[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_WA[1],'A02Y'))*(0.80*I2R(GetHeroInt(udg_Unit_WA[1],true)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_shabaosongzang_Func001Func017001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shabaosongzang_Func001Func017001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true)
endfunction
function Trig_W_shabaosongzang_Func001Func017001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true))
endfunction
function Trig_W_shabaosongzang_Func001Func017A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_WA[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_WA[1],'A02Y'))*(0.80*I2R(GetHeroInt(udg_Unit_WA[1],true)))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endfunction
function Trig_W_shabaosongzang_Func001C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00R')==true))then
return false
endif
return true
endfunction
function Trig_W_shabaosongzang_Actions takes nothing returns nothing
if(Trig_W_shabaosongzang_Func001C())then
set udg_Unit_WA[1]=GetTriggerUnit()
set udg_Unit_WA[2]=GetSpellTargetUnit()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'hpxe',GetOwningPlayer(udg_Unit_WA[1]),GetUnitLoc(udg_Unit_WA[2]),(120.00*I2R(bj_forLoopAIndex)))
call RemoveLocation(GetUnitLoc(udg_Unit_WA[2]))
call KillUnit(GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_WA[2]),Condition(function Trig_W_shabaosongzang_Func001Func005001003)),function Trig_W_shabaosongzang_Func001Func005A)
call RemoveLocation(GetUnitLoc(udg_Unit_WA[2]))
else
set udg_Unit_WA[1]=GetTriggerUnit()
set udg_Unit_WA[2]=GetSpellTargetUnit()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_WA[1],true)
call SetUnitTimeScale(udg_Unit_WA[1],3.00)
call SetUnitAnimation(udg_Unit_WA[1],"spell one")
call TriggerSleepAction(0.20)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'otbk',GetOwningPlayer(udg_Unit_WA[1]),GetUnitLoc(udg_Unit_WA[2]),(120.00*I2R(bj_forLoopAIndex)))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call RemoveLocation(GetUnitLoc(udg_Unit_WA[2]))
call CreateNUnitsAtLoc(1,'hpxe',GetOwningPlayer(udg_Unit_WA[1]),GetUnitLoc(udg_Unit_WA[2]),(120.00*I2R(bj_forLoopAIndex)))
call KillUnit(GetLastCreatedUnit())
call RemoveLocation(GetUnitLoc(udg_Unit_WA[2]))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_WA[2]),Condition(function Trig_W_shabaosongzang_Func001Func017001003)),function Trig_W_shabaosongzang_Func001Func017A)
call RemoveLocation(GetUnitLoc(udg_Unit_WA[2]))
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_WA[1],false)
call SetUnitTimeScale(udg_Unit_WA[1],1.00)
endif
endfunction
function InitTrig_W_shabaosongzang takes nothing returns nothing
set gg_trg_W_shabaosongzang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_shabaosongzang,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_shabaosongzang,Condition(function Trig_W_shabaosongzang_Conditions))
call TriggerAddAction(gg_trg_W_shabaosongzang,function Trig_W_shabaosongzang_Actions)
endfunction
function Trig_E_shazhikaijia_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("manashieldon")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Ulic'))then
return false
endif
return true
endfunction
function Trig_E_shazhikaijia_Func003C takes nothing returns boolean
if(not(udg_All_unit_bez[3]==true))then
return false
endif
return true
endfunction
function Trig_E_shazhikaijia_Actions takes nothing returns nothing
set udg_All_unit_shu[34]=GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)
call SetUnitMoveSpeed(GetTriggerUnit(),100.00)
if(Trig_E_shazhikaijia_Func003C())then
else
set udg_All_unit_bez[3]=true
call TriggerRegisterUnitEvent(gg_trg_E_shazhikaijia3,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitLifeEvent(gg_trg_E_shazhikaijia4,GetTriggerUnit(),LESS_THAN,1.00)
endif
endfunction
function InitTrig_E_shazhikaijia takes nothing returns nothing
set gg_trg_E_shazhikaijia=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_shazhikaijia,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_E_shazhikaijia,Condition(function Trig_E_shazhikaijia_Conditions))
call TriggerAddAction(gg_trg_E_shazhikaijia,function Trig_E_shazhikaijia_Actions)
endfunction
function Trig_E_shazhikaijia2_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("manashieldoff")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Ulic'))then
return false
endif
return true
endfunction
function Trig_E_shazhikaijia2_Actions takes nothing returns nothing
call SetUnitMoveSpeed(GetTriggerUnit(),GetUnitDefaultMoveSpeed(GetTriggerUnit()))
endfunction
function InitTrig_E_shazhikaijia2 takes nothing returns nothing
set gg_trg_E_shazhikaijia2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_shazhikaijia2,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_E_shazhikaijia2,Condition(function Trig_E_shazhikaijia2_Conditions))
call TriggerAddAction(gg_trg_E_shazhikaijia2,function Trig_E_shazhikaijia2_Actions)
endfunction
function Trig_E_shazhikaijia3_Conditions takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00R')==true))then
return false
endif
return true
endfunction
function Trig_E_shazhikaijia3_Func003Func001C takes nothing returns boolean
if((udg_All_unit_shu[34]<=0.00))then
return true
endif
if((GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)<1.00))then
return true
endif
return false
endfunction
function Trig_E_shazhikaijia3_Func003C takes nothing returns boolean
if(not Trig_E_shazhikaijia3_Func003Func001C())then
return false
endif
return true
endfunction
function Trig_E_shazhikaijia3_Actions takes nothing returns nothing
set udg_All_unit_shu[34]=(udg_All_unit_shu[34]-((GetEventDamage()*0.80)/(0.85-(0.05*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'A004'))))))
if(Trig_E_shazhikaijia3_Func003C())then
call SetUnitMoveSpeed(GetTriggerUnit(),GetUnitDefaultMoveSpeed(GetTriggerUnit()))
call UnitRemoveBuffBJ('B00R',GetTriggerUnit())
call CreateTextTagUnitBJ("沙之铠甲崩溃",GetTriggerUnit(),0,9.00,100,10.00,10.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),60.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call CreateTextTagUnitBJ(I2S(R2I(udg_All_unit_shu[34])),GetTriggerUnit(),0,9.50,100,60.00,0.00,20.00)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),120.00,GetRandomDirectionDeg())
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),0.80)
endif
endfunction
function InitTrig_E_shazhikaijia3 takes nothing returns nothing
set gg_trg_E_shazhikaijia3=CreateTrigger()
call TriggerAddCondition(gg_trg_E_shazhikaijia3,Condition(function Trig_E_shazhikaijia3_Conditions))
call TriggerAddAction(gg_trg_E_shazhikaijia3,function Trig_E_shazhikaijia3_Actions)
endfunction
function Trig_E_shazhikaijia4_Actions takes nothing returns nothing
call SetUnitMoveSpeed(GetTriggerUnit(),GetUnitDefaultMoveSpeed(GetTriggerUnit()))
endfunction
function InitTrig_E_shazhikaijia4 takes nothing returns nothing
set gg_trg_E_shazhikaijia4=CreateTrigger()
call TriggerAddAction(gg_trg_E_shazhikaijia4,function Trig_E_shazhikaijia4_Actions)
endfunction
function Trig_R_shouhe_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A00S'))then
return false
endif
return true
endfunction
function Trig_R_shouhe_Func004Func001C takes nothing returns boolean
if((GetSpellTargetUnit()==null))then
return true
endif
if((UnitHasBuffBJ(GetTriggerUnit(),'B00R')==true))then
return true
endif
return false
endfunction
function Trig_R_shouhe_Func004C takes nothing returns boolean
if(not Trig_R_shouhe_Func004Func001C())then
return false
endif
return true
endfunction
function Trig_R_shouhe_Actions takes nothing returns nothing
set udg_Unit_WA[1]=GetTriggerUnit()
if(Trig_R_shouhe_Func004C())then
set udg_Unit_WA[1]=GetTriggerUnit()
set udg_All_unit_shu[36]=0.00
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),200.00,AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc()))
call CreateNUnitsAtLocFacingLocBJ(1,'ospm',GetOwningPlayer(GetTriggerUnit()),udg_ALL_PointPX,PolarProjectionBJ(GetUnitLoc(udg_Unit_WA[1]),300.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_WA[1]),GetSpellTargetLoc())))
call RemoveLocation(udg_ALL_PointPX)
set udg_Unit_WA[3]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_R_shouhe2)
call CreateTextTagUnitBJ("守鹤の矛",udg_Unit_WA[1],0,11.00,100,50.00,50.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),60.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
else
set udg_Unit_WA[4]=GetSpellTargetUnit()
set udg_All_unit_shu[36]=0.00
call CreateNUnitsAtLoc(1,'ucsB',GetOwningPlayer(udg_Unit_WA[1]),GetUnitLoc(udg_Unit_WA[4]),GetUnitFacing(GetTriggerUnit()))
call RemoveLocation(GetUnitLoc(udg_Unit_WA[4]))
call KillUnit(GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetTriggerUnit()),GetUnitLoc(udg_Unit_WA[4]),bj_UNIT_FACING)
call IssueImmediateOrderById(GetLastCreatedUnit(),852096)
call RemoveLocation(GetUnitLoc(udg_Unit_WA[4]))
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_WA[1],true)
call SetUnitTimeScale(udg_Unit_WA[1],0.40)
call SetUnitAnimation(udg_Unit_WA[1],"spell one")
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_WA[1]),50.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_WA[1]),GetUnitLoc(udg_Unit_WA[4])))
call CreateNUnitsAtLocFacingLocBJ(1,'ospm',GetOwningPlayer(udg_Unit_WA[1]),udg_ALL_PointPX,GetUnitLoc(udg_Unit_WA[4]))
call RemoveLocation(udg_ALL_PointPX)
call SetUnitFlyHeight(GetLastCreatedUnit(),300.00,140.00)
call SetUnitVertexColor(GetLastCreatedUnit(),255,255,255,0)
set udg_Unit_WA[3]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_R_shouhe3)
endif
endfunction
function InitTrig_R_shouhe takes nothing returns nothing
set gg_trg_R_shouhe=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_shouhe,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_shouhe,Condition(function Trig_R_shouhe_Conditions))
call TriggerAddAction(gg_trg_R_shouhe,function Trig_R_shouhe_Actions)
endfunction
function Trig_R_shouhe2_Func001Func007001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_shouhe2_Func001Func007001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true)
endfunction
function Trig_R_shouhe2_Func001Func007001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true))
endfunction
function Trig_R_shouhe2_Func001Func007A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_WA[1],GetEnumUnit(),(10.00*I2R(GetHeroInt(udg_Unit_WA[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_R_shouhe2_Func001Func015Func001001001003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true)
endfunction
function Trig_R_shouhe2_Func001Func015Func001001001003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_shouhe2_Func001Func015Func001001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_R_shouhe2_Func001Func015C takes nothing returns boolean
if((IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(130.00,GetUnitLoc(udg_Unit_WA[3]),Condition(function Trig_R_shouhe2_Func001Func015Func001001001003)))!=true))then
return true
endif
if((udg_All_unit_shu[36]>=25.00))then
return true
endif
return false
endfunction
function Trig_R_shouhe2_Func001C takes nothing returns boolean
if(not Trig_R_shouhe2_Func001Func015C())then
return false
endif
return true
endfunction
function Trig_R_shouhe2_Actions takes nothing returns nothing
if(Trig_R_shouhe2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call KillUnit(udg_Unit_WA[3])
call RemoveUnit(udg_Unit_WA[3])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call AddSpecialEffectLocBJ(PolarProjectionBJ(GetUnitLoc(udg_Unit_WA[3]),GetRandomReal(20.00,160.00),GetRandomDirectionDeg()),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_WA[3]))
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(280.00,GetUnitLoc(udg_Unit_WA[3]),Condition(function Trig_R_shouhe2_Func001Func007001003)),function Trig_R_shouhe2_Func001Func007A)
call RemoveLocation(GetUnitLoc(udg_Unit_WA[3]))
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_WA[3]),31.00,GetUnitFacing(udg_Unit_WA[3]))
call SetUnitPositionLoc(udg_Unit_WA[3],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_WA[3]),"Abilities\\Spells\\Other\\StrongDrink\\BrewmasterMissile.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_WA[3]))
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[36]=(udg_All_unit_shu[36]+1)
endif
endfunction
function InitTrig_R_shouhe2 takes nothing returns nothing
set gg_trg_R_shouhe2=CreateTrigger()
call DisableTrigger(gg_trg_R_shouhe2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_shouhe2,0.03)
call TriggerAddAction(gg_trg_R_shouhe2,function Trig_R_shouhe2_Actions)
endfunction
function Trig_R_shouhe3_Func001Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_WA[1])==true))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_WA[4])==true))then
return false
endif
return true
endfunction
function Trig_R_shouhe3_Func001Func008C takes nothing returns boolean
if(not(udg_All_unit_shu[36]>=240.00))then
return false
endif
return true
endfunction
function Trig_R_shouhe3_Func001C takes nothing returns boolean
if(not Trig_R_shouhe3_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_R_shouhe3_Actions takes nothing returns nothing
if(Trig_R_shouhe3_Func001C())then
if(Trig_R_shouhe3_Func001Func008C())then
call DisableTrigger(GetTriggeringTrigger())
set udg_All_unit_shu[36]=0.00
call SetUnitTimeScale(udg_Unit_WA[1],4.00)
call SetUnitFlyHeight(GetLastCreatedUnit(),70.00,300.00)
call EnableTrigger(gg_trg_R_shouhe4)
call CreateTextTagUnitBJ("沙 暴 枪 葬",udg_Unit_WA[1],0,12.00,100,100.00,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),60.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call TriggerSleepAction(0.20)
call SetUnitTimeScale(udg_Unit_WA[1],1.00)
call PauseUnit(udg_Unit_WA[1],false)
else
call SetUnitFacing(udg_Unit_WA[1],AngleBetweenPoints(GetUnitLoc(udg_Unit_WA[1]),GetUnitLoc(udg_Unit_WA[4])))
call SetUnitFacing(udg_Unit_WA[3],AngleBetweenPoints(GetUnitLoc(udg_Unit_WA[3]),GetUnitLoc(udg_Unit_WA[4])))
call SetUnitVertexColor(udg_Unit_WA[3],255,255,255,R2I(udg_All_unit_shu[36]))
set udg_All_unit_shu[36]=(udg_All_unit_shu[36]+10.00)
endif
else
call DisableTrigger(GetTriggeringTrigger())
call SetUnitTimeScale(udg_Unit_WA[1],1.00)
call PauseUnit(udg_Unit_WA[1],false)
call KillUnit(udg_Unit_WA[3])
call TriggerSleepAction(0.20)
call RemoveUnit(udg_Unit_WA[3])
endif
endfunction
function InitTrig_R_shouhe3 takes nothing returns nothing
set gg_trg_R_shouhe3=CreateTrigger()
call DisableTrigger(gg_trg_R_shouhe3)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_shouhe3,0.04)
call TriggerAddAction(gg_trg_R_shouhe3,function Trig_R_shouhe3_Actions)
endfunction
function Trig_R_shouhe4_Func001Func007001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_shouhe4_Func001Func007001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true)
endfunction
function Trig_R_shouhe4_Func001Func007001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true))
endfunction
function Trig_R_shouhe4_Func001Func007A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_WA[1],GetEnumUnit(),(12.00*I2R(GetHeroInt(udg_Unit_WA[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_R_shouhe4_Func001Func015C takes nothing returns boolean
if((IsUnitInGroup(udg_Unit_WA[4],GetUnitsInRangeOfLocAll(150.00,GetUnitLoc(udg_Unit_WA[3])))==true))then
return true
endif
if((udg_All_unit_shu[36]>=30.00))then
return true
endif
return false
endfunction
function Trig_R_shouhe4_Func001C takes nothing returns boolean
if(not Trig_R_shouhe4_Func001Func015C())then
return false
endif
return true
endfunction
function Trig_R_shouhe4_Actions takes nothing returns nothing
if(Trig_R_shouhe4_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call KillUnit(udg_Unit_WA[3])
call RemoveUnit(udg_Unit_WA[3])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call AddSpecialEffectLocBJ(PolarProjectionBJ(GetUnitLoc(udg_Unit_WA[3]),GetRandomReal(20.00,160.00),GetRandomDirectionDeg()),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_WA[3]))
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_WA[3]),Condition(function Trig_R_shouhe4_Func001Func007001003)),function Trig_R_shouhe4_Func001Func007A)
call RemoveLocation(GetUnitLoc(udg_Unit_WA[3]))
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_WA[3]),50.00,GetUnitFacing(udg_Unit_WA[3]))
call SetUnitPositionLoc(udg_Unit_WA[3],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_WA[3]),"Abilities\\Spells\\Other\\StrongDrink\\BrewmasterMissile.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_WA[3]))
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[36]=(udg_All_unit_shu[36]+1)
endif
endfunction
function InitTrig_R_shouhe4 takes nothing returns nothing
set gg_trg_R_shouhe4=CreateTrigger()
call DisableTrigger(gg_trg_R_shouhe4)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_shouhe4,0.03)
call TriggerAddAction(gg_trg_R_shouhe4,function Trig_R_shouhe4_Actions)
endfunction
function Trig_D_miesha_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACmo'))then
return false
endif
return true
endfunction
function Trig_D_miesha_Func001C takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00R')==true))then
return false
endif
return true
endfunction
function Trig_D_miesha_Actions takes nothing returns nothing
if(Trig_D_miesha_Func001C())then
call CreateTextTagUnitBJ("没有足够的沙",GetTriggerUnit(),0,9.00,100,10.00,10.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),60.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
else
set udg_Unit_WA[1]=GetTriggerUnit()
set udg_All_unit_Dian[17]=GetSpellTargetLoc()
set udg_All_unit_shu[37]=0.00
set udg_ALL_PointPX=PolarProjectionBJ(udg_All_unit_Dian[17],600.00,0)
call CreateNUnitsAtLoc(1,'ucs3',GetOwningPlayer(GetTriggerUnit()),udg_ALL_PointPX,90.00)
call RemoveLocation(udg_ALL_PointPX)
call GroupAddUnit(udg_All_unit_tm[24],GetLastCreatedUnit())
set udg_ALL_PointPX=PolarProjectionBJ(udg_All_unit_Dian[17],600.00,180.00)
call CreateNUnitsAtLoc(1,'ucs3',GetOwningPlayer(GetTriggerUnit()),udg_ALL_PointPX,270.00)
call RemoveLocation(udg_ALL_PointPX)
call GroupAddUnit(udg_All_unit_tm[24],GetLastCreatedUnit())
call EnableTrigger(gg_trg_D_miesha2)
call EnableTrigger(gg_trg_D_miesha3)
endif
endfunction
function InitTrig_D_miesha takes nothing returns nothing
set gg_trg_D_miesha=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_miesha,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_miesha,Condition(function Trig_D_miesha_Conditions))
call TriggerAddAction(gg_trg_D_miesha,function Trig_D_miesha_Actions)
endfunction
function Trig_D_miesha2_Func001Func001A takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),(DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()),udg_All_unit_Dian[17])/9.00),(GetUnitFacing(GetEnumUnit())+4.00))
call SetUnitPositionLocFacingBJ(GetEnumUnit(),udg_ALL_PointPX,(GetUnitFacing(GetEnumUnit())+35.00))
call RemoveLocation(udg_ALL_PointPX)
endfunction
function Trig_D_miesha2_Func001Func004A takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Trig_D_miesha2_Func001Func008001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_miesha2_Func001Func008001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true)
endfunction
function Trig_D_miesha2_Func001Func008001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true))
endfunction
function Trig_D_miesha2_Func001Func008A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_WA[1],GetEnumUnit(),1600.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_miesha2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[37]>=65.00))then
return false
endif
return true
endfunction
function Trig_D_miesha2_Actions takes nothing returns nothing
if(Trig_D_miesha2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(gg_trg_D_miesha3)
call ForGroupBJ(udg_All_unit_tm[24],function Trig_D_miesha2_Func001Func004A)
call GroupClear(udg_All_unit_tm[24])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(udg_All_unit_Dian[17],GetRandomReal(0,140.00),GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,'otbk',GetOwningPlayer(udg_Unit_WA[1]),udg_ALL_PointPX,(120.00*I2R(bj_forLoopAIndex)))
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call CreateNUnitsAtLoc(1,'hpxe',GetOwningPlayer(udg_Unit_WA[1]),udg_All_unit_Dian[17],(60.00*I2R(bj_forLoopAIndex)))
call KillUnit(GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(280.00,udg_All_unit_Dian[17],Condition(function Trig_D_miesha2_Func001Func008001003)),function Trig_D_miesha2_Func001Func008A)
call RemoveLocation(udg_All_unit_Dian[17])
else
call ForGroupBJ(udg_All_unit_tm[24],function Trig_D_miesha2_Func001Func001A)
set udg_All_unit_shu[37]=(udg_All_unit_shu[37]+1)
endif
endfunction
function InitTrig_D_miesha2 takes nothing returns nothing
set gg_trg_D_miesha2=CreateTrigger()
call DisableTrigger(gg_trg_D_miesha2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_miesha2,0.03)
call TriggerAddAction(gg_trg_D_miesha2,function Trig_D_miesha2_Actions)
endfunction
function Trig_D_miesha3_Func001Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_miesha3_Func001Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true)
endfunction
function Trig_D_miesha3_Func001Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_WA[1]))==true))
endfunction
function Trig_D_miesha3_Func001Func002A takes nothing returns nothing
call UnitDamageTarget(udg_Unit_WA[1],GetEnumUnit(),150.00,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_miesha3_Func001A takes nothing returns nothing
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_D_miesha3_Func001Func002001003)),function Trig_D_miesha3_Func001Func002A)
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endfunction
function Trig_D_miesha3_Actions takes nothing returns nothing
call ForGroupBJ(udg_All_unit_tm[24],function Trig_D_miesha3_Func001A)
endfunction
function InitTrig_D_miesha3 takes nothing returns nothing
set gg_trg_D_miesha3=CreateTrigger()
call DisableTrigger(gg_trg_D_miesha3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_miesha3,0.20)
call TriggerAddAction(gg_trg_D_miesha3,function Trig_D_miesha3_Actions)
endfunction
function Trig_Q_tiexianhuazhiwu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A02U'))then
return false
endif
return true
endfunction
function Trig_Q_tiexianhuazhiwu_Actions takes nothing returns nothing
set udg_Unit_JML[1]=GetTriggerUnit()
set udg_Unit_JML[2]=GetSpellTargetUnit()
call TriggerSleepAction(0.10)
call SetUnitTimeScale(udg_Unit_JML[1],1.50)
call PauseUnit(udg_Unit_JML[1],true)
call SetUnitPathing(udg_Unit_JML[1],false)
call SetUnitAnimationByIndex(udg_Unit_JML[1],24)
call EnableTrigger(gg_trg_Q_tiexianhuazhiwu2)
endfunction
function InitTrig_Q_tiexianhuazhiwu takes nothing returns nothing
set gg_trg_Q_tiexianhuazhiwu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_tiexianhuazhiwu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_tiexianhuazhiwu,Condition(function Trig_Q_tiexianhuazhiwu_Conditions))
call TriggerAddAction(gg_trg_Q_tiexianhuazhiwu,function Trig_Q_tiexianhuazhiwu_Actions)
endfunction
function Trig_Q_tiexianhuazhiwu2_Func001C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_JML[1],GetUnitsInRangeOfLocAll(120.00,GetUnitLoc(udg_Unit_JML[2])))==true))then
return false
endif
return true
endfunction
function Trig_Q_tiexianhuazhiwu2_Actions takes nothing returns nothing
if(Trig_Q_tiexianhuazhiwu2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(gg_trg_Q_tiexianhuazhiwu3)
set udg_All_unit_shu[42]=0.00
else
call SetUnitPositionLocFacingLocBJ(udg_Unit_JML[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),65.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_JML[1]),GetUnitLoc(udg_Unit_JML[2]))),GetUnitLoc(udg_Unit_JML[2]))
endif
endfunction
function InitTrig_Q_tiexianhuazhiwu2 takes nothing returns nothing
set gg_trg_Q_tiexianhuazhiwu2=CreateTrigger()
call DisableTrigger(gg_trg_Q_tiexianhuazhiwu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_tiexianhuazhiwu2,0.04)
call TriggerAddAction(gg_trg_Q_tiexianhuazhiwu2,function Trig_Q_tiexianhuazhiwu2_Actions)
endfunction
function Trig_Q_tiexianhuazhiwu3_Func001Func002C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_JML[2])==true))then
return true
endif
if((udg_All_unit_shu[42]>=10.00))then
return true
endif
return false
endfunction
function Trig_Q_tiexianhuazhiwu3_Func001C takes nothing returns boolean
if(not Trig_Q_tiexianhuazhiwu3_Func001Func002C())then
return false
endif
return true
endfunction
function Trig_Q_tiexianhuazhiwu3_Actions takes nothing returns nothing
if(Trig_Q_tiexianhuazhiwu3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitPositionLocFacingLocBJ(udg_Unit_JML[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),45.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_JML[1]),GetUnitLoc(udg_Unit_JML[2]))),GetUnitLoc(udg_Unit_JML[2]))
call SetUnitPositionLocFacingLocBJ(udg_Unit_JML[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[2]),40.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_JML[1]),GetUnitLoc(udg_Unit_JML[2]))),GetUnitLoc(udg_Unit_JML[1]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_JML[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetUnitTimeScale(udg_Unit_JML[1],1.00)
call PauseUnit(udg_Unit_JML[1],false)
call SetUnitPathing(udg_Unit_JML[1],true)
call UnitDamageTarget(udg_Unit_JML[1],udg_Unit_JML[2],(0.30*(I2R(GetUnitAbilityLevel(udg_Unit_JML[1],'AUts'))*I2R(GetHeroAgi(udg_Unit_JML[1],true)))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_Unit_JML[1],udg_Unit_JML[2],(0.07*(I2R(GetUnitAbilityLevel(udg_Unit_JML[1],'AUts'))*I2R(GetHeroAgi(udg_Unit_JML[1],true)))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitPositionLocFacingLocBJ(udg_Unit_JML[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),10.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_JML[1]),GetUnitLoc(udg_Unit_JML[2]))),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),256,GetUnitFacing(udg_Unit_JML[1])))
call SetUnitPositionLocFacingLocBJ(udg_Unit_JML[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[2]),8.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_JML[1]),GetUnitLoc(udg_Unit_JML[2]))),GetUnitLoc(udg_Unit_JML[1]))
call CreateNUnitsAtLoc(1,'nwad',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[2]),GetRandomReal(0,40.00),GetRandomDirectionDeg()),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.15)
call SetUnitTimeScale(GetLastCreatedUnit(),5.00)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_JML[2]),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_All_unit_shu[42]=(udg_All_unit_shu[42]+1)
endif
endfunction
function InitTrig_Q_tiexianhuazhiwu3 takes nothing returns nothing
set gg_trg_Q_tiexianhuazhiwu3=CreateTrigger()
call DisableTrigger(gg_trg_Q_tiexianhuazhiwu3)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_tiexianhuazhiwu3,0.04)
call TriggerAddAction(gg_trg_Q_tiexianhuazhiwu3,function Trig_Q_tiexianhuazhiwu3_Actions)
endfunction
function Trig_W_chunzhiwu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A01L'))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu_Func003Func012Func018001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_chunzhiwu_Func003Func012Func018001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true)
endfunction
function Trig_W_chunzhiwu_Func003Func012Func018001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true))
endfunction
function Trig_W_chunzhiwu_Func003Func012Func018A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_JML[1],GetEnumUnit(),(100.00*I2R(GetUnitAbilityLevel(udg_Unit_JML[1],'A01L'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLoc(1,'nwad',GetOwningPlayer(GetEnumUnit()),GetUnitLoc(GetEnumUnit()),AngleBetweenPoints(GetUnitLoc(udg_Unit_JML[1]),GetUnitLoc(GetEnumUnit())))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.15)
call SetUnitTimeScale(GetLastCreatedUnit(),1.60)
endfunction
function Trig_W_chunzhiwu_Func003Func012C takes nothing returns boolean
if(not(GetUnitLifePercent(udg_Unit_JML[1])<=30.00))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_JML[1])==true))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu_Func003Func016Func018001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_chunzhiwu_Func003Func016Func018001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true)
endfunction
function Trig_W_chunzhiwu_Func003Func016Func018001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true))
endfunction
function Trig_W_chunzhiwu_Func003Func016Func018A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_JML[1],GetEnumUnit(),(60.00*I2R(GetUnitAbilityLevel(udg_Unit_JML[1],'A01L'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLoc(1,'nwad',GetOwningPlayer(GetEnumUnit()),GetUnitLoc(GetEnumUnit()),AngleBetweenPoints(GetUnitLoc(udg_Unit_JML[1]),GetUnitLoc(GetEnumUnit())))
call SetUnitVertexColor(GetLastCreatedUnit(),255,255,255,255)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.15)
call SetUnitTimeScale(GetLastCreatedUnit(),1.50)
endfunction
function Trig_W_chunzhiwu_Func003Func016C takes nothing returns boolean
if(not(GetUnitLifePercent(udg_Unit_JML[1])<=60.00))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_JML[1])==true))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu_Func003C takes nothing returns boolean
if(not(GetUnitTypeId(udg_Unit_JML[1])=='Ucrl'))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu_Actions takes nothing returns nothing
set udg_Unit_JML[1]=GetTriggerUnit()
call PauseUnit(udg_Unit_JML[1],true)
if(Trig_W_chunzhiwu_Func003C())then
call SetUnitAnimationByIndex(udg_Unit_JML[1],3)
call TriggerSleepAction(0.20)
call PlaySoundAtPointBJ(gg_snd_HeadHunterMissileLaunch,100.00,GetUnitLoc(udg_Unit_JML[1]),300.00)
call StopSoundBJ(GetLastPlayedSound(),true)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'uplg',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),GetRandomReal(25.00,50.00),(GetUnitFacing(udg_Unit_JML[1])+GetRandomReal(-10.00,30.00))),(GetUnitFacing(udg_Unit_JML[1])+GetRandomReal(-10.00,35.00)))
call SetUnitScale(GetLastCreatedUnit(),3.00,3.00,3.00)
call SetUnitUserData(GetLastCreatedUnit(),GetRandomInt(20,60))
call GroupAddUnit(udg_All_unit_tm[26],GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'udes',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),GetRandomReal(25.00,50.00),(GetUnitFacing(udg_Unit_JML[1])+GetRandomReal(-30.00,10.00))),(GetUnitFacing(udg_Unit_JML[1])+GetRandomReal(-35.00,10.00)))
call SetUnitScale(GetLastCreatedUnit(),3.00,3.00,3.00)
call SetUnitUserData(GetLastCreatedUnit(),GetRandomInt(20,60))
call GroupAddUnit(udg_All_unit_tm[26],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_W_chunzhiwu2)
call TriggerSleepAction(0.10)
if(Trig_W_chunzhiwu_Func003Func016C())then
call SetUnitTimeScale(udg_Unit_JML[1],1.50)
call SetUnitAnimationByIndex(udg_Unit_JML[1],8)
call TriggerSleepAction(0.10)
call CreateTextTagUnitBJ(("茨!"),udg_Unit_JML[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_JML[1]),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_JML[1]),GetUnitLoc(udg_Unit_JML[1]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AOws',3)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ubsp',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),-40.00,(120.00*I2R(bj_forLoopAIndex))),(180.00+(120.00*I2R(bj_forLoopAIndex))))
call SetUnitAnimation(GetLastCreatedUnit(),"birth medium")
call SetUnitTimeScale(GetLastCreatedUnit(),3.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.50)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(270.00,GetUnitLoc(udg_Unit_JML[1]),Condition(function Trig_W_chunzhiwu_Func003Func016Func018001003)),function Trig_W_chunzhiwu_Func003Func016Func018A)
call TriggerSleepAction(0.10)
call PauseUnitBJ(false,udg_Unit_JML[1])
call SetUnitTimeScalePercent(udg_Unit_JML[1],100.00)
else
call PauseUnit(udg_Unit_JML[1],false)
endif
else
call SetUnitAnimationByIndex(udg_Unit_JML[1],17)
call TriggerSleepAction(0.20)
call PlaySoundAtPointBJ(gg_snd_HeadHunterMissileLaunch,100.00,GetUnitLoc(udg_Unit_JML[1]),500.00)
call StopSoundBJ(GetLastPlayedSound(),true)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'uplg',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),GetRandomReal(25.00,50.00),(GetUnitFacing(udg_Unit_JML[1])+GetRandomReal(-10.00,30.00))),(GetUnitFacing(udg_Unit_JML[1])+GetRandomReal(-10.00,35.00)))
call SetUnitVertexColor(GetLastCreatedUnit(),255,20,20,255)
call SetUnitScale(GetLastCreatedUnit(),3.30,3.30,3.30)
call SetUnitUserData(GetLastCreatedUnit(),GetRandomInt(20,60))
call GroupAddUnit(udg_All_unit_tm[26],GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'udes',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),GetRandomReal(25.00,50.00),(GetUnitFacing(udg_Unit_JML[1])+GetRandomReal(-30.00,10.00))),(GetUnitFacing(udg_Unit_JML[1])+GetRandomReal(-35.00,10.00)))
call SetUnitVertexColor(GetLastCreatedUnit(),255,20,20,255)
call SetUnitScale(GetLastCreatedUnit(),3.30,3.30,3.30)
call SetUnitUserData(GetLastCreatedUnit(),GetRandomInt(20,60))
call GroupAddUnit(udg_All_unit_tm[26],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_W_chunzhiwu2)
call TriggerSleepAction(0.10)
if(Trig_W_chunzhiwu_Func003Func012C())then
call SetUnitTimeScale(udg_Unit_JML[1],1.50)
call SetUnitAnimationByIndex(udg_Unit_JML[1],22)
call TriggerSleepAction(0.10)
call CreateTextTagUnitBJ(("茨!"),udg_Unit_JML[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_JML[1]),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_JML[1]),GetUnitLoc(udg_Unit_JML[1]),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AOws',3)
call IssueImmediateOrderById(GetLastCreatedUnit(),852127)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ubsp',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),-40.00,(120.00*I2R(bj_forLoopAIndex))),(180.00+(120.00*I2R(bj_forLoopAIndex))))
call SetUnitAnimation(GetLastCreatedUnit(),"birth medium")
call SetUnitTimeScale(GetLastCreatedUnit(),3.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.50)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(270.00,GetUnitLoc(udg_Unit_JML[1]),Condition(function Trig_W_chunzhiwu_Func003Func012Func018001003)),function Trig_W_chunzhiwu_Func003Func012Func018A)
call TriggerSleepAction(0.10)
call PauseUnitBJ(false,udg_Unit_JML[1])
call SetUnitTimeScalePercent(udg_Unit_JML[1],100.00)
else
call PauseUnit(udg_Unit_JML[1],false)
endif
endif
endfunction
function InitTrig_W_chunzhiwu takes nothing returns nothing
set gg_trg_W_chunzhiwu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_chunzhiwu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_chunzhiwu,Condition(function Trig_W_chunzhiwu_Conditions))
call TriggerAddAction(gg_trg_W_chunzhiwu,function Trig_W_chunzhiwu_Actions)
endfunction
function Trig_W_chunzhiwu2_Func001A takes nothing returns nothing
call GroupAddUnit(udg_All_unit_tm[27],GetEnumUnit())
call GroupRemoveUnit(udg_All_unit_tm[26],GetEnumUnit())
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true)
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true))
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002Func001Func001C takes nothing returns boolean
if(not(GetUnitTypeId(udg_Unit_JML[1])=='Hvsh'))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002Func001C takes nothing returns boolean
if(not(IsUnitInGroup(GetEnumUnit(),udg_All_unit_tm[29])==true))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002A takes nothing returns nothing
if(Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002Func001C())then
else
if(Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002Func001Func001C())then
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_JML[1]),GetUnitLoc(GetEnumUnit()),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A00Z',2)
call IssueTargetOrderById(GetLastCreatedUnit(),852095,GetEnumUnit())
else
endif
call GroupAddUnit(udg_All_unit_tm[29],GetEnumUnit())
call UnitDamageTargetBJ(udg_Unit_JML[1],GetEnumUnit(),(75.00*I2R(GetUnitAbilityLevel(udg_Unit_JML[1],'A01L'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true)
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true))
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004Func001Func001C takes nothing returns boolean
if(not(GetUnitTypeId(udg_Unit_JML[1])=='Hvsh'))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004Func001C takes nothing returns boolean
if(not(IsUnitInGroup(GetEnumUnit(),udg_All_unit_tm[29])==true))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004A takes nothing returns nothing
if(Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004Func001C())then
else
if(Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004Func001Func001C())then
call CreateNUnitsAtLoc(1,'e001',GetOwningPlayer(udg_Unit_JML[1]),GetUnitLoc(GetEnumUnit()),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A00Z',2)
call IssueTargetOrderById(GetLastCreatedUnit(),852095,GetEnumUnit())
else
endif
call GroupAddUnit(udg_All_unit_tm[29],GetEnumUnit())
call UnitDamageTargetBJ(udg_Unit_JML[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(udg_Unit_JML[1],'A01L'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001Func005C takes nothing returns boolean
if(not(GetUnitLifePercent(udg_Unit_JML[1])<=50.00))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu2_Func002Func001Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())>15))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu2_Func002Func001A takes nothing returns nothing
if(Trig_W_chunzhiwu2_Func002Func001Func001C())then
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),GetUnitFacing(GetEnumUnit())))
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-8))
if(Trig_W_chunzhiwu2_Func002Func001Func001Func005C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002001003)),function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func002A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004001003)),function Trig_W_chunzhiwu2_Func002Func001Func001Func005Func004A)
endif
else
call UnitApplyTimedLife(GetEnumUnit(),'BHwe',0.10)
call GroupRemoveUnit(udg_All_unit_tm[27],GetEnumUnit())
endif
endfunction
function Trig_W_chunzhiwu2_Func002C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_All_unit_tm[27])==true))then
return false
endif
return true
endfunction
function Trig_W_chunzhiwu2_Actions takes nothing returns nothing
call ForGroupBJ(GetRandomSubGroup(1,udg_All_unit_tm[26]),function Trig_W_chunzhiwu2_Func001A)
if(Trig_W_chunzhiwu2_Func002C())then
call DisableTrigger(gg_trg_W_chunzhiwu2)
call GroupClear(udg_All_unit_tm[26])
call GroupClear(udg_All_unit_tm[27])
call GroupClear(udg_All_unit_tm[29])
else
call ForGroupBJ(udg_All_unit_tm[27],function Trig_W_chunzhiwu2_Func002Func001A)
endif
endfunction
function InitTrig_W_chunzhiwu2 takes nothing returns nothing
set gg_trg_W_chunzhiwu2=CreateTrigger()
call DisableTrigger(gg_trg_W_chunzhiwu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_chunzhiwu2,0.02)
call TriggerAddAction(gg_trg_W_chunzhiwu2,function Trig_W_chunzhiwu2_Actions)
endfunction
function Trig_E_tangsongzhiwu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A00G'))then
return false
endif
return true
endfunction
function Trig_E_tangsongzhiwu_Func004C takes nothing returns boolean
if(not(udg_All_unit_bez[7]==true))then
return false
endif
return true
endfunction
function Trig_E_tangsongzhiwu_Actions takes nothing returns nothing
set udg_Unit_JML[1]=GetTriggerUnit()
set udg_All_unit_shu[41]=0.00
call EnableTrigger(gg_trg_E_tangsongzhiwu2)
if(Trig_E_tangsongzhiwu_Func004C())then
else
set udg_All_unit_bez[7]=true
call TriggerRegisterUnitEvent(gg_trg_E_tangsongzhiwu3,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
endif
endfunction
function InitTrig_E_tangsongzhiwu takes nothing returns nothing
set gg_trg_E_tangsongzhiwu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_tangsongzhiwu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_tangsongzhiwu,Condition(function Trig_E_tangsongzhiwu_Conditions))
call TriggerAddAction(gg_trg_E_tangsongzhiwu,function Trig_E_tangsongzhiwu_Actions)
endfunction
function Trig_E_tangsongzhiwu2_Func001Func002001003001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_E_tangsongzhiwu2_Func001Func002001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_E_tangsongzhiwu2_Func001Func002001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_E_tangsongzhiwu2_Func001Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true)
endfunction
function Trig_E_tangsongzhiwu2_Func001Func002001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true))
endfunction
function Trig_E_tangsongzhiwu2_Func001Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_JML[1],GetEnumUnit(),(5.00*I2R(GetUnitAbilityLevel(udg_Unit_JML[1],'A00G'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_E_tangsongzhiwu2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[41]>=8.00))then
return false
endif
return true
endfunction
function Trig_E_tangsongzhiwu2_Actions takes nothing returns nothing
if(Trig_E_tangsongzhiwu2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_JML[1]),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(udg_Unit_JML[1]),Condition(function Trig_E_tangsongzhiwu2_Func001Func002001003)),function Trig_E_tangsongzhiwu2_Func001Func002A)
call CreateNUnitsAtLoc(1,'uplg',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),GetRandomReal(0,120.00),GetRandomDirectionDeg()),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.15)
call CreateNUnitsAtLoc(1,'udes',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),GetRandomReal(0,120.00),GetRandomDirectionDeg()),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.15)
set udg_All_unit_shu[41]=(udg_All_unit_shu[41]+1)
endif
endfunction
function InitTrig_E_tangsongzhiwu2 takes nothing returns nothing
set gg_trg_E_tangsongzhiwu2=CreateTrigger()
call DisableTrigger(gg_trg_E_tangsongzhiwu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_E_tangsongzhiwu2,0.04)
call TriggerAddAction(gg_trg_E_tangsongzhiwu2,function Trig_E_tangsongzhiwu2_Actions)
endfunction
function Trig_E_tangsongzhiwu3_Conditions takes nothing returns boolean
if(not(UnitHasBuffBJ(GetTriggerUnit(),'B00X')==true))then
return false
endif
return true
endfunction
function Trig_E_tangsongzhiwu3_Func001C takes nothing returns boolean
if(not(GetUnitLifePercent(GetTriggerUnit())>50.00))then
return false
endif
return true
endfunction
function Trig_E_tangsongzhiwu3_Func002C takes nothing returns boolean
if(not(GetUnitLifePercent(GetTriggerUnit())<=50.00))then
return false
endif
if(not(GetUnitLifePercent(GetTriggerUnit())>30.00))then
return false
endif
return true
endfunction
function Trig_E_tangsongzhiwu3_Func003C takes nothing returns boolean
if(not(GetUnitLifePercent(GetTriggerUnit())<=30.00))then
return false
endif
return true
endfunction
function Trig_E_tangsongzhiwu3_Actions takes nothing returns nothing
if(Trig_E_tangsongzhiwu3_Func001C())then
call SetUnitLifeBJ(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+(GetEventDamage()*(0.03*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'A00G'))))))
else
endif
if(Trig_E_tangsongzhiwu3_Func002C())then
call SetUnitLifeBJ(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+(GetEventDamage()*(0.05*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'A00G'))))))
else
endif
if(Trig_E_tangsongzhiwu3_Func003C())then
call SetUnitLifeBJ(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+(GetEventDamage()*(0.08*I2R(GetUnitAbilityLevel(GetTriggerUnit(),'A00G'))))))
else
endif
endfunction
function InitTrig_E_tangsongzhiwu3 takes nothing returns nothing
set gg_trg_E_tangsongzhiwu3=CreateTrigger()
call TriggerAddCondition(gg_trg_E_tangsongzhiwu3,Condition(function Trig_E_tangsongzhiwu3_Conditions))
call TriggerAddAction(gg_trg_E_tangsongzhiwu3,function Trig_E_tangsongzhiwu3_Actions)
endfunction
function Trig_R_dizhizhuangtai_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEme'))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai_Func001C takes nothing returns boolean
if(not(udg_All_unit_bez[8]==true))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai_Func002Func003C takes nothing returns boolean
if(not(GetUnitLifePercent(udg_Unit_JML[1])<=50.00))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_JML[1])==true))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai_Func002Func004C takes nothing returns boolean
if(not(GetUnitLifePercent(udg_Unit_JML[1])<=30.00))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_JML[1])==true))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai_Func002C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Ucrl'))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai_Func003C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Hvsh'))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai_Actions takes nothing returns nothing
if(Trig_R_dizhizhuangtai_Func001C())then
else
set udg_All_unit_bez[8]=true
call TriggerRegisterUnitLifeEvent(gg_trg_R_dizhizhuangtai4,GetTriggerUnit(),LESS_THAN_OR_EQUAL,0.00)
endif
if(Trig_R_dizhizhuangtai_Func002C())then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'AUts',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A02U',true)
if(Trig_R_dizhizhuangtai_Func002Func003C())then
call UnitAddAbility(udg_Unit_JML[1],'A02T')
else
endif
if(Trig_R_dizhizhuangtai_Func002Func004C())then
call UnitAddAbility(udg_Unit_JML[1],'A02X')
else
endif
else
endif
if(Trig_R_dizhizhuangtai_Func003C())then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A02U',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'AUts',true)
else
endif
endfunction
function InitTrig_R_dizhizhuangtai takes nothing returns nothing
set gg_trg_R_dizhizhuangtai=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_dizhizhuangtai,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_dizhizhuangtai,Condition(function Trig_R_dizhizhuangtai_Conditions))
call TriggerAddAction(gg_trg_R_dizhizhuangtai,function Trig_R_dizhizhuangtai_Actions)
endfunction
function Trig_R_dizhizhuangtai2_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEme'))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai2_Func003C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Ucrl'))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai2_Func004C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Hvsh'))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai2_Actions takes nothing returns nothing
if(Trig_R_dizhizhuangtai2_Func003C())then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'Asth',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'ACtc',true)
else
endif
if(Trig_R_dizhizhuangtai2_Func004C())then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'Asth',true)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'ACtc',false)
else
endif
endfunction
function InitTrig_R_dizhizhuangtai2 takes nothing returns nothing
set gg_trg_R_dizhizhuangtai2=CreateTrigger()
call DisableTrigger(gg_trg_R_dizhizhuangtai2)
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_dizhizhuangtai2,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_dizhizhuangtai2,Condition(function Trig_R_dizhizhuangtai2_Conditions))
call TriggerAddAction(gg_trg_R_dizhizhuangtai2,function Trig_R_dizhizhuangtai2_Actions)
endfunction
function Trig_R_dizhizhuangtai3_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEme'))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai3_Func001C takes nothing returns boolean
if(not(GetUnitLifePercent(GetTriggerUnit())<=50.00))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai3_Func002C takes nothing returns boolean
if(not(GetUnitLifePercent(GetTriggerUnit())<=30.00))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai3_Actions takes nothing returns nothing
if(Trig_R_dizhizhuangtai3_Func001C())then
call UnitAddAbility(GetTriggerUnit(),'A02T')
else
endif
if(Trig_R_dizhizhuangtai3_Func002C())then
call UnitAddAbility(GetTriggerUnit(),'A02X')
else
endif
endfunction
function InitTrig_R_dizhizhuangtai3 takes nothing returns nothing
set gg_trg_R_dizhizhuangtai3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_dizhizhuangtai3,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(gg_trg_R_dizhizhuangtai3,Condition(function Trig_R_dizhizhuangtai3_Conditions))
call TriggerAddAction(gg_trg_R_dizhizhuangtai3,function Trig_R_dizhizhuangtai3_Actions)
endfunction
function Trig_R_dizhizhuangtai4_Func001C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Hvsh'))then
return false
endif
return true
endfunction
function Trig_R_dizhizhuangtai4_Actions takes nothing returns nothing
if(Trig_R_dizhizhuangtai4_Func001C())then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'Asth',true)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'ACtc',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A02U',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'AUts',true)
else
endif
endfunction
function InitTrig_R_dizhizhuangtai4 takes nothing returns nothing
set gg_trg_R_dizhizhuangtai4=CreateTrigger()
call TriggerAddAction(gg_trg_R_dizhizhuangtai4,function Trig_R_dizhizhuangtai4_Actions)
endfunction
function Trig_D_zaojuezhiwu0_Conditions takes nothing returns boolean
if(not(GetLearnedSkill()=='Asth'))then
return false
endif
return true
endfunction
function Trig_D_zaojuezhiwu0_Actions takes nothing returns nothing
call EnableTrigger(gg_trg_R_dizhizhuangtai2)
endfunction
function InitTrig_D_zaojuezhiwu0 takes nothing returns nothing
set gg_trg_D_zaojuezhiwu0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_zaojuezhiwu0,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_D_zaojuezhiwu0,Condition(function Trig_D_zaojuezhiwu0_Conditions))
call TriggerAddAction(gg_trg_D_zaojuezhiwu0,function Trig_D_zaojuezhiwu0_Actions)
endfunction
function Trig_D_zaojuezhiwu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACtc'))then
return false
endif
return true
endfunction
function Trig_D_zaojuezhiwu_Func001C takes nothing returns boolean
if(not(GetUnitLifePercent(GetTriggerUnit())<=40.00))then
return false
endif
return true
endfunction
function Trig_D_zaojuezhiwu_Actions takes nothing returns nothing
if(Trig_D_zaojuezhiwu_Func001C())then
set udg_Unit_JML[1]=GetTriggerUnit()
set udg_All_unit_shu[43]=0.00
call EnableTrigger(gg_trg_D_zaojuezhiwu2)
else
call CreateTextTagUnitBJ("必须在濒死状态下使用",GetTriggerUnit(),0,10.50,100,0.00,0.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
endif
endfunction
function InitTrig_D_zaojuezhiwu takes nothing returns nothing
set gg_trg_D_zaojuezhiwu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_zaojuezhiwu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_zaojuezhiwu,Condition(function Trig_D_zaojuezhiwu_Conditions))
call TriggerAddAction(gg_trg_D_zaojuezhiwu,function Trig_D_zaojuezhiwu_Actions)
endfunction
function Trig_D_zaojuezhiwu2_Func001Func009001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_zaojuezhiwu2_Func001Func009001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true)
endfunction
function Trig_D_zaojuezhiwu2_Func001Func009001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_JML[1]))==true))
endfunction
function Trig_D_zaojuezhiwu2_Func001Func009A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_JML[1],GetEnumUnit(),(1.00*I2R(GetHeroAgi(udg_Unit_JML[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_zaojuezhiwu2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[43]>=17.00))then
return false
endif
return true
endfunction
function Trig_D_zaojuezhiwu2_Func002Func002Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())<=18))then
return false
endif
return true
endfunction
function Trig_D_zaojuezhiwu2_Func002Func002A takes nothing returns nothing
if(Trig_D_zaojuezhiwu2_Func002Func002Func001C())then
call UnitApplyTimedLife(GetEnumUnit(),'BHwe',0.10)
call GroupRemoveUnit(udg_All_unit_tm[28],GetEnumUnit())
else
call SetUnitVertexColor(GetEnumUnit(),255,255,255,GetUnitUserData(GetEnumUnit()))
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-12))
endif
endfunction
function Trig_D_zaojuezhiwu2_Func002C takes nothing returns boolean
if(not(IsUnitGroupEmptyBJ(udg_All_unit_tm[28])==true))then
return false
endif
return true
endfunction
function Trig_D_zaojuezhiwu2_Actions takes nothing returns nothing
if(Trig_D_zaojuezhiwu2_Func001C())then
else
call CreateNUnitsAtLoc(1,'ubsp',GetOwningPlayer(udg_Unit_JML[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_JML[1]),GetRandomReal(0,340.00),GetRandomDirectionDeg()),GetRandomDirectionDeg())
call SetUnitScale(GetLastCreatedUnit(),4.00,4.00,4.00)
call SetUnitTimeScale(GetLastCreatedUnit(),2.50)
call SetUnitAnimation(GetLastCreatedUnit(),"birth medium")
call SetUnitUserData(GetLastCreatedUnit(),350)
call GroupAddUnit(udg_All_unit_tm[28],GetLastCreatedUnit())
set udg_All_unit_shu[43]=(udg_All_unit_shu[43]+1)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(350.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_D_zaojuezhiwu2_Func001Func009001003)),function Trig_D_zaojuezhiwu2_Func001Func009A)
call CreateNUnitsAtLoc(1,'hmtt',GetOwningPlayer(udg_Unit_JML[1]),GetUnitLoc(GetLastCreatedUnit()),GetRandomDirectionDeg())
call SetUnitScale(GetLastCreatedUnit(),2.30,2.30,2.30)
call SetUnitTimeScale(GetLastCreatedUnit(),1.80)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.30)
endif
if(Trig_D_zaojuezhiwu2_Func002C())then
call DisableTrigger(GetTriggeringTrigger())
else
call ForGroupBJ(udg_All_unit_tm[28],function Trig_D_zaojuezhiwu2_Func002Func002A)
endif
endfunction
function InitTrig_D_zaojuezhiwu2 takes nothing returns nothing
set gg_trg_D_zaojuezhiwu2=CreateTrigger()
call DisableTrigger(gg_trg_D_zaojuezhiwu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_zaojuezhiwu2,0.08)
call TriggerAddAction(gg_trg_D_zaojuezhiwu2,function Trig_D_zaojuezhiwu2_Actions)
endfunction
function Trig_Q_shizhi_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03C'))then
return false
endif
return true
endfunction
function Trig_Q_shizhi_Func004C takes nothing returns boolean
if(not(udg_All_unit_bez[12]==true))then
return false
endif
return true
endfunction
function Trig_Q_shizhi_Actions takes nothing returns nothing
set udg_Unit_XN[1]=GetTriggerUnit()
set udg_All_unit_shu[51]=0.00
set udg_All_unit_Dian[20]=GetSpellTargetLoc()
if(Trig_Q_shizhi_Func004C())then
call EnableTrigger(gg_trg_Q_shizhi3)
else
call EnableTrigger(gg_trg_Q_shizhi2)
endif
endfunction
function InitTrig_Q_shizhi takes nothing returns nothing
set gg_trg_Q_shizhi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_shizhi,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_shizhi,Condition(function Trig_Q_shizhi_Conditions))
call TriggerAddAction(gg_trg_Q_shizhi,function Trig_Q_shizhi_Actions)
endfunction
function Trig_Q_shizhi2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[51]>=I2R(GetUnitAbilityLevel(udg_Unit_XN[1],'Afak'))))then
return false
endif
return true
endfunction
function Trig_Q_shizhi2_Actions takes nothing returns nothing
if(Trig_Q_shizhi2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(udg_All_unit_Dian[20])
else
set udg_ALL_PointPX=PolarProjectionBJ(udg_All_unit_Dian[20],GetRandomReal(100.00,900.00),GetRandomDirectionDeg())
call CreateNUnitsAtLocFacingLocBJ(1,'e004',GetOwningPlayer(udg_Unit_XN[1]),udg_ALL_PointPX,GetUnitLoc(udg_Unit_XN[1]))
call RemoveLocation(udg_ALL_PointPX)
call UnitRemoveAbility(GetLastCreatedUnit(),'ANc1')
call UnitAddAbility(GetLastCreatedUnit(),'A039')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A039',GetUnitAbilityLevel(udg_Unit_XN[1],'A03C'))
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852652,udg_All_unit_Dian[20])
set udg_All_unit_shu[51]=(udg_All_unit_shu[51]+1)
endif
endfunction
function InitTrig_Q_shizhi2 takes nothing returns nothing
set gg_trg_Q_shizhi2=CreateTrigger()
call DisableTrigger(gg_trg_Q_shizhi2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_shizhi2,0.15)
call TriggerAddAction(gg_trg_Q_shizhi2,function Trig_Q_shizhi2_Actions)
endfunction
function Trig_Q_shizhi3_Func001C takes nothing returns boolean
if(not((udg_All_unit_shu[51]-5.00)>=I2R(GetUnitAbilityLevel(udg_Unit_XN[1],'Afak'))))then
return false
endif
return true
endfunction
function Trig_Q_shizhi3_Actions takes nothing returns nothing
if(Trig_Q_shizhi3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(udg_All_unit_Dian[20])
else
set udg_ALL_PointPX=PolarProjectionBJ(udg_All_unit_Dian[20],GetRandomReal(100.00,900.00),GetRandomDirectionDeg())
call CreateNUnitsAtLocFacingLocBJ(1,'e004',GetOwningPlayer(udg_Unit_XN[1]),udg_ALL_PointPX,GetUnitLoc(udg_Unit_XN[2]))
call RemoveLocation(udg_ALL_PointPX)
call UnitRemoveAbility(GetLastCreatedUnit(),'ANc1')
call UnitAddAbility(GetLastCreatedUnit(),'A039')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A039',GetUnitAbilityLevel(udg_Unit_XN[1],'A03C'))
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852652,udg_All_unit_Dian[20])
call RemoveLocation(GetUnitLoc(udg_Unit_XN[2]))
set udg_All_unit_shu[51]=(udg_All_unit_shu[51]+1)
endif
endfunction
function InitTrig_Q_shizhi3 takes nothing returns nothing
set gg_trg_Q_shizhi3=CreateTrigger()
call DisableTrigger(gg_trg_Q_shizhi3)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_shizhi3,0.15)
call TriggerAddAction(gg_trg_Q_shizhi3,function Trig_Q_shizhi3_Actions)
endfunction
function Trig_W_shizhibaopo_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANsy'))then
return false
endif
return true
endfunction
function Trig_W_shizhibaopo_Actions takes nothing returns nothing
set udg_Unit_XN[1]=GetTriggerUnit()
call CreateNUnitsAtLocFacingLocBJ(1,'nef5',GetTriggerPlayer(),GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.30)
set udg_Unit_XN[3]=GetLastCreatedUnit()
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
call EnableTrigger(gg_trg_W_shizhibaopo2)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Unit_XN[1]),'A03D',true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Unit_XN[1]),'ANsy',false)
endfunction
function InitTrig_W_shizhibaopo takes nothing returns nothing
set gg_trg_W_shizhibaopo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_shizhibaopo,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_shizhibaopo,Condition(function Trig_W_shizhibaopo_Conditions))
call TriggerAddAction(gg_trg_W_shizhibaopo,function Trig_W_shizhibaopo_Actions)
endfunction
function Trig_W_shizhibaopo2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_XN[3])==true))then
return false
endif
return true
endfunction
function Trig_W_shizhibaopo2_Actions takes nothing returns nothing
if(Trig_W_shizhibaopo2_Func001C())then
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_XN[3]),40.00,GetUnitFacing(udg_Unit_XN[3]))
call SetUnitPositionLocFacingBJ(udg_Unit_XN[3],udg_ALL_PointPX,GetUnitFacing(udg_Unit_XN[3]))
call RemoveLocation(udg_ALL_PointPX)
else
call DisableTrigger(GetTriggeringTrigger())
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Unit_XN[1]),'A03D',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Unit_XN[1]),'ANsy',true)
endif
endfunction
function InitTrig_W_shizhibaopo2 takes nothing returns nothing
set gg_trg_W_shizhibaopo2=CreateTrigger()
call DisableTrigger(gg_trg_W_shizhibaopo2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_shizhibaopo2,0.04)
call TriggerAddAction(gg_trg_W_shizhibaopo2,function Trig_W_shizhibaopo2_Actions)
endfunction
function Trig_W_shizhibaopo3_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03D'))then
return false
endif
return true
endfunction
function Trig_W_shizhibaopo3_Func003Func006001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shizhibaopo3_Func003Func006001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_XN[1]))==true)
endfunction
function Trig_W_shizhibaopo3_Func003Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_XN[1]))==true))
endfunction
function Trig_W_shizhibaopo3_Func003Func006A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_XN[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_XN[1],'ANsy'))*I2R(GetHeroInt(udg_Unit_XN[1],true))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_shizhibaopo3_Func003Func013001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shizhibaopo3_Func003Func013001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_XN[1]))==true)
endfunction
function Trig_W_shizhibaopo3_Func003Func013001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_XN[1]))==true))
endfunction
function Trig_W_shizhibaopo3_Func003Func013A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_XN[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_XN[1],'ANsy'))*I2R(GetHeroInt(udg_Unit_XN[1],true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_shizhibaopo3_Func003C takes nothing returns boolean
if(not(udg_All_unit_bez[12]==true))then
return false
endif
return true
endfunction
function Trig_W_shizhibaopo3_Actions takes nothing returns nothing
call KillUnit(udg_Unit_XN[3])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ucrm',GetOwningPlayer(udg_Unit_XN[1]),GetUnitLoc(udg_Unit_XN[3]),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call RemoveLocation(GetUnitLoc(udg_Unit_XN[3]))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if(Trig_W_shizhibaopo3_Func003C())then
call CreateNUnitsAtLoc(1,'o001',GetOwningPlayer(udg_Unit_XN[1]),GetUnitLoc(udg_Unit_XN[3]),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call SetUnitScale(GetLastCreatedUnit(),1.20,1.20,1.20)
call RemoveLocation(GetUnitLoc(udg_Unit_XN[3]))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(280.00,GetUnitLoc(udg_Unit_XN[3]),Condition(function Trig_W_shizhibaopo3_Func003Func006001003)),function Trig_W_shizhibaopo3_Func003Func006A)
call RemoveLocation(GetUnitLoc(udg_Unit_XN[3]))
else
call CreateNUnitsAtLoc(1,'o001',GetOwningPlayer(udg_Unit_XN[1]),GetUnitLoc(udg_Unit_XN[3]),GetRandomDirectionDeg())
call SetUnitScale(GetLastCreatedUnit(),0.80,0.80,0.80)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call RemoveLocation(GetUnitLoc(udg_Unit_XN[3]))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(udg_Unit_XN[3]),Condition(function Trig_W_shizhibaopo3_Func003Func013001003)),function Trig_W_shizhibaopo3_Func003Func013A)
call RemoveLocation(GetUnitLoc(udg_Unit_XN[3]))
endif
endfunction
function InitTrig_W_shizhibaopo3 takes nothing returns nothing
set gg_trg_W_shizhibaopo3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_shizhibaopo3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_shizhibaopo3,Condition(function Trig_W_shizhibaopo3_Conditions))
call TriggerAddAction(gg_trg_W_shizhibaopo3,function Trig_W_shizhibaopo3_Actions)
endfunction
function Trig_R_tianzhi_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03A'))then
return false
endif
return true
endfunction
function Trig_R_tianzhi_Func001C takes nothing returns boolean
if(not(GetTriggerExecCount(GetTriggeringTrigger())<=1))then
return false
endif
return true
endfunction
function Trig_R_tianzhi_Func007C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_XN[1])==true))then
return false
endif
return true
endfunction
function Trig_R_tianzhi_Func009C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_XN[1])==true))then
return false
endif
return true
endfunction
function Trig_R_tianzhi_Actions takes nothing returns nothing
if(Trig_R_tianzhi_Func001C())then
call TriggerRegisterUnitLifeEvent(gg_trg_R_tianzhi2,GetTriggerUnit(),LESS_THAN,1.00)
else
endif
set udg_Unit_XN[1]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_XN[1],true)
call SetUnitAnimation(udg_Unit_XN[1],"morph")
call TriggerSleepAction(1.60)
if(Trig_R_tianzhi_Func007C())then
call PauseUnit(udg_Unit_XN[1],false)
call AddUnitAnimationProperties(udg_Unit_XN[1],"alternate",true)
set udg_All_unit_bez[12]=true
else
call PauseUnit(udg_Unit_XN[1],false)
endif
call TriggerSleepAction(20.00)
if(Trig_R_tianzhi_Func009C())then
call AddUnitAnimationProperties(udg_Unit_XN[1],"alternate",false)
set udg_All_unit_bez[12]=false
else
endif
endfunction
function InitTrig_R_tianzhi takes nothing returns nothing
set gg_trg_R_tianzhi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_tianzhi,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_tianzhi,Condition(function Trig_R_tianzhi_Conditions))
call TriggerAddAction(gg_trg_R_tianzhi,function Trig_R_tianzhi_Actions)
endfunction
function Trig_R_tianzhi2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Ewar'))then
return false
endif
return true
endfunction
function Trig_R_tianzhi2_Actions takes nothing returns nothing
call PauseUnit(GetTriggerUnit(),false)
call AddUnitAnimationProperties(GetTriggerUnit(),"alternate",false)
set udg_All_unit_bez[12]=false
endfunction
function InitTrig_R_tianzhi2 takes nothing returns nothing
set gg_trg_R_tianzhi2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_tianzhi2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_R_tianzhi2,Condition(function Trig_R_tianzhi2_Conditions))
call TriggerAddAction(gg_trg_R_tianzhi2,function Trig_R_tianzhi2_Actions)
endfunction
function Trig_D_shizhijin_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AOww'))then
return false
endif
return true
endfunction
function Trig_D_shizhijin_Func007C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_XN[1])==true))then
return false
endif
return true
endfunction
function Trig_D_shizhijin_Actions takes nothing returns nothing
set udg_Unit_XN[1]=GetTriggerUnit()
call TriggerSleepAction(0.05)
call PauseUnit(udg_Unit_XN[1],true)
call TriggerSleepAction(0.05)
call SetUnitAnimation(udg_Unit_XN[1],"morph")
call TriggerSleepAction(1.50)
if(Trig_D_shizhijin_Func007C())then
set udg_All_unit_shu[52]=0.00
set udg_All_unit_Dian[21]=GetUnitLoc(udg_Unit_XN[1])
set udg_All_unit_bez[13]=true
call SetUnitPathing(udg_Unit_XN[1],false)
call SetUnitTimeScale(udg_Unit_XN[1],2.00)
call SetUnitAnimationByIndex(udg_Unit_XN[1],12)
call SetUnitInvulnerable(udg_Unit_XN[1],true)
call UnitAddAbility(udg_Unit_XN[1],'Amrf')
call SetUnitFlyHeight(udg_Unit_XN[1],300.00,600.00)
call EnableTrigger(gg_trg_D_shizhijin2)
call EnableTrigger(gg_trg_D_shizhijin3)
else
call PauseUnit(udg_Unit_XN[1],false)
endif
endfunction
function InitTrig_D_shizhijin takes nothing returns nothing
set gg_trg_D_shizhijin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_shizhijin,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_shizhijin,Condition(function Trig_D_shizhijin_Conditions))
call TriggerAddAction(gg_trg_D_shizhijin,function Trig_D_shizhijin_Actions)
endfunction
function Trig_D_shizhijin2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[52]>=I2R((GetHeroInt(udg_Unit_XN[1],true)/10))))then
return false
endif
return true
endfunction
function Trig_D_shizhijin2_Actions takes nothing returns nothing
if(Trig_D_shizhijin2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call UnitRemoveBuffBJ('B014',udg_Unit_XN[1])
call AddUnitAnimationProperties(udg_Unit_XN[1],"alternate",false)
set udg_All_unit_bez[12]=false
set udg_All_unit_bez[13]=false
call SetUnitFlyHeight(udg_Unit_XN[1],0.00,300.00)
call SetUnitAnimation(udg_Unit_XN[1],"Morph alternate")
call SetUnitTimeScale(udg_Unit_XN[1],0.50)
call TriggerSleepAction(0.85)
call DisableTrigger(gg_trg_D_shizhijin3)
call SetUnitTimeScale(udg_Unit_XN[1],1.00)
call SetUnitPathing(udg_Unit_XN[1],true)
call RemoveLocation(udg_All_unit_Dian[21])
call SetUnitInvulnerable(udg_Unit_XN[1],false)
call UnitRemoveAbility(udg_Unit_XN[1],'Amrf')
call PauseUnit(udg_Unit_XN[1],false)
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_XN[1]),GetRandomReal(100.00,900.00),GetRandomDirectionDeg())
call CreateNUnitsAtLocFacingLocBJ(1,'e004',GetOwningPlayer(udg_Unit_XN[1]),udg_ALL_PointPX,GetUnitLoc(udg_Unit_XN[1]))
call RemoveLocation(udg_ALL_PointPX)
call UnitRemoveAbility(GetLastCreatedUnit(),'ANc1')
call UnitAddAbility(GetLastCreatedUnit(),'A039')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A039',11)
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852652,udg_All_unit_Dian[21])
set udg_All_unit_shu[52]=(udg_All_unit_shu[52]+1)
endif
endfunction
function InitTrig_D_shizhijin2 takes nothing returns nothing
set gg_trg_D_shizhijin2=CreateTrigger()
call DisableTrigger(gg_trg_D_shizhijin2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_shizhijin2,0.15)
call TriggerAddAction(gg_trg_D_shizhijin2,function Trig_D_shizhijin2_Actions)
endfunction
function Trig_D_shizhijin3_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[52]<=4.00))then
return false
endif
if(not(udg_All_unit_bez[13]==true))then
return false
endif
return true
endfunction
function Trig_D_shizhijin3_Func002C takes nothing returns boolean
if(not(udg_All_unit_bez[13]==false))then
return false
endif
return true
endfunction
function Trig_D_shizhijin3_Actions takes nothing returns nothing
if(Trig_D_shizhijin3_Func001C())then
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_XN[1]),8.00,(GetUnitFacing(udg_Unit_XN[1])+180.00))
call SetUnitPositionLocFacingBJ(udg_Unit_XN[1],udg_ALL_PointPX,GetUnitFacing(udg_Unit_XN[1]))
call RemoveLocation(udg_ALL_PointPX)
else
endif
if(Trig_D_shizhijin3_Func002C())then
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_XN[1]),5.00,GetUnitFacing(udg_Unit_XN[1]))
call SetUnitPositionLocFacingBJ(udg_Unit_XN[1],udg_ALL_PointPX,GetUnitFacing(udg_Unit_XN[1]))
call RemoveLocation(udg_ALL_PointPX)
else
endif
endfunction
function InitTrig_D_shizhijin3 takes nothing returns nothing
set gg_trg_D_shizhijin3=CreateTrigger()
call DisableTrigger(gg_trg_D_shizhijin3)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_shizhijin3,0.04)
call TriggerAddAction(gg_trg_D_shizhijin3,function Trig_D_shizhijin3_Actions)
endfunction
function Trig_Q_haolonghuo_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AOsw'))then
return false
endif
return true
endfunction
function Trig_Q_haolonghuo_Func014001003001001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_RS_shuidun)==false)
endfunction
function Trig_Q_haolonghuo_Func014001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_haolonghuo_Func014001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_RS_shuidun)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_haolonghuo_Func014001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZZhuodun[1]))==true)
endfunction
function Trig_Q_haolonghuo_Func014001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_RS_shuidun)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZZhuodun[1]))==true))
endfunction
function Trig_Q_haolonghuo_Func014A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZZhuodun[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_ZZhuodun[1],'AOsw'))*50.00),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call UnitDamageTargetBJ(udg_Unit_ZZhuodun[1],GetEnumUnit(),(I2R(GetItemLevel(GetItemOfTypeFromUnitBJ(udg_Unit_ZZhuodun[1],'ofir')))*300.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_haolonghuo_Actions takes nothing returns nothing
set udg_Unit_ZZhuodun[1]=GetTriggerUnit()
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZhuodun[1]),120.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZZhuodun[1]),GetSpellTargetLoc()))
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),udg_ALL_PointPX,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZZhuodun[1]),GetSpellTargetLoc()))
call RemoveLocation(udg_ALL_PointPX)
set udg_Unit_ZZhuodun[2]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_Q_haolonghuo2)
call TriggerSleepAction(0.15)
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZhuodun[2]),320.00,GetUnitFacing(udg_Unit_ZZhuodun[2]))
call CreateNUnitsAtLoc(1,'hpea',GetOwningPlayer(udg_Unit_ZZhuodun[1]),udg_ALL_PointPX,bj_UNIT_FACING)
set udg_Unit_ZZhuodun[4]=GetLastCreatedUnit()
call SetUnitTimeScale(GetLastCreatedUnit(),1.50)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',4.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_Q_haolonghuo_Func014001003)),function Trig_Q_haolonghuo_Func014A)
call DisableTrigger(gg_trg_Q_haolonghuo2)
call TriggerSleepAction(2.00)
call GroupClear(udg_All_unit_tm[1])
endfunction
function InitTrig_Q_haolonghuo takes nothing returns nothing
set gg_trg_Q_haolonghuo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_haolonghuo,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_haolonghuo,Condition(function Trig_Q_haolonghuo_Conditions))
call TriggerAddAction(gg_trg_Q_haolonghuo,function Trig_Q_haolonghuo_Actions)
endfunction
function Trig_Q_haolonghuo2_Func005A takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),60.00,GetUnitFacing(GetEnumUnit()))
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),60.00,GetUnitFacing(GetEnumUnit())))
call RemoveLocation(udg_ALL_PointPX)
endfunction
function Trig_Q_haolonghuo2_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'hcth',GetOwningPlayer(udg_Unit_ZZhuodun[1]),GetUnitLoc(udg_Unit_ZZhuodun[2]),(GetUnitFacing(udg_Unit_ZZhuodun[2])+GetRandomReal(-12.00,12.00)))
call RemoveLocation(GetUnitLoc(udg_Unit_ZZhuodun[2]))
call UnitApplyTimedLifeBJ(GetRandomReal(0.30,0.40),'BTLF',GetLastCreatedUnit())
call GroupAddUnitSimple(GetLastCreatedUnit(),udg_All_unit_tm[1])
call ForGroupBJ(udg_All_unit_tm[1],function Trig_Q_haolonghuo2_Func005A)
endfunction
function InitTrig_Q_haolonghuo2 takes nothing returns nothing
set gg_trg_Q_haolonghuo2=CreateTrigger()
call DisableTrigger(gg_trg_Q_haolonghuo2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_haolonghuo2,0.04)
call TriggerAddAction(gg_trg_Q_haolonghuo2,function Trig_Q_haolonghuo2_Actions)
endfunction
function Trig_W_qianniao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AOcl'))then
return false
endif
return true
endfunction
function Trig_W_qianniao_Func005C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_ZZ[1],'oli2'))==true))then
return false
endif
return true
endfunction
function Trig_W_qianniao_Actions takes nothing returns nothing
set udg_Unit_ZZ[1]=GetTriggerUnit()
set udg_Unit_ZZ[2]=GetSpellTargetUnit()
call SetUnitAnimation(udg_Unit_ZZ[1],"spell two")
call TriggerSleepAction(0.15)
if(Trig_W_qianniao_Func005C())then
call EnableTrigger(gg_trg_W_qianniao3)
else
endif
call PauseUnitBJ(true,udg_Unit_ZZ[1])
call SetUnitPathing(udg_Unit_ZZ[1],false)
call SetUnitTimeScalePercent(udg_Unit_ZZ[1],400.00)
call SetUnitAnimation(udg_Unit_ZZ[1],"spell three")
call EnableTrigger(gg_trg_W_qianniao2)
endfunction
function InitTrig_W_qianniao takes nothing returns nothing
set gg_trg_W_qianniao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_qianniao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_qianniao,Condition(function Trig_W_qianniao_Conditions))
call TriggerAddAction(gg_trg_W_qianniao,function Trig_W_qianniao_Actions)
endfunction
function Trig_W_qianniao2_Func001Func002Func002Func002001 takes nothing returns boolean
return(GetUnitTypeId(udg_Unit_ZZ[2])=='hkee')
endfunction
function Trig_W_qianniao2_Func001Func002Func002Func002002 takes nothing returns boolean
return(GetUnitTypeId(udg_Unit_ZZ[2])=='hcas')
endfunction
function Trig_W_qianniao2_Func001Func002Func002C takes nothing returns boolean
if(not(IsUnitInGroup(udg_Unit_ZZ[1],GetUnitsInRangeOfLocAll(260.00,GetUnitLoc(udg_Unit_ZZ[2])))==true))then
return false
endif
if(not GetBooleanOr((GetUnitTypeId(udg_Unit_ZZ[2])=='hkee'),(GetUnitTypeId(udg_Unit_ZZ[2])=='hcas')))then
return false
endif
return true
endfunction
function Trig_W_qianniao2_Func001Func002C takes nothing returns boolean
if((IsUnitDeadBJ(udg_Unit_ZZ[2])==true))then
return true
endif
if(Trig_W_qianniao2_Func001Func002Func002C())then
return true
endif
if((IsUnitInGroup(udg_Unit_ZZ[1],GetUnitsInRangeOfLocAll(100.00,GetUnitLoc(udg_Unit_ZZ[2])))==true))then
return true
endif
if((R2I(DistanceBetweenPoints(GetUnitLoc(udg_Unit_ZZ[1]),GetUnitLoc(udg_Unit_ZZ[2])))>1400))then
return true
endif
return false
endfunction
function Trig_W_qianniao2_Func001Func009Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_qianniao2_Func001Func009Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true)
endfunction
function Trig_W_qianniao2_Func001Func009Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true))
endfunction
function Trig_W_qianniao2_Func001Func009Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZZ[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_ZZ[1],true))*I2R(GetUnitAbilityLevelSwapped('AOcl',udg_Unit_ZZ[1]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_qianniao2_Func001Func009Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_qianniao2_Func001Func009Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true)
endfunction
function Trig_W_qianniao2_Func001Func009Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true))
endfunction
function Trig_W_qianniao2_Func001Func009Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZZ[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_ZZ[1],true))*I2R(GetUnitAbilityLevelSwapped('AOcl',udg_Unit_ZZ[1]))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_qianniao2_Func001Func009C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_ZZ[1],'oli2'))==true))then
return false
endif
return true
endfunction
function Trig_W_qianniao2_Func001C takes nothing returns boolean
if(not Trig_W_qianniao2_Func001Func002C())then
return false
endif
return true
endfunction
function Trig_W_qianniao2_Actions takes nothing returns nothing
if(Trig_W_qianniao2_Func001C())then
call DisableTrigger(gg_trg_W_qianniao3)
call DisableTrigger(GetTriggeringTrigger())
call SetUnitAnimation(udg_Unit_ZZ[1],"spell four")
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_ZZ[2]),"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[2]))
call DestroyEffect(GetLastCreatedEffectBJ())
if(Trig_W_qianniao2_Func001Func009C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_ZZ[2]),Condition(function Trig_W_qianniao2_Func001Func009Func005001003)),function Trig_W_qianniao2_Func001Func009Func005A)
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[2]))
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_ZZ[2]),Condition(function Trig_W_qianniao2_Func001Func009Func003001003)),function Trig_W_qianniao2_Func001Func009Func003A)
call RemoveLocation(GetUnitLoc(udg_Unit_ZZ[2]))
endif
call TriggerSleepAction(0.10)
call SetUnitTimeScalePercent(udg_Unit_ZZ[1],100.00)
call SetUnitPathing(udg_Unit_ZZ[1],true)
call PauseUnitBJ(false,udg_Unit_ZZ[1])
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZ[1]),20.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_ZZ[1]),GetUnitLoc(udg_Unit_ZZ[2])))
call SetUnitPositionLocFacingLocBJ(udg_Unit_ZZ[1],udg_ALL_PointPX,GetUnitLoc(udg_Unit_ZZ[2]))
call RemoveLocation(udg_ALL_PointPX)
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZ[1]),50.00,(GetUnitFacing(udg_Unit_ZZ[1])+90.00))
call AddSpecialEffectLocBJ(udg_ALL_PointPX,"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call RemoveLocation(udg_ALL_PointPX)
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZ[1]),50.00,(GetUnitFacing(udg_Unit_ZZ[1])+90.00))
call AddSpecialEffectLocBJ(udg_ALL_PointPX,"Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
call RemoveLocation(udg_ALL_PointPX)
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function InitTrig_W_qianniao2 takes nothing returns nothing
set gg_trg_W_qianniao2=CreateTrigger()
call DisableTrigger(gg_trg_W_qianniao2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_qianniao2,0.02)
call TriggerAddAction(gg_trg_W_qianniao2,function Trig_W_qianniao2_Actions)
endfunction
function Trig_W_qianniao3_Actions takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("left hand",udg_Unit_ZZ[1],"Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function InitTrig_W_qianniao3 takes nothing returns nothing
set gg_trg_W_qianniao3=CreateTrigger()
call DisableTrigger(gg_trg_W_qianniao3)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_qianniao3,0.04)
call TriggerAddAction(gg_trg_W_qianniao3,function Trig_W_qianniao3_Actions)
endfunction
function Trig_E_xielunyan_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("immolation")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Huth'))then
return false
endif
return true
endfunction
function Trig_E_xielunyan_Actions takes nothing returns nothing
call UnitAddAbility(GetTriggerUnit(),'A027')
endfunction
function InitTrig_E_xielunyan takes nothing returns nothing
set gg_trg_E_xielunyan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_xielunyan,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_E_xielunyan,Condition(function Trig_E_xielunyan_Conditions))
call TriggerAddAction(gg_trg_E_xielunyan,function Trig_E_xielunyan_Actions)
endfunction
function Trig_E_xielunyan2_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("unimmolation")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Huth'))then
return false
endif
return true
endfunction
function Trig_E_xielunyan2_Actions takes nothing returns nothing
call UnitRemoveAbility(GetTriggerUnit(),'A027')
endfunction
function InitTrig_E_xielunyan2 takes nothing returns nothing
set gg_trg_E_xielunyan2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_xielunyan2,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_E_xielunyan2,Condition(function Trig_E_xielunyan2_Conditions))
call TriggerAddAction(gg_trg_E_xielunyan2,function Trig_E_xielunyan2_Actions)
endfunction
function Trig_R_qianniaocaoju_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AHwe'))then
return false
endif
return true
endfunction
function Trig_R_qianniaocaoju_Func006C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_ZZ[1],'oli2'))==true))then
return false
endif
return true
endfunction
function Trig_R_qianniaocaoju_Actions takes nothing returns nothing
set udg_Unit_ZZ[1]=GetTriggerUnit()
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_ZZ[1],true)
call SetUnitAnimationByIndex(udg_Unit_ZZ[1],11)
call TriggerSleepAction(0.05)
if(Trig_R_qianniaocaoju_Func006C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZ[1]),80.00,((GetUnitFacing(udg_Unit_ZZ[1])-60.00)+(I2R(bj_forLoopAIndex)*20.00)))
call CreateNUnitsAtLoc(1,'hkni',GetTriggerPlayer(),udg_ALL_PointPX,((GetUnitFacing(udg_Unit_ZZ[1])-60.00)+(I2R(bj_forLoopAIndex)*20.00)))
call RemoveLocation(udg_ALL_PointPX)
call GroupAddUnit(udg_All_unit_tm[2],GetLastCreatedUnit())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZ[1]),80.00,((GetUnitFacing(udg_Unit_ZZ[1])-60.00)+(I2R(bj_forLoopAIndex)*30.00)))
call CreateNUnitsAtLoc(1,'hkni',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZ[1]),80.00,((GetUnitFacing(udg_Unit_ZZ[1])-60.00)+(I2R(bj_forLoopAIndex)*30.00))),((GetUnitFacing(udg_Unit_ZZ[1])-60.00)+(I2R(bj_forLoopAIndex)*30.00)))
call RemoveLocation(udg_ALL_PointPX)
call GroupAddUnit(udg_All_unit_tm[2],GetLastCreatedUnit())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endif
call EnableTrigger(gg_trg_R_qianniaocaoju2)
call EnableTrigger(gg_trg_R_qianniaocaoju3)
call TriggerSleepAction(0.60)
call DisableTrigger(gg_trg_R_qianniaocaoju2)
call DisableTrigger(gg_trg_R_qianniaocaoju3)
call PauseUnit(udg_Unit_ZZ[1],false)
call GroupClear(udg_All_unit_tm[2])
call GroupClear(udg_All_unit_tm[3])
endfunction
function InitTrig_R_qianniaocaoju takes nothing returns nothing
set gg_trg_R_qianniaocaoju=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_qianniaocaoju,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_qianniaocaoju,Condition(function Trig_R_qianniaocaoju_Conditions))
call TriggerAddAction(gg_trg_R_qianniaocaoju,function Trig_R_qianniaocaoju_Actions)
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func002001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func002001003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func002001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true)
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func002001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true))
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZZ[1],GetEnumUnit(),(5.00*I2R(GetHeroAgi(udg_Unit_ZZ[1],true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(udg_Unit_ZZ[1]),GetUnitLoc(GetEnumUnit()),bj_UNIT_FACING)
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call IssueTargetOrderById(GetLastCreatedUnit(),852111,GetEnumUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func004Func001Func002001001003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true)
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func004Func001Func002001001003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func004Func001Func002001001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func004Func001C takes nothing returns boolean
if((IsTerrainPathableBJ(GetUnitLoc(GetEnumUnit()),PATHING_TYPE_WALKABILITY)==true))then
return true
endif
if((IsUnitGroupEmptyBJ(GetUnitsInRangeOfLocMatching(130.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_R_qianniaocaoju2_Func001Func001Func004Func001Func002001001003)))!=true))then
return true
endif
return false
endfunction
function Trig_R_qianniaocaoju2_Func001Func001Func004C takes nothing returns boolean
if(not Trig_R_qianniaocaoju2_Func001Func001Func004Func001C())then
return false
endif
if(not(IsUnitAliveBJ(GetEnumUnit())==true))then
return false
endif
if(not(IsUnitInGroup(udg_Unit_ZZ[1],GetUnitsInRangeOfLocAll(320.00,GetUnitLoc(GetEnumUnit())))!=true))then
return false
endif
return true
endfunction
function Trig_R_qianniaocaoju2_Func001Func001C takes nothing returns boolean
if(not Trig_R_qianniaocaoju2_Func001Func001Func004C())then
return false
endif
return true
endfunction
function Trig_R_qianniaocaoju2_Func001A takes nothing returns nothing
if(Trig_R_qianniaocaoju2_Func001Func001C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_R_qianniaocaoju2_Func001Func001Func002001003)),function Trig_R_qianniaocaoju2_Func001Func001Func002A)
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call KillUnit(GetEnumUnit())
call GroupRemoveUnit(udg_All_unit_tm[2],GetEnumUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'hrif',GetOwningPlayer(udg_Unit_ZZ[1]),GetUnitLoc(GetEnumUnit()),GetRandomDirectionDeg())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.60)
call GroupAddUnit(udg_All_unit_tm[3],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),60.00,GetUnitFacing(GetEnumUnit()))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function Trig_R_qianniaocaoju2_Actions takes nothing returns nothing
call ForGroupBJ(udg_All_unit_tm[2],function Trig_R_qianniaocaoju2_Func001A)
endfunction
function InitTrig_R_qianniaocaoju2 takes nothing returns nothing
set gg_trg_R_qianniaocaoju2=CreateTrigger()
call DisableTrigger(gg_trg_R_qianniaocaoju2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_qianniaocaoju2,0.04)
call TriggerAddAction(gg_trg_R_qianniaocaoju2,function Trig_R_qianniaocaoju2_Actions)
endfunction
function Trig_R_qianniaocaoju3_Func001Func005001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_qianniaocaoju3_Func001Func005001003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true)
endfunction
function Trig_R_qianniaocaoju3_Func001Func005001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true))
endfunction
function Trig_R_qianniaocaoju3_Func001Func005001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true)
endfunction
function Trig_R_qianniaocaoju3_Func001Func005001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true))
endfunction
function Trig_R_qianniaocaoju3_Func001Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZZ[1],GetEnumUnit(),100.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_R_qianniaocaoju3_Func001A takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),75.00,GetUnitFacing(GetEnumUnit()))
call SetUnitPositionLoc(GetEnumUnit(),udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(100.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_R_qianniaocaoju3_Func001Func005001003)),function Trig_R_qianniaocaoju3_Func001Func005A)
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endfunction
function Trig_R_qianniaocaoju3_Actions takes nothing returns nothing
call ForGroupBJ(udg_All_unit_tm[3],function Trig_R_qianniaocaoju3_Func001A)
endfunction
function InitTrig_R_qianniaocaoju3 takes nothing returns nothing
set gg_trg_R_qianniaocaoju3=CreateTrigger()
call DisableTrigger(gg_trg_R_qianniaocaoju3)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_qianniaocaoju3,0.04)
call TriggerAddAction(gg_trg_R_qianniaocaoju3,function Trig_R_qianniaocaoju3_Actions)
endfunction
function Trig_D_qilin_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03L'))then
return false
endif
return true
endfunction
function Trig_D_qilin_Func002Func008Func002001003001001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_RS_shuidun)==false)
endfunction
function Trig_D_qilin_Func002Func008Func002001003001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_qilin_Func002Func008Func002001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_RS_shuidun)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_D_qilin_Func002Func008Func002001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZZhuodun[1]))==true)
endfunction
function Trig_D_qilin_Func002Func008Func002001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_RS_shuidun)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_ZZhuodun[1]))==true))
endfunction
function Trig_D_qilin_Func002Func008Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZZ[1],GetEnumUnit(),500.00,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_qilin_Func002Func008C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_ZZ[1],'ofir'))==true))then
return false
endif
return true
endfunction
function Trig_D_qilin_Func002Func025001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_qilin_Func002Func025001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true)
endfunction
function Trig_D_qilin_Func002Func025001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true))
endfunction
function Trig_D_qilin_Func002Func025A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZZ[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_ZZ[1],true))*7.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_qilin_Func002Func027001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_qilin_Func002Func027001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true)
endfunction
function Trig_D_qilin_Func002Func027001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_ZZ[1]))==true))
endfunction
function Trig_D_qilin_Func002Func027A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_ZZ[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_AGI,udg_Unit_ZZ[1],true))*8.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_qilin_Func002C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_ZZhuodun[4])==true))then
return false
endif
return true
endfunction
function Trig_D_qilin_Actions takes nothing returns nothing
set udg_Unit_ZZ[1]=GetTriggerUnit()
if(Trig_D_qilin_Func002C())then
set udg_Dian_ZZ[1]=GetUnitLoc(udg_Unit_ZZhuodun[4])
set udg_All_unit_shu[1]=0.00
if(Trig_D_qilin_Func002Func008C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(400.00,udg_Dian_ZZ[1],Condition(function Trig_D_qilin_Func002Func008Func002001003)),function Trig_D_qilin_Func002Func008Func002A)
call CreateNUnitsAtLoc(1,'nemi',GetTriggerPlayer(),udg_Dian_ZZ[1],bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),udg_Dian_ZZ[1],bj_UNIT_FACING)
call IssueImmediateOrderById(GetLastCreatedUnit(),852096)
else
endif
call TriggerSleepAction(0.05)
call PauseUnit(udg_Unit_ZZ[1],true)
call SetUnitAnimation(udg_Unit_ZZ[1],"spell five")
call SetUnitTimeScale(udg_Unit_ZZ[1],1.55)
call EnableTrigger(gg_trg_D_qilin2)
call TriggerSleepAction(1.00)
call CreateNUnitsAtLoc(1,'hmpr',GetTriggerPlayer(),udg_Dian_ZZ[1],bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.10)
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_ZZ[1]),50.00)
call TriggerSleepAction(0.25)
call SetUnitTimeScale(udg_Unit_ZZ[1],1.00)
call DisableTrigger(gg_trg_D_qilin2)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(udg_Dian_ZZ[1],50.00,udg_All_unit_shu[1])
call CreateNUnitsAtLoc(1,'hsor',GetTriggerPlayer(),udg_ALL_PointPX,GetUnitFacing(udg_Unit_ZZ[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.10)
call SetUnitScale(GetLastCreatedUnit(),6.00,6.00,6.00)
call CreateNUnitsAtLoc(1,'hmtt',GetTriggerPlayer(),udg_ALL_PointPX,GetUnitFacing(udg_Unit_ZZ[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.10)
call SetUnitScale(GetLastCreatedUnit(),6.00,6.00,6.00)
call RemoveLocation(udg_ALL_PointPX)
set udg_All_unit_shu[1]=(udg_All_unit_shu[1]+120.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set udg_All_unit_shu[1]=0.00
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=9
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(udg_Dian_ZZ[1],360.00,udg_All_unit_shu[1])
call CreateNUnitsAtLoc(1,'hsor',GetTriggerPlayer(),udg_ALL_PointPX,GetUnitFacing(udg_Unit_ZZ[1]))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.10)
call SetUnitScale(GetLastCreatedUnit(),6.00,6.00,6.00)
call RemoveLocation(udg_ALL_PointPX)
set udg_All_unit_shu[1]=(udg_All_unit_shu[1]+40.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(250.00,udg_Dian_ZZ[1],Condition(function Trig_D_qilin_Func002Func025001003)),function Trig_D_qilin_Func002Func025A)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(450.00,udg_Dian_ZZ[1],Condition(function Trig_D_qilin_Func002Func027001003)),function Trig_D_qilin_Func002Func027A)
call PauseUnit(udg_Unit_ZZ[1],false)
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_ZZ[1]))
else
call CreateTextTagUnitBJ("空气中温度太低,无法使用",udg_Unit_ZZ[1],0.00,10.00,100.00,0.00,0.00,0)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),150.00,GetRandomReal(80.00,100.00))
endif
endfunction
function InitTrig_D_qilin takes nothing returns nothing
set gg_trg_D_qilin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_qilin,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_qilin,Condition(function Trig_D_qilin_Conditions))
call TriggerAddAction(gg_trg_D_qilin,function Trig_D_qilin_Actions)
endfunction
function Trig_D_qilin2_Actions takes nothing returns nothing
set udg_ALL_PointPX=PolarProjectionBJ(udg_Dian_ZZ[1],GetRandomReal(40.00,90.00),GetRandomDirectionDeg())
call CreateNUnitsAtLocFacingLocBJ(1,'hgyr',GetOwningPlayer(udg_Unit_ZZ[1]),udg_ALL_PointPX,PolarProjectionBJ(GetUnitLoc(udg_Unit_ZZ[1]),256,GetRandomDirectionDeg()))
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.10)
set udg_ALL_PointPX=PolarProjectionBJ(udg_Dian_ZZ[1],GetRandomReal(30.00,90.00),GetRandomDirectionDeg())
call CreateNUnitsAtLocFacingLocBJ(1,'hgry',GetOwningPlayer(udg_Unit_ZZ[1]),udg_ALL_PointPX,GetUnitLoc(udg_Unit_ZZ[1]))
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',0.10)
endfunction
function InitTrig_D_qilin2 takes nothing returns nothing
set gg_trg_D_qilin2=CreateTrigger()
call DisableTrigger(gg_trg_D_qilin2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_qilin2,0.08)
call TriggerAddAction(gg_trg_D_qilin2,function Trig_D_qilin2_Actions)
endfunction
function Trig_Q_haoyanqiu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACbc'))then
return false
endif
return true
endfunction
function Trig_Q_haoyanqiu_Actions takes nothing returns nothing
set udg_Unit_U[1]=GetTriggerUnit()
set udg_All_unit_Dian[14]=GetUnitLoc(udg_Unit_U[1])
set udg_All_unit_shu[30]=1.80
set udg_All_unit_shu[31]=0.00
call CreateNUnitsAtLoc(1,'nhem',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_U[1]),60.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_U[1]),GetSpellTargetLoc())),AngleBetweenPoints(GetUnitLoc(udg_Unit_U[1]),GetSpellTargetLoc()))
call SetUnitTimeScale(GetLastCreatedUnit(),1.80)
set udg_Unit_U[3]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_Q_haoyanqiu2)
endfunction
function InitTrig_Q_haoyanqiu takes nothing returns nothing
set gg_trg_Q_haoyanqiu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_haoyanqiu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_haoyanqiu,Condition(function Trig_Q_haoyanqiu_Conditions))
call TriggerAddAction(gg_trg_Q_haoyanqiu,function Trig_Q_haoyanqiu_Actions)
endfunction
function Trig_Q_haoyanqiu2_Func001Func001C takes nothing returns boolean
if((IsTerrainPathableBJ(GetUnitLoc(udg_Unit_U[3]),PATHING_TYPE_WALKABILITY)==true))then
return true
endif
if((udg_All_unit_shu[31]>=100.00))then
return true
endif
return false
endfunction
function Trig_Q_haoyanqiu2_Func001Func003C takes nothing returns boolean
if(not(udg_All_unit_shu[30]<=2.80))then
return false
endif
return true
endfunction
function Trig_Q_haoyanqiu2_Func001Func006001003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true)
endfunction
function Trig_Q_haoyanqiu2_Func001Func006001003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_haoyanqiu2_Func001Func006001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_Q_haoyanqiu2_Func001Func006Func001Func002C takes nothing returns boolean
if(not(IsUnitInGroup(GetEnumUnit(),udg_All_unit_tm[20])==true))then
return false
endif
return true
endfunction
function Trig_Q_haoyanqiu2_Func001Func006Func001C takes nothing returns boolean
if(not(IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==true))then
return false
endif
return true
endfunction
function Trig_Q_haoyanqiu2_Func001Func006A takes nothing returns nothing
if(Trig_Q_haoyanqiu2_Func001Func006Func001C())then
set udg_All_unit_shu[31]=(udg_All_unit_shu[31]+100.00)
else
if(Trig_Q_haoyanqiu2_Func001Func006Func001Func002C())then
else
call AddSpecialEffectTargetUnitBJ("origin",GetEnumUnit(),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[20],GetEnumUnit())
call UnitDamageTarget(udg_Unit_U[1],GetEnumUnit(),(40.00*I2R(GetUnitAbilityLevel(udg_Unit_U[1],'ACbc'))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
set udg_All_unit_shu[31]=(udg_All_unit_shu[31]+12.00)
endif
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),18.00,AngleBetweenPoints(udg_All_unit_Dian[14],GetUnitLoc(GetEnumUnit()))))
endif
endfunction
function Trig_Q_haoyanqiu2_Func001Func014001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_haoyanqiu2_Func001Func014001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true)
endfunction
function Trig_Q_haoyanqiu2_Func001Func014001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true))
endfunction
function Trig_Q_haoyanqiu2_Func001Func014A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_U[1],GetEnumUnit(),(I2R(GetUnitAbilityLevel(udg_Unit_U[1],'ACbc'))*(0.50*I2R(GetHeroStr(udg_Unit_U[1],true)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_haoyanqiu2_Func001C takes nothing returns boolean
if(not Trig_Q_haoyanqiu2_Func001Func001C())then
return false
endif
return true
endfunction
function Trig_Q_haoyanqiu2_Actions takes nothing returns nothing
if(Trig_Q_haoyanqiu2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(udg_All_unit_Dian[14])
call KillUnit(udg_Unit_U[3])
call CreateNUnitsAtLoc(1,'hbsh',GetOwningPlayer(udg_Unit_U[1]),GetUnitLoc(udg_Unit_U[3]),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ucrm',GetOwningPlayer(udg_Unit_U[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_U[3]),35.00,(90.00*I2R(bj_forLoopAIndex))),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.50)
call SetUnitTimeScale(GetLastCreatedUnit(),1.80)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.00,GetUnitLoc(udg_Unit_U[3]),Condition(function Trig_Q_haoyanqiu2_Func001Func014001003)),function Trig_Q_haoyanqiu2_Func001Func014A)
call GroupClear(udg_All_unit_tm[20])
else
set udg_All_unit_shu[31]=(udg_All_unit_shu[31]+1.00)
if(Trig_Q_haoyanqiu2_Func001Func003C())then
call SetUnitScale(udg_Unit_U[3],udg_All_unit_shu[30],udg_All_unit_shu[30],udg_All_unit_shu[30])
set udg_All_unit_shu[30]=(udg_All_unit_shu[30]+0.05)
else
endif
call SetUnitPositionLoc(udg_Unit_U[3],PolarProjectionBJ(GetUnitLoc(udg_Unit_U[3]),35.00,GetUnitFacing(udg_Unit_U[3])))
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(180.00,GetUnitLoc(udg_Unit_U[3]),Condition(function Trig_Q_haoyanqiu2_Func001Func006001003)),function Trig_Q_haoyanqiu2_Func001Func006A)
endif
endfunction
function InitTrig_Q_haoyanqiu2 takes nothing returns nothing
set gg_trg_Q_haoyanqiu2=CreateTrigger()
call DisableTrigger(gg_trg_Q_haoyanqiu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Q_haoyanqiu2,0.02)
call TriggerAddAction(gg_trg_Q_haoyanqiu2,function Trig_Q_haoyanqiu2_Actions)
endfunction
function Trig_W_yasan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A01B'))then
return false
endif
return true
endfunction
function Trig_W_yasan_Actions takes nothing returns nothing
set udg_Unit_U[1]=GetTriggerUnit()
set udg_Unit_U[2]=GetSpellTargetUnit()
call TriggerSleepAction(0.10)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=20
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'uobs',GetOwningPlayer(udg_Unit_U[1]),GetUnitLoc(udg_Unit_U[1]),((GetUnitFacing(udg_Unit_U[1])+GetRandomReal(50.00,310.00))+0.00))
call SetUnitTimeScale(GetLastCreatedUnit(),1.50)
call SetUnitFlyHeight(GetLastCreatedUnit(),GetRandomReal(30.00,80.00),999999.00)
call SetUnitUserData(GetLastCreatedUnit(),(15+bj_forLoopAIndex))
call GroupAddUnit(udg_All_unit_tm[21],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_W_yasan2)
endfunction
function InitTrig_W_yasan takes nothing returns nothing
set gg_trg_W_yasan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_yasan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_yasan,Condition(function Trig_W_yasan_Conditions))
call TriggerAddAction(gg_trg_W_yasan,function Trig_W_yasan_Actions)
endfunction
function Trig_W_yasan2_Func001Func002Func001C takes nothing returns boolean
if(not(UnitHasBuffBJ(udg_Unit_U[2],'B00N')==true))then
return false
endif
return true
endfunction
function Trig_W_yasan2_Func001Func002C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_U[1])==true))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_U[2])==true))then
return false
endif
if(not(UnitHasBuffBJ(udg_Unit_U[1],'B001')==true))then
return false
endif
return true
endfunction
function Trig_W_yasan2_Func001Func003Func001Func009001002003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_yasan2_Func001Func003Func001Func009001002003002001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_W_yasan2_Func001Func003Func001Func009001002003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true)
endfunction
function Trig_W_yasan2_Func001Func003Func001Func009001002003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true))
endfunction
function Trig_W_yasan2_Func001Func003Func001Func009001002003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true))))
endfunction
function Trig_W_yasan2_Func001Func003Func001Func009A takes nothing returns nothing
call IssueTargetOrderById(GetLastCreatedUnit(),852222,GetEnumUnit())
endfunction
function Trig_W_yasan2_Func001Func003Func001C takes nothing returns boolean
if(not(GetUnitUserData(GetEnumUnit())<=3))then
return false
endif
return true
endfunction
function Trig_W_yasan2_Func001Func003A takes nothing returns nothing
if(Trig_W_yasan2_Func001Func003Func001C())then
call KillUnit(GetEnumUnit())
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLocFacingLocBJ(1,'e001',GetOwningPlayer(udg_Unit_U[1]),GetUnitLoc(GetEnumUnit()),GetUnitLoc(udg_Unit_U[2]))
call SetUnitScale(GetLastCreatedUnit(),3.00,3.00,3.00)
call SetUnitVertexColor(GetLastCreatedUnit(),0,0,0,255)
call SetUnitFlyHeight(GetLastCreatedUnit(),GetUnitFlyHeight(GetEnumUnit()),999999.00)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'ACdc',GetUnitAbilityLevel(udg_Unit_U[1],'A01B'))
call ForGroupBJ(GetRandomSubGroup(1,GetUnitsInRangeOfLocMatching(230.00,GetUnitLoc(udg_Unit_U[2]),Condition(function Trig_W_yasan2_Func001Func003Func001Func009001002003))),function Trig_W_yasan2_Func001Func003Func001Func009A)
call DestroyGroup(GetLastCreatedGroup())
call GroupRemoveUnit(udg_All_unit_tm[21],GetEnumUnit())
else
call SetUnitPositionLoc(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),GetUnitFacing(GetEnumUnit())))
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())-1))
call SetUnitFlyHeight(GetEnumUnit(),(GetUnitFlyHeight(GetEnumUnit())+15.00),99999.00)
call RemoveLocation(PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),I2R(GetUnitUserData(GetEnumUnit())),GetUnitFacing(GetEnumUnit())))
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
endif
endfunction
function Trig_W_yasan2_Func001C takes nothing returns boolean
if(not(CountUnitsInGroup(udg_All_unit_tm[21])<=0))then
return false
endif
return true
endfunction
function Trig_W_yasan2_Actions takes nothing returns nothing
if(Trig_W_yasan2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
if(Trig_W_yasan2_Func001Func002C())then
if(Trig_W_yasan2_Func001Func002Func001C())then
call CreateNUnitsAtLocFacingLocBJ(1,'uaco',GetOwningPlayer(udg_Unit_U[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_U[2]),120.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_U[1]),GetUnitLoc(udg_Unit_U[2]))),GetUnitLoc(udg_Unit_U[2]))
set udg_Unit_U[4]=GetLastCreatedUnit()
call SetUnitUserData(udg_Unit_U[4],250)
call SetUnitAnimation(udg_Unit_U[4],"spell")
call EnableTrigger(gg_trg_W_yasan3)
else
call UnitAddAbility(udg_Unit_U[1],'A01J')
call TriggerSleepAction(0.05)
call SetUnitTimeScale(udg_Unit_U[1],1.50)
call SetUnitAnimationByIndex(udg_Unit_U[1],2)
call SetUnitPositionLocFacingBJ(udg_Unit_U[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_U[2]),120.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_U[1]),GetUnitLoc(udg_Unit_U[2]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_U[1]),GetUnitLoc(udg_Unit_U[2])))
call UnitDamageTarget(udg_Unit_U[1],udg_Unit_U[2],(I2R(GetUnitAbilityLevel(udg_Unit_U[1],'A01D'))*I2R(GetHeroAgi(udg_Unit_U[1],true))),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_U[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitRemoveAbility(udg_Unit_U[1],'A01J')
call TriggerSleepAction(0.20)
call SetUnitTimeScale(udg_Unit_U[1],1.00)
endif
else
endif
else
call ForGroupBJ(udg_All_unit_tm[21],function Trig_W_yasan2_Func001Func003A)
endif
endfunction
function InitTrig_W_yasan2 takes nothing returns nothing
set gg_trg_W_yasan2=CreateTrigger()
call DisableTrigger(gg_trg_W_yasan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_yasan2,0.04)
call TriggerAddAction(gg_trg_W_yasan2,function Trig_W_yasan2_Actions)
endfunction
function Trig_W_yasan3_Func001Func009001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_yasan3_Func001Func009001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true)
endfunction
function Trig_W_yasan3_Func001Func009001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true))
endfunction
function Trig_W_yasan3_Func001Func009A takes nothing returns nothing
call UnitDamageTarget(udg_Unit_U[1],GetEnumUnit(),(I2R(GetHeroAgi(udg_Unit_U[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_U[1],'A01D'))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_yasan3_Func001C takes nothing returns boolean
if(not(GetUnitUserData(udg_Unit_U[4])<=10))then
return false
endif
return true
endfunction
function Trig_W_yasan3_Actions takes nothing returns nothing
if(Trig_W_yasan3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call KillUnit(udg_Unit_U[4])
call CreateNUnitsAtLoc(1,'ugrm',GetOwningPlayer(udg_Unit_U[1]),GetUnitLoc(udg_Unit_U[4]),bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
call CreateNUnitsAtLoc(1,'hbsh',GetOwningPlayer(udg_Unit_U[1]),GetUnitLoc(udg_Unit_U[4]),GetRandomDirectionDeg())
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(320.00,GetUnitLoc(udg_Unit_U[4]),Condition(function Trig_W_yasan3_Func001Func009001003)),function Trig_W_yasan3_Func001Func009A)
else
call SetUnitVertexColor(udg_Unit_U[4],GetUnitUserData(udg_Unit_U[4]),GetUnitUserData(udg_Unit_U[4]),GetUnitUserData(udg_Unit_U[4]),GetUnitUserData(udg_Unit_U[4]))
call SetUnitUserData(udg_Unit_U[4],(GetUnitUserData(udg_Unit_U[4])-10))
endif
endfunction
function InitTrig_W_yasan3 takes nothing returns nothing
set gg_trg_W_yasan3=CreateTrigger()
call DisableTrigger(gg_trg_W_yasan3)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_yasan3,0.04)
call TriggerAddAction(gg_trg_W_yasan3,function Trig_W_yasan3_Actions)
endfunction
function Trig_E_whtxielunyan_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("immolation")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Edem'))then
return false
endif
return true
endfunction
function Trig_E_whtxielunyan_Func001C takes nothing returns boolean
if(not(udg_All_unit_bez[1]==true))then
return false
endif
return true
endfunction
function Trig_E_whtxielunyan_Func004C takes nothing returns boolean
if(not(GetUnitAbilityLevel(GetTriggerUnit(),'A01I')>0))then
return false
endif
return true
endfunction
function Trig_E_whtxielunyan_Func005C takes nothing returns boolean
if(not(GetUnitAbilityLevel(GetTriggerUnit(),'A01Q')>0))then
return false
endif
return true
endfunction
function Trig_E_whtxielunyan_Actions takes nothing returns nothing
if(Trig_E_whtxielunyan_Func001C())then
else
set udg_All_unit_bez[1]=true
call TriggerRegisterUnitManaEvent(gg_trg_E_whtxielunyan3,GetTriggerUnit(),LESS_THAN,1.00)
endif
call UnitAddAbility(GetTriggerUnit(),'A027')
if(Trig_E_whtxielunyan_Func004C())then
call SetUnitAbilityLevel(GetTriggerUnit(),'A027',4)
call SetUnitAbilityLevel(udg_Unit_U[1],'A01O',GetUnitAbilityLevel(udg_Unit_U[1],'A01I'))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A01O',true)
else
call SetUnitAbilityLevel(GetTriggerUnit(),'A027',3)
endif
if(Trig_E_whtxielunyan_Func005C())then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'AChw',true)
else
endif
endfunction
function InitTrig_E_whtxielunyan takes nothing returns nothing
set gg_trg_E_whtxielunyan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_whtxielunyan,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_E_whtxielunyan,Condition(function Trig_E_whtxielunyan_Conditions))
call TriggerAddAction(gg_trg_E_whtxielunyan,function Trig_E_whtxielunyan_Actions)
endfunction
function Trig_E_whtxielunyan2_Conditions takes nothing returns boolean
if(not(GetIssuedOrderIdBJ()==String2OrderIdBJ("unimmolation")))then
return false
endif
if(not(GetUnitTypeId(GetTriggerUnit())=='Edem'))then
return false
endif
return true
endfunction
function Trig_E_whtxielunyan2_Actions takes nothing returns nothing
call UnitRemoveAbility(GetTriggerUnit(),'A027')
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A01O',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'AChw',false)
endfunction
function InitTrig_E_whtxielunyan2 takes nothing returns nothing
set gg_trg_E_whtxielunyan2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_whtxielunyan2,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(gg_trg_E_whtxielunyan2,Condition(function Trig_E_whtxielunyan2_Conditions))
call TriggerAddAction(gg_trg_E_whtxielunyan2,function Trig_E_whtxielunyan2_Actions)
endfunction
function Trig_E_whtxielunyan3_Actions takes nothing returns nothing
call UnitRemoveAbility(GetTriggerUnit(),'A027')
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A01O',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'AChw',false)
endfunction
function InitTrig_E_whtxielunyan3 takes nothing returns nothing
set gg_trg_E_whtxielunyan3=CreateTrigger()
call TriggerAddAction(gg_trg_E_whtxielunyan3,function Trig_E_whtxielunyan3_Actions)
endfunction
function Trig_D_tianzhao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AChw'))then
return false
endif
return true
endfunction
function Trig_D_tianzhao_Actions takes nothing returns nothing
set udg_Unit_U[1]=GetTriggerUnit()
set udg_All_unit_shu[32]=1.00
set udg_All_unit_Dian[15]=GetSpellTargetLoc()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'uske',GetOwningPlayer(udg_Unit_U[1]),GetSpellTargetLoc(),GetRandomDirectionDeg())
call GroupAddUnit(udg_All_unit_tm[22],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_D_tianzhao2)
endfunction
function InitTrig_D_tianzhao takes nothing returns nothing
set gg_trg_D_tianzhao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_tianzhao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_tianzhao,Condition(function Trig_D_tianzhao_Conditions))
call TriggerAddAction(gg_trg_D_tianzhao,function Trig_D_tianzhao_Actions)
endfunction
function Trig_D_tianzhao2_Func001Func004001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_tianzhao2_Func001Func004001003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_tianzhao2_Func001Func004001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_D_tianzhao2_Func001Func004001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true)
endfunction
function Trig_D_tianzhao2_Func001Func004001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_U[1]))==true))
endfunction
function Trig_D_tianzhao2_Func001Func004A takes nothing returns nothing
call UnitDamageTarget(udg_Unit_U[1],GetEnumUnit(),(13.00*I2R(GetHeroInt(udg_Unit_U[1],true))),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function Trig_D_tianzhao2_Func001Func010A takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Trig_D_tianzhao2_Func001Func014C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_U[1])==true))then
return false
endif
return true
endfunction
function Trig_D_tianzhao2_Func001Func015A takes nothing returns nothing
call SetUnitTimeScale(GetEnumUnit(),udg_All_unit_shu[32])
endfunction
function Trig_D_tianzhao2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[32]>=3.00))then
return false
endif
return true
endfunction
function Trig_D_tianzhao2_Actions takes nothing returns nothing
if(Trig_D_tianzhao2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call TerrainDeformationRippleBJ(3.00,true,udg_All_unit_Dian[15],400.00,400.00,200.00,1,200.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(320.00,udg_All_unit_Dian[15],Condition(function Trig_D_tianzhao2_Func001Func004001003)),function Trig_D_tianzhao2_Func001Func004A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'ogrk',GetOwningPlayer(udg_Unit_U[1]),udg_All_unit_Dian[15],GetRandomDirectionDeg())
call SetUnitScale(GetLastCreatedUnit(),10.00,10.00,10.00)
call SetUnitTimeScale(GetLastCreatedUnit(),0.50)
call KillUnit(GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'uskm',GetOwningPlayer(udg_Unit_U[1]),PolarProjectionBJ(udg_All_unit_Dian[15],80.00,(120.00*I2R(bj_forLoopAIndex))),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',(I2R(GetHeroInt(udg_Unit_U[1],true))/15.00))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(0.04)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'uskm',GetOwningPlayer(udg_Unit_U[1]),PolarProjectionBJ(udg_All_unit_Dian[15],180.00,(60.00*I2R(bj_forLoopAIndex))),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',(I2R(GetHeroInt(udg_Unit_U[1],true))/15.00))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(0.04)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'uskm',GetOwningPlayer(udg_Unit_U[1]),PolarProjectionBJ(udg_All_unit_Dian[15],260.00,(30.00*I2R(bj_forLoopAIndex))),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',(I2R(GetHeroInt(udg_Unit_U[1],true))/15.00))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call ForGroupBJ(udg_All_unit_tm[22],function Trig_D_tianzhao2_Func001Func010A)
call GroupClear(udg_All_unit_tm[22])
call RemoveLocation(udg_All_unit_Dian[15])
call TriggerSleepAction(5.00)
if(Trig_D_tianzhao2_Func001Func014C())then
call SetUnitManaBJ(udg_Unit_U[1],(GetUnitState(udg_Unit_U[1],UNIT_STATE_MANA)-(GetUnitState(udg_Unit_U[1],UNIT_STATE_MAX_MANA)*0.20)))
call AddSpecialEffectTargetUnitBJ("chest",udg_Unit_U[1],"Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateNUnitsAtLoc(1,'e000',Player(PLAYER_NEUTRAL_PASSIVE),GetUnitLoc(udg_Unit_U[1]),bj_UNIT_FACING)
call IssueTargetOrderById(GetLastCreatedUnit(),852189,udg_Unit_U[1])
else
endif
else
call ForGroupBJ(udg_All_unit_tm[22],function Trig_D_tianzhao2_Func001Func015A)
set udg_All_unit_shu[32]=(udg_All_unit_shu[32]+0.05)
endif
endfunction
function InitTrig_D_tianzhao2 takes nothing returns nothing
set gg_trg_D_tianzhao2=CreateTrigger()
call DisableTrigger(gg_trg_D_tianzhao2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_tianzhao2,0.04)
call TriggerAddAction(gg_trg_D_tianzhao2,function Trig_D_tianzhao2_Actions)
endfunction
function Trig_D_tianzhao3_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='uskm'))then
return false
endif
return true
endfunction
function Trig_D_tianzhao3_Actions takes nothing returns nothing
call SetUnitScale(GetTriggerUnit(),3.50,3.50,3.50)
endfunction
function InitTrig_D_tianzhao3 takes nothing returns nothing
set gg_trg_D_tianzhao3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_tianzhao3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_D_tianzhao3,Condition(function Trig_D_tianzhao3_Conditions))
call TriggerAddAction(gg_trg_D_tianzhao3,function Trig_D_tianzhao3_Actions)
endfunction
function Trig_Q_shuisandan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACc2'))then
return false
endif
return true
endfunction
function Trig_Q_shuisandan_Func004Func001C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'ofro'))==true))then
return false
endif
return true
endfunction
function Trig_Q_shuisandan_Func004C takes nothing returns boolean
if(not(GetUnitManaPercent(udg_Unit_GJ[1])>=50.00))then
return false
endif
return true
endfunction
function Trig_Q_shuisandan_Actions takes nothing returns nothing
set udg_Unit_GJ[1]=GetTriggerUnit()
set udg_All_unit_shu[19]=AngleBetweenPoints(GetUnitLoc(udg_Unit_GJ[1]),GetSpellTargetLoc())
if(Trig_Q_shuisandan_Func004C())then
if(Trig_Q_shuisandan_Func004Func001C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'e003',GetOwningPlayer(udg_Unit_GJ[1]),GetUnitLoc(udg_Unit_GJ[1]),0.00)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AUcs',GetUnitAbilityLevel(GetTriggerUnit(),'ACc2'))
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852218,PolarProjectionBJ(GetUnitLoc(udg_Unit_GJ[1]),300.00,(udg_All_unit_shu[19]+(-16.00+(I2R(bj_forLoopAIndex)*8.00)))))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'e003',GetOwningPlayer(udg_Unit_GJ[1]),GetUnitLoc(udg_Unit_GJ[1]),0.00)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AUcs',GetUnitAbilityLevel(GetTriggerUnit(),'ACc2'))
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852218,PolarProjectionBJ(GetUnitLoc(udg_Unit_GJ[1]),300.00,(udg_All_unit_shu[19]+(-30.00+(I2R(bj_forLoopAIndex)*20.00)))))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endif
else
call CreateNUnitsAtLoc(1,'e003',GetTriggerPlayer(),GetUnitLoc(udg_Unit_GJ[1]),0.00)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'AUcs',GetUnitAbilityLevel(GetTriggerUnit(),'ACc2'))
call IssuePointOrderByIdLoc(GetLastCreatedUnit(),852218,PolarProjectionBJ(GetUnitLoc(udg_Unit_GJ[1]),300.00,(AngleBetweenPoints(GetUnitLoc(udg_Unit_GJ[1]),GetSpellTargetLoc())+0.00)))
endif
endfunction
function InitTrig_Q_shuisandan takes nothing returns nothing
set gg_trg_Q_shuisandan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_shuisandan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_shuisandan,Condition(function Trig_Q_shuisandan_Conditions))
call TriggerAddAction(gg_trg_Q_shuisandan,function Trig_Q_shuisandan_Actions)
endfunction
function Trig_W_guixiao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANfb'))then
return false
endif
return true
endfunction
function Trig_W_guixiao_Func007C takes nothing returns boolean
if(not(GetUnitManaPercent(udg_Unit_GJ[1])>=50.00))then
return false
endif
if(not(IsUnitAliveBJ(udg_Unit_GJ[2])==true))then
return false
endif
return true
endfunction
function Trig_W_guixiao_Actions takes nothing returns nothing
set udg_Unit_GJ[1]=GetTriggerUnit()
set udg_Unit_GJ[2]=GetSpellTargetUnit()
set udg_All_unit_shu[55]=0.00
call UnitDamageTargetBJ(udg_Unit_GJ[1],udg_Unit_GJ[2],(I2R(GetUnitAbilityLevel(udg_Unit_GJ[1],'ANfb'))*(0.40*I2R(GetHeroStr(udg_Unit_GJ[1],true)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_GJ[2]),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
if(Trig_W_guixiao_Func007C())then
call EnableTrigger(gg_trg_W_guixiao2)
call UnitAddAbility(udg_Unit_GJ[1],'A00I')
call TriggerSleepAction(0.10)
call UnitRemoveAbility(udg_Unit_GJ[1],'A00I')
call PauseUnit(udg_Unit_GJ[1],true)
call SetUnitTimeScale(udg_Unit_GJ[1],1.50)
call EnableTrigger(gg_trg_W_guixiao3)
else
call EnableTrigger(gg_trg_W_guixiao2)
call TriggerSleepAction(0.20)
call DisableTrigger(gg_trg_W_guixiao2)
endif
endfunction
function InitTrig_W_guixiao takes nothing returns nothing
set gg_trg_W_guixiao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_guixiao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_guixiao,Condition(function Trig_W_guixiao_Conditions))
call TriggerAddAction(gg_trg_W_guixiao,function Trig_W_guixiao_Actions)
endfunction
function Trig_W_guixiao2_Actions takes nothing returns nothing
call SetUnitPositionLocFacingBJ(udg_Unit_GJ[2],PolarProjectionBJ(GetUnitLoc(udg_Unit_GJ[2]),15.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_GJ[1]),GetUnitLoc(udg_Unit_GJ[2]))),GetUnitFacing(udg_Unit_GJ[2]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_GJ[2]),"Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function InitTrig_W_guixiao2 takes nothing returns nothing
set gg_trg_W_guixiao2=CreateTrigger()
call DisableTrigger(gg_trg_W_guixiao2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_guixiao2,0.04)
call TriggerAddAction(gg_trg_W_guixiao2,function Trig_W_guixiao2_Actions)
endfunction
function Trig_W_guixiao3_Func001Func007C takes nothing returns boolean
if(not(GetUnitTypeId(udg_Unit_GJ[1])=='Ocbh'))then
return false
endif
return true
endfunction
function Trig_W_guixiao3_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[55]>=3.00))then
return false
endif
return true
endfunction
function Trig_W_guixiao3_Actions takes nothing returns nothing
if(Trig_W_guixiao3_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(udg_Unit_GJ[1],false)
call DisableTrigger(gg_trg_W_guixiao2)
call SetUnitTimeScale(udg_Unit_GJ[1],1.00)
else
set udg_All_unit_shu[55]=(udg_All_unit_shu[55]+1)
if(Trig_W_guixiao3_Func001Func007C())then
call SetUnitAnimationByIndex(udg_Unit_GJ[1],GetRandomInt(1,2))
else
call SetUnitAnimationByIndex(udg_Unit_GJ[1],GetRandomInt(2,3))
endif
call SetUnitPositionLocFacingBJ(udg_Unit_GJ[1],PolarProjectionBJ(GetUnitLoc(udg_Unit_GJ[2]),120.00,AngleBetweenPoints(GetUnitLoc(udg_Unit_GJ[2]),GetUnitLoc(udg_Unit_GJ[1]))),AngleBetweenPoints(GetUnitLoc(udg_Unit_GJ[1]),GetUnitLoc(udg_Unit_GJ[2])))
call UnitDamageTargetBJ(udg_Unit_GJ[1],udg_Unit_GJ[2],(I2R(GetUnitAbilityLevel(udg_Unit_GJ[1],'ANfb'))*(0.25*I2R(GetHeroStr(udg_Unit_GJ[1],true)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_GJ[2]),"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function InitTrig_W_guixiao3 takes nothing returns nothing
set gg_trg_W_guixiao3=CreateTrigger()
call DisableTrigger(gg_trg_W_guixiao3)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_guixiao3,0.25)
call TriggerAddAction(gg_trg_W_guixiao3,function Trig_W_guixiao3_Actions)
endfunction
function Trig_E_jiaoshi_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEmb'))then
return false
endif
return true
endfunction
function Trig_E_jiaoshi_Func001C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'ofro'))==true))then
return false
endif
return true
endfunction
function Trig_E_jiaoshi_Actions takes nothing returns nothing
if(Trig_E_jiaoshi_Func001C())then
call SetUnitManaBJ(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+(I2R(GetUnitAbilityLevel(GetTriggerUnit(),'AEmb'))*40.00)))
else
call SetUnitManaBJ(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+(I2R(GetUnitAbilityLevel(GetTriggerUnit(),'AEmb'))*20.00)))
endif
endfunction
function InitTrig_E_jiaoshi takes nothing returns nothing
set gg_trg_E_jiaoshi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_jiaoshi,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_jiaoshi,Condition(function Trig_E_jiaoshi_Conditions))
call TriggerAddAction(gg_trg_E_jiaoshi,function Trig_E_jiaoshi_Actions)
endfunction
function Trig_R_wuxianjiao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A021'))then
return false
endif
return true
endfunction
function Trig_R_wuxianjiao_Actions takes nothing returns nothing
set udg_Unit_GJ[1]=GetTriggerUnit()
set udg_All_unit_Dian[9]=GetSpellTargetLoc()
call CreateNUnitsAtLocFacingLocBJ(1,'nchw',GetOwningPlayer(GetTriggerUnit()),GetUnitLoc(GetTriggerUnit()),udg_All_unit_Dian[9])
call UnitApplyTimedLifeBJ(0.50,'BTLF',GetLastCreatedUnit())
call SetUnitFlyHeight(GetLastCreatedUnit(),600.00,1300.00)
set udg_Unit_GJ[3]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_R_wuxianjiao2)
endfunction
function InitTrig_R_wuxianjiao takes nothing returns nothing
set gg_trg_R_wuxianjiao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_wuxianjiao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_wuxianjiao,Condition(function Trig_R_wuxianjiao_Conditions))
call TriggerAddAction(gg_trg_R_wuxianjiao,function Trig_R_wuxianjiao_Actions)
endfunction
function Trig_R_wuxianjiao2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_GJ[3])==true))then
return false
endif
return true
endfunction
function Trig_R_wuxianjiao2_Actions takes nothing returns nothing
if(Trig_R_wuxianjiao2_Func001C())then
call SetUnitPositionLoc(udg_Unit_GJ[3],PolarProjectionBJ(GetUnitLoc(udg_Unit_GJ[3]),10.00,GetUnitFacing(udg_Unit_GJ[3])))
else
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'e005',GetOwningPlayer(udg_Unit_GJ[1]),PolarProjectionBJ(GetUnitLoc(udg_Unit_GJ[3]),20.00,GetRandomDirectionDeg()),bj_UNIT_FACING)
call SetUnitScale(GetLastCreatedUnit(),0.50,0.50,0.50)
call IssuePointOrderLoc(GetLastCreatedUnit(),"clusterrockets",PolarProjectionBJ(udg_All_unit_Dian[9],100.00,GetRandomDirectionDeg()))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call RemoveLocation(udg_All_unit_Dian[9])
endif
endfunction
function InitTrig_R_wuxianjiao2 takes nothing returns nothing
set gg_trg_R_wuxianjiao2=CreateTrigger()
call DisableTrigger(gg_trg_R_wuxianjiao2)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_wuxianjiao2,0.03)
call TriggerAddAction(gg_trg_R_wuxianjiao2,function Trig_R_wuxianjiao2_Actions)
endfunction
function Trig_D_baoshui_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANsw'))then
return false
endif
return true
endfunction
function Trig_D_baoshui_Func003C takes nothing returns boolean
if(not(udg_All_unit_bez[11]==false))then
return false
endif
return true
endfunction
function Trig_D_baoshui_Func015001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_baoshui_Func015001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_D_baoshui_Func015001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_D_baoshui_Func015A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_GJ[1],GetEnumUnit(),(I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*10.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_D_baoshui_Func016Func001Func004C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_GJ[1],'ofro'))==true))then
return false
endif
return true
endfunction
function Trig_D_baoshui_Func016C takes nothing returns boolean
if(not(GetUnitManaPercent(udg_Unit_GJ[1])>=50.00))then
return false
endif
return true
endfunction
function Trig_D_baoshui_Actions takes nothing returns nothing
set udg_Unit_GJ[1]=GetTriggerUnit()
set udg_All_unit_shu[20]=1.00
if(Trig_D_baoshui_Func003C())then
set udg_All_unit_bez[11]=true
call TriggerRegisterUnitLifeEvent(gg_trg_D_baoshui4,GetTriggerUnit(),LESS_THAN,1.00)
else
endif
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_GJ[1],true)
call SetUnitTimeScale(udg_Unit_GJ[1],0.80)
call SetUnitAnimation(udg_Unit_GJ[1],"spell")
call TriggerSleepAction(0.60)
call SetUnitAnimation(udg_Unit_GJ[1],"spell slam")
call TriggerSleepAction(0.60)
call CreateNUnitsAtLoc(1,'nbel',GetTriggerPlayer(),GetUnitLoc(udg_Unit_GJ[1]),bj_UNIT_FACING)
call SetUnitScale(GetLastCreatedUnit(),4.00,4.00,4.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(430.00,GetUnitLoc(udg_Unit_GJ[1]),Condition(function Trig_D_baoshui_Func015001003)),function Trig_D_baoshui_Func015A)
if(Trig_D_baoshui_Func016C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'okod',GetOwningPlayer(udg_Unit_GJ[1]),GetUnitLoc(udg_Unit_GJ[1]),90.00)
call UnitAddAbility(GetLastCreatedUnit(),'SCae')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'SCae',2)
if(Trig_D_baoshui_Func016Func001Func004C())then
call UnitAddAbility(GetLastCreatedUnit(),'A00M')
else
endif
call SetUnitScale(GetLastCreatedUnit(),1.00,1.00,1.00)
call GroupAddUnit(udg_All_unit_tm[11],GetLastCreatedUnit())
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_D_baoshui2)
else
endif
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_GJ[1],false)
call SetUnitTimeScale(udg_Unit_GJ[1],1.00)
endfunction
function InitTrig_D_baoshui takes nothing returns nothing
set gg_trg_D_baoshui=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_baoshui,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_baoshui,Condition(function Trig_D_baoshui_Conditions))
call TriggerAddAction(gg_trg_D_baoshui,function Trig_D_baoshui_Actions)
endfunction
function Trig_D_baoshui2_Func001Func001A takes nothing returns nothing
call SetUnitScale(GetEnumUnit(),udg_All_unit_shu[20],udg_All_unit_shu[20],udg_All_unit_shu[20])
endfunction
function Trig_D_baoshui2_Func001Func005002 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_D_baoshui2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[20]>=2.30))then
return false
endif
return true
endfunction
function Trig_D_baoshui2_Actions takes nothing returns nothing
if(Trig_D_baoshui2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15.00)
call ForGroupBJ(udg_All_unit_tm[11],function Trig_D_baoshui2_Func001Func005002)
call GroupClear(udg_All_unit_tm[11])
else
call ForGroupBJ(udg_All_unit_tm[11],function Trig_D_baoshui2_Func001Func001A)
set udg_All_unit_shu[20]=(udg_All_unit_shu[20]+0.07)
endif
endfunction
function InitTrig_D_baoshui2 takes nothing returns nothing
set gg_trg_D_baoshui2=CreateTrigger()
call DisableTrigger(gg_trg_D_baoshui2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_baoshui2,0.04)
call TriggerAddAction(gg_trg_D_baoshui2,function Trig_D_baoshui2_Actions)
endfunction
function Trig_D_baoshui3_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEIl'))then
return false
endif
return true
endfunction
function Trig_D_baoshui3_Func001C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Ocbh'))then
return false
endif
return true
endfunction
function Trig_D_baoshui3_Func002C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Hpb1'))then
return false
endif
return true
endfunction
function Trig_D_baoshui3_Actions takes nothing returns nothing
if(Trig_D_baoshui3_Func001C())then
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\T_blizzarderuption.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call SetPlayerAbilityAvailable(GetTriggerPlayer(),'AEmb',false)
else
endif
if(Trig_D_baoshui3_Func002C())then
call SetPlayerAbilityAvailable(GetTriggerPlayer(),'AEmb',true)
else
endif
endfunction
function InitTrig_D_baoshui3 takes nothing returns nothing
set gg_trg_D_baoshui3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_baoshui3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_baoshui3,Condition(function Trig_D_baoshui3_Conditions))
call TriggerAddAction(gg_trg_D_baoshui3,function Trig_D_baoshui3_Actions)
endfunction
function Trig_D_baoshui4_Actions takes nothing returns nothing
call SetPlayerAbilityAvailable(GetTriggerPlayer(),'AEmb',true)
endfunction
function InitTrig_D_baoshui4 takes nothing returns nothing
set gg_trg_D_baoshui4=CreateTrigger()
call TriggerAddAction(gg_trg_D_baoshui4,function Trig_D_baoshui4_Actions)
endfunction
function Trig_Q_shuihua_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetAttackedUnitBJ())=='Nalc'))then
return false
endif
if(not(UnitHasBuffBJ(GetAttackedUnitBJ(),'BNms')==true))then
return false
endif
return true
endfunction
function Trig_Q_shuihua_Actions takes nothing returns nothing
call CreateNUnitsAtLoc(1,'ncpn',GetOwningPlayer(GetAttackedUnitBJ()),PolarProjectionBJ(GetUnitLoc(GetAttackedUnitBJ()),30.00,AngleBetweenPoints(GetUnitLoc(GetAttackedUnitBJ()),GetUnitLoc(GetAttacker()))),AngleBetweenPoints(GetUnitLoc(GetAttackedUnitBJ()),GetUnitLoc(GetAttacker())))
call KillUnit(GetLastCreatedUnit())
endfunction
function InitTrig_Q_shuihua takes nothing returns nothing
set gg_trg_Q_shuihua=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_shuihua,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Q_shuihua,Condition(function Trig_Q_shuihua_Conditions))
call TriggerAddAction(gg_trg_Q_shuihua,function Trig_Q_shuihua_Actions)
endfunction
function Trig_W_shuilongdan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACrg'))then
return false
endif
return true
endfunction
function Trig_W_shuilongdan_Actions takes nothing returns nothing
set udg_Unit_SY[1]=GetTriggerUnit()
set udg_All_unit_Dian[10]=GetSpellTargetLoc()
set udg_All_unit_shu[0]=(GetUnitFacing(GetTriggerUnit())+GetRandomReal(-75.00,75.00))
call GroupClear(udg_All_unit_tm[13])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nchg',GetOwningPlayer(GetTriggerUnit()),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),300.00,(GetUnitFacing(GetTriggerUnit())+180.00)),udg_All_unit_shu[0])
call SetUnitTimeScale(GetLastCreatedUnit(),1.60)
call GroupAddUnit(udg_All_unit_tm[12],GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'nnmg',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),300.00,(GetUnitFacing(GetTriggerUnit())+180.00)),(GetUnitFacing(GetTriggerUnit())+(-60.00+(40.00*I2R(bj_forLoopAIndex)))))
call SetUnitScale(GetLastCreatedUnit(),1.50,1.50,1.50)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_W_shuilongdan2)
set udg_All_unit_shu[0]=0.00
endfunction
function InitTrig_W_shuilongdan takes nothing returns nothing
set gg_trg_W_shuilongdan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_shuilongdan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_shuilongdan,Condition(function Trig_W_shuilongdan_Conditions))
call TriggerAddAction(gg_trg_W_shuilongdan,function Trig_W_shuilongdan_Actions)
endfunction
function Trig_W_shuilongdan2_Func001Func003Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shuilongdan2_Func001Func003Func003001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true)
endfunction
function Trig_W_shuilongdan2_Func001Func003Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true))
endfunction
function Trig_W_shuilongdan2_Func001Func003Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_SY[1],GetEnumUnit(),(I2R(GetHeroAgi(udg_Unit_SY[1],true))*(I2R(GetUnitAbilityLevel(udg_Unit_SY[1],'ACrg'))*(GetUnitState(udg_Unit_SY[1],UNIT_STATE_MANA)/GetUnitState(udg_Unit_SY[1],UNIT_STATE_MAX_MANA)))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_W_shuilongdan2_Func001Func003Func004001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shuilongdan2_Func001Func003Func004001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true)
endfunction
function Trig_W_shuilongdan2_Func001Func003Func004001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true))
endfunction
function Trig_W_shuilongdan2_Func001Func003Func004A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_SY[1],GetEnumUnit(),(I2R(GetHeroAgi(udg_Unit_SY[1],true))*(I2R(GetUnitAbilityLevel(udg_Unit_SY[1],'ACrg'))*(GetUnitState(udg_Unit_SY[1],UNIT_STATE_MANA)/GetUnitState(udg_Unit_SY[1],UNIT_STATE_MAX_MANA)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_shuilongdan2_Func001Func003C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_SY[1],'ofro'))==true))then
return false
endif
return true
endfunction
function Trig_W_shuilongdan2_Func001Func004A takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Trig_W_shuilongdan2_Func001Func007Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_shuilongdan2_Func001Func007Func003001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[13])!=true)
endfunction
function Trig_W_shuilongdan2_Func001Func007Func003001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true)
endfunction
function Trig_W_shuilongdan2_Func001Func007Func003001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[13])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true))
endfunction
function Trig_W_shuilongdan2_Func001Func007Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[13])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true))))
endfunction
function Trig_W_shuilongdan2_Func001Func007Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_SY[1],GetEnumUnit(),(50.00*I2R(GetUnitAbilityLevel(udg_Unit_SY[1],'ACrg'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call GroupAddUnit(udg_All_unit_tm[13],GetEnumUnit())
endfunction
function Trig_W_shuilongdan2_Func001Func007A takes nothing returns nothing
call SetUnitPositionLocFacingLocBJ(GetEnumUnit(),PolarProjectionBJ(GetUnitLoc(GetEnumUnit()),55.00,GetUnitFacing(GetEnumUnit())),udg_All_unit_Dian[10])
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(180.00,GetUnitLoc(GetEnumUnit()),Condition(function Trig_W_shuilongdan2_Func001Func007Func003001003)),function Trig_W_shuilongdan2_Func001Func007Func003A)
endfunction
function Trig_W_shuilongdan2_Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(FirstOfGroup(udg_All_unit_tm[12])),udg_All_unit_Dian[10])<=160.00))then
return false
endif
return true
endfunction
function Trig_W_shuilongdan2_Actions takes nothing returns nothing
if(Trig_W_shuilongdan2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'nchr',GetOwningPlayer(udg_Unit_SY[1]),PolarProjectionBJ(udg_All_unit_Dian[10],130.00,AngleBetweenPoints(udg_All_unit_Dian[10],GetUnitLoc(FirstOfGroup(udg_All_unit_tm[12])))),(GetUnitFacing(FirstOfGroup(udg_All_unit_tm[12]))+(-80.00+(40.00*I2R(bj_forLoopAIndex)))))
call SetUnitTimeScale(GetLastCreatedUnit(),3.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if(Trig_W_shuilongdan2_Func001Func003C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,udg_All_unit_Dian[10],Condition(function Trig_W_shuilongdan2_Func001Func003Func003001003)),function Trig_W_shuilongdan2_Func001Func003Func003A)
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(260.00,udg_All_unit_Dian[10],Condition(function Trig_W_shuilongdan2_Func001Func003Func004001003)),function Trig_W_shuilongdan2_Func001Func003Func004A)
endif
call ForGroupBJ(udg_All_unit_tm[12],function Trig_W_shuilongdan2_Func001Func004A)
call GroupClear(udg_All_unit_tm[12])
call RemoveLocation(udg_All_unit_Dian[10])
else
call ForGroupBJ(udg_All_unit_tm[12],function Trig_W_shuilongdan2_Func001Func007A)
endif
endfunction
function InitTrig_W_shuilongdan2 takes nothing returns nothing
set gg_trg_W_shuilongdan2=CreateTrigger()
call DisableTrigger(gg_trg_W_shuilongdan2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_shuilongdan2,0.04)
call TriggerAddAction(gg_trg_W_shuilongdan2,function Trig_W_shuilongdan2_Actions)
endfunction
function Trig_E_yinliao0_Conditions takes nothing returns boolean
if(not(GetLearnedSkill()=='A03E'))then
return false
endif
return true
endfunction
function Trig_E_yinliao0_Actions takes nothing returns nothing
set udg_Unit_SY[1]=GetTriggerUnit()
call DisableTrigger(GetTriggeringTrigger())
endfunction
function InitTrig_E_yinliao0 takes nothing returns nothing
set gg_trg_E_yinliao0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_yinliao0,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_E_yinliao0,Condition(function Trig_E_yinliao0_Conditions))
call TriggerAddAction(gg_trg_E_yinliao0,function Trig_E_yinliao0_Actions)
endfunction
function Trig_E_yinliao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03E'))then
return false
endif
return true
endfunction
function Trig_E_yinliao_Actions takes nothing returns nothing
call TriggerSleepAction(0.10)
call SetUnitAbilityLevel(udg_Unit_SY[1],'A03J',2)
endfunction
function InitTrig_E_yinliao takes nothing returns nothing
set gg_trg_E_yinliao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_yinliao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_yinliao,Condition(function Trig_E_yinliao_Conditions))
call TriggerAddAction(gg_trg_E_yinliao,function Trig_E_yinliao_Actions)
endfunction
function Trig_E_yinliao2_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03H'))then
return false
endif
return true
endfunction
function Trig_E_yinliao2_Actions takes nothing returns nothing
call TriggerSleepAction(0.10)
call SetUnitAbilityLevel(udg_Unit_SY[1],'A03J',3)
endfunction
function InitTrig_E_yinliao2 takes nothing returns nothing
set gg_trg_E_yinliao2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_yinliao2,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_yinliao2,Condition(function Trig_E_yinliao2_Conditions))
call TriggerAddAction(gg_trg_E_yinliao2,function Trig_E_yinliao2_Actions)
endfunction
function Trig_E_yinliao3_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A03K'))then
return false
endif
return true
endfunction
function Trig_E_yinliao3_Func003Func003Func001001 takes nothing returns boolean
return(IsUnitAlly(GetTriggerUnit(),Player(3))==true)
endfunction
function Trig_E_yinliao3_Func003Func003Func001002 takes nothing returns boolean
return(RectContainsUnit(gg_rct_SpawnPoint_muye_Schloss,GetTriggerUnit())==true)
endfunction
function Trig_E_yinliao3_Func003Func003Func002001 takes nothing returns boolean
return(IsUnitAlly(GetTriggerUnit(),Player(7))==true)
endfunction
function Trig_E_yinliao3_Func003Func003Func002002 takes nothing returns boolean
return(RectContainsUnit(gg_rct_Spawnpoint_wuyin_Schloss,GetTriggerUnit())==true)
endfunction
function Trig_E_yinliao3_Func003Func003Func003001 takes nothing returns boolean
return(IsUnitAlly(GetTriggerUnit(),Player(11))==true)
endfunction
function Trig_E_yinliao3_Func003Func003Func003002 takes nothing returns boolean
return(RectContainsUnit(gg_rct_SpawnPoint_sha_Schloss,GetTriggerUnit())==true)
endfunction
function Trig_E_yinliao3_Func003Func003C takes nothing returns boolean
if(GetBooleanAnd((IsUnitAlly(GetTriggerUnit(),Player(3))==true),(RectContainsUnit(gg_rct_SpawnPoint_muye_Schloss,GetTriggerUnit())==true)))then
return true
endif
if(GetBooleanAnd((IsUnitAlly(GetTriggerUnit(),Player(7))==true),(RectContainsUnit(gg_rct_Spawnpoint_wuyin_Schloss,GetTriggerUnit())==true)))then
return true
endif
if(GetBooleanAnd((IsUnitAlly(GetTriggerUnit(),Player(11))==true),(RectContainsUnit(gg_rct_SpawnPoint_sha_Schloss,GetTriggerUnit())==true)))then
return true
endif
return false
endfunction
function Trig_E_yinliao3_Func003C takes nothing returns boolean
if(not Trig_E_yinliao3_Func003Func003C())then
return false
endif
return true
endfunction
function Trig_E_yinliao3_Actions takes nothing returns nothing
if(Trig_E_yinliao3_Func003C())then
call TriggerSleepAction(0.10)
call SetUnitAbilityLevel(udg_Unit_SY[1],'A03J',1)
else
endif
endfunction
function InitTrig_E_yinliao3 takes nothing returns nothing
set gg_trg_E_yinliao3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_yinliao3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_yinliao3,Condition(function Trig_E_yinliao3_Conditions))
call TriggerAddAction(gg_trg_E_yinliao3,function Trig_E_yinliao3_Actions)
endfunction
function Trig_R_shuiyadan_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AUim'))then
return false
endif
return true
endfunction
function Trig_R_shuiyadan_Func001Func004001003001001001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_R_shuiyadan_Func001Func004001003001001002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_shuiyadan_Func001Func004001003001001 takes nothing returns boolean
return GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))
endfunction
function Trig_R_shuiyadan_Func001Func004001003001002 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[37])==false)
endfunction
function Trig_R_shuiyadan_Func001Func004001003001 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[37])==false))
endfunction
function Trig_R_shuiyadan_Func001Func004001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true)
endfunction
function Trig_R_shuiyadan_Func001Func004001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((GetBooleanAnd((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false),(IsUnitAliveBJ(GetFilterUnit())==true))),(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[37])==false))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true))
endfunction
function Trig_R_shuiyadan_Func001Func004A takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(400.00+(I2R(GetUnitAbilityLevel(GetTriggerUnit(),'AUim'))*400.00)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call CreateNUnitsAtLoc(1,'e001',GetTriggerPlayer(),GetUnitLoc(GetEnumUnit()),bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),'A00Z',(2+(GetUnitAbilityLevel(GetTriggerUnit(),'AUim')*1)))
call IssueTargetOrder(GetLastCreatedUnit(),"thunderbolt",GetEnumUnit())
call GroupAddUnit(udg_All_unit_tm[37],GetEnumUnit())
endfunction
function Trig_R_shuiyadan_Actions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'udes',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(GetTriggerUnit()),(200.00*I2R(bj_forLoopAIndex)),AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc())),bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',2.00)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(200.00,GetUnitLoc(GetLastCreatedUnit()),Condition(function Trig_R_shuiyadan_Func001Func004001003)),function Trig_R_shuiyadan_Func001Func004A)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call GroupClear(udg_All_unit_tm[37])
endfunction
function InitTrig_R_shuiyadan takes nothing returns nothing
set gg_trg_R_shuiyadan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_shuiyadan,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_shuiyadan,Condition(function Trig_R_shuiyadan_Conditions))
call TriggerAddAction(gg_trg_R_shuiyadan,function Trig_R_shuiyadan_Actions)
endfunction
function Trig_D_cangliu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='AEfk'))then
return false
endif
return true
endfunction
function Trig_D_cangliu_Actions takes nothing returns nothing
set udg_Unit_SY[1]=GetTriggerUnit()
set udg_All_unit_shu[53]=0.00
call PauseUnitBJ(true,udg_Unit_SY[1])
call SetUnitAnimation(udg_Unit_SY[1],"spell slam")
call SetUnitTimeScale(udg_Unit_SY[1],1.80)
call TriggerSleepAction(0.10)
call SetUnitTimeScale(udg_Unit_SY[1],0.65)
call CreateNUnitsAtLoc(1,'e000',GetTriggerPlayer(),PolarProjectionBJ(GetUnitLoc(udg_Unit_SY[1]),110.00,GetUnitFacing(udg_Unit_SY[1])),GetUnitFacing(udg_Unit_SY[1]))
set udg_Unit_SY[0]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_D_cangliu2)
endfunction
function InitTrig_D_cangliu takes nothing returns nothing
set gg_trg_D_cangliu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_cangliu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_cangliu,Condition(function Trig_D_cangliu_Conditions))
call TriggerAddAction(gg_trg_D_cangliu,function Trig_D_cangliu_Actions)
endfunction
function Trig_D_cangliu2_Func001Func008001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_cangliu2_Func001Func008001003002001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[34])!=true)
endfunction
function Trig_D_cangliu2_Func001Func008001003002002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true)
endfunction
function Trig_D_cangliu2_Func001Func008001003002 takes nothing returns boolean
return GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[34])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true))
endfunction
function Trig_D_cangliu2_Func001Func008001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(GetBooleanAnd((IsUnitInGroup(GetFilterUnit(),udg_All_unit_tm[34])!=true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_SY[1]))==true))))
endfunction
function Trig_D_cangliu2_Func001Func008Func001C takes nothing returns boolean
if(not(GetRandomInt(1,3)==1))then
return false
endif
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_SY[1],'ofro'))==true))then
return false
endif
return true
endfunction
function Trig_D_cangliu2_Func001Func008A takes nothing returns nothing
if(Trig_D_cangliu2_Func001Func008Func001C())then
call UnitDamageTargetBJ(udg_Unit_SY[1],GetEnumUnit(),(800.00+((I2R(GetHeroAgi(udg_Unit_SY[1],true))*14.00)*(GetUnitState(udg_Unit_SY[1],UNIT_STATE_MANA)/GetUnitState(udg_Unit_SY[1],UNIT_STATE_MAX_MANA)))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_icenova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
else
call UnitDamageTargetBJ(udg_Unit_SY[1],GetEnumUnit(),(800.00+((I2R(GetHeroAgi(udg_Unit_SY[1],true))*7.00)*(GetUnitState(udg_Unit_SY[1],UNIT_STATE_MANA)/GetUnitState(udg_Unit_SY[1],UNIT_STATE_MAX_MANA)))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endif
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"war3mapImported\\T_hit_b.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetEnumUnit()))
call GroupAddUnit(udg_All_unit_tm[34],GetEnumUnit())
endfunction
function Trig_D_cangliu2_Func001C takes nothing returns boolean
if(not(udg_All_unit_shu[53]>=8.00))then
return false
endif
return true
endfunction
function Trig_D_cangliu2_Actions takes nothing returns nothing
if(Trig_D_cangliu2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnitBJ(false,udg_Unit_SY[1])
call GroupClear(udg_All_unit_tm[34])
call SetUnitTimeScale(udg_Unit_SY[1],1.00)
else
set udg_All_unit_shu[53]=(udg_All_unit_shu[53]+1)
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_SY[0]),73.00,GetUnitFacing(udg_Unit_SY[0]))
call SetUnitPositionLocFacingBJ(udg_Unit_SY[0],udg_ALL_PointPX,GetUnitFacing(udg_Unit_SY[0]))
call AddSpecialEffectLocBJ(GetUnitLoc(udg_Unit_SY[0]),"Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(udg_ALL_PointPX)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(220.00,GetUnitLoc(udg_Unit_SY[0]),Condition(function Trig_D_cangliu2_Func001Func008001003)),function Trig_D_cangliu2_Func001Func008A)
call RemoveLocation(GetUnitLoc(udg_Unit_SY[0]))
endif
endfunction
function InitTrig_D_cangliu2 takes nothing returns nothing
set gg_trg_D_cangliu2=CreateTrigger()
call DisableTrigger(gg_trg_D_cangliu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_cangliu2,0.04)
call TriggerAddAction(gg_trg_D_cangliu2,function Trig_D_cangliu2_Actions)
endfunction
function Trig_Q_zhizhu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='A00T'))then
return false
endif
return true
endfunction
function Trig_Q_zhizhu_Func005Func007003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetTriggerUnit()))
endfunction
function Trig_Q_zhizhu_Func005C takes nothing returns boolean
if(not(udg_All_unit_shu[21]>=1.00))then
return false
endif
if(not(udg_All_unit_shu[21]<=5.00))then
return false
endif
return true
endfunction
function Trig_Q_zhizhu_Func006Func008003001 takes nothing returns boolean
return(GetFilterPlayer()!=GetOwningPlayer(GetTriggerUnit()))
endfunction
function Trig_Q_zhizhu_Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[21]>5.00))then
return false
endif
return true
endfunction
function Trig_Q_zhizhu_Actions takes nothing returns nothing
set udg_Unit_DDL[1]=GetTriggerUnit()
set udg_All_unit_Dian[13]=GetSpellTargetLoc()
call TriggerSleepAction(0.40)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=GetUnitAbilityLevel(udg_Unit_DDL[1],'A00T')
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(udg_All_unit_Dian[13],GetRandomReal(0,50.00),GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,'nw2w',GetOwningPlayer(udg_Unit_DDL[1]),udg_ALL_PointPX,GetRandomDirectionDeg())
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',10.00)
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetLastCreatedUnit()))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if(Trig_Q_zhizhu_Func005C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=R2I(udg_All_unit_shu[21])
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(udg_All_unit_Dian[13],GetRandomReal(0,50.00),GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,'nw2w',GetOwningPlayer(udg_Unit_DDL[1]),udg_ALL_PointPX,GetRandomDirectionDeg())
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',10.00)
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetLastCreatedUnit()))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set udg_All_unit_shu[21]=0.00
call CreateTextTagUnitBJ((("粘土消耗(|cFFFFFF00"+I2S(R2I(udg_All_unit_shu[21])))+("|r/|cFFFF0033"+(I2S(GetUnitAbilityLevel(udg_Unit_DDL[1],'Arsg'))+"|r)"))),udg_Unit_DDL[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,180.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_Q_zhizhu_Func005Func007003001)))
else
endif
if(Trig_Q_zhizhu_Func006C())then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_ALL_PointPX=PolarProjectionBJ(udg_All_unit_Dian[13],GetRandomReal(0,50.00),GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,'nw2w',GetOwningPlayer(udg_Unit_DDL[1]),udg_ALL_PointPX,GetRandomDirectionDeg())
call RemoveLocation(udg_ALL_PointPX)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',10.00)
call AddSpecialEffectLocBJ(GetUnitLoc(GetLastCreatedUnit()),"Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetLastCreatedUnit()))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set udg_All_unit_shu[21]=(udg_All_unit_shu[21]-5.00)
call CreateTextTagUnitBJ((("粘土消耗(|cFFFFFF00"+I2S(R2I(udg_All_unit_shu[21])))+("|r/|cFFFF0033"+(I2S(GetUnitAbilityLevel(udg_Unit_DDL[1],'Arsg'))+"|r)"))),udg_Unit_DDL[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,180.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call ShowTextTagForceBJ(false,GetLastCreatedTextTag(),GetPlayersMatching(Condition(function Trig_Q_zhizhu_Func006Func008003001)))
else
endif
call RemoveLocation(udg_All_unit_Dian[13])
endfunction
function InitTrig_Q_zhizhu takes nothing returns nothing
set gg_trg_Q_zhizhu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_zhizhu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Q_zhizhu,Condition(function Trig_Q_zhizhu_Conditions))
call TriggerAddAction(gg_trg_Q_zhizhu,function Trig_Q_zhizhu_Actions)
endfunction
function Trig_Q_zhizhu2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetAttacker())=='nw2w'))then
return false
endif
return true
endfunction
function Trig_Q_zhizhu2_Func005Func003001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_zhizhu2_Func005Func003001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_DDL[1]))==true)
endfunction
function Trig_Q_zhizhu2_Func005Func003001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_DDL[1]))==true))
endfunction
function Trig_Q_zhizhu2_Func005Func003A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_DDL[1],GetEnumUnit(),150.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_zhizhu2_Func005Func005001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_Q_zhizhu2_Func005Func005001003002 takes nothing returns boolean
return(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_DDL[1]))==true)
endfunction
function Trig_Q_zhizhu2_Func005Func005001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(udg_Unit_DDL[1]))==true))
endfunction
function Trig_Q_zhizhu2_Func005Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_DDL[1],GetEnumUnit(),100.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_Q_zhizhu2_Func005C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_DDL[1],'srbd'))==true))then
return false
endif
return true
endfunction
function Trig_Q_zhizhu2_Actions takes nothing returns nothing
call KillUnit(GetAttacker())
call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()),"Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
if(Trig_Q_zhizhu2_Func005C())then
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(GetAttackedUnitBJ()),Condition(function Trig_Q_zhizhu2_Func005Func003001003)),function Trig_Q_zhizhu2_Func005Func003A)
call RemoveLocation(GetUnitLoc(GetAttackedUnitBJ()))
else
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(150.00,GetUnitLoc(GetAttackedUnitBJ()),Condition(function Trig_Q_zhizhu2_Func005Func005001003)),function Trig_Q_zhizhu2_Func005Func005A)
call RemoveLocation(GetUnitLoc(GetAttackedUnitBJ()))
endif
endfunction
function InitTrig_Q_zhizhu2 takes nothing returns nothing
set gg_trg_Q_zhizhu2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Q_zhizhu2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Q_zhizhu2,Condition(function Trig_Q_zhizhu2_Conditions))
call TriggerAddAction(gg_trg_Q_zhizhu2,function Trig_Q_zhizhu2_Actions)
endfunction
function Trig_W_pohuaizhimei_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ACrf'))then
return false
endif
return true
endfunction
function Trig_W_pohuaizhimei_Actions takes nothing returns nothing
set udg_Unit_DDL[1]=GetTriggerUnit()
set udg_All_unit_Dian[11]=GetSpellTargetLoc()
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_DDL[1]),300.00,AngleBetweenPoints(GetSpellTargetLoc(),GetUnitLoc(udg_Unit_DDL[1])))
call CreateNUnitsAtLocFacingLocBJ(1,'obot',GetTriggerPlayer(),udg_ALL_PointPX,GetSpellTargetLoc())
call RemoveLocation(udg_ALL_PointPX)
set udg_Unit_DDL[3]=GetLastCreatedUnit()
call SetUnitTimeScale(GetLastCreatedUnit(),1.20)
call TriggerSleepAction(1.00)
call SetUnitTimeScale(GetLastCreatedUnit(),1.00)
call EnableTrigger(gg_trg_W_pohuaizhimei2)
endfunction
function InitTrig_W_pohuaizhimei takes nothing returns nothing
set gg_trg_W_pohuaizhimei=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_W_pohuaizhimei,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_W_pohuaizhimei,Condition(function Trig_W_pohuaizhimei_Conditions))
call TriggerAddAction(gg_trg_W_pohuaizhimei,function Trig_W_pohuaizhimei_Actions)
endfunction
function Trig_W_pohuaizhimei2_Func001Func008Func008001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_pohuaizhimei2_Func001Func008Func008001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DDL[1]))==true)
endfunction
function Trig_W_pohuaizhimei2_Func001Func008Func008001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DDL[1]))==true))
endfunction
function Trig_W_pohuaizhimei2_Func001Func008Func008A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_DDL[1],GetEnumUnit(),(I2R(GetHeroInt(udg_Unit_DDL[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_DDL[1],'ACrf'))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_pohuaizhimei2_Func001Func008Func011001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_W_pohuaizhimei2_Func001Func008Func011001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DDL[1]))==true)
endfunction
function Trig_W_pohuaizhimei2_Func001Func008Func011001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DDL[1]))==true))
endfunction
function Trig_W_pohuaizhimei2_Func001Func008Func011A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_DDL[1],GetEnumUnit(),(I2R(GetHeroInt(udg_Unit_DDL[1],true))*I2R(GetUnitAbilityLevel(udg_Unit_DDL[1],'ACrf'))),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_W_pohuaizhimei2_Func001Func008C takes nothing returns boolean
if(not(udg_All_unit_shu[21]>=3.00))then
return false
endif
return true
endfunction
function Trig_W_pohuaizhimei2_Func001C takes nothing returns boolean
if(not(DistanceBetweenPoints(GetUnitLoc(udg_Unit_DDL[3]),udg_All_unit_Dian[11])<=160.00))then
return false
endif
return true
endfunction
function Trig_W_pohuaizhimei2_Actions takes nothing returns nothing
if(Trig_W_pohuaizhimei2_Func001C())then
call DisableTrigger(GetTriggeringTrigger())
call KillUnit(udg_Unit_DDL[3])
call CreateNUnitsAtLoc(1,'hbsh',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[11],0.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
call CreateNUnitsAtLoc(1,'o001',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[11],0.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
if(Trig_W_pohuaizhimei2_Func001Func008C())then
set udg_All_unit_shu[21]=(udg_All_unit_shu[21]-3.00)
call CreateTextTagUnitBJ((("粘土消耗(|cFFFFFF00"+I2S(R2I(udg_All_unit_shu[21])))+("|r/|cFFFF0033"+(I2S(GetUnitAbilityLevel(udg_Unit_DDL[1],'Arsg'))+"|r)"))),udg_Unit_DDL[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,180.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'odes',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[11],0.00)
call KillUnit(GetLastCreatedUnit())
call SetUnitTimeScale(GetLastCreatedUnit(),0.30)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(350.00,udg_All_unit_Dian[11],Condition(function Trig_W_pohuaizhimei2_Func001Func008Func011001003)),function Trig_W_pohuaizhimei2_Func001Func008Func011A)
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'odes',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[11],0.00)
call KillUnit(GetLastCreatedUnit())
call SetUnitTimeScale(GetLastCreatedUnit(),0.50)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(350.00,udg_All_unit_Dian[11],Condition(function Trig_W_pohuaizhimei2_Func001Func008Func008001003)),function Trig_W_pohuaizhimei2_Func001Func008Func008A)
endif
call RemoveLocation(udg_All_unit_Dian[11])
else
set udg_ALL_PointPX=PolarProjectionBJ(GetUnitLoc(udg_Unit_DDL[3]),80.00,GetUnitFacing(udg_Unit_DDL[3]))
call SetUnitPositionLocFacingLocBJ(udg_Unit_DDL[3],udg_ALL_PointPX,udg_All_unit_Dian[11])
call RemoveLocation(udg_ALL_PointPX)
endif
endfunction
function InitTrig_W_pohuaizhimei2 takes nothing returns nothing
set gg_trg_W_pohuaizhimei2=CreateTrigger()
call DisableTrigger(gg_trg_W_pohuaizhimei2)
call TriggerRegisterTimerEventPeriodic(gg_trg_W_pohuaizhimei2,0.04)
call TriggerAddAction(gg_trg_W_pohuaizhimei2,function Trig_W_pohuaizhimei2_Actions)
endfunction
function Trig_E_niantuzhizao_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Arsg'))then
return false
endif
return true
endfunction
function Trig_E_niantuzhizao_Func003Func001C takes nothing returns boolean
if(not(IsItemOwned(GetItemOfTypeFromUnitBJ(udg_Unit_DDL[1],'srbd'))==true))then
return false
endif
return true
endfunction
function Trig_E_niantuzhizao_Func003C takes nothing returns boolean
if(not(GetUnitAbilityLevel(udg_Unit_DDL[1],'Arsg')<=R2I(udg_All_unit_shu[21])))then
return false
endif
return true
endfunction
function Trig_E_niantuzhizao_Actions takes nothing returns nothing
set udg_Unit_DDL[1]=GetTriggerUnit()
if(Trig_E_niantuzhizao_Func003C())then
call CreateTextTagUnitBJ("粘土携带数量已满",GetTriggerUnit(),0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,180.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.00)
else
if(Trig_E_niantuzhizao_Func003Func001C())then
set udg_All_unit_shu[21]=(udg_All_unit_shu[21]+2.00)
else
set udg_All_unit_shu[21]=(udg_All_unit_shu[21]+1)
endif
call CreateTextTagUnitBJ((("粘土增加(|cFFFFFF00"+I2S(R2I(udg_All_unit_shu[21])))+("|r/|cFFFF0033"+(I2S(GetUnitAbilityLevel(udg_Unit_DDL[1],'Arsg'))+"|r)"))),GetTriggerUnit(),0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,180.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
endif
endfunction
function InitTrig_E_niantuzhizao takes nothing returns nothing
set gg_trg_E_niantuzhizao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_E_niantuzhizao,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_E_niantuzhizao,Condition(function Trig_E_niantuzhizao_Conditions))
call TriggerAddAction(gg_trg_E_niantuzhizao,function Trig_E_niantuzhizao_Actions)
endfunction
function Trig_R_yujialuo_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='Ahwd'))then
return false
endif
return true
endfunction
function Trig_R_yujialuo_Actions takes nothing returns nothing
set udg_Unit_DDL[1]=GetTriggerUnit()
call CreateNUnitsAtLoc(1,'odkt',GetOwningPlayer(udg_Unit_DDL[1]),GetSpellTargetLoc(),AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetSpellTargetLoc()))
call RemoveLocation(GetSpellTargetLoc())
call SetUnitAnimation(GetLastCreatedUnit(),"spell four")
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.00)
call SetUnitTimeScale(GetLastCreatedUnit(),2.00)
call SetUnitVertexColor(GetLastCreatedUnit(),255,255,255,200)
endfunction
function InitTrig_R_yujialuo takes nothing returns nothing
set gg_trg_R_yujialuo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_yujialuo,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_R_yujialuo,Condition(function Trig_R_yujialuo_Conditions))
call TriggerAddAction(gg_trg_R_yujialuo,function Trig_R_yujialuo_Actions)
endfunction
function Trig_R_yujialuo2_Conditions takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='odkt'))then
return false
endif
return true
endfunction
function Trig_R_yujialuo2_Func010C takes nothing returns boolean
if(not(udg_All_unit_shu[21]>=4.00))then
return false
endif
return true
endfunction
function Trig_R_yujialuo2_Actions takes nothing returns nothing
set udg_All_unit_Dian[12]=GetUnitLoc(GetTriggerUnit())
call PlaySoundAtPointBJ(gg_snd_AbominationPissed2,80.00,GetUnitLoc(udg_Unit_DDL[1]),300.00)
call StopSoundBJ(GetLastPlayedSound(),true)
call CreateTextTagUnitBJ("——喝!!!",udg_Unit_DDL[1],0,30.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),30.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'oosc',GetOwningPlayer(udg_Unit_DDL[1]),GetUnitLoc(GetTriggerUnit()),GetRandomDirectionDeg())
call KillUnit(GetLastCreatedUnit())
call RemoveLocation(GetUnitLoc(GetTriggerUnit()))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(gg_trg_R_yujialuo3)
if(Trig_R_yujialuo2_Func010C())then
set udg_All_unit_shu[21]=(udg_All_unit_shu[21]-4.00)
call CreateTextTagUnitBJ((("粘土消耗(|cFFFFFF00"+I2S(R2I(udg_All_unit_shu[21])))+("|r/|cFFFF0033"+(I2S(GetUnitAbilityLevel(udg_Unit_DDL[1],'Arsg'))+"|r)"))),udg_Unit_DDL[1],0,10.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),64,180.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call TriggerSleepAction(2.30)
else
call TriggerSleepAction(1.40)
endif
call DisableTrigger(gg_trg_R_yujialuo3)
call RemoveLocation(udg_All_unit_Dian[12])
endfunction
function InitTrig_R_yujialuo2 takes nothing returns nothing
set gg_trg_R_yujialuo2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_R_yujialuo2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_R_yujialuo2,Condition(function Trig_R_yujialuo2_Conditions))
call TriggerAddAction(gg_trg_R_yujialuo2,function Trig_R_yujialuo2_Actions)
endfunction
function Trig_R_yujialuo3_Func002001003001001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_R_yujialuo3_Func002001003001002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_R_yujialuo3_Func002001003001 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_R_yujialuo3_Func002001003002 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DDL[1]))==true)
endfunction
function Trig_R_yujialuo3_Func002001003 takes nothing returns boolean
return GetBooleanAnd((GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))),(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Unit_DDL[1]))==true))
endfunction
function Trig_R_yujialuo3_Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_DDL[1],GetEnumUnit(),100.00,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Trig_R_yujialuo3_Actions takes nothing returns nothing
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(500.00,udg_All_unit_Dian[12],Condition(function Trig_R_yujialuo3_Func002001003)),function Trig_R_yujialuo3_Func002A)
endfunction
function InitTrig_R_yujialuo3 takes nothing returns nothing
set gg_trg_R_yujialuo3=CreateTrigger()
call DisableTrigger(gg_trg_R_yujialuo3)
call TriggerRegisterTimerEventPeriodic(gg_trg_R_yujialuo3,0.10)
call TriggerAddAction(gg_trg_R_yujialuo3,function Trig_R_yujialuo3_Actions)
endfunction
function Trig_D_yishu_Conditions takes nothing returns boolean
if(not(GetSpellAbilityId()=='ANsq'))then
return false
endif
return true
endfunction
function Trig_D_yishu_Actions takes nothing returns nothing
set udg_Unit_DDL[1]=GetTriggerUnit()
set udg_All_unit_shu[22]=0.00
call TriggerSleepAction(0.10)
call PauseUnit(udg_Unit_DDL[1],true)
call SetUnitTimeScale(udg_Unit_DDL[1],5.00)
call SetUnitAnimation(udg_Unit_DDL[1],"spell")
call CreateNUnitsAtLocFacingLocBJ(1,'nhea',GetTriggerPlayer(),GetUnitLoc(udg_Unit_DDL[1]),GetUnitLoc(udg_Unit_DDL[1]))
call RemoveLocation(GetUnitLoc(udg_Unit_DDL[1]))
call SetUnitTimeScale(GetLastCreatedUnit(),0.10)
call UnitAddAbility(GetLastCreatedUnit(),'SCae')
call SetUnitAbilityLevel(GetLastCreatedUnit(),'SCae',3)
set udg_Unit_DDL[4]=GetLastCreatedUnit()
call EnableTrigger(gg_trg_D_yishu2)
call PlaySoundAtPointBJ(gg_snd_AbominationPissed1,90.00,GetUnitLoc(udg_Unit_DDL[1]),300.00)
set udg_Music[1]=GetLastPlayedSound()
call TriggerSleepAction(0.80)
call CreateTextTagUnitBJ("——爆炸!!!",udg_Unit_DDL[1],0,20.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),30.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.50)
call TriggerSleepAction(1.00)
call StopSoundBJ(udg_Music[1],true)
endfunction
function InitTrig_D_yishu takes nothing returns nothing
set gg_trg_D_yishu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_D_yishu,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_D_yishu,Condition(function Trig_D_yishu_Conditions))
call TriggerAddAction(gg_trg_D_yishu,function Trig_D_yishu_Actions)
endfunction
function Trig_D_yishu2_Func001Func006Func025001003 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_yishu2_Func001Func006Func025A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_DDL[1],GetEnumUnit(),(I2R(GetHeroInt(udg_Unit_DDL[1],true))*15.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_yishu2_Func001Func006Func027001003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit())==true)
endfunction
function Trig_D_yishu2_Func001Func006Func027001003002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)
endfunction
function Trig_D_yishu2_Func001Func006Func027001003 takes nothing returns boolean
return GetBooleanAnd((IsUnitAliveBJ(GetFilterUnit())==true),(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false))
endfunction
function Trig_D_yishu2_Func001Func006Func027A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Unit_DDL[1],GetEnumUnit(),(I2R(GetHeroInt(udg_Unit_DDL[1],true))*5.00),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_MAGIC)
endfunction
function Trig_D_yishu2_Func001Func006C takes nothing returns boolean
if(not(udg_All_unit_shu[22]>=45.00))then
return false
endif
return true
endfunction
function Trig_D_yishu2_Func001C takes nothing returns boolean
if(not(IsUnitAliveBJ(udg_Unit_DDL[1])==true))then
return false
endif
return true
endfunction
function Trig_D_yishu2_Actions takes nothing returns nothing
if(Trig_D_yishu2_Func001C())then
if(Trig_D_yishu2_Func001Func006C())then
set udg_All_unit_Dian[19]=GetUnitLoc(udg_Unit_DDL[1])
call DisableTrigger(GetTriggeringTrigger())
call SetUnitVertexColor(udg_Unit_DDL[1],225,225,225,255)
call KillUnit(udg_Unit_DDL[4])
call PlaySoundAtPointBJ(gg_snd_AbominationPissed2,100,GetUnitLoc(udg_Unit_DDL[1]),500.00)
call StopSoundBJ(GetLastPlayedSound(),true)
call CreateTextTagUnitBJ("咔——！",udg_Unit_DDL[1],0,50.00,100,100,100.00,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),30.00,90.00)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),3.00)
call PauseUnit(udg_Unit_DDL[1],false)
call SetUnitTimeScale(udg_Unit_DDL[1],1.00)
call CreateNUnitsAtLoc(1,'ojgn',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[19],bj_UNIT_FACING)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.50)
call SetUnitTimeScale(GetLastCreatedUnit(),2.50)
call CreateNUnitsAtLoc(1,'o001',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[19],bj_UNIT_FACING)
call SetUnitScale(GetLastCreatedUnit(),3.00,3.00,3.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'odes',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[19],bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),0.40)
call SetUnitScale(GetLastCreatedUnit(),4.00,4.00,4.00)
call KillUnit(GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'ogrk',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[19],bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),0.40)
call KillUnit(GetLastCreatedUnit())
call CreateNUnitsAtLoc(1,'hbsh',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[19],bj_UNIT_FACING)
call SetUnitScale(GetLastCreatedUnit(),4.00,4.00,4.00)
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',3.00)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLoc(1,'oswy',GetOwningPlayer(udg_Unit_DDL[1]),udg_All_unit_Dian[19],(180.00*I2R(bj_forLoopAIndex)))
call UnitApplyTimedLife(GetLastCreatedUnit(),'BHwe',1.50)
call SetUnitTimeScale(GetLastCreatedUnit(),2.50)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(550.00,udg_All_unit_Dian[19],Condition(function Trig_D_yishu2_Func001Func006Func025001003)),function Trig_D_yishu2_Func001Func006Func025A)
set bj_wantDestroyGroup=true
call ForGroupBJ(GetUnitsInRangeOfLocMatching(900.00,udg_All_unit_Dian[19],Condition(function Trig_D_yishu2_Func001Func006Func027001003)),function Trig_D_yishu2_Func001Func006Func027A)
call RemoveLocation(udg_All_unit_Dian[19])
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_Unit_DDL[1]),60.00)
call TriggerSleepAction(0.40)
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_Unit_DDL[1]))
else
set udg_ALL_PointPX=GetUnitLoc(udg_Unit_DDL[1])
call SetUnitPositionLoc(udg_Unit_DDL[4],udg_ALL_PointPX)
call RemoveLocation(udg_ALL_PointPX)
call SetUnitVertexColor(udg_Unit_DDL[1],(255-(5*R2I(udg_All_unit_shu[22]))),(255-(5*R2I(udg_All_unit_shu[22]))),(225-(5*R2I(udg_All_unit_shu[22]))),255)
call SetUnitScale(udg_Unit_DDL[4],(4.51-(0.10*udg_All_unit_shu[22])),(4.51-(0.10*udg_All_unit_shu[22])),(4.51-(0.10*udg_All_unit_shu[22])))
set udg_All_unit_shu[22]=(udg_All_unit_shu[22]+1)
endif
else
call DisableTrigger(GetTriggeringTrigger())
call SetUnitTimeScale(udg_Unit_DDL[1],1.00)
call PauseUnit(udg_Unit_DDL[1],false)
call KillUnit(udg_Unit_DDL[4])
call SetUnitVertexColor(udg_Unit_DDL[1],225,225,225,255)
endif
endfunction
function InitTrig_D_yishu2 takes nothing returns nothing
set gg_trg_D_yishu2=CreateTrigger()
call DisableTrigger(gg_trg_D_yishu2)
call TriggerRegisterTimerEventPeriodic(gg_trg_D_yishu2,0.05)
call TriggerAddAction(gg_trg_D_yishu2,function Trig_D_yishu2_Actions)
endfunction
function Trig_S_xielunyan_Func001A takes nothing returns nothing
call SetPlayerAbilityAvailable(GetEnumPlayer(),'A027',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'A01O',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'AChw',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'A02U',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'ACtc',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'ANfs',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'A035',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'A03D',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'A03J',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'A03V',false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),'A040',false)
endfunction
function Trig_S_xielunyan_Actions takes nothing returns nothing
call ForForce(GetPlayersAll(),function Trig_S_xielunyan_Func001A)
endfunction
function InitTrig_S_xielunyan takes nothing returns nothing
set gg_trg_S_xielunyan=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_S_xielunyan,3.00)
call TriggerAddAction(gg_trg_S_xielunyan,function Trig_S_xielunyan_Actions)
endfunction
function Trig_S_death_Func001C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Hvsh'))then
return false
endif
return true
endfunction
function Trig_S_death_Func002C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Ulic'))then
return false
endif
return true
endfunction
function Trig_S_death_Func003C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Edem'))then
return false
endif
return true
endfunction
function Trig_S_death_Func004C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Hpal'))then
return false
endif
return true
endfunction
function Trig_S_death_Func005C takes nothing returns boolean
if(not(GetUnitTypeId(GetTriggerUnit())=='Huth'))then
return false
endif
return true
endfunction
function Trig_S_death_Actions takes nothing returns nothing
if(Trig_S_death_Func001C())then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'Asth',true)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'ACtc',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A02U',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'AUts',true)
else
endif
if(Trig_S_death_Func002C())then
call SetUnitMoveSpeed(GetTriggerUnit(),GetUnitDefaultMoveSpeed(GetTriggerUnit()))
else
endif
if(Trig_S_death_Func003C())then
call UnitRemoveAbility(GetTriggerUnit(),'A027')
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'A01O',false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'AChw',false)
else
endif
if(Trig_S_death_Func004C())then
call UnitRemoveAbility(GetTriggerUnit(),'A027')
else
endif
if(Trig_S_death_Func005C())then
call UnitRemoveAbility(GetTriggerUnit(),'A027')
else
endif
endfunction
function InitTrig_S_death takes nothing returns nothing
set gg_trg_S_death=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_S_death,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_S_death,function Trig_S_death_Actions)
endfunction
function InitCustomTriggers takes nothing returns nothing
call InitTrig_Start()
call InitTrig_Start35()
call InitTrig_CD()
call InitTrig_DZ()
call InitTrig_JT()
call InitTrig_JT2()
call InitTrig_CS_1()
call InitTrig_CS_2()
call InitTrig_CS_3()
call InitTrig_PK1()
call InitTrig_PK2()
call InitTrig_PK3()
call InitTrig_PK4()
call InitTrig_PK5()
call InitTrig_PK6()
call InitTrig_P_wupingcaozuo1()
call InitTrig_P_wupingcaozuo2()
call InitTrig_P_wupingcaozuo3()
call InitTrig_P_leishenzhinu()
call InitTrig_P_huifuyu()
call InitTrig_HC1()
call InitTrig_HC2()
call InitTrig_HC3()
call InitTrig_HC_S()
call InitTrig_HC_PS()
call InitTrig_RJ()
call InitTrig_RJ2()
call InitTrig_TS1()
call InitTrig_XT_xuanye1()
call InitTrig_XT_xuanye2()
call InitTrig_XT_xuanye3()
call InitTrig_X_MT_1()
call InitTrig_X_MT_2()
call InitTrig_X_MT_3()
call InitTrig_X_zhiling1()
call InitTrig_X_zhiling2()
call InitTrig_X_zhiling3()
call InitTrig_Shuaguai1()
call InitTrig_Shuiguai2()
call InitTrig_X_diaoluo()
call InitTrig_Mianban1()
call InitTrig_Mianban2()
call InitTrig_Mianban3()
call InitTrig_Mianban4()
call InitTrig_Mianban5()
call InitTrig_ShowIcon1()
call InitTrig_ShowIcon2()
call InitTrig_ShowIcon3()
call InitTrig_X_HP()
call InitTrig_X_MP()
call InitTrig_X_T()
call InitTrig_X_BY()
call InitTrig_X_BY_muye1()
call InitTrig_X_BY_muye2()
call InitTrig_X_BY_wuyin1()
call InitTrig_X_BY_wuyin2()
call InitTrig_X_BY_sha1()
call InitTrig_X_BY_sha2()
call InitTrig_X_SH()
call InitTrig_X_AI1()
call InitTrig_X_AI2()
call InitTrig_X_OB1()
call InitTrig_X_ZG()
call InitTrig_G0()
call InitTrig_G1()
call InitTrig_G2()
call InitTrig_G3()
call InitTrig_G4()
call InitTrig_G5()
call InitTrig_G6()
call InitTrig_G7()
call InitTrig_G8()
call InitTrig_G9()
call InitTrig_G9_2()
call InitTrig_G9_3()
call InitTrig_G9_4()
call InitTrig_G9_5()
call InitTrig_G10()
call InitTrig_G11()
call InitTrig_G12()
call InitTrig_G13()
call InitTrig_Spawn_muye()
call InitTrig_Spawn_wuyin()
call InitTrig_Spawn_sha()
call InitTrig_Spawn_G1()
call InitTrig_Spawn_G2()
call InitTrig_Spawn_Purple_Middle_1()
call InitTrig_Spawn_Purple_East_1()
call InitTrig_Spawn_Purple_North_1()
call InitTrig_Spawn_Pink_Middle_1()
call InitTrig_Spawn_pink_west_1()
call InitTrig_Spawn_pink_north_1()
call InitTrig_Spawn_Brown_middle_1()
call InitTrig_Spawn_brown_east_1()
call InitTrig_Spawn_Brown_west_1()
call InitTrig_Spawn_Purple_middle_2()
call InitTrig_Spawn_purple_east_2()
call InitTrig_Spawn_Purple_north_2()
call InitTrig_Spawn_Pink_middle_2()
call InitTrig_Spawn_pink_west_2()
call InitTrig_Spawn_pink_north_2()
call InitTrig_Spawn_Brown_middle_2()
call InitTrig_Spawn_brown_east_2()
call InitTrig_Spawn_brown_west_2()
call InitTrig_Spawn_Purple_middle_3()
call InitTrig_Spawn_Purple_East_3()
call InitTrig_Spawn_Pink_Middle_3()
call InitTrig_Spawn_Pink_West_3()
call InitTrig_Spawn_Purple_North()
call InitTrig_Spawn_Pink_North_3()
call InitTrig_Spawn_Brown_East_3()
call InitTrig_Spawn_brown_middle_3()
call InitTrig_Spawn_Brown_West_3()
call InitTrig_Mitte_lila()
call InitTrig_Mitte_rosa()
call InitTrig_Mitte_braun()
call InitTrig_lila_in_rosa_lager()
call InitTrig_braun_in_rosa_lager()
call InitTrig_lila_in_Braun_lager()
call InitTrig_rosa_in_braun_lager()
call InitTrig_braun_in_lila_lager()
call InitTrig_rosa_in_lila_lager()
call InitTrig_Moshi0()
call InitTrig_Moshi0_CS()
call InitTrig_Moshi0_S1()
call InitTrig_Moshi0_S2()
call InitTrig_Moshi0_TS0()
call InitTrig_Moshi0_TS1()
call InitTrig_Moshi0_TS2()
call InitTrig_Moshi0_TS3()
call InitTrig_Moshi0_TS3_SS()
call InitTrig_Moshi1()
call InitTrig_Moshi2()
call InitTrig_Moshi2_S1()
call InitTrig_Moshi3()
call InitTrig_Moshi4()
call InitTrig_Moshi5()
call InitTrig_muye_die()
call InitTrig_muye_die2()
call InitTrig_muye_wins()
call InitTrig_wuyen_die()
call InitTrig_wuyen_die2()
call InitTrig_wuyen_wins()
call InitTrig_sha_dies()
call InitTrig_sha_dies2()
call InitTrig_sha_wins()
call InitTrig_Q_luoxuanwan()
call InitTrig_Q_luoxuanwan2()
call InitTrig_Q_luoxuanwan3()
call InitTrig_Q_luoxuanwan4()
call InitTrig_W_yingfenshen0()
call InitTrig_W_yingfenshen()
call InitTrig_W_yingfenshen2()
call InitTrig_E_fenshentishen()
call InitTrig_R_xianren()
call InitTrig_R_xianren2()
call InitTrig_R_xianren3()
call InitTrig_D_luoxuanshoulijian()
call InitTrig_D_luoxuanshoulijian2()
call InitTrig_D_luoxuanshoulijian3()
call InitTrig_D_luoxuanshoulijian4()
call InitTrig_D_luoxuanshoulijianX1()
call InitTrig_D_luoxuanshoulijianX2()
call InitTrig_W_chunzhida()
call InitTrig_E_xiaoyingneixin()
call InitTrig_E_xiaoyingneixin2()
call InitTrig_R_gangshan()
call InitTrig_R_gangshan2()
call InitTrig_D_yinghuachong()
call InitTrig_D_yinghuachong2()
call InitTrig_Q_yingxiaosha()
call InitTrig_W_baoshiqianying()
call InitTrig_W_baoshiqianying2()
call InitTrig_W_baoshiqianying3()
call InitTrig_R_yingfeng()
call InitTrig_R_yingfeng2()
call InitTrig_D_yingsha()
call InitTrig_D_yingsha2()
call InitTrig_D_yingsha3()
call InitTrig_Q_roudanzhanche()
call InitTrig_Q_roudanzhanche2()
call InitTrig_Q_roudanzhanche3()
call InitTrig_Q_roudanzhanche4()
call InitTrig_Q_roudanzhanche5()
call InitTrig_W_chaobeihua()
call InitTrig_R_beihuayasi()
call InitTrig_D_chaoroudan()
call InitTrig_D_chaoroudan2()
call InitTrig_Q_caosiqiu()
call InitTrig_W_baoshanyu()
call InitTrig_R_caojuchongzou()
call InitTrig_R_caojuchongzou2()
call InitTrig_R_caojuchongzou3()
call InitTrig_D_jusanhua()
call InitTrig_D_jusanhua2()
call InitTrig_D_jusanhua3()
call InitTrig_D_jusanhua4()
call InitTrig_Q_baguakongzhang()
call InitTrig_W_huitian()
call InitTrig_W_huitian2()
call InitTrig_E_baiyan()
call InitTrig_E_baiyan2()
call InitTrig_R_64zhang()
call InitTrig_R_64zhang2()
call InitTrig_R_64zhang3()
call InitTrig_D_poshanji()
call InitTrig_D_poshanji2()
call InitTrig_Q_muyexuanguang()
call InitTrig_Q_muyexuanguang2()
call InitTrig_W_biaolianhua()
call InitTrig_W_biaolianhua2()
call InitTrig_R_bamen()
call InitTrig_R_bamen2()
call InitTrig_D_lilianhua()
call InitTrig_Q_ganglixuanfeng()
call InitTrig_Q_ganglixuanfeng2()
call InitTrig_W_yefenghuang()
call InitTrig_W_yefenghuang2()
call InitTrig_R_bamenK()
call InitTrig_R_bamenK2()
call InitTrig_D_chaokongque()
call InitTrig_D_chaokongque2()
call InitTrig_D_chaokongque3()
call InitTrig_Q_leiqie()
call InitTrig_Q_leiqie2()
call InitTrig_Q_leiqieS()
call InitTrig_Q_leiqieS2()
call InitTrig_Q_shenwei()
call InitTrig_Q_shenwei2()
call InitTrig_W_suileiya()
call InitTrig_W_suileiya2()
call InitTrig_R_whtxielunyan()
call InitTrig_R_whtxielunyan2()
call InitTrig_R_kongjianxishou()
call InitTrig_R_kongjianxishou2()
call InitTrig_D_leiqieshantu()
call InitTrig_D_leiqieshantu2()
call InitTrig_D_leiqieshantu3()
call InitTrig_E_chana()
call InitTrig_E_chana2()
call InitTrig_Q_xuanfengquan()
call InitTrig_Q_xuanfengquan2()
call InitTrig_Q_xuanfengquan3()
call InitTrig_W_langyazhuizhui()
call InitTrig_W_langyazhuizhui2()
call InitTrig_E_fengbaosui()
call InitTrig_E_fengbaosui2()
call InitTrig_R_dahuoji()
call InitTrig_R_dahuoji2()
call InitTrig_D_feiyan()
call InitTrig_D_feiyan2()
call InitTrig_D_feiyan3()
call InitTrig_Q_huolongyandan()
call InitTrig_Q_huolongyandan2()
call InitTrig_Q_huolongyandan3()
call InitTrig_W_haoluoxuanwan()
call InitTrig_W_haoluoxuanwan2()
call InitTrig_R_wentai()
call InitTrig_R_wentai2()
call InitTrig_D_shuangxun()
call InitTrig_D_shuangxun2()
call InitTrig_D_shuangxun3()
call InitTrig_Q_luosenwanxiang()
call InitTrig_W_jingangzhaomu()
call InitTrig_E_gangli()
call InitTrig_R_jingangli()
call InitTrig_R_jingangli2()
call InitTrig_D_shujie()
call InitTrig_Q_heianxing()
call InitTrig_W_shuizhenbi()
call InitTrig_W_shuizhenbi2()
call InitTrig_E_shuisheji()
call InitTrig_E_shuisheji2()
call InitTrig_D_yingwoshuiren()
call InitTrig_D_yingwoshuiren2()
call InitTrig_Q_huolongyandanS()
call InitTrig_Q_huolongyandanS2()
call InitTrig_W_tulongjue()
call InitTrig_W_tulongjue2()
call InitTrig_E_yuanwang()
call InitTrig_E_yuanwang2()
call InitTrig_R_shiguifengjin()
call InitTrig_D_renshuaoyi()
call InitTrig_Q_jiguangdan()
call InitTrig_W_luoxuanwan()
call InitTrig_W_luoxuanwan2()
call InitTrig_W_luoxuanwan3()
call InitTrig_W_luoxuanwan4()
call InitTrig_E_shanguangzhitai()
call InitTrig_R_shunguang()
call InitTrig_D_feileishen()
call InitTrig_D_feileishen2()
call InitTrig_D_feileishen3()
call InitTrig_Z_huiguangren()
call InitTrig_Q_yiliaorenshu()
call InitTrig_W_bengji()
call InitTrig_W_bengji2()
call InitTrig_W_bengji3()
call InitTrig_E_guaili()
call InitTrig_E_guaili2()
call InitTrig_R_tongtianjiao()
call InitTrig_R_tongtianjiao2()
call InitTrig_D_yinfengyin()
call InitTrig_Q_xuanf()
call InitTrig_Q_xuanf2()
call InitTrig_Q_xuanf3()
call InitTrig_W_leiliredao()
call InitTrig_W_leiliredao2()
call InitTrig_W_leiliredao3()
call InitTrig_R_weishouhua()
call InitTrig_D_xugoupao()
call InitTrig_D_xugoupao2()
call InitTrig_D_xugoupao3()
call InitTrig_D_xugoupao4()
call InitTrig_Q_zhanzhanwu()
call InitTrig_Q_zhanzhanwu2()
call InitTrig_W_lianyouzhishu()
call InitTrig_W_lianyouzhishu2()
call InitTrig_E_jufengzhen()
call InitTrig_R_haofengbaobi()
call InitTrig_R_haofengbaobi2()
call InitTrig_D_shanwu()
call InitTrig_D_shanwu2()
call InitTrig_Q_shashiyu()
call InitTrig_Q_shashiyu2()
call InitTrig_W_shabaosongzang()
call InitTrig_E_shazhikaijia()
call InitTrig_E_shazhikaijia2()
call InitTrig_E_shazhikaijia3()
call InitTrig_E_shazhikaijia4()
call InitTrig_R_shouhe()
call InitTrig_R_shouhe2()
call InitTrig_R_shouhe3()
call InitTrig_R_shouhe4()
call InitTrig_D_miesha()
call InitTrig_D_miesha2()
call InitTrig_D_miesha3()
call InitTrig_Q_tiexianhuazhiwu()
call InitTrig_Q_tiexianhuazhiwu2()
call InitTrig_Q_tiexianhuazhiwu3()
call InitTrig_W_chunzhiwu()
call InitTrig_W_chunzhiwu2()
call InitTrig_E_tangsongzhiwu()
call InitTrig_E_tangsongzhiwu2()
call InitTrig_E_tangsongzhiwu3()
call InitTrig_R_dizhizhuangtai()
call InitTrig_R_dizhizhuangtai2()
call InitTrig_R_dizhizhuangtai3()
call InitTrig_R_dizhizhuangtai4()
call InitTrig_D_zaojuezhiwu0()
call InitTrig_D_zaojuezhiwu()
call InitTrig_D_zaojuezhiwu2()
call InitTrig_Q_shizhi()
call InitTrig_Q_shizhi2()
call InitTrig_Q_shizhi3()
call InitTrig_W_shizhibaopo()
call InitTrig_W_shizhibaopo2()
call InitTrig_W_shizhibaopo3()
call InitTrig_R_tianzhi()
call InitTrig_R_tianzhi2()
call InitTrig_D_shizhijin()
call InitTrig_D_shizhijin2()
call InitTrig_D_shizhijin3()
call InitTrig_Q_haolonghuo()
call InitTrig_Q_haolonghuo2()
call InitTrig_W_qianniao()
call InitTrig_W_qianniao2()
call InitTrig_W_qianniao3()
call InitTrig_E_xielunyan()
call InitTrig_E_xielunyan2()
call InitTrig_R_qianniaocaoju()
call InitTrig_R_qianniaocaoju2()
call InitTrig_R_qianniaocaoju3()
call InitTrig_D_qilin()
call InitTrig_D_qilin2()
call InitTrig_Q_haoyanqiu()
call InitTrig_Q_haoyanqiu2()
call InitTrig_W_yasan()
call InitTrig_W_yasan2()
call InitTrig_W_yasan3()
call InitTrig_E_whtxielunyan()
call InitTrig_E_whtxielunyan2()
call InitTrig_E_whtxielunyan3()
call InitTrig_D_tianzhao()
call InitTrig_D_tianzhao2()
call InitTrig_D_tianzhao3()
call InitTrig_Q_shuisandan()
call InitTrig_W_guixiao()
call InitTrig_W_guixiao2()
call InitTrig_W_guixiao3()
call InitTrig_E_jiaoshi()
call InitTrig_R_wuxianjiao()
call InitTrig_R_wuxianjiao2()
call InitTrig_D_baoshui()
call InitTrig_D_baoshui2()
call InitTrig_D_baoshui3()
call InitTrig_D_baoshui4()
call InitTrig_Q_shuihua()
call InitTrig_W_shuilongdan()
call InitTrig_W_shuilongdan2()
call InitTrig_E_yinliao0()
call InitTrig_E_yinliao()
call InitTrig_E_yinliao2()
call InitTrig_E_yinliao3()
call InitTrig_R_shuiyadan()
call InitTrig_D_cangliu()
call InitTrig_D_cangliu2()
call InitTrig_Q_zhizhu()
call InitTrig_Q_zhizhu2()
call InitTrig_W_pohuaizhimei()
call InitTrig_W_pohuaizhimei2()
call InitTrig_E_niantuzhizao()
call InitTrig_R_yujialuo()
call InitTrig_R_yujialuo2()
call InitTrig_R_yujialuo3()
call InitTrig_D_yishu()
call InitTrig_D_yishu2()
call InitTrig_S_xielunyan()
call InitTrig_S_death()
endfunction
function RunInitializationTriggers takes nothing returns nothing
call ConditionalTriggerExecute(gg_trg_Start)
call ConditionalTriggerExecute(gg_trg_Shuaguai1)
call ConditionalTriggerExecute(gg_trg_X_AI1)
call ConditionalTriggerExecute(gg_trg_G3)
call ConditionalTriggerExecute(gg_trg_G10)
call ConditionalTriggerExecute(gg_trg_muye_die2)
call ConditionalTriggerExecute(gg_trg_wuyen_die2)
call ConditionalTriggerExecute(gg_trg_sha_dies2)
endfunction
function InitUpgrades_Player0 takes nothing returns nothing
call SetPlayerTechResearched(Player(0),'Rhde',1)
call SetPlayerTechResearched(Player(0),'Rhpt',2)
call SetPlayerTechResearched(Player(0),'Rhfl',1)
call SetPlayerTechResearched(Player(0),'Rowd',2)
call SetPlayerTechResearched(Player(0),'Rhse',1)
call SetPlayerTechResearched(Player(0),'Redc',2)
call SetPlayerTechResearched(Player(0),'Rows',1)
call SetPlayerTechResearched(Player(0),'Rhri',1)
call SetPlayerTechResearched(Player(0),'Reib',1)
call SetPlayerTechResearched(Player(0),'Remk',1)
call SetPlayerTechResearched(Player(0),'Rufb',1)
call SetPlayerTechResearched(Player(0),'Resi',1)
call SetPlayerTechResearched(Player(0),'Roen',1)
call SetPlayerTechResearched(Player(0),'Rolf',1)
call SetPlayerTechResearched(Player(0),'Ruac',1)
call SetPlayerTechResearched(Player(0),'Rupc',1)
call SetPlayerTechResearched(Player(0),'Rune',2)
call SetPlayerTechResearched(Player(0),'Rusm',1)
call SetPlayerTechResearched(Player(0),'Rusl',1)
call SetPlayerTechResearched(Player(0),'Robf',1)
endfunction
function InitUpgrades_Player1 takes nothing returns nothing
call SetPlayerTechResearched(Player(1),'Rhde',1)
call SetPlayerTechResearched(Player(1),'Rhpt',2)
call SetPlayerTechResearched(Player(1),'Rhfl',1)
call SetPlayerTechResearched(Player(1),'Rowd',2)
call SetPlayerTechResearched(Player(1),'Rhse',1)
call SetPlayerTechResearched(Player(1),'Redc',2)
call SetPlayerTechResearched(Player(1),'Rows',1)
call SetPlayerTechResearched(Player(1),'Rhri',1)
call SetPlayerTechResearched(Player(1),'Reib',1)
call SetPlayerTechResearched(Player(1),'Remk',1)
call SetPlayerTechResearched(Player(1),'Rufb',1)
call SetPlayerTechResearched(Player(1),'Resi',1)
call SetPlayerTechResearched(Player(1),'Roen',1)
call SetPlayerTechResearched(Player(1),'Rolf',1)
call SetPlayerTechResearched(Player(1),'Ruac',1)
call SetPlayerTechResearched(Player(1),'Rupc',1)
call SetPlayerTechResearched(Player(1),'Rune',2)
call SetPlayerTechResearched(Player(1),'Rusm',1)
call SetPlayerTechResearched(Player(1),'Rusl',1)
call SetPlayerTechResearched(Player(1),'Robf',1)
endfunction
function InitUpgrades_Player2 takes nothing returns nothing
call SetPlayerTechResearched(Player(2),'Rhde',1)
call SetPlayerTechResearched(Player(2),'Rhpt',2)
call SetPlayerTechResearched(Player(2),'Rhfl',1)
call SetPlayerTechResearched(Player(2),'Rowd',2)
call SetPlayerTechResearched(Player(2),'Rhse',1)
call SetPlayerTechResearched(Player(2),'Redc',2)
call SetPlayerTechResearched(Player(2),'Rows',1)
call SetPlayerTechResearched(Player(2),'Rhri',1)
call SetPlayerTechResearched(Player(2),'Reib',1)
call SetPlayerTechResearched(Player(2),'Remk',1)
call SetPlayerTechResearched(Player(2),'Rufb',1)
call SetPlayerTechResearched(Player(2),'Resi',1)
call SetPlayerTechResearched(Player(2),'Roen',1)
call SetPlayerTechResearched(Player(2),'Rolf',1)
call SetPlayerTechResearched(Player(2),'Ruac',1)
call SetPlayerTechResearched(Player(2),'Rupc',1)
call SetPlayerTechResearched(Player(2),'Rune',2)
call SetPlayerTechResearched(Player(2),'Rusm',1)
call SetPlayerTechResearched(Player(2),'Rusl',1)
call SetPlayerTechResearched(Player(2),'Robf',1)
endfunction
function InitUpgrades_Player3 takes nothing returns nothing
call SetPlayerTechResearched(Player(3),'Rhde',1)
call SetPlayerTechResearched(Player(3),'Rhpt',2)
call SetPlayerTechResearched(Player(3),'Rhfl',1)
call SetPlayerTechResearched(Player(3),'Rowd',2)
call SetPlayerTechResearched(Player(3),'Rhse',1)
call SetPlayerTechResearched(Player(3),'Redc',2)
call SetPlayerTechResearched(Player(3),'Rows',1)
call SetPlayerTechResearched(Player(3),'Rhri',1)
call SetPlayerTechResearched(Player(3),'Reib',1)
call SetPlayerTechResearched(Player(3),'Remk',1)
call SetPlayerTechResearched(Player(3),'Rufb',1)
call SetPlayerTechResearched(Player(3),'Resi',1)
call SetPlayerTechResearched(Player(3),'Roen',1)
call SetPlayerTechResearched(Player(3),'Rolf',1)
call SetPlayerTechResearched(Player(3),'Ruac',1)
call SetPlayerTechResearched(Player(3),'Rupc',1)
endfunction
function InitUpgrades_Player4 takes nothing returns nothing
call SetPlayerTechResearched(Player(4),'Rhde',1)
call SetPlayerTechResearched(Player(4),'Rhpt',2)
call SetPlayerTechResearched(Player(4),'Rhfl',1)
call SetPlayerTechResearched(Player(4),'Rowd',2)
call SetPlayerTechResearched(Player(4),'Rhse',1)
call SetPlayerTechResearched(Player(4),'Redc',2)
call SetPlayerTechResearched(Player(4),'Rows',1)
call SetPlayerTechResearched(Player(4),'Rhri',1)
call SetPlayerTechResearched(Player(4),'Reib',1)
call SetPlayerTechResearched(Player(4),'Remk',1)
call SetPlayerTechResearched(Player(4),'Rufb',1)
call SetPlayerTechResearched(Player(4),'Resi',1)
call SetPlayerTechResearched(Player(4),'Roen',1)
call SetPlayerTechResearched(Player(4),'Rolf',1)
call SetPlayerTechResearched(Player(4),'Ruac',1)
call SetPlayerTechResearched(Player(4),'Rupc',1)
call SetPlayerTechResearched(Player(4),'Rune',2)
call SetPlayerTechResearched(Player(4),'Rusm',1)
call SetPlayerTechResearched(Player(4),'Rusl',1)
call SetPlayerTechResearched(Player(4),'Robf',1)
endfunction
function InitUpgrades_Player5 takes nothing returns nothing
call SetPlayerTechResearched(Player(5),'Rhde',1)
call SetPlayerTechResearched(Player(5),'Rhpt',2)
call SetPlayerTechResearched(Player(5),'Rhfl',1)
call SetPlayerTechResearched(Player(5),'Rowd',2)
call SetPlayerTechResearched(Player(5),'Rhse',1)
call SetPlayerTechResearched(Player(5),'Redc',2)
call SetPlayerTechResearched(Player(5),'Rows',1)
call SetPlayerTechResearched(Player(5),'Rhri',1)
call SetPlayerTechResearched(Player(5),'Reib',1)
call SetPlayerTechResearched(Player(5),'Remk',1)
call SetPlayerTechResearched(Player(5),'Rufb',1)
call SetPlayerTechResearched(Player(5),'Resi',1)
call SetPlayerTechResearched(Player(5),'Roen',1)
call SetPlayerTechResearched(Player(5),'Rolf',1)
call SetPlayerTechResearched(Player(5),'Ruac',1)
call SetPlayerTechResearched(Player(5),'Rupc',1)
call SetPlayerTechResearched(Player(5),'Rune',2)
call SetPlayerTechResearched(Player(5),'Rusm',1)
call SetPlayerTechResearched(Player(5),'Rusl',1)
call SetPlayerTechResearched(Player(5),'Robf',1)
endfunction
function InitUpgrades_Player6 takes nothing returns nothing
call SetPlayerTechResearched(Player(6),'Rhde',1)
call SetPlayerTechResearched(Player(6),'Rhpt',2)
call SetPlayerTechResearched(Player(6),'Rhfl',1)
call SetPlayerTechResearched(Player(6),'Rowd',2)
call SetPlayerTechResearched(Player(6),'Rhse',1)
call SetPlayerTechResearched(Player(6),'Redc',2)
call SetPlayerTechResearched(Player(6),'Rows',1)
call SetPlayerTechResearched(Player(6),'Rhri',1)
call SetPlayerTechResearched(Player(6),'Reib',1)
call SetPlayerTechResearched(Player(6),'Remk',1)
call SetPlayerTechResearched(Player(6),'Rufb',1)
call SetPlayerTechResearched(Player(6),'Resi',1)
call SetPlayerTechResearched(Player(6),'Roen',1)
call SetPlayerTechResearched(Player(6),'Rolf',1)
call SetPlayerTechResearched(Player(6),'Ruac',1)
call SetPlayerTechResearched(Player(6),'Rupc',1)
call SetPlayerTechResearched(Player(6),'Rune',2)
call SetPlayerTechResearched(Player(6),'Rusm',1)
call SetPlayerTechResearched(Player(6),'Rusl',1)
call SetPlayerTechResearched(Player(6),'Robf',1)
endfunction
function InitUpgrades_Player7 takes nothing returns nothing
call SetPlayerTechResearched(Player(7),'Rhde',1)
call SetPlayerTechResearched(Player(7),'Rhpt',2)
call SetPlayerTechResearched(Player(7),'Rhfl',1)
call SetPlayerTechResearched(Player(7),'Rowd',2)
call SetPlayerTechResearched(Player(7),'Rhse',1)
call SetPlayerTechResearched(Player(7),'Redc',2)
call SetPlayerTechResearched(Player(7),'Rows',1)
call SetPlayerTechResearched(Player(7),'Rhri',1)
call SetPlayerTechResearched(Player(7),'Reib',1)
call SetPlayerTechResearched(Player(7),'Remk',1)
call SetPlayerTechResearched(Player(7),'Rufb',1)
call SetPlayerTechResearched(Player(7),'Resi',1)
call SetPlayerTechResearched(Player(7),'Roen',1)
call SetPlayerTechResearched(Player(7),'Rolf',1)
call SetPlayerTechResearched(Player(7),'Ruac',1)
call SetPlayerTechResearched(Player(7),'Rupc',1)
endfunction
function InitUpgrades_Player8 takes nothing returns nothing
call SetPlayerTechResearched(Player(8),'Rhde',1)
call SetPlayerTechResearched(Player(8),'Rhpt',2)
call SetPlayerTechResearched(Player(8),'Rhfl',1)
call SetPlayerTechResearched(Player(8),'Rowd',2)
call SetPlayerTechResearched(Player(8),'Rhse',1)
call SetPlayerTechResearched(Player(8),'Redc',2)
call SetPlayerTechResearched(Player(8),'Rows',1)
call SetPlayerTechResearched(Player(8),'Rhri',1)
call SetPlayerTechResearched(Player(8),'Reib',1)
call SetPlayerTechResearched(Player(8),'Remk',1)
call SetPlayerTechResearched(Player(8),'Rufb',1)
call SetPlayerTechResearched(Player(8),'Resi',1)
call SetPlayerTechResearched(Player(8),'Roen',1)
call SetPlayerTechResearched(Player(8),'Rolf',1)
call SetPlayerTechResearched(Player(8),'Ruac',1)
call SetPlayerTechResearched(Player(8),'Rupc',1)
call SetPlayerTechResearched(Player(8),'Rune',2)
call SetPlayerTechResearched(Player(8),'Rusm',1)
call SetPlayerTechResearched(Player(8),'Rusl',1)
call SetPlayerTechResearched(Player(8),'Robf',1)
endfunction
function InitUpgrades_Player9 takes nothing returns nothing
call SetPlayerTechResearched(Player(9),'Rhde',1)
call SetPlayerTechResearched(Player(9),'Rhpt',2)
call SetPlayerTechResearched(Player(9),'Rhfl',1)
call SetPlayerTechResearched(Player(9),'Rowd',2)
call SetPlayerTechResearched(Player(9),'Rhse',1)
call SetPlayerTechResearched(Player(9),'Redc',2)
call SetPlayerTechResearched(Player(9),'Rows',1)
call SetPlayerTechResearched(Player(9),'Rhri',1)
call SetPlayerTechResearched(Player(9),'Reib',1)
call SetPlayerTechResearched(Player(9),'Remk',1)
call SetPlayerTechResearched(Player(9),'Rufb',1)
call SetPlayerTechResearched(Player(9),'Resi',1)
call SetPlayerTechResearched(Player(9),'Roen',1)
call SetPlayerTechResearched(Player(9),'Rolf',1)
call SetPlayerTechResearched(Player(9),'Ruac',1)
call SetPlayerTechResearched(Player(9),'Rupc',1)
call SetPlayerTechResearched(Player(9),'Rune',2)
call SetPlayerTechResearched(Player(9),'Rusm',1)
call SetPlayerTechResearched(Player(9),'Rusl',1)
call SetPlayerTechResearched(Player(9),'Robf',1)
endfunction
function InitUpgrades_Player10 takes nothing returns nothing
call SetPlayerTechResearched(Player(10),'Rhde',1)
call SetPlayerTechResearched(Player(10),'Rhpt',2)
call SetPlayerTechResearched(Player(10),'Rhfl',1)
call SetPlayerTechResearched(Player(10),'Rowd',2)
call SetPlayerTechResearched(Player(10),'Rhse',1)
call SetPlayerTechResearched(Player(10),'Redc',2)
call SetPlayerTechResearched(Player(10),'Rows',1)
call SetPlayerTechResearched(Player(10),'Rhri',1)
call SetPlayerTechResearched(Player(10),'Reib',1)
call SetPlayerTechResearched(Player(10),'Remk',1)
call SetPlayerTechResearched(Player(10),'Rufb',1)
call SetPlayerTechResearched(Player(10),'Resi',1)
call SetPlayerTechResearched(Player(10),'Roen',1)
call SetPlayerTechResearched(Player(10),'Rolf',1)
call SetPlayerTechResearched(Player(10),'Ruac',1)
call SetPlayerTechResearched(Player(10),'Rupc',1)
call SetPlayerTechResearched(Player(10),'Rune',2)
call SetPlayerTechResearched(Player(10),'Rusm',1)
call SetPlayerTechResearched(Player(10),'Rusl',1)
call SetPlayerTechResearched(Player(10),'Robf',1)
endfunction
function InitUpgrades_Player11 takes nothing returns nothing
call SetPlayerTechResearched(Player(11),'Rhde',1)
call SetPlayerTechResearched(Player(11),'Rhpt',2)
call SetPlayerTechResearched(Player(11),'Rhfl',1)
call SetPlayerTechResearched(Player(11),'Rowd',2)
call SetPlayerTechResearched(Player(11),'Rhse',1)
call SetPlayerTechResearched(Player(11),'Redc',2)
call SetPlayerTechResearched(Player(11),'Rows',1)
call SetPlayerTechResearched(Player(11),'Rhri',1)
call SetPlayerTechResearched(Player(11),'Reib',1)
call SetPlayerTechResearched(Player(11),'Remk',1)
call SetPlayerTechResearched(Player(11),'Rufb',1)
call SetPlayerTechResearched(Player(11),'Resi',1)
call SetPlayerTechResearched(Player(11),'Roen',1)
call SetPlayerTechResearched(Player(11),'Rolf',1)
call SetPlayerTechResearched(Player(11),'Ruac',1)
call SetPlayerTechResearched(Player(11),'Rupc',1)
endfunction
function InitUpgrades takes nothing returns nothing
call InitUpgrades_Player0()
call InitUpgrades_Player1()
call InitUpgrades_Player2()
call InitUpgrades_Player3()
call InitUpgrades_Player4()
call InitUpgrades_Player5()
call InitUpgrades_Player6()
call InitUpgrades_Player7()
call InitUpgrades_Player8()
call InitUpgrades_Player9()
call InitUpgrades_Player10()
call InitUpgrades_Player11()
endfunction
function InitCustomPlayerSlots takes nothing returns nothing
call SetPlayerStartLocation(Player(0),0)
call ForcePlayerStartLocation(Player(0),0)
call SetPlayerColor(Player(0),ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(0),false)
call SetPlayerController(Player(0),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1),1)
call ForcePlayerStartLocation(Player(1),1)
call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(1),false)
call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),2)
call ForcePlayerStartLocation(Player(2),2)
call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(2),false)
call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),3)
call ForcePlayerStartLocation(Player(3),3)
call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(3),false)
call SetPlayerController(Player(3),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(4),4)
call ForcePlayerStartLocation(Player(4),4)
call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(4),false)
call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),5)
call ForcePlayerStartLocation(Player(5),5)
call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(5),false)
call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6),6)
call ForcePlayerStartLocation(Player(6),6)
call SetPlayerColor(Player(6),ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(6),false)
call SetPlayerController(Player(6),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7),7)
call ForcePlayerStartLocation(Player(7),7)
call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(7),false)
call SetPlayerController(Player(7),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(8),8)
call ForcePlayerStartLocation(Player(8),8)
call SetPlayerColor(Player(8),ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(8),false)
call SetPlayerController(Player(8),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(9),9)
call ForcePlayerStartLocation(Player(9),9)
call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(9),false)
call SetPlayerController(Player(9),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(10),10)
call ForcePlayerStartLocation(Player(10),10)
call SetPlayerColor(Player(10),ConvertPlayerColor(10))
call SetPlayerRacePreference(Player(10),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(10),false)
call SetPlayerController(Player(10),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(11),11)
call ForcePlayerStartLocation(Player(11),11)
call SetPlayerColor(Player(11),ConvertPlayerColor(11))
call SetPlayerRacePreference(Player(11),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(11),false)
call SetPlayerController(Player(11),MAP_CONTROL_COMPUTER)
endfunction
function InitCustomTeams takes nothing returns nothing
call SetPlayerTeam(Player(0),0)
call SetPlayerState(Player(0),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(1),0)
call SetPlayerState(Player(1),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(2),0)
call SetPlayerState(Player(2),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(3),0)
call SetPlayerState(Player(3),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)
call SetPlayerTeam(Player(4),1)
call SetPlayerState(Player(4),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(5),1)
call SetPlayerState(Player(5),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(6),1)
call SetPlayerState(Player(6),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(7),1)
call SetPlayerState(Player(7),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(6),true)
call SetPlayerTeam(Player(8),2)
call SetPlayerState(Player(8),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(9),2)
call SetPlayerState(Player(9),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(10),2)
call SetPlayerState(Player(10),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(11),2)
call SetPlayerState(Player(11),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(10),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(11),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(10),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(11),true)
call SetPlayerAllianceStateAllyBJ(Player(10),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(10),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player(10),Player(11),true)
call SetPlayerAllianceStateAllyBJ(Player(11),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(11),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player(11),Player(10),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(10),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(11),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(10),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(11),true)
call SetPlayerAllianceStateVisionBJ(Player(10),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(10),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(10),Player(11),true)
call SetPlayerAllianceStateVisionBJ(Player(11),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(11),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(11),Player(10),true)
endfunction
function InitAllyPriorities takes nothing returns nothing
call SetStartLocPrioCount(0,8)
call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,2,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,3,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,4,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,5,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,6,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,7,10,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1,8)
call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,2,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,3,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,4,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,5,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,6,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,7,10,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2,8)
call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,2,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,3,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,4,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,5,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,6,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,7,10,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4,8)
call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,3,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,4,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,5,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,6,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,7,10,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5,8)
call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,4,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,5,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,6,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,7,10,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(6,8)
call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,5,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,6,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,7,10,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(8,8)
call SetStartLocPrio(8,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,6,9,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8,7,10,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(9,8)
call SetStartLocPrio(9,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,6,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9,7,10,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(10,8)
call SetStartLocPrio(10,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(10,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(10,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(10,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(10,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(10,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(10,6,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(10,7,9,MAP_LOC_PRIO_HIGH)
endfunction
function main takes nothing returns nothing
call SetCameraBounds(-7168.0+GetCameraMargin(CAMERA_MARGIN_LEFT),-8064.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM),5120.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),4096.0-GetCameraMargin(CAMERA_MARGIN_TOP),-7168.0+GetCameraMargin(CAMERA_MARGIN_LEFT),4096.0-GetCameraMargin(CAMERA_MARGIN_TOP),5120.0-GetCameraMargin(CAMERA_MARGIN_RIGHT),-8064.0+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCAshenvale\\DNCAshenvaleTerrain\\DNCAshenvaleTerrain.mdl","Environment\\DNC\\DNCAshenvale\\DNCAshenvaleUnit\\DNCAshenvaleUnit.mdl")
call NewSoundEnvironment("Default")
call SetAmbientDaySound("AshenvaleDay")
call SetAmbientNightSound("AshenvaleNight")
call SetMapMusic("Music",true,0)
call InitSounds()
call CreateRegions()
call InitUpgrades()
call CreateAllUnits()
call InitBlizzard()
call ExecuteFunc("jasshelper__initstructs10091265")
call ExecuteFunc("YDWETimerPatternHashABCInit")
call ExecuteFunc("YDWETimerPatternInvulnerabilityDetectorInit")
call ExecuteFunc("InitializeYD")
call ExecuteFunc("YDWETimerPatternInit")
call InitGlobals()
call InitCustomTriggers()
call RunInitializationTriggers()
endfunction
function config takes nothing returns nothing
call SetMapName("|cFF7FDCFENARUTO[Zero]|r正式版1.17")
call SetMapDescription("玩家群 - 43476139 |cFF999999(超级群)|r\n\n|cFFFF6666╱|r|cFFF07075幻|r|cFFE07A85の|r|cFFD18594羁|r|cFFC28FA3绊|r|cFFB299B3制|r|cFFA3A3C2作|r|cFF94ADD1组|r|cFF85B8E0╲|r")
call SetPlayers(12)
call SetTeams(12)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0,4096.0,3072.0)
call DefineStartLocation(1,4096.0,3072.0)
call DefineStartLocation(2,4096.0,3072.0)
call DefineStartLocation(3,-6208.0,-7232.0)
call DefineStartLocation(4,4096.0,3072.0)
call DefineStartLocation(5,4096.0,3072.0)
call DefineStartLocation(6,4096.0,3072.0)
call DefineStartLocation(7,4352.0,-7296.0)
call DefineStartLocation(8,4096.0,3072.0)
call DefineStartLocation(9,4096.0,3072.0)
call DefineStartLocation(10,4096.0,3072.0)
call DefineStartLocation(11,-1408.0,3648.0)
call InitCustomPlayerSlots()
call InitCustomTeams()
call InitAllyPriorities()
endfunction
function sa__TimerPatternDummy_MonomerVeil_onDestroy takes nothing returns boolean
local integer this=f__arg_this
local boolean IsVisible=IsUnitHidden(s__TimerPatternDummy_MonomerVeil_Clerk[this])
if(IsVisible)then
call KillUnit(s__TimerPatternDummy_MonomerVeil_Clerk[this])
call RemoveUnit(s__TimerPatternDummy_MonomerVeil_Clerk[this])
else
call RemoveUnit(s__TimerPatternDummy_MonomerVeil_Clerk[this])
endif
return true
endfunction
function sa__TimerPattern_operate_onDestroy takes nothing returns boolean
local integer this=f__arg_this
call DestroyGroup(s__TimerPattern_operate_g[this])
set s__TimerPattern_operate_u[this]=null
set s__TimerPattern_operate_g[this]=null
return true
endfunction
function jasshelper__initstructs10091265 takes nothing returns nothing
set st__TimerPatternDummy_MonomerVeil_onDestroy=CreateTrigger()
call TriggerAddCondition(st__TimerPatternDummy_MonomerVeil_onDestroy,Condition(function sa__TimerPatternDummy_MonomerVeil_onDestroy))
set st__TimerPattern_operate_onDestroy=CreateTrigger()
call TriggerAddCondition(st__TimerPattern_operate_onDestroy,Condition(function sa__TimerPattern_operate_onDestroy))
endfunction
